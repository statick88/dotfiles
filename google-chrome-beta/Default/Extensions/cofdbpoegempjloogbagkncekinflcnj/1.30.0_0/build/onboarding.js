var settings=function(e){"use strict";function t(){}const n=e=>e;function r(e){return e()}function o(){return Object.create(null)}function s(e){e.forEach(r)}function i(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(e,...n){if(null==e){for(const e of n)e(void 0);return t}const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function l(e,t,n){e.$$.on_destroy.push(c(t,n))}function u(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function d(e,t,n){return e.set(n),t}function p(e){const t="string"==typeof e&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const h="undefined"!=typeof window;let f=h?()=>window.performance.now():()=>Date.now(),m=h?e=>requestAnimationFrame(e):t;const g=new Set;function y(e){g.forEach((t=>{t.c(e)||(g.delete(t),t.f())})),0!==g.size&&m(y)}function _(e){let t;return 0===g.size&&m(y),{promise:new Promise((n=>{g.add(t={c:e,f:n})})),abort(){g.delete(t)}}}const v="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function b(e,t){e.appendChild(t)}function S(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function w(e){const t=x("style");return t.textContent="/* empty */",function(e,t){b(e.head||e,t),t.sheet}(S(e),t),t.sheet}function k(e,t,n){e.insertBefore(t,n||null)}function E(e){e.parentNode&&e.parentNode.removeChild(e)}function T(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function x(e){return document.createElement(e)}function I(e){return document.createTextNode(e)}function C(){return I(" ")}function R(){return I("")}function A(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function O(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function M(e,t){t=""+t,e.data!==t&&(e.data=t)}function N(e,t,n){e.classList.toggle(t,!!n)}function L(e,t){return new e(t)}const D=new Map;let P,$=0;function F(e,t,n,r,o,s,i,a=0){const c=16.666/r;let l="{\n";for(let e=0;e<=1;e+=c){const r=t+(n-t)*s(e);l+=100*e+`%{${i(r,1-r)}}\n`}const u=l+`100% {${i(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,p=S(e),{stylesheet:h,rules:f}=D.get(p)||function(e,t){const n={stylesheet:w(t),rules:{}};return D.set(e,n),n}(p,e);f[d]||(f[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${d} ${r}ms linear ${o}ms 1 both`,$+=1,d}function j(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),o=n.length-r.length;o&&(e.style.animation=r.join(", "),$-=o,$||m((()=>{$||(D.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&E(t)})),D.clear())})))}function U(e){P=e}function B(){if(!P)throw new Error("Function called outside component initialization");return P}function H(e){B().$$.on_mount.push(e)}function z(e,t){return B().$$.context.set(e,t),t}function q(e){return B().$$.context.get(e)}const W=[],G=[];let V=[];const Y=[],K=Promise.resolve();let X=!1;function J(e){V.push(e)}const Q=new Set;let Z,ee=0;function te(){if(0!==ee)return;const e=P;do{try{for(;ee<W.length;){const e=W[ee];ee++,U(e),ne(e.$$)}}catch(e){throw W.length=0,ee=0,e}for(U(null),W.length=0,ee=0;G.length;)G.pop()();for(let e=0;e<V.length;e+=1){const t=V[e];Q.has(t)||(Q.add(t),t())}V.length=0}while(W.length);for(;Y.length;)Y.pop()();X=!1,Q.clear(),U(e)}function ne(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(J)}}function re(){return Z||(Z=Promise.resolve(),Z.then((()=>{Z=null}))),Z}function oe(e,t,n){e.dispatchEvent(function(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}(`${t?"intro":"outro"}${n}`))}const se=new Set;let ie;function ae(){ie={r:0,c:[],p:ie}}function ce(){ie.r||s(ie.c),ie=ie.p}function le(e,t){e&&e.i&&(se.delete(e),e.i(t))}function ue(e,t,n,r){if(e&&e.o){if(se.has(e))return;se.add(e),ie.c.push((()=>{se.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}else r&&r()}const de={duration:0};function pe(e){return void 0!==e?.length?e:Array.from(e)}function he(e){e&&e.c()}function fe(e,t,n){const{fragment:o,after_update:a}=e.$$;o&&o.m(t,n),J((()=>{const t=e.$$.on_mount.map(r).filter(i);e.$$.on_destroy?e.$$.on_destroy.push(...t):s(t),e.$$.on_mount=[]})),a.forEach(J)}function me(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];V.forEach((r=>-1===e.indexOf(r)?t.push(r):n.push(r))),n.forEach((e=>e())),V=t}(n.after_update),s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ge(e,t){-1===e.$$.dirty[0]&&(W.push(e),X||(X=!0,K.then(te)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ye(e,n,r,i,a,c,l=null,u=[-1]){const d=P;U(e);const p=e.$$={fragment:null,ctx:[],props:c,update:t,not_equal:a,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};l&&l(p.root);let h=!1;if(p.ctx=r?r(e,n.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&a(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),h&&ge(e,t)),n})):[],p.update(),h=!0,s(p.before_update),p.fragment=!!i&&i(p.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach(E)}else p.fragment&&p.fragment.c();n.intro&&le(e.$$.fragment),fe(e,n.target,n.anchor),te()}U(d)}class _e{$$=void 0;$$set=void 0;$destroy(){me(this,1),this.$destroy=t}$on(e,n){if(!i(n))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ve=[];function be(e,n=t){let r;const o=new Set;function s(t){if(a(e,t)&&(e=t,r)){const t=!ve.length;for(const t of o)t[1](),ve.push(t,e);if(t){for(let e=0;e<ve.length;e+=2)ve[e][0](ve[e+1]);ve.length=0}}}function i(t){s(t(e))}return{set:s,update:i,subscribe:function(a,c=t){const l=[a,c];return o.add(l),1===o.size&&(r=n(s,i)||t),a(e),()=>{o.delete(l),0===o.size&&r&&(r(),r=null)}}}}const Se={most_used_apps:"MOST_USED_APPS",deepl_pro:"DEEPL_PRO",create_account:"CREATE_ACCOUNT"},we=be(1),ke={"#step-1":1,"#step-2":2,"#step-3":3,"#step-4":4,"#step-5":5};function Ee(){we.set(ke[location.hash]||1)}const Te=[{screen:Se.most_used_apps},{title:"onboarding_write_title",badge:"onboarding_title_free",description:"onboarding_write_description",description2:"onboarding_write_description_2"},{title:"onboarding_translate_title",badge:"onboarding_title_free",description:"onboarding_translate_description"},{title:"onboarding_full_page_translation_title",badge:"onboarding_title_pro",description:"onboarding_full_page_translation_description",screen:Se.deepl_pro},{title:"onboarding_disable_pages_title",description:"onboarding_disable_pages_description"}];"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const xe={hintKeyboardShortcut:"HINT_KEYBOARD_SHORTCUT",inputTranslation:"INPUT_TRANSLATION",inlineTranslation:"INLINE_TRANSLATION",fullPageTranslation:"FULL_PAGE_TRANSLATION",accountSuccessfullyCreated:"ACCOUNT_SUCCESSFULLY_CREATED",successfullyLoggedIn:"SUCCESSFULLY_LOGGED_IN",glidesPreventAssetLoss:"GSLIDES_WARNING_TO_AVOID_ASSET_LOSS",showAdsForMSAddins:"SHOW_ADS_FOR_MS_ADDINS"},Ie={green_theme:"green_theme",warning_theme:"warning_theme",ads_theme:"ads_theme"},Ce="ONBOARDING_SEE_ALL_INTEGRATIONS",Re="CLICK_ON_SHORTCUT_NOTIFICATION",Ae="DISABLE_PER_SITE",Oe="DISABLE_EVERYWHERE",Me="OPEN_PAGE",Ne="BACK_BUTTON",Le="NEXT_BUTTON",De="NAVIGATION",Pe={TRANSLATOR:"TRANSLATOR",WRITE:"WRITE",API:"API",DOC_TRANSLATOR:"DOC_TRANSLATOR"},$e="free",Fe="pro",je=e=>{const t=e||chrome.i18n.getUILanguage();return["ar","he","fa","ur"].includes(t.toLowerCase().substr(0,2))?"rtl":"ltr"},Ue={prod:"production",dev:"development",test:"testing"};function Be(){return Ue.prod}function He(){return Be()===Ue.dev}function ze(){return Be()===Ue.prod}function qe(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage(e,(function(e){e&&e.error&&n(e),t(e)}))}))}const We=function(){const{subscribe:e,set:t,update:n}=be({});return chrome.storage.sync.get(null,(e=>{t(e),chrome.storage.local.get(["isLoggedIn","isProUser","translatorServiceType","writeServiceType","apiServiceType","docTranslatorServiceType","browserInstanceId","featureSet","hasTermbaseService"],(e=>{n((t=>({...t,...e})))}))})),chrome.storage.onChanged.addListener((e=>{const t=["a_t","r_t","i_t","accountId"];let r={};for(const[n,o]of Object.entries(e))!1===t.includes(n)&&(r[n]=o.newValue);if(He()){const e="background-color: #324054;padding: 3px; font-size:12px;color:#e1e8c3; font-weight:600";console.log(`%c${(new Date).toISOString()} UPDATE USER SETTINGS`,e,r)}return n((e=>({...e,...r}))),!0})),{subscribe:e,set:e=>chrome.storage.sync.set(e)}}(),Ge=function(){const{subscribe:e,update:t}=be({});return chrome.runtime.onMessage.addListener((function(e,n){switch(e.action){case"newWebsiteState":e.payload&&t((t=>({...t,[n.tab.id]:{...t[n.tab.id],...e.payload,error:e.payload.error?e.payload.error:void 0}})));break;case"resetWebsiteState":e.payload&&t((t=>({...t,[n.tab.id]:{...e.payload}})))}return!0})),{subscribe:e,fetchCurrentWebsiteSettings:()=>{chrome.tabs&&chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlGetWebsiteData"},(function(n){t((t=>({...t,[e[0].id]:{...t[e[0].id],...n}})))}))}))}}}();!function(e,n,r){const o=!Array.isArray(e),a=o?[e]:e;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=n.length<2;return u=(e,r)=>{let u=!1;const d=[];let p=0,h=t;const f=()=>{if(p)return;h();const s=n(o?d[0]:d,e,r);l?e(s):h=i(s)?s:t},m=a.map(((e,t)=>c(e,(e=>{d[t]=e,p&=~(1<<t),u&&f()}),(()=>{p|=1<<t}))));return u=!0,f(),function(){s(m),h(),u=!1}},{subscribe:be(r,u).subscribe};var u}(Ge,(async(e,t)=>{if(!chrome.tabs)return;t(e[(await chrome.tabs.query({active:!0,currentWindow:!0}))[0].id])})),function(){const{subscribe:e,set:t}=be([]);qe({action:"dlGetExperiments",payload:{forceFetch:!1}}).then((e=>t(e))),chrome.runtime.onMessage.addListener((function(e){if("dlExperimentsUpdated"===e.action)e.payload&&t(e.payload.experiments);return!0}))}();const Ve={chrome:"Chrome",edge:"Edge",brave:"Brave",firefox:"Firefox",opera:"Opera",safari:"Safari"};function Ye(e,t){let n;try{switch(e){case Ve.chrome:case Ve.brave:n=t.split("Chrome/")[1].split(" ")[0];break;case Ve.edge:n=t.split("Edg/")[1].split(" ")[0];break;case Ve.firefox:n=t.split("Firefox/")[1].split(" ")[0];break;case Ve.opera:n=t.split("OPR/")[1].split(" ")[0];break;case Ve.safari:n=t.split("Version/")[1].split(" ")[0]}}catch(t){console.error(`Could not get the browsers (${e}) version from user agent`,t)}try{!n&&navigator?.userAgentData&&function(e){return e===Ve.chrome||e===Ve.edge||e===Ve.brave||e===Ve.opera}(e)&&(n=Ke(e).version)}catch(t){console.error(`Could not get the chromium browsers (${e}) version`,t)}return n&&"string"==typeof n?n:"unknown_browser_version"}function Ke(e){if(!navigator.userAgentData||!e)return;const t=new RegExp(`${e}`,"i");return navigator.userAgentData.brands.filter((e=>t.test(e.brand)))[0]}function Xe(){if({IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.30.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.30.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.30.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.30.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.30.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.30.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.30.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.30.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.30.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365"},APP_VERSION:"1.30.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,REVIEW_UI_WITH_ITA:!1,BATCH_TRANSLATE_HTML_REQUEST:!0}}.browserBuild)return{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.30.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.30.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.30.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.30.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.30.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.30.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.30.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.30.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.30.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365"},APP_VERSION:"1.30.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,REVIEW_UI_WITH_ITA:!1,BATCH_TRANSLATE_HTML_REQUEST:!0}}.browserBuild.toLowerCase()===Ve.firefox.toLowerCase();const e=chrome.runtime.getURL("");return function(){const e=navigator?.userAgent||"unknown_user_agent",t=navigator?.userAgentData?.platform||navigator?.platform||"unknown_platform";let n="unknown_browser",r="unknown_browser_version";const o=navigator?.language||"unknown_browser_language";try{const t=e.match(/chrome|chromium|crios/i),o=e.match(/edg/i)||Ke(Ve.edge),s=e.match(/firefox|fxios/i),i=e.match(/opr\//i)||Ke(Ve.opera),a=e.match(/safari/i),c=Ke(Ve.brave);t?(n=Ve.chrome,o&&(n=Ve.edge),i&&(n=Ve.opera),c&&(n=Ve.brave)):o?n=Ve.edge:s?n=Ve.firefox:i?n=Ve.opera:a&&(n=Ve.safari),r=Ye(n,e)}catch(e){console.error("Could not get the name of the brower",e)}return{userAgent:e,platform:t,browser:n,browserVersion:r,browserLang:o}}().browser===Ve.firefox||/moz-extension:\/\//gm.test(e)}function Je(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function Qe(e){let t,n,r,o,s,i=chrome.i18n.getMessage("onboarding_back_button")+"";return{c(){t=x("a"),n=I(i),O(t,"class","dl-btn dl-btn-ghost svelte-zulkya"),O(t,"href",r="#step-"+(e[1]-1)),O(t,"data-qa","dl-onboarding-navigation-back-button")},m(r,i){k(r,t,i),b(t,n),o||(s=A(t,"click",e[4]),o=!0)},p(e,n){2&n&&r!==(r="#step-"+(e[1]-1))&&O(t,"href",r)},d(e){e&&E(t),o=!1,s()}}}function Ze(e){let t,n,r,o,s;function i(){return e[5](e[10])}return{c(){t=x("li"),n=x("a"),n.innerHTML='<span class="svelte-zulkya"></span>',r=C(),O(n,"href","#step-"+(e[10]+1)),O(n,"data-qa","dl-onboarding-navigation-step-"+(e[10]+1)),O(n,"aria-label",`Step ${e[10]+1}`),O(n,"class","svelte-zulkya"),O(t,"class","svelte-zulkya"),N(t,"active",e[1]===e[10]+1)},m(e,a){k(e,t,a),b(t,n),b(t,r),o||(s=A(n,"click",i),o=!0)},p(n,r){e=n,2&r&&N(t,"active",e[1]===e[10]+1)},d(e){e&&E(t),o=!1,s()}}}function et(e){let t,n,r,o,s,i=chrome.i18n.getMessage("onboarding_next_button")+"";return{c(){t=x("a"),n=I(i),O(t,"class","dl-btn dl-btn-primary svelte-zulkya"),O(t,"href",r="#step-"+(e[1]+1)),O(t,"data-qa","dl-onboarding-navigation-next-button")},m(r,i){k(r,t,i),b(t,n),o||(s=A(t,"click",e[6]),o=!0)},p(e,n){2&n&&r!==(r="#step-"+(e[1]+1))&&O(t,"href",r)},d(e){e&&E(t),o=!1,s()}}}function tt(e){let n,r,o,s,i,a,c,l,u=e[1]>1&&Qe(e),d=pe(Te),p=[];for(let t=0;t<d.length;t+=1)p[t]=Ze(Je(e,d,t));let h=e[1]<Te.length&&et(e);return{c(){n=x("div"),r=x("div"),o=x("div"),u&&u.c(),s=C(),i=x("ul");for(let e=0;e<p.length;e+=1)p[e].c();a=C(),c=x("div"),h&&h.c(),O(o,"class","back-button svelte-zulkya"),O(i,"class","dl-navigation svelte-zulkya"),O(c,"class","next-button svelte-zulkya"),O(r,"class","dl-steps-navigation svelte-zulkya"),O(r,"style",`height: ${nt}px`),O(n,"class","dl-steps-navigation-wrapper svelte-zulkya"),O(n,"style",l=`top: ${e[0]}px`)},m(e,t){k(e,n,t),b(n,r),b(r,o),u&&u.m(o,null),b(r,s),b(r,i);for(let e=0;e<p.length;e+=1)p[e]&&p[e].m(i,null);b(r,a),b(r,c),h&&h.m(c,null)},p(e,[t]){if(e[1]>1?u?u.p(e,t):(u=Qe(e),u.c(),u.m(o,null)):u&&(u.d(1),u=null),10&t){let n;for(d=pe(Te),n=0;n<d.length;n+=1){const r=Je(e,d,n);p[n]?p[n].p(r,t):(p[n]=Ze(r),p[n].c(),p[n].m(i,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=d.length}e[1]<Te.length?h?h.p(e,t):(h=et(e),h.c(),h.m(c,null)):h&&(h.d(1),h=null),1&t&&l!==(l=`top: ${e[0]}px`)&&O(n,"style",l)},i:t,o:t,d(e){e&&E(n),u&&u.d(),T(p,e),h&&h.d()}}}let nt=41;function rt(e,t,n){let r;const{currentStep:o,trackStepChange:s}=q("deepl_onboarding_navigation");l(e,o,(e=>n(1,r=e)));let i=616;function a(){document.body.offsetHeight>window.innerHeight?n(0,i=window.innerHeight-nt):n(0,i=document.body.offsetHeight)}var c;H((()=>{a(),window.addEventListener("resize",a)})),c=()=>{window.removeEventListener("resize",a)},B().$$.on_destroy.push(c);return[i,r,o,s,()=>s(r,r-1,Ne),e=>s(r,e+1,De),()=>s(r,r+1,Le)]}class ot extends _e{constructor(e){super(),ye(this,e,rt,tt,a,{})}}function st(e){let n,r,o=chrome.i18n.getMessage("onboarding_pin_extension")+"";return{c(){n=x("div"),r=I(o),O(n,"class","dl-pin svelte-1s3gyid"),O(n,"dir",e[3])},m(e,t){k(e,n,t),b(n,r)},p:t,d(e){e&&E(n)}}}function it(e){let t,n;return t=new ot({}),{c(){he(t.$$.fragment)},m(e,r){fe(t,e,r),n=!0},i(e){n||(le(t.$$.fragment,e),n=!0)},o(e){ue(t.$$.fragment,e),n=!1},d(e){me(t,e)}}}function at(e){let t,n,r,o,s,i,a,c,l,d=e[2]&&st(e);const p=e[6].default,h=function(e,t,n,r){if(e){const o=u(e,t,n,r);return e[0](o)}}(p,e,e[5],null);let f=e[0]&&it();return{c(){d&&d.c(),t=C(),n=x("div"),r=x("div"),o=C(),s=x("div"),i=x("div"),a=x("div"),h&&h.c(),c=C(),f&&f.c(),O(r,"class","dl-logo svelte-1s3gyid"),O(n,"class","dl-logo-container svelte-1s3gyid"),O(n,"dir",e[3]),N(n,"isFirefox",e[4]),O(a,"class","dl-content svelte-1s3gyid"),O(i,"class","dl-body"),O(s,"class","dl-container svelte-1s3gyid"),O(s,"data-qa","dl-onboarding-page"),O(s,"dir",e[3]),N(s,"wideMode",e[1])},m(e,u){d&&d.m(e,u),k(e,t,u),k(e,n,u),b(n,r),k(e,o,u),k(e,s,u),b(s,i),b(i,a),h&&h.m(a,null),b(s,c),f&&f.m(s,null),l=!0},p(e,[n]){e[2]?d?d.p(e,n):(d=st(e),d.c(),d.m(t.parentNode,t)):d&&(d.d(1),d=null),h&&h.p&&(!l||32&n)&&function(e,t,n,r,o,s){if(o){const i=u(t,n,r,s);e.p(i,o)}}(h,p,e,e[5],l?function(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}(p,e[5],n,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[5]),null),e[0]?f?1&n&&le(f,1):(f=it(),f.c(),le(f,1),f.m(s,null)):f&&(ae(),ue(f,1,1,(()=>{f=null})),ce()),(!l||2&n)&&N(s,"wideMode",e[1])},i(e){l||(le(h,e),le(f),l=!0)},o(e){ue(h,e),ue(f),l=!1},d(e){e&&(E(t),E(n),E(o),E(s)),d&&d.d(e),h&&h.d(e),f&&f.d()}}}function ct(e,t,n){let{$$slots:r={},$$scope:o}=t;const s=q("text_direction"),i=Xe();let{showNavigation:a=!0}=t,{wideMode:c=!1}=t,{showPinMessage:l=!0}=t;return e.$$set=e=>{"showNavigation"in e&&n(0,a=e.showNavigation),"wideMode"in e&&n(1,c=e.wideMode),"showPinMessage"in e&&n(2,l=e.showPinMessage),"$$scope"in e&&n(5,o=e.$$scope)},[a,c,l,s,i,o,r]}class lt extends _e{constructor(e){super(),ye(this,e,ct,at,a,{showNavigation:0,wideMode:1,showPinMessage:2})}}const ut="DEEPL_COM_PRO",dt="SHORTCUT_SETTINGS",pt={whatsapp:"EXTERNAL_WHATSAPP",twitter:"EXTERNAL_TWITTER",youtube:"EXTERNAL_YOUTUBE",facebook:"EXTERNAL_FACEBOOK",github:"EXTERNAL_GITHUB",discord:"EXTERNAL_DISCORD",telegram:"EXTERNAL_TELEGRAM",reddit:"EXTERNAL_REDDIT",gmail:"EXTERNAL_GMAIL",gdocs:"EXTERNAL_GDOCS",gslides:"EXTERNAL_GSLIDES",linkedIn:"EXTERNAL_LINKEDIN",msOffice:"EXTERNAL_MS_OFFICE"},ht="ADDINS_ADS",ft="SETTINGS_PAGE",mt="SETTINGS_CUSTOMIZATIONS";function gt(e){let n,r,o,i,a,c,l,u,d,p,h,f,m,g,y,_,v,S,w,T,I,R,M,N,L,D,P,$,F,j,U,B,H,z,q,W,G,V,Y=chrome.i18n.getMessage("onboarding_promotion_body_2")+"";return{c(){n=x("div"),r=x("div"),o=x("div"),o.textContent=`${chrome.i18n.getMessage("onboarding_promotion_header")}`,i=C(),a=x("p"),a.textContent=`${chrome.i18n.getMessage("onboarding_promotion_body")}`,c=C(),l=x("p"),u=C(),d=x("div"),p=x("div"),h=x("div"),f=x("div"),f.innerHTML='<img src="../images/graphics/onboarding/most-used-apps/gmail.png" alt="Gmail logo" class="svelte-4mkkcy"/>',m=C(),g=x("div"),g.textContent=`${chrome.i18n.getMessage("onboarding_promotion_link_gmail")}`,y=C(),_=x("div"),v=x("div"),v.innerHTML='<img src="../images/graphics/onboarding/most-used-apps/gdocs.png" alt="Google Docs Logo" class="svelte-4mkkcy"/>',S=C(),w=x("div"),w.textContent=`${chrome.i18n.getMessage("onboarding_promotion_link_google_docs")}`,T=C(),I=x("div"),R=x("div"),R.innerHTML='<img src="../images/graphics/onboarding/most-used-apps/gslides.png" alt="Google Slides logo" class="svelte-4mkkcy"/>',M=C(),N=x("div"),N.textContent=`${chrome.i18n.getMessage("onboarding_promotion_link_google_slides")}`,L=C(),D=x("div"),P=x("div"),P.innerHTML='<img src="../images/graphics/onboarding/most-used-apps/word-add-in.png" alt="Microsoft Word logo" class="svelte-4mkkcy"/>',$=C(),F=x("div"),j=x("div"),j.textContent=`${chrome.i18n.getMessage("onboarding_promotion_ms_word_header")}`,U=C(),B=x("p"),B.textContent=`${chrome.i18n.getMessage("onboarding_promotion_ms_word_body")}`,H=C(),z=x("div"),z.textContent=`${chrome.i18n.getMessage("onboarding_promotion_ms_word_link")}`,q=C(),W=x("div"),W.textContent=`${chrome.i18n.getMessage("onboarding_promotion_link_integrations")}`,O(o,"class","title svelte-4mkkcy"),O(a,"class","first svelte-4mkkcy"),O(l,"class","svelte-4mkkcy"),O(r,"class","dl-apps-description svelte-4mkkcy"),O(f,"class","dl-app-image svelte-4mkkcy"),O(g,"class","dl-app-cta svelte-4mkkcy"),O(h,"class","dl-app svelte-4mkkcy"),O(v,"class","dl-app-image svelte-4mkkcy"),O(w,"class","dl-app-cta svelte-4mkkcy"),O(_,"class","dl-app svelte-4mkkcy"),O(R,"class","dl-app-image svelte-4mkkcy"),O(N,"class","dl-app-cta svelte-4mkkcy"),O(I,"class","dl-app svelte-4mkkcy"),O(p,"class","dl-apps-top-row svelte-4mkkcy"),O(P,"class","img-container svelte-4mkkcy"),O(j,"class","content-title svelte-4mkkcy"),O(B,"class","svelte-4mkkcy"),O(z,"class","cta svelte-4mkkcy"),O(F,"class","content svelte-4mkkcy"),O(D,"class","dl-apps-bottom-row svelte-4mkkcy"),O(W,"class","all-integrations svelte-4mkkcy"),O(d,"class","dl-apps-tiles svelte-4mkkcy"),O(n,"class","dl-apps-container svelte-4mkkcy")},m(t,s){k(t,n,s),b(n,r),b(r,o),b(r,i),b(r,a),b(r,c),b(r,l),l.innerHTML=Y,b(n,u),b(n,d),b(d,p),b(p,h),b(h,f),b(h,m),b(h,g),b(p,y),b(p,_),b(_,v),b(_,S),b(_,w),b(p,T),b(p,I),b(I,R),b(I,M),b(I,N),b(d,L),b(d,D),b(D,P),b(D,$),b(D,F),b(F,j),b(F,U),b(F,B),b(F,H),b(F,z),b(d,q),b(d,W),G||(V=[A(h,"click",e[2]),A(_,"click",e[3]),A(I,"click",e[4]),A(z,"click",e[5]),A(W,"click",e[1])],G=!0)},p:t,i:t,o:t,d(e){e&&E(n),G=!1,s(V)}}}function yt(e){function t(e){qe({action:"dlExternalURLRedirect",payload:{destination:e}});try{qe({action:"dlTrackOnboardingOpenExternalLink",payload:{url:e}})}catch(e){console.error("There was a problem tracking the following event: 'dlTrackOnboardingOpenExternalLink'. ",{error:e})}}return[t,function(){qe({action:"dlOpenInternalPage",payload:{destination:mt}}),qe({action:"dlTrackUILocationClicked",payload:Ce})},()=>t(pt.gmail),()=>t(pt.gdocs),()=>t(pt.gslides),()=>t(pt.msOffice)]}class _t extends _e{constructor(e){super(),ye(this,e,yt,gt,a,{})}}function vt(e){let n,r,o,i,a,c,l,u,d,p,h,f,m,g,y,_,v,S,w,T,I,R,M,N,L,D,P;return{c(){n=x("div"),r=x("button"),r.textContent=`${chrome.i18n.getMessage("onboarding_full_page_translation_table_cta")}`,o=C(),i=x("p"),i.textContent=`${chrome.i18n.getMessage("onboarding_full_page_translation_table_legend")}`,a=C(),c=x("div"),l=x("p"),l.textContent=`${chrome.i18n.getMessage("onboarding_full_page_translation_table_intro")}`,u=C(),d=x("ul"),p=x("li"),h=x("span"),f=C(),m=x("span"),m.textContent=`${chrome.i18n.getMessage("onboarding_full_page_translation_table_item_1")}`,g=C(),y=x("li"),_=x("span"),v=C(),S=x("span"),S.textContent=`${chrome.i18n.getMessage("onboarding_full_page_translation_table_item_2")}`,w=C(),T=x("li"),I=x("span"),R=C(),M=x("span"),M.textContent=`${chrome.i18n.getMessage("onboarding_full_page_translation_table_item_3")}`,N=C(),L=x("button"),L.textContent=`${chrome.i18n.getMessage("onboarding_full_page_translation_table_read_more")}`,O(r,"class","btn-deepl-pro svelte-lgp0fx"),O(r,"data-qa","dl-onboarding-deepl-pro-try-for-free"),O(i,"class","cta-legend svelte-lgp0fx"),O(l,"class","svelte-lgp0fx"),O(h,"class","check-icon svelte-lgp0fx"),O(p,"class","svelte-lgp0fx"),O(_,"class","check-icon svelte-lgp0fx"),O(y,"class","svelte-lgp0fx"),O(I,"class","check-icon svelte-lgp0fx"),O(T,"class","svelte-lgp0fx"),O(L,"class","read-more svelte-lgp0fx"),O(L,"data-qa","dl-onboarding-deepl-pro-read-more"),O(c,"class","deepl-pro-benefits svelte-lgp0fx"),O(n,"class","dl-deepl-pro svelte-lgp0fx")},m(t,s){k(t,n,s),b(n,r),b(n,o),b(n,i),b(n,a),b(n,c),b(c,l),b(c,u),b(c,d),b(d,p),b(p,h),b(p,f),b(p,m),b(d,g),b(d,y),b(y,_),b(y,v),b(y,S),b(d,w),b(d,T),b(T,I),b(T,R),b(T,M),b(c,N),b(c,L),D||(P=[A(r,"click",e[0]),A(L,"click",e[1])],D=!0)},p:t,i:t,o:t,d(e){e&&E(n),D=!1,s(P)}}}function bt(e){function t(e){qe({action:"dlExternalURLRedirect",payload:{destination:ut,additionalData:{utmContent:e}}});try{qe({action:"dlTrackOnboardingOpenExternalLink",payload:{url:ut}})}catch(e){console.error("There was a problem tracking the following event: 'dlTrackOnboardingOpenExternalLink'. ",{error:e})}}return[function(){return t("cta")},function(){return t("read-more")}]}class St extends _e{constructor(e){super(),ye(this,e,bt,vt,a,{})}}function wt(e){let t,n,r,o,s=chrome.i18n.getMessage(e[1].title)+"",i=e[1].badge&&kt(e);return{c(){t=x("h1"),n=x("span"),r=I(s),o=C(),i&&i.c(),O(t,"class","dl-step-title svelte-komuik")},m(e,s){k(e,t,s),b(t,n),b(n,r),b(t,o),i&&i.m(t,null)},p(e,n){2&n&&s!==(s=chrome.i18n.getMessage(e[1].title)+"")&&M(r,s),e[1].badge?i?i.p(e,n):(i=kt(e),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},d(e){e&&E(t),i&&i.d()}}}function kt(e){let t,n,r=chrome.i18n.getMessage(e[1].badge)+"";return{c(){t=x("span"),n=I(r),O(t,"class","badge svelte-komuik")},m(e,r){k(e,t,r),b(t,n)},p(e,t){2&t&&r!==(r=chrome.i18n.getMessage(e[1].badge)+"")&&M(n,r)},d(e){e&&E(t)}}}function Et(e){let t,n,r=chrome.i18n.getMessage(e[1].description)+"";return{c(){t=x("p"),n=I(r),O(t,"class","dl-step-description svelte-komuik")},m(e,r){k(e,t,r),b(t,n)},p(e,t){2&t&&r!==(r=chrome.i18n.getMessage(e[1].description)+"")&&M(n,r)},d(e){e&&E(t)}}}function Tt(e){let t,n,r=chrome.i18n.getMessage(e[1].description2)+"";return{c(){t=x("p"),n=I(r),O(t,"class","dl-step-description svelte-komuik")},m(e,r){k(e,t,r),b(t,n)},p(e,t){2&t&&r!==(r=chrome.i18n.getMessage(e[1].description2)+"")&&M(n,r)},d(e){e&&E(t)}}}function xt(e){let n,r;return{c(){n=x("div"),O(n,"class",r="dl-step-illustration dl-step-illustration-"+e[0]+" svelte-komuik")},m(e,t){k(e,n,t)},p(e,t){1&t&&r!==(r="dl-step-illustration dl-step-illustration-"+e[0]+" svelte-komuik")&&O(n,"class",r)},i:t,o:t,d(e){e&&E(n)}}}function It(e){let n,r;return n=new St({}),{c(){he(n.$$.fragment)},m(e,t){fe(n,e,t),r=!0},p:t,i(e){r||(le(n.$$.fragment,e),r=!0)},o(e){ue(n.$$.fragment,e),r=!1},d(e){me(n,e)}}}function Ct(e){let n,r;return n=new _t({}),{c(){he(n.$$.fragment)},m(e,t){fe(n,e,t),r=!0},p:t,i(e){r||(le(n.$$.fragment,e),r=!0)},o(e){ue(n.$$.fragment,e),r=!1},d(e){me(n,e)}}}function Rt(e){let t,n,r,o,s,i,a,c,l,u=e[1].title&&wt(e),d=e[1].description&&Et(e),p=e[1].description2&&Tt(e);const h=[Ct,It,xt],f=[];function m(e,t){return e[1].screen===Se.most_used_apps?0:e[1].screen===Se.deepl_pro?1:2}return i=m(e),a=f[i]=h[i](e),{c(){t=x("div"),u&&u.c(),n=C(),r=x("div"),d&&d.c(),o=C(),p&&p.c(),s=C(),a.c(),O(r,"class","dl-step-description-wrapper svelte-komuik"),O(t,"class","dl-step svelte-komuik"),O(t,"data-qa",c="dl-onboarding-step-"+e[0])},m(e,a){k(e,t,a),u&&u.m(t,null),b(t,n),b(t,r),d&&d.m(r,null),b(r,o),p&&p.m(r,null),b(t,s),f[i].m(t,null),l=!0},p(e,[s]){e[1].title?u?u.p(e,s):(u=wt(e),u.c(),u.m(t,n)):u&&(u.d(1),u=null),e[1].description?d?d.p(e,s):(d=Et(e),d.c(),d.m(r,o)):d&&(d.d(1),d=null),e[1].description2?p?p.p(e,s):(p=Tt(e),p.c(),p.m(r,null)):p&&(p.d(1),p=null);let g=i;i=m(e),i===g?f[i].p(e,s):(ae(),ue(f[g],1,1,(()=>{f[g]=null})),ce(),a=f[i],a?a.p(e,s):(a=f[i]=h[i](e),a.c()),le(a,1),a.m(t,null)),(!l||1&s&&c!==(c="dl-onboarding-step-"+e[0]))&&O(t,"data-qa",c)},i(e){l||(le(a),l=!0)},o(e){ue(a),l=!1},d(e){e&&E(t),u&&u.d(),d&&d.d(),p&&p.d(),f[i].d()}}}function At(e,t,n){let{step:r=1}=t,{onboardingStep:o}=t;return e.$$set=e=>{"step"in e&&n(0,r=e.step),"onboardingStep"in e&&n(1,o=e.onboardingStep)},[r,o]}class Ot extends _e{constructor(e){super(),ye(this,e,At,Rt,a,{step:0,onboardingStep:1})}}function Mt(e){const t=e-1;return t*t*t+1}function Nt(e,{delay:t=0,duration:n=400,easing:r=Mt,x:o=0,y:s=0,opacity:i=0}={}){const a=getComputedStyle(e),c=+a.opacity,l="none"===a.transform?"":a.transform,u=c*(1-i),[d,h]=p(o),[f,m]=p(s);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${l} translate(${(1-e)*d}${h}, ${(1-e)*f}${m});\n\t\t\topacity: ${c-u*t}`}}var Lt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Dt={exports:{}};
/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */
!function(e,t){e.exports=function(){const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:o}=Object;let{freeze:s,seal:i,create:a}=Object,{apply:c,construct:l}="undefined"!=typeof Reflect&&Reflect;s||(s=function(e){return e}),i||(i=function(e){return e}),c||(c=function(e,t,n){return e.apply(t,n)}),l||(l=function(e,t){return new e(...t)});const u=w(Array.prototype.forEach),d=w(Array.prototype.pop),p=w(Array.prototype.push),h=w(String.prototype.toLowerCase),f=w(String.prototype.toString),m=w(String.prototype.match),g=w(String.prototype.replace),y=w(String.prototype.indexOf),_=w(String.prototype.trim),v=w(Object.prototype.hasOwnProperty),b=w(RegExp.prototype.test),S=k(TypeError);function w(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return c(e,t,r)}}function k(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return l(e,n)}}function E(e,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;t&&t(e,null);let s=r.length;for(;s--;){let t=r[s];if("string"==typeof t){const e=o(t);e!==t&&(n(r)||(r[s]=e),t=e)}e[t]=!0}return e}function T(e){for(let t=0;t<e.length;t++)v(e,t)||(e[t]=null);return e}function x(t){const n=a(null);for(const[r,o]of e(t))v(t,r)&&(Array.isArray(o)?n[r]=T(o):o&&"object"==typeof o&&o.constructor===Object?n[r]=x(o):n[r]=o);return n}function I(e,t){for(;null!==e;){const n=o(e,t);if(n){if(n.get)return w(n.get);if("function"==typeof n.value)return w(n.value)}e=r(e)}function n(){return null}return n}const C=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),R=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),A=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),O=s(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),M=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),N=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),L=s(["#text"]),D=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),P=s(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),F=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),j=i(/\{\{[\w\W]*|[\w\W]*\}\}/gm),U=i(/<%[\w\W]*|[\w\W]*%>/gm),B=i(/\${[\w\W]*}/gm),H=i(/^data-[\-\w.\u00B7-\uFFFF]/),z=i(/^aria-[\-\w]+$/),q=i(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),W=i(/^(?:\w+script|data):/i),G=i(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),V=i(/^html$/i),Y=i(/^[a-z][.\w]*(-[.\w]+)+$/i);var K=Object.freeze({__proto__:null,MUSTACHE_EXPR:j,ERB_EXPR:U,TMPLIT_EXPR:B,DATA_ATTR:H,ARIA_ATTR:z,IS_ALLOWED_URI:q,IS_SCRIPT_OR_DATA:W,ATTR_WHITESPACE:G,DOCTYPE_NAME:V,CUSTOM_ELEMENT:Y});const X={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},J=function(){return"undefined"==typeof window?null:window},Q=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function Z(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J();const n=e=>Z(e);if(n.version="3.1.6",n.removed=[],!t||!t.document||t.document.nodeType!==X.document)return n.isSupported=!1,n;let{document:r}=t;const o=r,i=o.currentScript,{DocumentFragment:c,HTMLTemplateElement:l,Node:w,Element:k,NodeFilter:T,NamedNodeMap:j=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:U,DOMParser:B,trustedTypes:H}=t,z=k.prototype,W=I(z,"cloneNode"),G=I(z,"remove"),Y=I(z,"nextSibling"),ee=I(z,"childNodes"),te=I(z,"parentNode");if("function"==typeof l){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let ne,re="";const{implementation:oe,createNodeIterator:se,createDocumentFragment:ie,getElementsByTagName:ae}=r,{importNode:ce}=o;let le={};n.isSupported="function"==typeof e&&"function"==typeof te&&oe&&void 0!==oe.createHTMLDocument;const{MUSTACHE_EXPR:ue,ERB_EXPR:de,TMPLIT_EXPR:pe,DATA_ATTR:he,ARIA_ATTR:fe,IS_SCRIPT_OR_DATA:me,ATTR_WHITESPACE:ge,CUSTOM_ELEMENT:ye}=K;let{IS_ALLOWED_URI:_e}=K,ve=null;const be=E({},[...C,...R,...A,...M,...L]);let Se=null;const we=E({},[...D,...P,...$,...F]);let ke=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ee=null,Te=null,xe=!0,Ie=!0,Ce=!1,Re=!0,Ae=!1,Oe=!0,Me=!1,Ne=!1,Le=!1,De=!1,Pe=!1,$e=!1,Fe=!0,je=!1;const Ue="user-content-";let Be=!0,He=!1,ze={},qe=null;const We=E({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ge=null;const Ve=E({},["audio","video","img","source","image","track"]);let Ye=null;const Ke=E({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Xe="http://www.w3.org/1998/Math/MathML",Je="http://www.w3.org/2000/svg",Qe="http://www.w3.org/1999/xhtml";let Ze=Qe,et=!1,tt=null;const nt=E({},[Xe,Je,Qe],f);let rt=null;const ot=["application/xhtml+xml","text/html"],st="text/html";let it=null,at=null;const ct=r.createElement("form"),lt=function(e){return e instanceof RegExp||e instanceof Function},ut=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!at||at!==e){if(e&&"object"==typeof e||(e={}),e=x(e),rt=-1===ot.indexOf(e.PARSER_MEDIA_TYPE)?st:e.PARSER_MEDIA_TYPE,it="application/xhtml+xml"===rt?f:h,ve=v(e,"ALLOWED_TAGS")?E({},e.ALLOWED_TAGS,it):be,Se=v(e,"ALLOWED_ATTR")?E({},e.ALLOWED_ATTR,it):we,tt=v(e,"ALLOWED_NAMESPACES")?E({},e.ALLOWED_NAMESPACES,f):nt,Ye=v(e,"ADD_URI_SAFE_ATTR")?E(x(Ke),e.ADD_URI_SAFE_ATTR,it):Ke,Ge=v(e,"ADD_DATA_URI_TAGS")?E(x(Ve),e.ADD_DATA_URI_TAGS,it):Ve,qe=v(e,"FORBID_CONTENTS")?E({},e.FORBID_CONTENTS,it):We,Ee=v(e,"FORBID_TAGS")?E({},e.FORBID_TAGS,it):{},Te=v(e,"FORBID_ATTR")?E({},e.FORBID_ATTR,it):{},ze=!!v(e,"USE_PROFILES")&&e.USE_PROFILES,xe=!1!==e.ALLOW_ARIA_ATTR,Ie=!1!==e.ALLOW_DATA_ATTR,Ce=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Re=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Ae=e.SAFE_FOR_TEMPLATES||!1,Oe=!1!==e.SAFE_FOR_XML,Me=e.WHOLE_DOCUMENT||!1,De=e.RETURN_DOM||!1,Pe=e.RETURN_DOM_FRAGMENT||!1,$e=e.RETURN_TRUSTED_TYPE||!1,Le=e.FORCE_BODY||!1,Fe=!1!==e.SANITIZE_DOM,je=e.SANITIZE_NAMED_PROPS||!1,Be=!1!==e.KEEP_CONTENT,He=e.IN_PLACE||!1,_e=e.ALLOWED_URI_REGEXP||q,Ze=e.NAMESPACE||Qe,ke=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&lt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ke.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&lt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ke.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ke.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ae&&(Ie=!1),Pe&&(De=!0),ze&&(ve=E({},L),Se=[],!0===ze.html&&(E(ve,C),E(Se,D)),!0===ze.svg&&(E(ve,R),E(Se,P),E(Se,F)),!0===ze.svgFilters&&(E(ve,A),E(Se,P),E(Se,F)),!0===ze.mathMl&&(E(ve,M),E(Se,$),E(Se,F))),e.ADD_TAGS&&(ve===be&&(ve=x(ve)),E(ve,e.ADD_TAGS,it)),e.ADD_ATTR&&(Se===we&&(Se=x(Se)),E(Se,e.ADD_ATTR,it)),e.ADD_URI_SAFE_ATTR&&E(Ye,e.ADD_URI_SAFE_ATTR,it),e.FORBID_CONTENTS&&(qe===We&&(qe=x(qe)),E(qe,e.FORBID_CONTENTS,it)),Be&&(ve["#text"]=!0),Me&&E(ve,["html","head","body"]),ve.table&&(E(ve,["tbody"]),delete Ee.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw S('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw S('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ne=e.TRUSTED_TYPES_POLICY,re=ne.createHTML("")}else void 0===ne&&(ne=Q(H,i)),null!==ne&&"string"==typeof re&&(re=ne.createHTML(""));s&&s(e),at=e}},dt=E({},["mi","mo","mn","ms","mtext"]),pt=E({},["foreignobject","annotation-xml"]),ht=E({},["title","style","font","a","script"]),ft=E({},[...R,...A,...O]),mt=E({},[...M,...N]),gt=function(e){let t=te(e);t&&t.tagName||(t={namespaceURI:Ze,tagName:"template"});const n=h(e.tagName),r=h(t.tagName);return!!tt[e.namespaceURI]&&(e.namespaceURI===Je?t.namespaceURI===Qe?"svg"===n:t.namespaceURI===Xe?"svg"===n&&("annotation-xml"===r||dt[r]):Boolean(ft[n]):e.namespaceURI===Xe?t.namespaceURI===Qe?"math"===n:t.namespaceURI===Je?"math"===n&&pt[r]:Boolean(mt[n]):e.namespaceURI===Qe?!(t.namespaceURI===Je&&!pt[r])&&!(t.namespaceURI===Xe&&!dt[r])&&!mt[n]&&(ht[n]||!ft[n]):!("application/xhtml+xml"!==rt||!tt[e.namespaceURI]))},yt=function(e){p(n.removed,{element:e});try{te(e).removeChild(e)}catch(t){G(e)}},_t=function(e,t){try{p(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){p(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Se[e])if(De||Pe)try{yt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},vt=function(e){let t=null,n=null;if(Le)e="<remove></remove>"+e;else{const t=m(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===rt&&Ze===Qe&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const o=ne?ne.createHTML(e):e;if(Ze===Qe)try{t=(new B).parseFromString(o,rt)}catch(e){}if(!t||!t.documentElement){t=oe.createDocument(Ze,"template",null);try{t.documentElement.innerHTML=et?re:o}catch(e){}}const s=t.body||t.documentElement;return e&&n&&s.insertBefore(r.createTextNode(n),s.childNodes[0]||null),Ze===Qe?ae.call(t,Me?"html":"body")[0]:Me?t.documentElement:s},bt=function(e){return se.call(e.ownerDocument||e,e,T.SHOW_ELEMENT|T.SHOW_COMMENT|T.SHOW_TEXT|T.SHOW_PROCESSING_INSTRUCTION|T.SHOW_CDATA_SECTION,null)},St=function(e){return e instanceof U&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof j)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},wt=function(e){return"function"==typeof w&&e instanceof w},kt=function(e,t,r){le[e]&&u(le[e],(e=>{e.call(n,t,r,at)}))},Et=function(e){let t=null;if(kt("beforeSanitizeElements",e,null),St(e))return yt(e),!0;const r=it(e.nodeName);if(kt("uponSanitizeElement",e,{tagName:r,allowedTags:ve}),e.hasChildNodes()&&!wt(e.firstElementChild)&&b(/<[/\w]/g,e.innerHTML)&&b(/<[/\w]/g,e.textContent))return yt(e),!0;if(e.nodeType===X.progressingInstruction)return yt(e),!0;if(Oe&&e.nodeType===X.comment&&b(/<[/\w]/g,e.data))return yt(e),!0;if(!ve[r]||Ee[r]){if(!Ee[r]&&xt(r)){if(ke.tagNameCheck instanceof RegExp&&b(ke.tagNameCheck,r))return!1;if(ke.tagNameCheck instanceof Function&&ke.tagNameCheck(r))return!1}if(Be&&!qe[r]){const t=te(e)||e.parentNode,n=ee(e)||e.childNodes;if(n&&t)for(let r=n.length-1;r>=0;--r){const o=W(n[r],!0);o.__removalCount=(e.__removalCount||0)+1,t.insertBefore(o,Y(e))}}return yt(e),!0}return e instanceof k&&!gt(e)?(yt(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!b(/<\/no(script|embed|frames)/i,e.innerHTML)?(Ae&&e.nodeType===X.text&&(t=e.textContent,u([ue,de,pe],(e=>{t=g(t,e," ")})),e.textContent!==t&&(p(n.removed,{element:e.cloneNode()}),e.textContent=t)),kt("afterSanitizeElements",e,null),!1):(yt(e),!0)},Tt=function(e,t,n){if(Fe&&("id"===t||"name"===t)&&(n in r||n in ct))return!1;if(Ie&&!Te[t]&&b(he,t));else if(xe&&b(fe,t));else if(!Se[t]||Te[t]){if(!(xt(e)&&(ke.tagNameCheck instanceof RegExp&&b(ke.tagNameCheck,e)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(e))&&(ke.attributeNameCheck instanceof RegExp&&b(ke.attributeNameCheck,t)||ke.attributeNameCheck instanceof Function&&ke.attributeNameCheck(t))||"is"===t&&ke.allowCustomizedBuiltInElements&&(ke.tagNameCheck instanceof RegExp&&b(ke.tagNameCheck,n)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(n))))return!1}else if(Ye[t]);else if(b(_e,g(n,ge,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==y(n,"data:")||!Ge[e])if(Ce&&!b(me,g(n,ge,"")));else if(n)return!1;return!0},xt=function(e){return"annotation-xml"!==e&&m(e,ye)},It=function(e){kt("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Se};let o=t.length;for(;o--;){const s=t[o],{name:i,namespaceURI:a,value:c}=s,l=it(i);let p="value"===i?c:_(c);if(r.attrName=l,r.attrValue=p,r.keepAttr=!0,r.forceKeepAttr=void 0,kt("uponSanitizeAttribute",e,r),p=r.attrValue,Oe&&b(/((--!?|])>)|<\/(style|title)/i,p)){_t(i,e);continue}if(r.forceKeepAttr)continue;if(_t(i,e),!r.keepAttr)continue;if(!Re&&b(/\/>/i,p)){_t(i,e);continue}Ae&&u([ue,de,pe],(e=>{p=g(p,e," ")}));const h=it(e.nodeName);if(Tt(h,l,p)){if(!je||"id"!==l&&"name"!==l||(_t(i,e),p=Ue+p),ne&&"object"==typeof H&&"function"==typeof H.getAttributeType)if(a);else switch(H.getAttributeType(h,l)){case"TrustedHTML":p=ne.createHTML(p);break;case"TrustedScriptURL":p=ne.createScriptURL(p)}try{a?e.setAttributeNS(a,i,p):e.setAttribute(i,p),St(e)?yt(e):d(n.removed)}catch(e){}}}kt("afterSanitizeAttributes",e,null)},Ct=function e(t){let n=null;const r=bt(t);for(kt("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)kt("uponSanitizeShadowNode",n,null),Et(n)||(n.content instanceof c&&e(n.content),It(n));kt("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,s=null,i=null,a=null;if(et=!e,et&&(e="\x3c!--\x3e"),"string"!=typeof e&&!wt(e)){if("function"!=typeof e.toString)throw S("toString is not a function");if("string"!=typeof(e=e.toString()))throw S("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Ne||ut(t),n.removed=[],"string"==typeof e&&(He=!1),He){if(e.nodeName){const t=it(e.nodeName);if(!ve[t]||Ee[t])throw S("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof w)r=vt("\x3c!----\x3e"),s=r.ownerDocument.importNode(e,!0),s.nodeType===X.element&&"BODY"===s.nodeName||"HTML"===s.nodeName?r=s:r.appendChild(s);else{if(!De&&!Ae&&!Me&&-1===e.indexOf("<"))return ne&&$e?ne.createHTML(e):e;if(r=vt(e),!r)return De?null:$e?re:""}r&&Le&&yt(r.firstChild);const l=bt(He?e:r);for(;i=l.nextNode();)Et(i)||(i.content instanceof c&&Ct(i.content),It(i));if(He)return e;if(De){if(Pe)for(a=ie.call(r.ownerDocument);r.firstChild;)a.appendChild(r.firstChild);else a=r;return(Se.shadowroot||Se.shadowrootmode)&&(a=ce.call(o,a,!0)),a}let d=Me?r.outerHTML:r.innerHTML;return Me&&ve["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&b(V,r.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+d),Ae&&u([ue,de,pe],(e=>{d=g(d,e," ")})),ne&&$e?ne.createHTML(d):d},n.setConfig=function(){ut(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Ne=!0},n.clearConfig=function(){at=null,Ne=!1},n.isValidAttribute=function(e,t,n){at||ut({});const r=it(e),o=it(t);return Tt(r,o,n)},n.addHook=function(e,t){"function"==typeof t&&(le[e]=le[e]||[],p(le[e],t))},n.removeHook=function(e){if(le[e])return d(le[e])},n.removeHooks=function(e){le[e]&&(le[e]=[])},n.removeAllHooks=function(){le={}},n}var ee=Z();return ee}()}(Dt);const Pt=(e,t={})=>Dt.exports.sanitize(e,{USE_PROFILES:{html:!0},...t});function $t(e){let n,r,o,s=Pt(e[1])+"";return{c(){n=x("div"),O(n,"class","container svelte-1dicgbw")},m(t,i){k(t,n,i),n.innerHTML=s,r||(o=A(n,"click",e[0]),r=!0)},p:t,i:t,o:t,d(e){e&&E(n),r=!1,o()}}}function Ft(e){return[function(){qe({action:"dlExternalURLRedirect",payload:{destination:dt}}),qe({action:"dlTrackUiAction",payload:{uiAction:Re}})},chrome.i18n.getMessage("notification_keyboard_shortcut_hint",`<span style="color: #006494; text-decoration: underline;">${chrome.i18n.getMessage("notification_keyboard_shortcut_hint_placeholder")}</span>`)]}class jt extends _e{constructor(e){super(),ye(this,e,Ft,$t,a,{})}}function Ut(e){let n,r,o,s=Pt(e[0])+"";return{c(){n=x("div"),O(n,"class","container svelte-1dicgbw"),O(n,"data-qa","deepl-notification-open-settings-page-writing-link")},m(t,i){k(t,n,i),n.innerHTML=s,r||(o=A(n,"click",e[1]),r=!0)},p(e,[t]){1&t&&s!==(s=Pt(e[0])+"")&&(n.innerHTML=s)},i:t,o:t,d(e){e&&E(n),r=!1,o()}}}function Bt(e,t,n){let{options:r}=t,o=r?.settingsPageURL?r?.settingsPageURL:ft;let s="",i=r?.currentDomain?r.currentDomain:"";switch(r.saveAction){case Oe:s=chrome.i18n.getMessage("notification_input_translation_disabled_everywhere",`<span style="text-decoration: underline;">${chrome.i18n.getMessage("notification_input_translation_link_to_settings_placeholder")}</span>`);break;case Ae:s=chrome.i18n.getMessage("notification_input_translation_disabled_per_site",[i,`<span style="text-decoration: underline;">${chrome.i18n.getMessage("notification_input_translation_link_to_settings_placeholder")}</span>`])}return e.$$set=e=>{"options"in e&&n(2,r=e.options)},[s,function(){qe({action:"dlOpenInternalPage",payload:{destination:o}})},r]}class Ht extends _e{constructor(e){super(),ye(this,e,Bt,Ut,a,{options:2})}}function zt(e){let n,r,o,s=Pt(e[0])+"";return{c(){n=x("div"),O(n,"class","container svelte-1dicgbw"),O(n,"data-qa","deepl-notification-open-settings-page-reading-link")},m(t,i){k(t,n,i),n.innerHTML=s,r||(o=A(n,"click",e[1]),r=!0)},p(e,[t]){1&t&&s!==(s=Pt(e[0])+"")&&(n.innerHTML=s)},i:t,o:t,d(e){e&&E(n),r=!1,o()}}}function qt(e,t,n){let{options:r}=t,o=r?.settingsPageURL?r?.settingsPageURL:ft;let s="",i=r?.currentDomain?r.currentDomain:"";switch(r.saveAction){case Oe:s=chrome.i18n.getMessage("notification_inline_translation_disabled_everywhere",`<span style="text-decoration: underline;">${chrome.i18n.getMessage("notification_inline_translation_link_to_settings_placeholder")}</span>`);break;case Ae:s=chrome.i18n.getMessage("notification_inline_translation_disabled_per_site",[i,`<span style="text-decoration: underline;">${chrome.i18n.getMessage("notification_inline_translation_link_to_settings_placeholder")}</span>`])}return e.$$set=e=>{"options"in e&&n(2,r=e.options)},[s,function(){qe({action:"dlOpenInternalPage",payload:{destination:o}})},r]}class Wt extends _e{constructor(e){super(),ye(this,e,qt,zt,a,{options:2})}}function Gt(e){let n,r,o;return{c(){n=x("div"),n.textContent=`${chrome.i18n.getMessage("ui_notification_fpt_hide")}`,O(n,"class","container svelte-1dicgbw"),O(n,"data-qa","deepl-notification-open-settings-page-reading-link")},m(t,s){k(t,n,s),r||(o=A(n,"click",e[0]),r=!0)},p:t,i:t,o:t,d(e){e&&E(n),r=!1,o()}}}function Vt(e){return[function(){qe({action:"dlOpenInternalPage",payload:{destination:ft}})}]}class Yt extends _e{constructor(e){super(),ye(this,e,Vt,Gt,a,{})}}function Kt(e){let n;return{c(){n=x("div"),n.textContent=`${chrome.i18n.getMessage("onboarding_account_successfully_created")}`,O(n,"class","dl-account-created svelte-nuwktw")},m(e,t){k(e,n,t)},p:t,i:t,o:t,d(e){e&&E(n)}}}class Xt extends _e{constructor(e){super(),ye(this,e,null,Kt,a,{})}}function Jt(e){let n;return{c(){n=x("div"),n.textContent=`${chrome.i18n.getMessage("onboarding_successful_login_notification")}`,O(n,"class","dl-account-created svelte-nuwktw")},m(e,t){k(e,n,t)},p:t,i:t,o:t,d(e){e&&E(n)}}}class Qt extends _e{constructor(e){super(),ye(this,e,null,Jt,a,{})}}function Zt(e){let n,r,o,s;return{c(){n=x("div"),r=x("span"),r.textContent=`${chrome.i18n.getMessage("ui_gslides_unsaved_asset_warning_main")}`,o=C(),s=x("span"),s.textContent=`${chrome.i18n.getMessage("ui_gslides_unsaved_asset_warning_explanation")}`,O(r,"class","main-text svelte-18of7gm"),O(n,"class","dl-notification-gslides-prevent-asset-loss")},m(e,t){k(e,n,t),b(n,r),b(n,o),b(n,s)},p:t,i:t,o:t,d(e){e&&E(n)}}}class en extends _e{constructor(e){super(),ye(this,e,null,Zt,a,{})}}function tn(e){let n,r,o,s,i,a,c,l,u;return{c(){n=x("div"),r=x("div"),r.textContent=`${chrome.i18n.getMessage("notification_ads_ms_office_headline")}`,o=C(),s=x("div"),s.textContent=`${chrome.i18n.getMessage("notification_ads_ms_office_text")}`,i=C(),a=x("div"),c=x("div"),c.textContent=`${chrome.i18n.getMessage("notification_ads_ms_office_learn_more")}`,O(r,"class","dl-ads-for-addins_headline svelte-drhmpk"),O(s,"class","dl-ads-for-addins_text"),O(c,"class","dl-ads-for-addins_button svelte-drhmpk"),O(a,"class","dl-ads-for-addins_wrapper svelte-drhmpk"),O(n,"class","dl-ads-for-addins svelte-drhmpk")},m(t,d){k(t,n,d),b(n,r),b(n,o),b(n,s),b(n,i),b(n,a),b(a,c),l||(u=A(a,"click",e[0]),l=!0)},p:t,i:t,o:t,d(e){e&&E(n),l=!1,u()}}}function nn(e){return[()=>{qe({action:"dlExternalURLRedirect",payload:{destination:ht,utmContent:"msaddin_ads_notification"}}),qe({action:"dlTrackClicksOnAdsButton"})}]}class rn extends _e{constructor(e){super(),ye(this,e,nn,tn,a,{})}}function on(e){let r,o,a,c,l,u,d,p,h,m,g,y,v,S,w,T=e[4]==Ie.warning_theme&&sn();var I=e[5];function R(e,t){return{props:{options:e[1]}}}return I&&(p=L(I,R(e))),{c(){r=x("div"),o=x("div"),a=x("button"),l=C(),u=x("div"),T&&T.c(),d=C(),p&&he(p.$$.fragment),O(a,"class",c="dl-close-icon "+e[4]+" svelte-np3z9s"),O(o,"class","header"),O(o,"notificationtheme",e[4]),O(u,"class",h="body "+e[4]+" svelte-np3z9s"),O(r,"class",m="container "+e[4]+" svelte-np3z9s"),O(r,"dir",je()),N(r,"success",e[0]===xe.accountSuccessfullyCreated||e[0]===xe.successfullyLoggedIn)},m(t,n){k(t,r,n),b(r,o),b(o,a),b(r,l),b(r,u),T&&T.m(u,null),b(u,d),p&&fe(p,u,null),v=!0,S||(w=A(a,"click",(function(){i(e[2])&&e[2].apply(this,arguments)})),S=!0)},p(t,n){if(e=t,(!v||16&n&&c!==(c="dl-close-icon "+e[4]+" svelte-np3z9s"))&&O(a,"class",c),(!v||16&n)&&O(o,"notificationtheme",e[4]),e[4]==Ie.warning_theme?T||(T=sn(),T.c(),T.m(u,d)):T&&(T.d(1),T=null),32&n&&I!==(I=e[5])){if(p){ae();const e=p;ue(e.$$.fragment,1,0,(()=>{me(e,1)})),ce()}I?(p=L(I,R(e)),he(p.$$.fragment),le(p.$$.fragment,1),fe(p,u,null)):p=null}else if(I){const t={};2&n&&(t.options=e[1]),p.$set(t)}(!v||16&n&&h!==(h="body "+e[4]+" svelte-np3z9s"))&&O(u,"class",h),(!v||16&n&&m!==(m="container "+e[4]+" svelte-np3z9s"))&&O(r,"class",m),(!v||17&n)&&N(r,"success",e[0]===xe.accountSuccessfullyCreated||e[0]===xe.successfullyLoggedIn)},i(e){v||(p&&le(p.$$.fragment,e),J((()=>{v&&(y&&y.end(1),g=function(e,r,o){const s={direction:"in"};let a,c,l=r(e,o,s),u=!1,d=0;function p(){a&&j(e,a)}function h(){const{delay:r=0,duration:o=300,easing:s=n,tick:i=t,css:h}=l||de;h&&(a=F(e,0,1,o,r,s,h,d++)),i(0,1);const m=f()+r,g=m+o;c&&c.abort(),u=!0,J((()=>oe(e,!0,"start"))),c=_((t=>{if(u){if(t>=g)return i(1,0),oe(e,!0,"end"),p(),u=!1;if(t>=m){const e=s((t-m)/o);i(e,1-e)}}return u}))}let m=!1;return{start(){m||(m=!0,j(e),i(l)?(l=l(s),re().then(h)):h())},invalidate(){m=!1},end(){u&&(p(),u=!1)}}}(r,Nt,{x:100,duration:1e3}),g.start())})),v=!0)},o(e){p&&ue(p.$$.fragment,e),g&&g.invalidate(),y=function(e,r,o){const a={direction:"out"};let c,l=r(e,o,a),u=!0;const d=ie;let p;function h(){const{delay:r=0,duration:o=300,easing:i=n,tick:a=t,css:h}=l||de;h&&(c=F(e,1,0,o,r,i,h));const m=f()+r,g=m+o;J((()=>oe(e,!1,"start"))),"inert"in e&&(p=e.inert,e.inert=!0),_((t=>{if(u){if(t>=g)return a(0,1),oe(e,!1,"end"),--d.r||s(d.c),!1;if(t>=m){const e=i((t-m)/o);a(1-e,e)}}return u}))}return d.r+=1,i(l)?re().then((()=>{l=l(a),h()})):h(),{end(t){t&&"inert"in e&&(e.inert=p),t&&l.tick&&l.tick(1,0),u&&(c&&j(e,c),u=!1)}}}(r,Nt,{x:100,duration:1e3}),v=!1},d(e){e&&E(r),T&&T.d(),p&&me(p),e&&y&&y.end(),S=!1,w()}}}function sn(e){let t;return{c(){t=x("div"),t.innerHTML='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 6V10M10 14H10.01M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z" stroke="#ECBA82" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',O(t,"class","icon-container")},m(e,n){k(e,t,n)},d(e){e&&E(t)}}}function an(e){let t,n,r=e[3]&&on(e);return{c(){r&&r.c(),t=R()},m(e,o){r&&r.m(e,o),k(e,t,o),n=!0},p(e,[n]){e[3]?r?(r.p(e,n),8&n&&le(r,1)):(r=on(e),r.c(),le(r,1),r.m(t.parentNode,t)):r&&(ae(),ue(r,1,1,(()=>{r=null})),ce())},i(e){n||(le(r),n=!0)},o(e){ue(r),n=!1},d(e){e&&E(t),r&&r.d(e)}}}function cn(e,t,n){let r,o;z("text_direction",je());let{type:s}=t,{options:i}=t,{close:a}=t,c=!1;const l={[xe.hintKeyboardShortcut]:jt,[xe.inputTranslation]:Ht,[xe.inlineTranslation]:Wt,[xe.fullPageTranslation]:Yt,[xe.accountSuccessfullyCreated]:Xt,[xe.successfullyLoggedIn]:Qt,[xe.glidesPreventAssetLoss]:en,[xe.showAdsForMSAddins]:rn};return H((()=>{setTimeout((()=>n(3,c=!0)),100),setTimeout((()=>n(3,c=!1)),10100),setTimeout((()=>a()),11100)})),e.$$set=e=>{"type"in e&&n(0,s=e.type),"options"in e&&n(1,i=e.options),"close"in e&&n(2,a=e.close)},e.$$.update=()=>{1&e.$$.dirty&&n(5,r=l[s]),2&e.$$.dirty&&n(4,o=Ie[i?.theme]?Ie[i?.theme]:"")},[s,i,a,c,o,r]}class ln extends _e{constructor(e){super(),ye(this,e,cn,an,a,{type:0,options:1,close:2})}}const{window:un}=v;function dn(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function pn(e){let n,r,o;return r=new ln({props:{type:xe.accountSuccessfullyCreated,close:e[3]}}),{c(){n=x("div"),he(r.$$.fragment),O(n,"class","notification-container svelte-c0mafs")},m(e,t){k(e,n,t),fe(r,n,null),o=!0},p:t,i(e){o||(le(r.$$.fragment,e),o=!0)},o(e){ue(r.$$.fragment,e),o=!1},d(e){e&&E(n),me(r)}}}function hn(e){let n,r,o;return r=new ln({props:{type:xe.successfullyLoggedIn,close:e[3]}}),{c(){n=x("div"),he(r.$$.fragment),O(n,"class","notification-container svelte-c0mafs")},m(e,t){k(e,n,t),fe(r,n,null),o=!0},p:t,i(e){o||(le(r.$$.fragment,e),o=!0)},o(e){ue(r.$$.fragment,e),o=!1},d(e){e&&E(n),me(r)}}}function fn(e){let t,n;return t=new Ot({props:{onboardingStep:e[8],step:e[10]+1}}),{c(){he(t.$$.fragment)},m(e,r){fe(t,e,r),n=!0},i(e){n||(le(t.$$.fragment,e),n=!0)},o(e){ue(t.$$.fragment,e),n=!1},d(e){me(t,e)}}}function mn(e){let t,n,r=e[2]===e[10]+1&&fn(e);return{c(){r&&r.c(),t=R()},m(e,o){r&&r.m(e,o),k(e,t,o),n=!0},p(e,n){e[2]===e[10]+1?r?4&n&&le(r,1):(r=fn(e),r.c(),le(r,1),r.m(t.parentNode,t)):r&&(ae(),ue(r,1,1,(()=>{r=null})),ce())},i(e){n||(le(r),n=!0)},o(e){ue(r),n=!1},d(e){e&&E(t),r&&r.d(e)}}}function gn(e){let t,n,r=pe(Te),o=[];for(let t=0;t<r.length;t+=1)o[t]=mn(dn(e,r,t));const s=e=>ue(o[e],1,1,(()=>{o[e]=null}));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=R()},m(e,r){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,r);k(e,t,r),n=!0},p(e,n){if(4&n){let i;for(r=pe(Te),i=0;i<r.length;i+=1){const s=dn(e,r,i);o[i]?(o[i].p(s,n),le(o[i],1)):(o[i]=mn(s),o[i].c(),le(o[i],1),o[i].m(t.parentNode,t))}for(ae(),i=r.length;i<o.length;i+=1)s(i);ce()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)le(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)ue(o[e]);n=!1},d(e){e&&E(t),T(o,e)}}}function yn(e){let t,n,r,o,s=function(e){let t,n,r,o,s=e[0]&&pn(e),i=e[1]&&hn(e);return r=new lt({props:{wideMode:1===e[2],$$slots:{default:[gn]},$$scope:{ctx:e}}}),{c(){s&&s.c(),t=C(),i&&i.c(),n=C(),he(r.$$.fragment)},m(e,a){s&&s.m(e,a),k(e,t,a),i&&i.m(e,a),k(e,n,a),fe(r,e,a),o=!0},p(e,o){e[0]?s?(s.p(e,o),1&o&&le(s,1)):(s=pn(e),s.c(),le(s,1),s.m(t.parentNode,t)):s&&(ae(),ue(s,1,1,(()=>{s=null})),ce()),e[1]?i?(i.p(e,o),2&o&&le(i,1)):(i=hn(e),i.c(),le(i,1),i.m(n.parentNode,n)):i&&(ae(),ue(i,1,1,(()=>{i=null})),ce());const a={};4&o&&(a.wideMode=1===e[2]),2052&o&&(a.$$scope={dirty:o,ctx:e}),r.$set(a)},i(e){o||(le(s),le(i),le(r.$$.fragment,e),o=!0)},o(e){ue(s),ue(i),ue(r.$$.fragment,e),o=!1},d(e){e&&(E(t),E(n)),s&&s.d(e),i&&i.d(e),me(r,e)}}}(e);return{c(){s&&s.c(),t=R()},m(e,i){s&&s.m(e,i),k(e,t,i),n=!0,r||(o=A(un,"hashchange",Ee),r=!0)},p(e,[t]){s.p(e,t)},i(e){n||(le(s),n=!0)},o(e){ue(s),n=!1},d(e){e&&E(t),s&&s.d(e),r=!1,o()}}}function _n(e,t,n){let r,o;l(e,We,(e=>n(5,r=e))),l(e,we,(e=>n(2,o=e))),z("text_direction",je());let s=performance.now(),i=performance.now(),a=!1,c=!1;function u(e,t,n){const r=performance.now();qe({action:"dlTrackOnboardingStepChange",payload:{previousStep:e,newStep:t,trigger:n,secondsOnOnboarding:Math.floor((r-s)/1e3),secondsOnPreviousStep:Math.floor((r-i)/1e3)}}),i=performance.now()}return z("deepl_onboarding_navigation",{currentStep:we,settings:We,trackStepChange:u}),H((()=>{u(0,1,Me),"#login_successful"!==window.location.hash&&"#signup_successful"!==window.location.hash||(n(0,a=!0),d(We,r.hasUserSeenAccountCreationOnboarding=!0,r),window.history.replaceState({},document.title,window.location.pathname)),"#successful_login"===window.location.hash&&(n(1,c=!0),d(We,r.hasUserSeenAccountCreationOnboarding=!0,r))})),Ee(),[a,c,o,function(){n(0,a=!1),n(1,c=!1)}]}const vn=Object.prototype.toString;function bn(e){switch(vn.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Mn(e,Error)}}function Sn(e,t){return vn.call(e)===`[object ${t}]`}function wn(e){return Sn(e,"ErrorEvent")}function kn(e){return Sn(e,"DOMError")}function En(e){return Sn(e,"String")}function Tn(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function xn(e){return null===e||Tn(e)||"object"!=typeof e&&"function"!=typeof e}function In(e){return Sn(e,"Object")}function Cn(e){return"undefined"!=typeof Event&&Mn(e,Event)}function Rn(e){return Sn(e,"RegExp")}function An(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function On(e){return"number"==typeof e&&e!=e}function Mn(e,t){try{return e instanceof t}catch(e){return!1}}function Nn(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function Ln(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function Dn(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let s=Math.min(o+140,r);return s>r-5&&(s=r),s===r&&(o=Math.max(s-140,0)),n=n.slice(o,s),o>0&&(n=`'{snip} ${n}`),s<r&&(n+=" {snip}"),n}function Pn(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{Nn(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function $n(e,t=[],n=!1){return t.some((t=>function(e,t,n=!1){return!!En(e)&&(Rn(t)?t.test(e):!!En(t)&&(n?e===t:e.includes(t)))}(e,t,n)))}function Fn(e,t,n=250,r,o,s,i){if(!(s.exception&&s.exception.values&&i&&Mn(i.originalException,Error)))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var c,l;a&&(s.exception.values=(c=jn(e,t,o,i.originalException,r,s.exception.values,a,0),l=n,c.map((e=>(e.value&&(e.value=Ln(e.value,l)),e)))))}function jn(e,t,n,r,o,s,i,a){if(s.length>=n+1)return s;let c=[...s];if(Mn(r[o],Error)){Un(i,a);const s=e(t,r[o]),l=c.length;Bn(s,o,l,a),c=jn(e,t,n,r[o],o,[s,...c],s,l)}return Array.isArray(r.errors)&&r.errors.forEach(((r,s)=>{if(Mn(r,Error)){Un(i,a);const l=e(t,r),u=c.length;Bn(l,`errors[${s}]`,u,a),c=jn(e,t,n,r,o,[l,...c],l,u)}})),c}function Un(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function Bn(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function Hn(e){return e&&e.Math==Math?e:void 0}const zn="object"==typeof globalThis&&Hn(globalThis)||"object"==typeof window&&Hn(window)||"object"==typeof self&&Hn(self)||"object"==typeof global&&Hn(global)||function(){return this}()||{};function qn(){return zn}function Wn(e,t,n){const r=n||zn,o=r.__SENTRY__=r.__SENTRY__||{};return o[e]||(o[e]=t())}const Gn=qn(),Vn=80;function Yn(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let s=0,i=0;const a=" > ",c=a.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||Vn;for(;n&&s++<r&&(l=Kn(n,u),!("html"===l||s>1&&i+o.length*c+l.length>=d));)o.push(l),i+=l.length,n=n.parentNode;return o.reverse().join(a)}catch(e){return"<unknown>"}}function Kn(e,t){const n=e,r=[];let o,s,i,a,c;if(!n||!n.tagName)return"";if(Gn.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const l=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(l&&l.length)l.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),o=n.className,o&&En(o))for(s=o.split(/\s+/),c=0;c<s.length;c++)r.push(`.${s[c]}`);const u=["aria-label","type","name","title","alt"];for(c=0;c<u.length;c++)i=u[c],a=n.getAttribute(i),a&&r.push(`[${i}="${a}"]`);return r.join("")}function Xn(){try{return Gn.document.location.href}catch(e){return""}}function Jn(e){return Gn.document&&Gn.document.querySelector?Gn.document.querySelector(e):null}function Qn(e){if(!Gn.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const Zn="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,er=["debug","info","warn","error","log","assert","trace"],tr={};function nr(e){if(!("console"in zn))return e();const t=zn.console,n={},r=Object.keys(tr);r.forEach((e=>{const r=tr[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const rr=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Zn?er.forEach((n=>{t[n]=(...t)=>{e&&nr((()=>{zn.console[n](`Sentry Logger [${n}]:`,...t)}))}})):er.forEach((e=>{t[e]=()=>{}})),t}(),or=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function sr(e,t=!1){const{host:n,path:r,pass:o,port:s,projectId:i,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${i}`}function ir(e){const t=or.exec(e);if(!t)return void nr((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,o="",s,i="",a]=t.slice(1);let c="",l=a;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const e=l.match(/^\d+/);e&&(l=e[0])}return ar({host:s,pass:o,path:c,projectId:l,port:i,protocol:n,publicKey:r})}function ar(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function cr(e){const t="string"==typeof e?ir(e):ar(e);if(t&&function(e){if(!Zn)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(rr.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(rr.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(rr.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(rr.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}class lr extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function ur(e,t,n){if(!(t in e))return;const r=e[t],o=n(r);"function"==typeof o&&pr(o,r),e[t]=o}function dr(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){Zn&&rr.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function pr(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,dr(e,"__sentry_original__",t)}catch(e){}}function hr(e){return e.__sentry_original__}function fr(e){if(bn(e))return{message:e.message,name:e.name,stack:e.stack,...gr(e)};if(Cn(e)){const t={type:e.type,target:mr(e.target),currentTarget:mr(e.currentTarget),...gr(e)};return"undefined"!=typeof CustomEvent&&Mn(e,CustomEvent)&&(t.detail=e.detail),t}return e}function mr(e){try{return t=e,"undefined"!=typeof Element&&Mn(t,Element)?Yn(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function gr(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function yr(e){return _r(e,new Map)}function _r(e,t){if(function(e){if(!In(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.keys(e))void 0!==e[n]&&(r[n]=_r(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(_r(e,t))})),r}return e}const vr=50,br=/\(error: (.*)\)/,Sr=/captureMessage|captureException/;function wr(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const r=[],o=e.split("\n");for(let e=n;e<o.length;e++){const n=o[e];if(n.length>1024)continue;const s=br.test(n)?n.replace(br,"$1"):n;if(!s.match(/\S*Error: /)){for(const e of t){const t=e(s);if(t){r.push(t);break}}if(r.length>=vr)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop();t.reverse(),Sr.test(t[t.length-1].function||"")&&(t.pop(),Sr.test(t[t.length-1].function||"")&&t.pop());return t.slice(0,vr).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(r)}}const kr="<anonymous>";function Er(e){try{return e&&"function"==typeof e&&e.name||kr}catch(e){return kr}}const Tr={},xr={};function Ir(e,t){Tr[e]=Tr[e]||[],Tr[e].push(t)}function Cr(e,t){xr[e]||(t(),xr[e]=!0)}function Rr(e,t){const n=e&&Tr[e];if(n)for(const r of n)try{r(t)}catch(t){Zn&&rr.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Er(r)}\nError:`,t)}}function Ar(e){const t="console";Ir(t,e),Cr(t,Or)}function Or(){"console"in zn&&er.forEach((function(e){e in zn.console&&ur(zn.console,e,(function(t){return tr[e]=t,function(...t){Rr("console",{args:t,level:e});const n=tr[e];n&&n.apply(zn.console,t)}}))}))}function Mr(){const e=zn,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function Nr(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Lr(e){const{message:t,event_id:n}=e;if(t)return t;const r=Nr(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Dr(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],s=o[0]=o[0]||{};s.value||(s.value=t||""),s.type||(s.type=n||"Error")}function Pr(e,t){const n=Nr(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function $r(e){if(e&&e.__sentry_captured__)return!0;try{dr(e,"__sentry_captured__",!0)}catch(e){}return!1}function Fr(e){return Array.isArray(e)?e:[e]}const jr=zn,Ur=1e3;let Br,Hr,zr;function qr(e){Ir("dom",e),Cr("dom",Wr)}function Wr(){if(!jr.document)return;const e=Rr.bind(null,"dom"),t=Gr(e,!0);jr.document.addEventListener("click",t,!1),jr.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=jr[t]&&jr[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(ur(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this,s=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},i=s[n]=s[n]||{refCount:0};if(!i.handler){const r=Gr(e);i.handler=r,t.call(this,n,r,o)}i.refCount++}catch(e){}return t.call(this,n,r,o)}})),ur(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,o=n.__sentry_instrumentation_handlers__||{},s=o[t];s&&(s.refCount--,s.refCount<=0&&(e.call(this,t,s.handler,r),s.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function Gr(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;dr(n,"_sentryCaptured",!0),r&&!r._sentryId&&dr(r,"_sentryId",Mr());const o="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==Hr)return!1;try{if(!e.target||e.target._sentryId!==zr)return!1}catch(e){}return!0}(n)){e({event:n,name:o,global:t}),Hr=n.type,zr=r?r._sentryId:void 0}clearTimeout(Br),Br=jr.setTimeout((()=>{zr=void 0,Hr=void 0}),Ur)}}const Vr=qn();function Yr(){if(!("fetch"in Vr))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function Kr(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Xr(){if("string"==typeof EdgeRuntime)return!0;if(!Yr())return!1;if(Kr(Vr.fetch))return!0;let e=!1;const t=Vr.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Kr(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){Zn&&rr.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}function Jr(e){const t="fetch";Ir(t,e),Cr(t,Qr)}function Qr(){Xr()&&ur(zn,"fetch",(function(e){return function(...t){const{method:n,url:r}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:eo(t),method:Zr(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:eo(t),method:Zr(t,"method")?String(t.method).toUpperCase():"GET"}}(t),o={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Rr("fetch",{...o}),e.apply(zn,t).then((e=>(Rr("fetch",{...o,endTimestamp:Date.now(),response:e}),e)),(e=>{throw Rr("fetch",{...o,endTimestamp:Date.now(),error:e}),e}))}}))}function Zr(e,t){return!!e&&"object"==typeof e&&!!e[t]}function eo(e){return"string"==typeof e?e:e?Zr(e,"url")?e.url:e.toString?e.toString():"":""}let to=null;function no(e){const t="error";Ir(t,e),Cr(t,ro)}function ro(){to=zn.onerror,zn.onerror=function(e,t,n,r,o){return Rr("error",{column:r,error:o,line:n,msg:e,url:t}),!(!to||to.__SENTRY_LOADER__)&&to.apply(this,arguments)},zn.onerror.__SENTRY_INSTRUMENTED__=!0}let oo=null;function so(e){const t="unhandledrejection";Ir(t,e),Cr(t,io)}function io(){oo=zn.onunhandledrejection,zn.onunhandledrejection=function(e){return Rr("unhandledrejection",e),!(oo&&!oo.__SENTRY_LOADER__)||oo.apply(this,arguments)},zn.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const ao=qn();const co=zn;let lo;function uo(e){const t="history";Ir(t,e),Cr(t,po)}function po(){if(!function(){const e=ao.chrome,t=e&&e.app&&e.app.runtime,n="history"in ao&&!!ao.history.pushState&&!!ao.history.replaceState;return!t&&n}())return;const e=co.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=lo,t=String(n);lo=t;Rr("history",{from:e,to:t})}return e.apply(this,t)}}co.onpopstate=function(...t){const n=co.location.href,r=lo;lo=n;if(Rr("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},ur(co.history,"pushState",t),ur(co.history,"replaceState",t)}const ho=zn,fo="__sentry_xhr_v3__";function mo(e){Ir("xhr",e),Cr("xhr",go)}function go(){if(!ho.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;ur(e,"open",(function(e){return function(...t){const n=Date.now(),r=En(t[0])?t[0].toUpperCase():void 0,o=function(e){if(En(e))return e;try{return e.toString()}catch(e){}return}(t[1]);if(!r||!o)return e.apply(this,t);this[fo]={method:r,url:o,request_headers:{}},"POST"===r&&o.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const s=()=>{const e=this[fo];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}Rr("xhr",{args:[r,o],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?ur(this,"onreadystatechange",(function(e){return function(...t){return s(),e.apply(this,t)}})):this.addEventListener("readystatechange",s),ur(this,"setRequestHeader",(function(e){return function(...t){const[n,r]=t,o=this[fo];return o&&En(n)&&En(r)&&(o.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),ur(e,"send",(function(e){return function(...t){const n=this[fo];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);return Rr("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}function yo(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function _o(e,t){return e.require(t)}function vo(e){let t;try{t=_o(module,e)}catch(e){}try{const{cwd:n}=_o(module,"process");t=_o(module,`${n()}/node_modules/${e}`)}catch(e){}return t}function bo(){return"undefined"!=typeof window&&(!yo()||void 0!==zn.process&&"renderer"===zn.process.type)}function So(e,t=100,n=1/0){try{return ko("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function wo(e,t=3,n=102400){const r=So(e,t);return o=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o))>n?wo(e,t-1,n):r;var o}function ko(e,t,n=1/0,r=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[s,i]=o;if(null==t||["number","boolean","string"].includes(typeof t)&&!On(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(Nn(t))return"[VueViewModel]";if(In(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${Er(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(s(t))return"[Circular ~]";const l=t;if(l&&"function"==typeof l.toJSON)try{return ko("",l.toJSON(),c-1,r,o)}catch(e){}const u=Array.isArray(t)?[]:{};let d=0;const p=fr(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){u[e]="[MaxProperties ~]";break}const t=p[e];u[e]=ko(e,t,c-1,r,o),d++}return i(t),u}const Eo=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function To(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n="/"===o.charAt(0))}return t=function(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}(t.split("/").filter((e=>!!e)),!n).join("/"),(n?"/":"")+t||"."}function xo(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function Io(e,t){let n=function(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=Eo.exec(t);return n?n.slice(1):[]}(e)[2];return t&&n.slice(-1*t.length)===t&&(n=n.slice(0,n.length-t.length)),n}var Co;function Ro(e){return new Oo((t=>{t(e)}))}function Ao(e){return new Oo(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(Co||(Co={}));class Oo{constructor(e){Oo.prototype.__init.call(this),Oo.prototype.__init2.call(this),Oo.prototype.__init3.call(this),Oo.prototype.__init4.call(this),this._state=Co.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new Oo(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new Oo(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(Co.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Co.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Co.PENDING&&(An(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Co.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Co.RESOLVED&&e[1](this._value),this._state===Co.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function Mo(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return Ao(new lr("Not adding Promise because buffer limit was reached."));const o=r();return-1===t.indexOf(o)&&t.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(e){return new Oo(((n,r)=>{let o=t.length;if(!o)return n(!0);const s=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{Ro(e).then((()=>{--o||(clearTimeout(s),n(!0))}),r)}))}))}}}function No(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function Lo(e){return e.split(/[\?#]/,1)[0]}function Do(e){return e.split(/\\?\//).filter((e=>e.length>0&&","!==e)).length}const Po={ip:!1,request:!0,transaction:!0,user:!0},$o=["cookies","data","headers","method","query_string","url"],Fo=["id","username","email"];function jo(e,t={}){const n=e.method&&e.method.toUpperCase();let r="",o="url";t.customRoute||e.route?(r=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,o="route"):(e.originalUrl||e.url)&&(r=Lo(e.originalUrl||e.url||""));let s="";return t.method&&n&&(s+=n),t.method&&t.path&&(s+=" "),t.path&&r&&(s+=r),[s,o]}function Uo(e,t){const{include:n=$o,deps:r}=t||{},o={},s=e.headers||{},i=e.method,a=s.host||e.hostname||e.host||"<no host>",c="https"===e.protocol||e.socket&&e.socket.encrypted?"https":"http",l=e.originalUrl||e.url||"",u=l.startsWith(c)?l:`${c}://${a}${l}`;return n.forEach((t=>{switch(t){case"headers":o.headers=s,n.includes("cookies")||delete o.headers.cookie;break;case"method":o.method=i;break;case"url":o.url=u;break;case"cookies":o.cookies=e.cookies||s.cookie&&function(e){const t={};let n=0;for(;n<e.length;){const r=e.indexOf("=",n);if(-1===r)break;let o=e.indexOf(";",n);if(-1===o)o=e.length;else if(o<r){n=e.lastIndexOf(";",r-1)+1;continue}const s=e.slice(n,r).trim();if(void 0===t[s]){let n=e.slice(r+1,o).trim();34===n.charCodeAt(0)&&(n=n.slice(1,-1));try{t[s]=-1!==n.indexOf("%")?decodeURIComponent(n):n}catch(e){t[s]=n}}n=o+1}return t}(s.cookie)||{};break;case"query_string":o.query_string=function(e,t){let n=e.originalUrl||e.url||"";if(!n)return;n.startsWith("/")&&(n=`http://dogs.are.great${n}`);try{return e.query||"undefined"!=typeof URL&&new URL(n).search.slice(1)||t&&t.url&&t.url.parse(n).query||void 0}catch(e){return}}(e,r);break;case"data":if("GET"===i||"HEAD"===i)break;void 0!==e.body&&(o.data=En(e.body)?e.body:JSON.stringify(So(e.body)));break;default:({}).hasOwnProperty.call(e,t)&&(o[t]=e[t])}})),o}function Bo(e,t,n){const r={...Po,...n&&n.include};if(r.request){const o=Array.isArray(r.request)?Uo(t,{include:r.request,deps:n&&n.deps}):Uo(t,{deps:n&&n.deps});e.request={...e.request,...o}}if(r.user){const n=t.user&&In(t.user)?function(e,t){const n={};return(Array.isArray(t)?t:Fo).forEach((t=>{e&&t in e&&(n[t]=e[t])})),n}(t.user,r.user):{};Object.keys(n).length&&(e.user={...e.user,...n})}if(r.ip){const n=t.ip||t.socket&&t.socket.remoteAddress;n&&(e.user={...e.user,ip_address:n})}return r.transaction&&!e.transaction&&(e.transaction=function(e,t){switch(t){case"path":return jo(e,{path:!0})[0];case"handler":return e.route&&e.route.stack&&e.route.stack[0]&&e.route.stack[0].name||"<anonymous>";default:return jo(e,{path:!0,method:!0,customRoute:e._reconstructedRoute?e._reconstructedRoute:void 0})[0]}}(t,r.transaction)),e}const Ho=["fatal","error","warning","log","info","debug"];function zo(e){return"warn"===e?"warning":Ho.includes(e)?e:"log"}const qo=1e3;function Wo(){return Date.now()/qo}const Go=function(){const{performance:e}=zn;if(!e||!e.now)return Wo;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/qo}(),Vo=(()=>{const{performance:e}=zn;if(!e||!e.now)return;const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=o<t,i=e.timing&&e.timing.navigationStart,a="number"==typeof i?Math.abs(i+n-r):t;return s||a<t?o<=a?e.timeOrigin:i:r})(),Yo="baggage",Ko="sentry-",Xo=/^sentry-/,Jo=8192;function Qo(e){if(!En(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce(((e,t)=>{const n=es(t);for(const t of Object.keys(n))e[t]=n[t];return e}),{});else{if(!e)return;t=es(e)}const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(Xo)){e[t.slice(Ko.length)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function Zo(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],r)=>{const o=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,s=0===r?o:`${e},${o}`;return s.length>Jo?(Zn&&rr.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):s}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${Ko}${t}`]=n),e)),{}))}function es(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(e[t]=n,e)),{})}const ts=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function ns(e){if(!e)return;const t=e.match(ts);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function rs(e,t){const n=ns(e),r=Qo(t),{traceId:o,parentSpanId:s,parentSampled:i}=n||{};return n?{traceId:o||Mr(),parentSpanId:s||Mr().substring(16),spanId:Mr().substring(16),sampled:i,dsc:r||{}}:{traceId:o||Mr(),spanId:Mr().substring(16)}}function os(e=Mr(),t=Mr().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function ss(e,t=[]){return[e,t]}function is(e,t){const[n,r]=e;return[n,[...r,t]]}function as(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function cs(e,t){return(t||new TextEncoder).encode(e)}function ls(e,t){const[n,r]=e;let o=JSON.stringify(n);function s(e){"string"==typeof o?o="string"==typeof e?o+e:[cs(o,t),e]:o.push("string"==typeof e?cs(e,t):e)}for(const e of r){const[t,n]=e;if(s(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)s(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(So(n))}s(e)}}return"string"==typeof o?o:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(o)}function us(e,t){const n="string"==typeof e.data?cs(e.data,t):e.data;return[yr({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const ds={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function ps(e){return ds[e]}function hs(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function fs(e,t,n,r){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:sr(r)},...o&&{trace:yr({...o})}}}const ms=6e4;function gs(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?ms:r-t}function ys(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function _s(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},s=n&&n["x-sentry-rate-limits"],i=n&&n["retry-after"];if(s)for(const e of s.trim().split(",")){const[t,n,,,s]=e.split(":",5),i=parseInt(t,10),a=1e3*(isNaN(i)?60:i);if(n)for(const e of n.split(";"))"metric_bucket"===e&&s&&!s.split(";").includes("custom")||(o[e]=r+a);else o.all=r+a}else i?o.all=r+gs(i,r):429===t&&(o.all=r+6e4);return o}function vs(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=function(e,t){return e(t.stack||"",1)}(e,t);return r.length&&(n.stacktrace={frames:r}),n}function bs(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}const Ss="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ws="production";function ks(){return Wn("globalEventProcessors",(()=>[]))}function Es(e){ks().push(e)}function Ts(e,t,n,r=0){return new Oo(((o,s)=>{const i=e[r];if(null===t||"function"!=typeof i)o(t);else{const a=i({...t},n);Ss&&i.id&&null===a&&rr.log(`Event processor "${i.id}" dropped event`),An(a)?a.then((t=>Ts(e,t,n,r+1).then(o))).then(null,s):Ts(e,a,n,r+1).then(o).then(null,s)}}))}function xs(e){const t=Go(),n={sid:Mr(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return yr({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&Is(n,e),n}function Is(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Go(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Mr()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Cs(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),Is(e,n)}const Rs=1;function As(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:s,status:i,tags:a,origin:c}=Ls(e);return yr({data:r,op:o,parent_span_id:s,span_id:t,status:i,tags:a,trace_id:n,origin:c})}function Os(e){const{traceId:t,spanId:n}=e.spanContext();return os(t,n,Ds(e))}function Ms(e){return"number"==typeof e?Ns(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Ns(e.getTime()):Go()}function Ns(e){return e>9999999999?e/1e3:e}function Ls(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function Ds(e){const{traceFlags:t}=e.spanContext();return Boolean(t&Rs)}function Ps(e,t,n,r,o,s){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||Mr(),timestamp:t.timestamp||Wo()},l=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:o,maxValueLength:s=250}=t;"environment"in e||(e.environment="environment"in t?n:ws);void 0===e.release&&void 0!==r&&(e.release=r);void 0===e.dist&&void 0!==o&&(e.dist=o);e.message&&(e.message=Ln(e.message,s));const i=e.exception&&e.exception.values&&e.exception.values[0];i&&i.value&&(i.value=Ln(i.value,s));const a=e.request;a&&a.url&&(a.url=Ln(a.url,s))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,l),void 0===t.type&&function(e,t){const n=zn._sentryDebugIds;if(!n)return;let r;const o=$s.get(t);o?r=o:(r=new Map,$s.set(t,r));const s=Object.keys(n).reduce(((e,o)=>{let s;const i=r.get(o);i?s=i:(s=t(o),r.set(o,s));for(let t=s.length-1;t>=0;t--){const r=s[t];if(r.filename){e[r.filename]=n[o];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=s[e.filename])}))}))}catch(e){}}(c,e.stackParser);const u=function(e,t){if(!t)return e;const n=e?e.clone():new si;return n.update(t),n}(r,n.captureContext);n.mechanism&&Pr(c,n.mechanism);const d=o&&o.getEventProcessors?o.getEventProcessors():[],p=function(){oi||(oi=new si);return oi}().getScopeData();if(s){ni(p,s.getScopeData())}if(u){ni(p,u.getScopeData())}const h=[...n.attachments||[],...p.attachments];h.length&&(n.attachments=h),ti(c,p);return Ts([...d,...ks(),...p.eventProcessors],c,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof i&&i>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:So(e.data,t,n)}})))},...e.user&&{user:So(e.user,t,n)},...e.contexts&&{contexts:So(e.contexts,t,n)},...e.extra&&{extra:So(e.extra,t,n)}};e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=So(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>{const r=Ls(e).data;return r&&(e.data=So(r,t,n)),e})));return r}(e,i,a):e)))}const $s=new WeakMap;function Fs(e){if(e)return function(e){return e instanceof si||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>js.includes(e)))}(e)?{captureContext:e}:e}const js=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Us(e,t){return hi().captureException(e,Fs(t))}function Bs(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return hi().captureMessage(e,n,r)}function Hs(e,t){return hi().captureEvent(e,t)}function zs(e,t){hi().addBreadcrumb(e,t)}function qs(e,t){hi().setContext(e,t)}function Ws(...e){const t=hi();if(2===e.length){const[n,r]=e;return n?t.withScope((()=>(t.getStackTop().scope=n,r(n)))):t.withScope(r)}return t.withScope(e[0])}function Gs(){return hi().getClient()}function Vs(){return hi().getScope()}function Ys(e){const t=Gs(),n=fi(),r=Vs(),{release:o,environment:s=ws}=t&&t.getOptions()||{},{userAgent:i}=zn.navigator||{},a=xs({release:o,environment:s,user:r.getUser()||n.getUser(),...i&&{userAgent:i},...e}),c=n.getSession();return c&&"ok"===c.status&&Is(c,{status:"exited"}),Ks(),n.setSession(a),r.setSession(a),a}function Ks(){const e=fi(),t=Vs(),n=t.getSession()||e.getSession();n&&Cs(n),Xs(),e.setSession(),t.setSession()}function Xs(){const e=fi(),t=Vs(),n=Gs(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function Js(e=!1){e?Ks():Xs()}function Qs(e){return e.transaction}function Zs(e,t,n){const r=t.getOptions(),{publicKey:o}=t.getDsn()||{},{segment:s}=n&&n.getUser()||{},i=yr({environment:r.environment||ws,release:r.release,user_segment:s,public_key:o,trace_id:e});return t.emit&&t.emit("createDsc",i),i}function ei(e){const t=Gs();if(!t)return{};const n=Zs(Ls(e).trace_id||"",t,Vs()),r=Qs(e);if(!r)return n;const o=r&&r._frozenDynamicSamplingContext;if(o)return o;const{sampleRate:s,source:i}=r.metadata;null!=s&&(n.sample_rate=`${s}`);const a=Ls(r);return i&&"url"!==i&&(n.transaction=a.description),n.sampled=String(Ds(r)),t.emit&&t.emit("createDsc",n),n}function ti(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:s}=t;!function(e,t){const{extra:n,tags:r,user:o,contexts:s,level:i,transactionName:a}=t,c=yr(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const l=yr(r);l&&Object.keys(l).length&&(e.tags={...l,...e.tags});const u=yr(o);u&&Object.keys(u).length&&(e.user={...u,...e.user});const d=yr(s);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});i&&(e.level=i);a&&(e.transaction=a)}(e,t),r&&function(e,t){e.contexts={trace:As(t),...e.contexts};const n=Qs(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:ei(t),...e.sdkProcessingMetadata};const r=Ls(n).description;r&&(e.tags={transaction:r,...e.tags})}}(e,r),function(e,t){e.fingerprint=e.fingerprint?Fr(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,s)}function ni(e,t){const{extra:n,tags:r,user:o,contexts:s,level:i,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:d,propagationContext:p,transactionName:h,span:f}=t;ri(e,"extra",n),ri(e,"tags",r),ri(e,"user",o),ri(e,"contexts",s),ri(e,"sdkProcessingMetadata",a),i&&(e.level=i),h&&(e.transactionName=h),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function ri(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}let oi;class si{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=ii()}static clone(e){return e?e.clone():new si}clone(){const e=new si;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&Is(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof si){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(In(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=ii(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:Wo(),...e},o=this._breadcrumbs;return o.push(r),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:r,_extra:o,_user:s,_level:i,_fingerprint:a,_eventProcessors:c,_propagationContext:l,_sdkProcessingMetadata:u,_transactionName:d,_span:p}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:r,extra:o,user:s,level:i,fingerprint:a||[],eventProcessors:c,propagationContext:l,sdkProcessingMetadata:u,transactionName:d,span:p}}applyToEvent(e,t={},n=[]){ti(e,this.getScopeData());return Ts([...n,...ks(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:Mr();if(!this._client)return rr.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:Mr();if(!this._client)return rr.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Mr();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(rr.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function ii(){return{traceId:Mr(),spanId:Mr().substring(16)}}const ai="7.116.0",ci=parseFloat(ai),li=100;class ui{constructor(e,t,n,r=ci){let o,s;this._version=r,t?o=t:(o=new si,o.setClient(e)),n?s=n:(s=new si,s.setClient(e)),this._stack=[{scope:o}],e&&this.bindClient(e),this._isolationScope=s}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(e){throw this.popScope(),e}return An(n)?n.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:Mr(),r=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:r,...t,event_id:n}),n}captureMessage(e,t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:Mr(),o=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r}),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Mr();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:s=li}=r.getOptions&&r.getOptions()||{};if(s<=0)return;const i={timestamp:Wo(),...e},a=o?nr((()=>o(i,t))):i;null!==a&&(r.emit&&r.emit("beforeAddBreadcrumb",a,t),n.addBreadcrumb(a,s))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=pi(this);try{e(this)}finally{pi(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return Ss&&rr.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(Ss&&!n){this.getClient()?rr.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):rr.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&Cs(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:o=ws}=n&&n.getOptions()||{},{userAgent:s}=zn.navigator||{},i=xs({release:r,environment:o,user:t.getUser(),...s&&{userAgent:s},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&Is(a,{status:"exited"}),this.endSession(),t.setSession(i),i}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){const n=di().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);Ss&&rr.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function di(){return zn.__SENTRY__=zn.__SENTRY__||{extensions:{},hub:void 0},zn}function pi(e){const t=di(),n=gi(t);return yi(t,e),n}function hi(){const e=di();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=di()){t=e,t&&t.__SENTRY__&&t.__SENTRY__.hub&&!gi(e).isOlderThan(ci)||yi(e,new ui);var t;return gi(e)}(e)}function fi(){return hi().getIsolationScope()}function mi(e,t={}){const n=di();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function gi(e){return Wn("hub",(()=>new ui),e)}function yi(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}function _i(e){return(e||hi()).getScope().getTransaction()}const vi=ns;let bi=!1;function Si(){const e=_i();if(e){const t="internal_error";Ss&&rr.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}var wi;function ki(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}Si.tag="sentry_tracingErrorCallback",function(e){e.Ok="ok";e.DeadlineExceeded="deadline_exceeded";e.Unauthenticated="unauthenticated";e.PermissionDenied="permission_denied";e.NotFound="not_found";e.ResourceExhausted="resource_exhausted";e.InvalidArgument="invalid_argument";e.Unimplemented="unimplemented";e.Unavailable="unavailable";e.InternalError="internal_error";e.UnknownError="unknown_error";e.Cancelled="cancelled";e.AlreadyExists="already_exists";e.FailedPrecondition="failed_precondition";e.Aborted="aborted";e.OutOfRange="out_of_range";e.DataLoss="data_loss"}(wi||(wi={}));const Ei=ki;function Ti(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=ki(t);"unknown_error"!==n&&e.setStatus(n)}function xi(e,t,n=(()=>{})){let r;try{r=e()}catch(e){throw t(e),n(),e}return function(e,t,n){if(An(e))return e.then((e=>(n(),e)),(e=>{throw t(e),n(),e}));return n(),e}(r,t,n)}function Ii(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=Gs(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function Ci(e,t){const n=Mi(e);return mi((()=>Ws(e.scope,(r=>{const o=hi(),s=r.getSpan(),i=e.onlyIfParent&&!s?void 0:Oi(o,{parentSpan:s,spanContext:n,forceTransaction:e.forceTransaction,scope:r});return xi((()=>t(i)),(()=>{if(i){const{status:e}=Ls(i);e&&"ok"!==e||i.setStatus("internal_error")}}),(()=>i&&i.end()))}))))}function Ri(e){if(!Ii())return;const t=Mi(e),n=hi(),r=e.scope?e.scope.getSpan():Ai();if(e.onlyIfParent&&!r)return;const o=(e.scope||Vs()).clone();return Oi(n,{parentSpan:r,spanContext:t,forceTransaction:e.forceTransaction,scope:o})}function Ai(){return Vs().getSpan()}function Oi(e,{parentSpan:t,spanContext:n,forceTransaction:r,scope:o}){if(!Ii())return;const s=fi();let i;if(t&&!r)i=t.startChild(n);else if(t){const r=ei(t),{traceId:o,spanId:s}=t.spanContext(),a=Ds(t);i=e.startTransaction({traceId:o,parentSpanId:s,parentSampled:a,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}else{const{traceId:t,dsc:r,parentSpanId:a,sampled:c}={...s.getPropagationContext(),...o.getPropagationContext()};i=e.startTransaction({traceId:t,parentSpanId:a,parentSampled:c,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}return o.setSpan(i),function(e,t,n){e&&(dr(e,Li,n),dr(e,Ni,t))}(i,o,s),i}function Mi(e){if(e.startTime){const t={...e};return t.startTimestamp=Ms(e.startTime),delete t.startTime,t}return e}const Ni="_sentryScope",Li="_sentryIsolationScope";let Di;function Pi(e){return Di?Di.get(e):void 0}function $i(e){const t=Pi(e);if(!t)return;const n={};for(const[,[e,r]]of t)n[e]||(n[e]=[]),n[e].push(yr(r));return n}const Fi="sentry.source",ji="sentry.sample_rate",Ui="sentry.op",Bi="sentry.origin";class Hi{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class zi{constructor(e={}){this._traceId=e.traceId||Mr(),this._spanId=e.spanId||Mr().substring(16),this._startTime=e.startTimestamp||Go(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[Bi]:e.origin||"manual",[Ui]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),void 0!==e.exclusiveTime&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[Ui]}set op(e){this.setAttribute(Ui,e)}get origin(){return this._attributes[Bi]}set origin(e){this.setAttribute(Bi,e)}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?Rs:0}}startChild(e){const t=new zi({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);const n=Qs(this);if(t.transaction=n,Ss&&n){const r=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${Ls(t).description||"< unknown name >"}' (${n.spanContext().spanId}).`;rr.log(r),this._logMessage=r}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach((t=>this.setAttribute(t,e[t])))}setStatus(e){return this._status=e,this}setHttpStatus(e){return Ti(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return"ok"===this._status}finish(e){return this.end(e)}end(e){if(this._endTime)return;const t=Qs(this);if(Ss&&t&&t.spanContext().spanId!==this._spanId){const e=this._logMessage;e&&rr.log(e.replace("Starting","Finishing"))}this._endTime=Ms(e)}toTraceparent(){return Os(this)}toContext(){return yr({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return As(this)}getSpanJSON(){return yr({data:this._getData(),description:this._name,op:this._attributes[Ui],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Bi],_metrics_summary:$i(this),profile_id:this._attributes.profile_id,exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:t}=this,n=Object.keys(e).length>0,r=Object.keys(t).length>0;if(n||r)return n&&r?{...e,...t}:n?e:t}}class qi extends zi{constructor(e,t){super(e),this._contexts={},this._hub=t||hi(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[Fi]&&{source:this._attributes[Fi]},...this._attributes[ji]&&{sampleRate:this._attributes[ji]}}}set metadata(e){this._metadata=e}setName(e,t="custom"){this._name=e,this.setAttribute(Fi,t)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new Hi(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const t=Ms(e),n=this._finishTransaction(t);if(n)return this._hub.captureEvent(n)}toContext(){return yr({...super.toContext(),name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return ei(this)}setHub(e){this._hub=e}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(e){if(void 0!==this._endTime)return;this._name||(Ss&&rr.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this._sampled)return Ss&&rr.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((e=>e!==this&&Ls(e).timestamp)):[];if(this._trimEnd&&n.length>0){const e=n.map((e=>Ls(e).timestamp)).filter(Boolean);this._endTime=e.reduce(((e,t)=>e>t?e:t))}const{scope:r,isolationScope:o}={scope:(s=this)[Ni],isolationScope:s[Li]};var s;const{metadata:i}=this,{source:a}=i,c={contexts:{...this._contexts,trace:As(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...i,capturedSpanScope:r,capturedSpanIsolationScope:o,...yr({dynamicSamplingContext:ei(this)})},_metrics_summary:$i(this),...a&&{transaction_info:{source:a}}};return Object.keys(this._measurements).length>0&&(Ss&&rr.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),Ss&&rr.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const Wi={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},Gi=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class Vi extends Hi{constructor(e,t,n,r){super(r),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const t=e.end;e.end=(...n)=>(this._popActivity(e.spanContext().spanId),t.apply(e,n)),void 0===Ls(e).timestamp&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class Yi extends qi{constructor(e,t,n=Wi.idleTimeout,r=Wi.finalTimeout,o=Wi.heartbeatInterval,s=!1,i=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=r,this._heartbeatInterval=o,this._onScope=s,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=Gi[4],this._autoFinishAllowed=!i,s&&(Ss&&rr.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),t.getScope().setSpan(this)),i||this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=Gi[3],this.end())}),this._finalTimeout)}end(e){const t=Ms(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){Ss&&rr.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanContext().spanId===this.spanContext().spanId)return!0;Ls(e).timestamp||(e.setStatus("cancelled"),e.end(t),Ss&&rr.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const{start_timestamp:n,timestamp:r}=Ls(e),o=n&&n<t,s=(this._finalTimeout+this._idleTimeout)/1e3,i=r&&n&&r-n<s;if(Ss){const t=JSON.stringify(e,void 0,2);o?i||rr.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):rr.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return o&&i})),Ss&&rr.log("[Tracing] flushing IdleTransaction")}else Ss&&rr.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new Vi(t,n,this.spanContext().spanId,e),Ss&&rr.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=Gi[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(Ss&&rr.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=Gi[1],this.end(e))}),this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),Ss&&rr.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,Ss&&rr.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(Ss&&rr.log(`[Tracing] popActivity ${e}`),delete this.activities[e],Ss&&rr.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=Go();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=Gi[5],this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(Ss&&rr.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=Gi[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){Ss&&rr.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function Ki(e,t,n){if(!Ii(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setAttribute(ji,Number(e.sampled)),e;let r;return"function"==typeof t.tracesSampler?(r=t.tracesSampler(n),e.setAttribute(ji,Number(r))):void 0!==n.parentSampled?r=n.parentSampled:void 0!==t.tracesSampleRate?(r=t.tracesSampleRate,e.setAttribute(ji,Number(r))):(r=1,e.setAttribute(ji,r)),Xi(r)?r?(e.sampled=Math.random()<r,e.sampled?(Ss&&rr.log(`[Tracing] starting ${e.op} transaction - ${Ls(e).description}`),e):(Ss&&rr.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(Ss&&rr.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(Ss&&rr.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function Xi(e){return On(e)||"number"!=typeof e&&"boolean"!=typeof e?(Ss&&rr.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!(e<0||e>1)||(Ss&&rr.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1)}function Ji(){const e=this.getScope().getSpan();return e?{"sentry-trace":Os(e)}:{}}function Qi(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},o=r.instrumenter||"sentry",s=e.instrumenter||"sentry";o!==s&&(Ss&&rr.error(`A transaction was started with instrumenter=\`${s}\`, but the SDK is configured with the \`${o}\` instrumenter.\nThe transaction will not be sampled. Please use the ${o} instrumentation to start transactions.`),e.sampled=!1);let i=new qi(e,this);return i=Ki(i,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),i.isRecording()&&i.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",i),i}function Zi(e,t,n,r,o,s,i,a=!1){const c=e.getClient(),l=c&&c.getOptions()||{};let u=new Yi(t,e,n,r,i,o,a);return u=Ki(u,l,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...s}),u.isRecording()&&u.initSpanRecorder(l._experiments&&l._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",u),u}function ea(){const e=di();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=Qi),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=Ji),bi||(bi=!0,no(Si),so(Si)))}function ta(e,t,n){const r=_i();r&&r.setMeasurement(e,t,n)}function na(e,t,n,r){const o=hs(n),s=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const i=fs(e,o,r,t);delete e.sdkProcessingMetadata;return ss(i,[[{type:s},e]])}const ra="7";function oa(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function sa(e,t){return n={sentry_key:e.publicKey,sentry_version:ra,...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}function ia(e,t={}){const n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${oa(e)}${e.projectId}/envelope/`}(e)}?${sa(e,r)}`}const aa=[];function ca(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;t.forEach((e=>{e.isDefaultInstance=!0})),r=Array.isArray(n)?[...t,...n]:"function"==typeof n?Fr(n(t)):t;const o=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.keys(t).map((e=>t[e]))}(r),s=function(e,t){for(let n=0;n<e.length;n++)if(!0===t(e[n]))return n;return-1}(o,(e=>"Debug"===e.name));if(-1!==s){const[e]=o.splice(s,1);o.push(e)}return o}function la(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function ua(e,t,n){if(n[t.name])Ss&&rr.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===aa.indexOf(t.name)&&(t.setupOnce(Es,hi),aa.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}Ss&&rr.log(`Integration installed: ${t.name}`)}}function da(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}function pa(e){return e.replace(/[^\w\-./]+/gi,"")}const ha=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function fa(e){return[...e].reduce(((e,t)=>e+function(e){for(const[t,n]of ha)if(e===t)return n;return e}(t)),"")}function ma(e,t,n,r){const o={sent_at:(new Date).toISOString()};n&&n.sdk&&(o.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(o.dsn=sr(t));const s=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return ss(o,[s])}const ga="Not capturing exception because it's already been captured.";class ya{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=cr(e.dsn):Ss&&rr.warn("No DSN provided, client will not send events."),this._dsn){const t=ia(this._dsn,e);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if($r(e))return void(Ss&&rr.log(ga));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let o=n&&n.event_id;const s=Tn(e)?e:String(e),i=xn(e)?this.eventFromMessage(s,t,n):this.eventFromException(e,n);return this._process(i.then((e=>this._captureEvent(e,n,r))).then((e=>{o=e}))),o}captureEvent(e,t,n){if(t&&t.originalException&&$r(t.originalException))return void(Ss&&rr.log(ga));let r=t&&t.event_id;const o=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,o||n).then((e=>{r=e}))),r}captureSession(e){"string"!=typeof e.release?Ss&&rr.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Is(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):Ro(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return Ss&&rr.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];ua(this,e,this._integrations),t||la(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=na(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=is(n,us(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,r){const o=hs(n);return ss({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:sr(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const n=`${e}:${t}`;Ss&&rr.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}captureAggregateMetrics(e){Ss&&rr.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=ma(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&ua(e,t,n)})),n}(this,e),la(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let n=!1,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const s="ok"===e.status;(s&&0===e.errors||s&&n)&&(Is(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Oo((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r=fi()){const o=this.getOptions(),s=Object.keys(this._integrations);return!t.integrations&&s.length>0&&(t.integrations=s),this.emit("preprocessEvent",e,t),Ps(o,e,t,n,this,r).then((e=>{if(null===e)return e;const t={...r.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:r,spanId:o,parentSpanId:s,dsc:i}=t;e.contexts={trace:{trace_id:r,span_id:o,parent_span_id:s},...e.contexts};const a=i||Zs(r,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(Ss){const t=e;"log"===t.logLevel?rr.log(t.message):rr.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:o}=r,s=va(e),i=_a(e),a=e.type||"error",c=`before send for type \`${a}\``;if(i&&"number"==typeof o&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",e),Ao(new lr(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const l="replay_event"===a?"replay":a,u=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,u).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",l,e),new lr("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const o=function(e,t,n){const{beforeSend:r,beforeSendTransaction:o}=e;if(_a(t)&&r)return r(t,n);if(va(t)&&o)return o(t,n);return t}(r,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(An(e))return e.then((e=>{if(!In(e)&&null!==e)throw new lr(n);return e}),(e=>{throw new lr(`${t} rejected with ${e}`)}));if(!In(e)&&null!==e)throw new lr(n);return e}(o,c)})).then((r=>{if(null===r)throw this.recordDroppedEvent("before_send",l,e),new lr(`${c} returned \`null\`, will not send event.`,"log");const o=n&&n.getSession();!s&&o&&this._updateSessionFromEvent(o,r);const i=r.transaction_info;if(s&&i&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...i,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof lr)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new lr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{Ss&&rr.error("Error while sending event:",e)}));Ss&&rr.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}function _a(e){return void 0===e.type}function va(e){return"transaction"===e.type}function ba(e){const t=Gs();t&&t.addEventProcessor&&t.addEventProcessor(e)}const Sa={c:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},g:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},d:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},s:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}(e):e)).join(":")}}};function wa(e){const t=hi().getStackTop();t.client=e,t.scope.setClient(e)}const ka=30;function Ea(e,t,n=Mo(e.bufferSize||ka)){let r={};function o(o){const s=[];if(as(o,((t,n)=>{const o=ps(n);if(ys(r,o)){const r=Ta(t,n);e.recordDroppedEvent("ratelimit_backoff",o,r)}else s.push(t)})),0===s.length)return Ro();const i=ss(o[0],s),a=t=>{as(i,((n,r)=>{const o=Ta(n,r);e.recordDroppedEvent(t,ps(r),o)}))};return n.add((()=>t({body:ls(i,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&Ss&&rr.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=_s(r,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof lr)return Ss&&rr.error("Skipped sending event because buffer is full."),a("queue_overflow"),Ro();throw e}))}return o.__sentry__baseTransport__=!0,{send:o,flush:e=>n.drain(e)}}function Ta(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}const xa=100,Ia=5e3,Ca=36e5;function Ra(e,t){Ss&&rr.info(`[Offline]: ${e}`,t)}function Aa(e){return t=>{const n=e(t),r=t.createStore?t.createStore(t):void 0;let o,s=Ia;function i(e,n,r){return o=["replay_event","replay_recording","client_report"],!as(e,((e,t)=>o.includes(t)))&&(!t.shouldStore||t.shouldStore(e,n,r));var o}function a(e){r&&(o&&clearTimeout(o),o=setTimeout((async()=>{o=void 0;const e=await r.pop();e&&(Ra("Attempting to send previously queued event"),l(e).catch((e=>{Ra("Failed to retry sending",e)})))}),e),"number"!=typeof o&&o.unref&&o.unref())}function c(){o||(a(s),s=Math.min(2*s,Ca))}async function l(e){try{const t=await n.send(e);let r=xa;if(t)if(t.headers&&t.headers["retry-after"])r=gs(t.headers["retry-after"]);else if((t.statusCode||0)>=400)return t;return a(r),s=Ia,t}catch(t){if(r&&await i(e,t,s))return await r.insert(e),c(),Ra("Error sending. Event queued",t),{};throw t}}return t.flushAtStartup&&c(),{send:l,flush:e=>n.flush(e)}}}function Oa(e,t){let n;return as(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}function Ma(e){return[{type:"span"},e]}function Na(e,t){const n=t&&function(e){return void 0!==e.getClient}(t)?t.getClient():t,r=n&&n.getDsn(),o=n&&n.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,r)||function(e,t){if(!t)return!1;return La(e)===La(t)}(e,o)}function La(e){return"/"===e[e.length-1]?e.slice(0,-1):e}const Da=new Map,Pa=new Set;function $a(e,t){return function(e){if(zn._sentryModuleMetadata)for(const t of Object.keys(zn._sentryModuleMetadata)){const n=zn._sentryModuleMetadata[t];if(Pa.has(t))continue;Pa.add(t);const r=e(t);for(const e of r.reverse())if(e.filename){Da.set(e.filename,n);break}}}(e),Da.get(t)}const Fa="ModuleMetadata",ja=()=>({name:Fa,setupOnce(){},setup(e){"function"==typeof e.on&&e.on("beforeEnvelope",(e=>{as(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(!function(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}(t),e[1]=t)}}))}))},processEvent:(e,t,n)=>(function(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename)continue;const t=$a(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}(n.getOptions().stackParser,e),e)}),Ua=da(Fa,ja),Ba={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},Ha="RequestData";da(Ha,((e={})=>{const t=Bo,n={...Ba,...e,include:{method:!0,...Ba.include,...e.include,user:e.include&&"boolean"==typeof e.include.user?e.include.user:{...Ba.include.user,...(e.include||{}).user}}};return{name:Ha,setupOnce(){},processEvent(e,r,o){const{transactionNamingScheme:s}=n,{sdkProcessingMetadata:i={}}=e,a=i.request;if(!a)return e;const c=i.requestDataOptionsFromExpressHandler||i.requestDataOptionsFromGCPWrapper||function(e){const{transactionNamingScheme:t,include:{ip:n,user:r,...o}}=e,s=[];for(const[e,t]of Object.entries(o))t&&s.push(e);let i;if(void 0===r)i=!0;else if("boolean"==typeof r)i=r;else{const e=[];for(const[t,n]of Object.entries(r))n&&e.push(t);i=e}return{include:{ip:n,user:i,request:0!==s.length?s:void 0,transaction:t}}}(n),l=t(e,a,c);if("transaction"===e.type||"handler"===s)return l;const u=a._sentryTransaction;if(u){const e=Ls(u).description||"",t="sentry.javascript.nextjs"===function(e){try{return e.getOptions()._metadata.sdk.name}catch(e){return}}(o)?e.startsWith("/api"):"path"!==s,[n]=jo(a,{path:!0,method:t,customRoute:e});l.transaction=n}return l}}}));const za=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],qa=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],Wa="InboundFilters",Ga=(e={})=>({name:Wa,setupOnce(){},processEvent(t,n,r){const o=r.getOptions(),s=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:za],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:qa],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,o);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return Ss&&rr.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Lr(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));Ss&&0===t.length&&rr.error(`Could not extract message for event ${Lr(e)}`);return t}(e).some((e=>$n(e,t)))}(e,t.ignoreErrors))return Ss&&rr.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Lr(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&$n(n,t)}(e,t.ignoreTransactions))return Ss&&rr.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Lr(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=Ya(e);return!!n&&$n(n,t)}(e,t.denyUrls))return Ss&&rr.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Lr(e)}.\nUrl: ${Ya(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=Ya(e);return!n||$n(n,t)}(e,t.allowUrls))return Ss&&rr.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Lr(e)}.\nUrl: ${Ya(e)}`),!0;return!1}(t,s)?null:t}}),Va=da(Wa,Ga);function Ya(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return Ss&&rr.error(`Cannot extract url for event ${Lr(e)}`),null}}let Ka;const Xa="FunctionToString",Ja=new WeakMap,Qa=()=>({name:Xa,setupOnce(){Ka=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=hr(this),n=Ja.has(Gs())&&void 0!==t?t:this;return Ka.apply(n,e)}}catch(e){}},setup(e){Ja.set(e,!0)}}),Za=da(Xa,Qa),ec="LinkedErrors",tc=da(ec,((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:ec,setupOnce(){},preprocessEvent(e,r,o){const s=o.getOptions();Fn(vs,s.stackParser,s.maxValueLength,n,t,e,r)}}}));var nc=Object.freeze({__proto__:null,FunctionToString:Za,InboundFilters:Va,LinkedErrors:tc});class rc{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,n,r="none",o={},s=Go()){const i=Math.floor(s),a=t.replace(/[^\w\-.]+/gi,"_");const c=function(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[pa(n)]=fa(String(e[n])));return t}(o),l=function(e){return e.replace(/[^\w]+/gi,"_")}(r),u=function(e,t,n,r){return`${e}${t}${n}${Object.entries(yr(r)).sort(((e,t)=>e[0].localeCompare(t[0])))}`}(e,a,l,c);let d=this._buckets.get(u);const p=d&&"s"===e?d.metric.weight:0;d?(d.metric.add(n),d.timestamp<i&&(d.timestamp=i)):(d={metric:new Sa[e](n),timestamp:i,metricType:e,name:a,unit:l,tags:c},this._buckets.set(u,d));!function(e,t,n,r,o,s){const i=Ai();if(i){const a=Pi(i)||new Map,c=`${e}:${t}@${r}`,l=a.get(s);if(l){const[,e]=l;a.set(s,[c,{min:Math.min(e.min,n),max:Math.max(e.max,n),count:e.count+=1,sum:e.sum+=n,tags:e.tags}])}else a.set(s,[c,{min:n,max:n,count:1,sum:n,tags:o}]);Di||(Di=new WeakMap),Di.set(i,a)}}(e,a,"string"==typeof n?d.metric.weight-p:n,l,o,u)}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const e=Array.from(this._buckets).map((([,e])=>e));this._client.captureAggregateMetrics(e)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const oc="MetricsAggregator",sc=()=>({name:oc,setupOnce(){},setup(e){e.metricsAggregator=new rc(e)}});function ic(e,t,n,r={}){const o=Gs(),s=Vs();if(o){if(!o.metricsAggregator)return void(Ss&&rr.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs"));const{unit:i,tags:a,timestamp:c}=r,{release:l,environment:u}=o.getOptions(),d=s.getTransaction(),p={};l&&(p.release=l),u&&(p.environment=u),d&&(p.transaction=Ls(d).description||""),Ss&&rr.log(`Adding value of ${n} to ${e} metric ${t}`),o.metricsAggregator.add(e,t,n,i,{...p,...a},c)}}const ac={increment:function(e,t=1,n){ic("c",e,t,n)},distribution:function(e,t,n){ic("d",e,t,n)},set:function(e,t,n){ic("s",e,t,n)},gauge:function(e,t,n){ic("g",e,t,n)},MetricsAggregator:da(oc,sc),metricsAggregatorIntegration:sc},cc=nc,lc="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function uc(e){const t=bs([e,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);return"sentry"!==(bs([t,"optionalAccess",e=>e.instrumenter])||"sentry")}class dc{static __initStatic(){this.id="Express"}constructor(e={}){this.name=dc.id,this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}setupOnce(e,t){this._router?uc(t)?lc&&rr.log("Express Integration is skipped because of instrumenter configuration."):(function(e,t=[]){t.forEach((t=>function(e,t){const n=e[t];return e[t]=function(...e){return n.call(this,...function(e,t){return e.map((e=>"function"==typeof e?pc(e,t):Array.isArray(e)?e.map((e=>"function"==typeof e?pc(e,t):e)):e))}(e,t))},e}(e,t)))}(this._router,this._methods),function(e){const t="settings"in e;t&&void 0===e._router&&e.lazyrouter&&e.lazyrouter();const n=t?e._router:e;if(!n)return lc&&rr.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(lc&&rr.debug("Routing instrumentation is currently only supported in Express 4."));const r=Object.getPrototypeOf(n),o=r.process_params;r.process_params=function(e,t,n,r,s){n._reconstructedRoute||(n._reconstructedRoute="");const{layerRoutePath:i,isRegex:a,isArray:c,numExtraSegments:l}=function(e){let t=bs([e,"access",e=>e.route,"optionalAccess",e=>e.path]);const n=Rn(t),r=Array.isArray(t);if(!t){const[n]=zn.process.versions.node.split(".").map(Number);n>=16&&(t=hc(e.path,e.regexp,e.keys))}if(!t)return{isRegex:n,isArray:r,numExtraSegments:0};const o=r?Math.max((i=t,i.reduce(((e,t)=>e+Do(t.toString())),0)-Do(e.path||"")),0):0,s=function(e,t){if(e)return t.map((e=>e.toString())).join(",");return t&&t.toString()}(r,t);var i;return{layerRoutePath:s,isRegex:n,isArray:r,numExtraSegments:o}}(e);let u;(i||a||c)&&(n._hasParameters=!0),u=i||(function(e,t,n){const r=bs([Lo(e||""),"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>!!e))]);let o=0;const s=bs([t,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>!!e)),"access",e=>e.length])||0;return bs([n,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>bs([r,"optionalAccess",e=>e[s+o]])===e&&(o+=1,!0))),"access",e=>e.join,"call",e=>e("/")])}(n.originalUrl,n._reconstructedRoute,e.path)||"");const d=u.split("/").filter((e=>e.length>0&&(a||c||!e.includes("*")))).join("/");d&&d.length>0&&(n._reconstructedRoute+=`/${d}${a?"/":""}`);if(Do(Lo(n.originalUrl||""))+l===Do(n._reconstructedRoute)){n._hasParameters||n._reconstructedRoute!==n.originalUrl&&(n._reconstructedRoute=n.originalUrl?Lo(n.originalUrl):n.originalUrl);const e=r.__sentry_transaction,t=e&&Ls(e).data||{};if(e&&"custom"!==t[Fi]){const t=n._reconstructedRoute||"/",[r,o]=jo(n,{path:!0,method:!0,customRoute:t});e.updateName(r),e.setAttribute(Fi,o)}}return o.call(this,e,t,n,r,s)}}(this._router)):lc&&rr.error("ExpressIntegration is missing an Express instance")}}function pc(e,t){const n=e.length;switch(n){case 2:return function(n,r){const o=r.__sentry_transaction;if(o){const n=o.startChild({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"});r.once("finish",(()=>{n.end()}))}return e.call(this,n,r)};case 3:return function(n,r,o){const s=bs([r.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,n,r,(function(...e){bs([s,"optionalAccess",e=>e.end,"call",e=>e()]),o.call(this,...e)}))};case 4:return function(n,r,o,s){const i=bs([o.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,n,r,o,(function(...e){bs([i,"optionalAccess",e=>e.end,"call",e=>e()]),s.call(this,...e)}))};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${n}`)}}dc.__initStatic();const hc=(e,t,n)=>{if(!(e&&t&&n&&0!==Object.keys(n).length&&bs([n,"access",e=>e[0],"optionalAccess",e=>e.offset])))return;const r=n.sort(((e,t)=>e.offset-t.offset)),o=new RegExp(t,`${t.flags}d`).exec(e);if(!o||!o.indices)return;const[,...s]=o.indices;if(s.length!==r.length)return;let i=e,a=0;return s.forEach(((e,t)=>{if(e){const[n,o]=e,s=i.substring(0,n-a),c=`:${r[t].name}`,l=i.substring(o-a);i=s+c+l,a+=o-n-c.length}})),i};class fc{static __initStatic(){this.id="Postgres"}constructor(e={}){this.name=fc.id,this._usePgNative=!!e.usePgNative,this._module=e.module}loadDependency(){return this._module=this._module||vo("pg")}setupOnce(e,t){if(uc(t))return void(lc&&rr.log("Postgres Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(!n)return void(lc&&rr.error("Postgres Integration was unable to require `pg` package."));const r=this._usePgNative?bs([n,"access",e=>e.native,"optionalAccess",e=>e.Client]):n.Client;r?ur(r.prototype,"query",(function(e){return function(n,r,o){const s=t().getScope().getSpan(),i={"db.system":"postgresql"};try{this.database&&(i["db.name"]=this.database),this.host&&(i["server.address"]=this.host),this.port&&(i["server.port"]=this.port),this.user&&(i["db.user"]=this.user)}catch(e){}const a=bs([s,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.text,op:"db",origin:"auto.db.postgres",data:i})]);if("function"==typeof o)return e.call(this,n,r,(function(e,t){bs([a,"optionalAccess",e=>e.end,"call",e=>e()]),o(e,t)}));if("function"==typeof r)return e.call(this,n,(function(e,t){bs([a,"optionalAccess",e=>e.end,"call",e=>e()]),r(e,t)}));const c=void 0!==r?e.call(this,n,r):e.call(this,n);return An(c)?c.then((e=>(bs([a,"optionalAccess",e=>e.end,"call",e=>e()]),e))):(bs([a,"optionalAccess",e=>e.end,"call",e=>e()]),c)}})):lc&&rr.error("Postgres Integration was unable to access 'pg-native' bindings.")}}fc.__initStatic();class mc{static __initStatic(){this.id="Mysql"}constructor(){this.name=mc.id}loadDependency(){return this._module=this._module||vo("mysql/lib/Connection.js")}setupOnce(e,t){if(uc(t))return void(lc&&rr.log("Mysql Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(!n)return void(lc&&rr.error("Mysql Integration was unable to require `mysql` package."));let r;try{n.prototype.connect=new Proxy(n.prototype.connect,{apply:(e,t,n)=>(r||(r=t.config),e.apply(t,n))})}catch(e){lc&&rr.error("Mysql Integration was unable to instrument `mysql` config.")}function o(e){if(!e)return;const t=r?{"server.address":r.host,"server.port":r.port,"db.user":r.user}:{};Object.keys(t).forEach((n=>{e.setAttribute(n,t[n])})),e.end()}ur(n,"createQuery",(function(e){return function(n,r,s){const i=bs([t().getScope().getSpan(),"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if("function"==typeof s)return e.call(this,n,r,(function(e,t,n){o(i),s(e,t,n)}));if("function"==typeof r)return e.call(this,n,(function(e,t,n){o(i),r(e,t,n)}));const a=e.call(this,n,r);return a.on("end",(()=>{o(i)})),a}}))}}mc.__initStatic();const gc=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],yc={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class _c{static __initStatic(){this.id="Mongo"}constructor(e={}){this.name=_c.id,this._operations=Array.isArray(e.operations)?e.operations:gc,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}loadDependency(){const e=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||vo(e)}setupOnce(e,t){if(uc(t))return void(lc&&rr.log("Mongo Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(n)this._instrumentOperations(n.Collection,this._operations,t);else{const e=this._useMongoose?"mongoose":"mongodb";lc&&rr.error(`Mongo Integration was unable to require \`${e}\` package.`)}}_instrumentOperations(e,t,n){t.forEach((t=>this._patchOperation(e,t,n)))}_patchOperation(e,t,n){if(!(t in e.prototype))return;const r=this._getSpanContextFromOperationArguments.bind(this);ur(e.prototype,t,(function(e){return function(...o){const s=o[o.length-1],i=n(),a=i.getScope(),c=i.getClient(),l=a.getSpan(),u=bs([c,"optionalAccess",e=>e.getOptions,"call",e=>e(),"access",e=>e.sendDefaultPii]);if("function"!=typeof s||"mapReduce"===t&&2===o.length){const n=bs([l,"optionalAccess",e=>e.startChild,"call",e=>e(r(this,t,o,u))]),s=e.call(this,...o);if(An(s))return s.then((e=>(bs([n,"optionalAccess",e=>e.end,"call",e=>e()]),e)));if((d=s)&&"object"==typeof d&&d.once&&"function"==typeof d.once){const e=s;try{e.once("close",(()=>{bs([n,"optionalAccess",e=>e.end,"call",e=>e()])}))}catch(e){bs([n,"optionalAccess",e=>e.end,"call",e=>e()])}return e}return bs([n,"optionalAccess",e=>e.end,"call",e=>e()]),s}var d;const p=bs([l,"optionalAccess",e=>e.startChild,"call",e=>e(r(this,t,o.slice(0,-1)))]);return e.call(this,...o.slice(0,-1),(function(e,t){bs([p,"optionalAccess",e=>e.end,"call",e=>e()]),s(e,t)}))}}))}_getSpanContextFromOperationArguments(e,t,n,r=!1){const o={"db.system":"mongodb","db.name":e.dbName,"db.operation":t,"db.mongodb.collection":e.collectionName},s={op:"db",origin:"auto.db.mongo",description:t,data:o},i=yc[t],a=Array.isArray(this._describeOperations)?this._describeOperations.includes(t):this._describeOperations;if(!i||!a||!r)return s;try{if("mapReduce"===t){const[e,t]=n;o[i[0]]="string"==typeof e?e:e.name||"<anonymous>",o[i[1]]="string"==typeof t?t:t.name||"<anonymous>"}else for(let e=0;e<i.length;e++)o[`db.mongodb.${i[e]}`]=JSON.stringify(n[e])}catch(e){}return s}}_c.__initStatic();class vc{static __initStatic(){this.id="Prisma"}constructor(e={}){if(this.name=vc.id,(t=e.client)&&t.$use&&!e.client._sentryInstrumented){dr(e.client,"_sentryInstrumented",!0);const t={};try{const n=e.client._engineConfig;if(n){const{activeProvider:e,clientVersion:r}=n;e&&(t["db.system"]=e),r&&(t["db.prisma.version"]=r)}}catch(e){}e.client.$use(((e,n)=>{if(uc(hi))return n(e);const r=e.action,o=e.model;return Ci({name:o?`${o} ${r}`:r,onlyIfParent:!0,op:"db.prisma",attributes:{[Bi]:"auto.db.prisma"},data:{...t,"db.operation":r}},(()=>n(e)))}))}else lc&&rr.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",e.client);var t}setupOnce(){}}vc.__initStatic();class bc{static __initStatic(){this.id="GraphQL"}constructor(){this.name=bc.id}loadDependency(){return this._module=this._module||vo("graphql/execution/execute.js")}setupOnce(e,t){if(uc(t))return void(lc&&rr.log("GraphQL Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();n?ur(n,"execute",(function(e){return function(...n){const r=t().getScope(),o=r.getSpan(),s=bs([o,"optionalAccess",e=>e.startChild,"call",e=>e({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);bs([r,"optionalAccess",e=>e.setSpan,"call",e=>e(s)]);const i=e.call(this,...n);return An(i)?i.then((e=>(bs([s,"optionalAccess",e=>e.end,"call",e=>e()]),bs([r,"optionalAccess",e=>e.setSpan,"call",e=>e(o)]),e))):(bs([s,"optionalAccess",e=>e.end,"call",e=>e()]),bs([r,"optionalAccess",e=>e.setSpan,"call",e=>e(o)]),i)}})):lc&&rr.error("GraphQL Integration was unable to require graphql/execution package.")}}bc.__initStatic();class Sc{static __initStatic(){this.id="Apollo"}constructor(e={useNestjs:!1}){this.name=Sc.id,this._useNest=!!e.useNestjs}loadDependency(){return this._useNest?this._module=this._module||vo("@nestjs/graphql"):this._module=this._module||vo("apollo-server-core"),this._module}setupOnce(e,t){if(uc(t))lc&&rr.log("Apollo Integration is skipped because of instrumenter configuration.");else if(this._useNest){const e=this.loadDependency();if(!e)return void(lc&&rr.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package."));ur(e.GraphQLFactory.prototype,"mergeWithSchema",(function(e){return function(...n){return ur(this.resolversExplorerService,"explore",(function(e){return function(){return wc(Fr(e.call(this)),t)}})),e.call(this,...n)}}))}else{const e=this.loadDependency();if(!e)return void(lc&&rr.error("Apollo Integration was unable to require apollo-server-core package."));ur(e.ApolloServerBase.prototype,"constructSchema",(function(e){return function(){if(!this.config.resolvers)return lc&&(this.config.schema?(rr.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),rr.warn()):this.config.modules&&rr.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),rr.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),e.call(this);const n=Fr(this.config.resolvers);return this.config.resolvers=wc(n,t),e.call(this)}}))}}}function wc(e,t){return e.map((e=>(Object.keys(e).forEach((n=>{Object.keys(e[n]).forEach((r=>{"function"==typeof e[n][r]&&function(e,t,n,r){ur(e[t],n,(function(e){return function(...o){const s=bs([r().getScope().getSpan(),"optionalAccess",e=>e.startChild,"call",e=>e({description:`${t}.${n}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),i=e.call(this,...o);return An(i)?i.then((e=>(bs([s,"optionalAccess",e=>e.end,"call",e=>e()]),e))):(bs([s,"optionalAccess",e=>e.end,"call",e=>e()]),i)}}))}(e,n,r,t)}))})),e)))}Sc.__initStatic();const kc=zn;function Ec(){kc.document?kc.document.addEventListener("visibilitychange",(()=>{const e=_i();if(kc.document.hidden&&e){const t="cancelled",{op:n,status:r}=Ls(e);lc&&rr.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),r||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}})):lc&&rr.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const Tc=(e,t,n)=>{let r,o;return s=>{t.value>=0&&(s||n)&&(o=t.value-(r||0),(o||void 0===r)&&(r=t.value,t.delta=o,e(t)))}},xc=()=>kc.__WEB_VITALS_POLYFILL__?kc.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=kc.performance.timing,t=kc.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n})()):kc.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],Ic=()=>{const e=xc();return e&&e.activationStart||0},Cc=(e,t)=>{const n=xc();let r="navigate";return n&&(r=kc.document&&kc.document.prerendering||Ic()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},Rc=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{t(e.getEntries())}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},Ac=(e,t)=>{const n=r=>{"pagehide"!==r.type&&"hidden"!==kc.document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};kc.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))},Oc=(e,t={})=>{const n=Cc("CLS",0);let r,o=0,s=[];const i=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=s[0],i=s[s.length-1];o&&0!==s.length&&e.startTime-i.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,s.push(e)):(o=e.value,s=[e]),o>n.value&&(n.value=o,n.entries=s,r&&r())}}))},a=Rc("layout-shift",i);if(a){r=Tc(e,n,t.reportAllChanges);const o=()=>{i(a.takeRecords()),r(!0)};return Ac(o),o}};let Mc=-1;const Nc=()=>(Mc<0&&(kc.document&&kc.document.visibilityState&&(Mc="hidden"!==kc.document.visibilityState||kc.document.prerendering?1/0:0),Ac((({timeStamp:e})=>{Mc=e}),!0)),{get firstHiddenTime(){return Mc}}),Lc=e=>{const t=Nc(),n=Cc("FID");let r;const o=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),r(!0))},s=e=>{e.forEach(o)},i=Rc("first-input",s);r=Tc(e,n),i&&Ac((()=>{s(i.takeRecords()),i.disconnect()}),!0)};let Dc=0,Pc=1/0,$c=0;const Fc=e=>{e.forEach((e=>{e.interactionId&&(Pc=Math.min(Pc,e.interactionId),$c=Math.max($c,e.interactionId),Dc=$c?($c-Pc)/7+1:0)}))};let jc;const Uc=()=>{"interactionCount"in performance||jc||(jc=Rc("event",Fc,{type:"event",buffered:!0,durationThreshold:0}))},Bc=()=>jc?Dc:performance.interactionCount||0,Hc=[],zc={},qc=e=>{const t=Hc[Hc.length-1],n=zc[e.interactionId];if(n||Hc.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};zc[t.id]=t,Hc.push(t)}Hc.sort(((e,t)=>t.latency-e.latency)),Hc.splice(10).forEach((e=>{delete zc[e.id]}))}},Wc=(e,t)=>{t=t||{},Uc();const n=Cc("INP");let r;const o=e=>{e.forEach((e=>{if(e.interactionId&&qc(e),"first-input"===e.entryType){!Hc.some((t=>t.entries.some((t=>e.duration===t.duration&&e.startTime===t.startTime))))&&qc(e)}}));const t=(()=>{const e=Math.min(Hc.length-1,Math.floor(Bc()/50));return Hc[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,r())},s=Rc("event",o,{durationThreshold:t.durationThreshold||40});r=Tc(e,n,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),Ac((()=>{o(s.takeRecords()),n.value<0&&Bc()>0&&(n.value=0,n.entries=[]),r(!0)})))},Gc={},Vc=e=>{const t=Nc(),n=Cc("LCP");let r;const o=e=>{const o=e[e.length-1];if(o){const e=Math.max(o.startTime-Ic(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[o],r())}},s=Rc("largest-contentful-paint",o);if(s){r=Tc(e,n);const t=()=>{Gc[n.id]||(o(s.takeRecords()),s.disconnect(),Gc[n.id]=!0,r(!0))};return["keydown","click"].forEach((e=>{kc.document&&addEventListener(e,t,{once:!0,capture:!0})})),Ac(t,!0),t}},Yc=e=>{kc.document&&(kc.document.prerendering?addEventListener("prerenderingchange",(()=>Yc(e)),!0):"complete"!==kc.document.readyState?addEventListener("load",(()=>Yc(e)),!0):setTimeout(e,0))},Kc=(e,t)=>{t=t||{};const n=Cc("TTFB"),r=Tc(e,n,t.reportAllChanges);Yc((()=>{const e=xc();if(e){if(n.value=Math.max(e.responseStart-Ic(),0),n.value<0||n.value>performance.now())return;n.entries=[e],r(!0)}}))},Xc={},Jc={};let Qc,Zc,el,tl,nl;function rl(e,t=!1){return dl("lcp",e,cl,el,t)}function ol(e,t){return pl(e,t),Jc[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);Rc(e,(t=>{sl(e,{entries:t})}),t)}(e),Jc[e]=!0),hl(e,t)}function sl(e,t){const n=Xc[e];if(n&&n.length)for(const r of n)try{r(t)}catch(t){lc&&rr.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Er(r)}\nError:`,t)}}function il(){return Oc((e=>{sl("cls",{metric:e}),Qc=e}),{reportAllChanges:!0})}function al(){return Lc((e=>{sl("fid",{metric:e}),Zc=e}))}function cl(){return Vc((e=>{sl("lcp",{metric:e}),el=e}))}function ll(){return Kc((e=>{sl("ttfb",{metric:e}),tl=e}))}function ul(){return Wc((e=>{sl("inp",{metric:e}),nl=e}))}function dl(e,t,n,r,o=!1){let s;return pl(e,t),Jc[e]||(s=n(),Jc[e]=!0),r&&t({metric:r}),hl(e,t,o?s:void 0)}function pl(e,t){Xc[e]=Xc[e]||[],Xc[e].push(t)}function hl(e,t,n){return()=>{n&&n();const r=Xc[e];if(!r)return;const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}function fl(e){return"number"==typeof e&&isFinite(e)}function ml(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}const gl=2147483647;function yl(e){return e/1e3}function _l(){return kc&&kc.addEventListener&&kc.performance}let vl,bl,Sl=0,wl={};function kl(){const e=_l();if(e&&Vo){e.mark&&kc.performance.mark("sentry-tracing-init");const t=dl("fid",(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=yl(Vo),r=yl(t.startTime);lc&&rr.log("[Measurements] Adding FID"),wl.fid={value:e.value,unit:"millisecond"},wl["mark.fid"]={value:n+r,unit:"second"}}),al,Zc),n=function(e,t=!1){return dl("cls",e,il,Qc,t)}((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(lc&&rr.log("[Measurements] Adding CLS"),wl.cls={value:e.value,unit:""},bl=t)}),!0),r=rl((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(lc&&rr.log("[Measurements] Adding LCP"),wl.lcp={value:e.value,unit:"millisecond"},vl=t)}),!0),o=function(e){return dl("ttfb",e,ll,tl)}((({metric:e})=>{e.entries[e.entries.length-1]&&(lc&&rr.log("[Measurements] Adding TTFB"),wl.ttfb={value:e.value,unit:"millisecond"})}));return()=>{t(),n(),r(),o()}}return()=>{}}function El(){ol("longtask",(({entries:e})=>{for(const t of e){const e=_i();if(!e)return;const n=yl(Vo+t.startTime),r=yl(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r})}}))}function Tl(){ol("event",(({entries:e})=>{for(const t of e){const e=_i();if(!e)return;if("click"===t.name){const n=yl(Vo+t.startTime),r=yl(t.duration),o={description:Yn(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r},s=Qn(t.target);s&&(o.attributes={"ui.component_name":s}),e.startChild(o)}}}))}function xl(e,t){if(_l()&&Vo){const n=function(e,t){return n=({metric:n})=>{if(void 0===n.value)return;const r=n.entries.find((e=>e.duration===n.value&&void 0!==Il[e.name])),o=Gs();if(!r||!o)return;const s=Il[r.name],i=o.getOptions(),a=yl(Vo+r.startTime),c=yl(n.value),l=void 0!==r.interactionId?e[r.interactionId]:void 0;if(void 0===l)return;const{routeName:u,parentContext:d,activeTransaction:p,user:h,replayId:f}=l,m=void 0!==h?h.email||h.id||h.ip_address:void 0,g=void 0!==p?p.getProfileId():void 0,y=new zi({startTimestamp:a,endTimestamp:a+c,op:`ui.interaction.${s}`,name:Yn(r.target),attributes:{release:i.release,environment:i.environment,transaction:u,...void 0!==m&&""!==m?{user:m}:{},...void 0!==g?{profile_id:g}:{},...void 0!==f?{replay_id:f}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),_=function(e,t,n){if(!Ii(t))return!1;let r;return r=void 0!==e&&"function"==typeof t.tracesSampler?t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:kc.location}):void 0!==e&&void 0!==e.sampled?e.sampled:void 0!==t.tracesSampleRate?t.tracesSampleRate:1,Xi(r)?!0===r?n:!1===r?0:r*n:(lc&&rr.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}(d,i,t);if(_&&Math.random()<_){const e=y?function(e,t){const n={sent_at:(new Date).toISOString()};return t&&(n.dsn=sr(t)),ss(n,e.map(Ma))}([y],o.getDsn()):void 0,t=o&&o.getTransport();t&&e&&t.send(e).then(null,(e=>{lc&&rr.error("Error while sending interaction:",e)}))}},dl("inp",n,ul,nl);var n}(e,t);return()=>{n()}}return()=>{}}const Il={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function Cl(e){const t=_l();if(!t||!kc.performance.getEntries||!Vo)return;lc&&rr.log("[Tracing] Adding & adjusting spans using Performance API");const n=yl(Vo),r=t.getEntries(),{op:o,start_timestamp:s}=Ls(e);if(r.slice(Sl).forEach((t=>{const r=yl(t.startTime),o=yl(t.duration);if(!("navigation"===e.op&&s&&n+r<s))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{Rl(e,t,r,n)})),Rl(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),Rl(e,t,"fetch",n,"cache","domainLookupStart"),Rl(e,t,"domainLookup",n,"DNS"),function(e,t,n){t.responseEnd&&(ml(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+yl(t.requestStart),endTimestamp:n+yl(t.responseEnd)}),ml(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+yl(t.responseStart),endTimestamp:n+yl(t.responseEnd)}))}(e,t,n)}(e,t,n);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,o){const s=o+n,i=s+r;ml(e,{description:t.name,endTimestamp:i,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:s})}(e,t,r,o,n);const s=Nc(),i=t.startTime<s.firstHiddenTime;"first-paint"===t.name&&i&&(lc&&rr.log("[Measurements] Adding FP"),wl.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&i&&(lc&&rr.log("[Measurements] Adding FCP"),wl.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,o,s){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const i=No(n),a={};Al(a,t,"transferSize","http.response_transfer_size"),Al(a,t,"encodedBodySize","http.response_content_length"),Al(a,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(a["resource.render_blocking_status"]=t.renderBlockingStatus);i.protocol&&(a["url.scheme"]=i.protocol.split(":").pop());i.host&&(a["server.address"]=i.host);a["url.same_origin"]=n.includes(kc.location.origin);const c=s+r,l=c+o;ml(e,{description:n.replace(kc.location.origin,""),endTimestamp:l,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:a})}(e,t,t.name,r,o,n)}})),Sl=Math.max(r.length-1,0),function(e){const t=kc.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),fl(n.rtt)&&(wl["connection.rtt"]={value:n.rtt,unit:"millisecond"}));fl(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`);fl(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===o){!function(e){const t=xc();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(lc&&rr.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(wl),["fcp","fp","lcp"].forEach((e=>{if(!wl[e]||!s||n>=s)return;const t=wl[e].value,r=n+yl(t),o=Math.abs(1e3*(r-s)),i=o-t;lc&&rr.log(`[Measurements] Normalized ${e} from ${t} to ${o} (${i})`),wl[e].value=o}));const t=wl["mark.fid"];t&&wl.fid&&(ml(e,{description:"first input delay",endTimestamp:t.value+yl(wl.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:t.value}),delete wl["mark.fid"]),"fcp"in wl||delete wl.cls,Object.keys(wl).forEach((e=>{ta(e,wl[e].value,wl[e].unit)})),function(e){vl&&(lc&&rr.log("[Measurements] Adding LCP Data"),vl.element&&e.setTag("lcp.element",Yn(vl.element)),vl.id&&e.setTag("lcp.id",vl.id),vl.url&&e.setTag("lcp.url",vl.url.trim().slice(0,200)),e.setTag("lcp.size",vl.size));bl&&bl.sources&&(lc&&rr.log("[Measurements] Adding CLS Data"),bl.sources.forEach(((t,n)=>e.setTag(`cls.source.${n+1}`,Yn(t.node)))))}(e)}vl=void 0,bl=void 0,wl={}}function Rl(e,t,n,r,o,s){const i=s?t[s]:t[`${n}End`],a=t[`${n}Start`];a&&i&&ml(e,{op:"browser",origin:"auto.browser.browser.metrics",description:o||n,startTimestamp:r+yl(a),endTimestamp:r+yl(i)})}function Al(e,t,n,r){const o=t[n];null!=o&&o<gl&&(e[r]=o)}function Ol(e,t,n,r,o="auto.http.browser"){if(!Ii()||!e.fetchData)return;const s=t(e.fetchData.url);if(e.endTimestamp&&s){const t=e.fetchData.__span;if(!t)return;const n=r[t];return void(n&&(!function(e,t){if(t.response){Ti(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus("internal_error");e.end()}(n,e),delete r[t]))}const i=Vs(),a=Gs(),{method:c,url:l}=e.fetchData,u=function(e){try{return new URL(e).href}catch(e){return}}(l),d=u?No(u).host:void 0,p=s?Ri({name:`${c} ${l}`,onlyIfParent:!0,attributes:{url:l,type:"fetch","http.method":c,"http.url":u,"server.address":d,[Bi]:o},op:"http.client"}):void 0;if(p&&(e.fetchData.__span=p.spanContext().spanId,r[p.spanContext().spanId]=p),n(e.fetchData.url)&&a){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=function(e,t,n,r,o){const s=o||n.getSpan(),i=fi(),{traceId:a,spanId:c,sampled:l,dsc:u}={...i.getPropagationContext(),...n.getPropagationContext()},d=s?Os(s):os(a,c,l),p=Zo(u||(s?ei(s):Zs(a,t,n))),h=r.headers||("undefined"!=typeof Request&&Mn(e,Request)?e.headers:void 0);if(h){if("undefined"!=typeof Headers&&Mn(h,Headers)){const e=new Headers(h);return e.append("sentry-trace",d),p&&e.append(Yo,p),e}if(Array.isArray(h)){const e=[...h,["sentry-trace",d]];return p&&e.push([Yo,p]),e}{const e="baggage"in h?h.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),p&&t.push(p),{...h,"sentry-trace":d,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":d,baggage:p}}(t,a,i,n,p)}return p}const Ml=["localhost",/^\/(?!\/)/],Nl={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:Ml,tracePropagationTargets:Ml};function Ll(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:o,shouldCreateSpanForRequest:s,enableHTTPTimings:i}={traceFetch:Nl.traceFetch,traceXHR:Nl.traceXHR,...e},a="function"==typeof s?s:e=>!0,c=e=>function(e,t){return $n(e,t||Ml)}(e,r||o),l={};t&&Jr((e=>{const t=Ol(e,a,c,l);if(t){const n=$l(e.fetchData.url),r=n?No(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r})}i&&t&&Dl(t)})),n&&mo((e=>{const t=function(e,t,n,r){const o=e.xhr,s=o&&o[fo];if(!Ii()||!o||o.__sentry_own_request__||!s)return;const i=t(s.url);if(e.endTimestamp&&i){const e=o.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==s.status_code&&(Ti(t,s.status_code),t.end(),delete r[e]))}const a=Vs(),c=fi(),l=$l(s.url),u=l?No(l).host:void 0,d=i?Ri({name:`${s.method} ${s.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":s.method,"http.url":l,url:s.url,"server.address":u,[Bi]:"auto.http.browser"},op:"http.client"}):void 0;d&&(o.__sentry_xhr_span_id__=d.spanContext().spanId,r[o.__sentry_xhr_span_id__]=d);const p=Gs();if(o.setRequestHeader&&n(s.url)&&p){const{traceId:e,spanId:t,sampled:n,dsc:r}={...c.getPropagationContext(),...a.getPropagationContext()};!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(Yo,n)}catch(e){}}(o,d?Os(d):os(e,t,n),Zo(r||(d?ei(d):Zs(e,p,a))))}return d}(e,a,c,l);i&&t&&Dl(t)}))}function Dl(e){const{url:t}=Ls(e).data||{};if(!t||"string"!=typeof t)return;const n=ol("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",r="";for(const o of e){if("/"===o){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=o}r===e&&(t=r);return{name:t,version:n}}(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!Vo)return r;return[...r,["http.request.redirect_start",Pl(e.redirectStart)],["http.request.fetch_start",Pl(e.fetchStart)],["http.request.domain_lookup_start",Pl(e.domainLookupStart)],["http.request.domain_lookup_end",Pl(e.domainLookupEnd)],["http.request.connect_start",Pl(e.connectStart)],["http.request.secure_connection_start",Pl(e.secureConnectionStart)],["http.request.connection_end",Pl(e.connectEnd)],["http.request.request_start",Pl(e.requestStart)],["http.request.response_start",Pl(e.responseStart)],["http.request.response_end",Pl(e.responseEnd)]]})(r).forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function Pl(e=0){return((Vo||performance.timeOrigin)+e)/1e3}function $l(e){try{return new URL(e,kc.location.origin).href}catch(e){return}}const Fl={...Wi,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!kc||!kc.location)return void(lc&&rr.warn("Could not initialize routing instrumentation due to invalid location"));let r,o=kc.location.href;t&&(r=e({name:kc.location.pathname,startTimestamp:Vo?Vo/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&uo((({to:t,from:n})=>{void 0===n&&o&&-1!==o.indexOf(t)?o=void 0:n!==t&&(o=void 0,r&&(lc&&rr.log(`[Tracing] Finishing current transaction with op: ${r.op}`),r.end()),r=e({name:kc.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...Nl};function jl(e){const t=Jn(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function Ul(e){const t=e.attributes&&e.attributes[Fi],n=e.data&&e.data[Fi],r=e.metadata&&e.metadata.source;return t||n||r}const Bl={...Wi,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...Nl};function Hl(e,t){if(!e.emit)return;e.emit("startPageLoadSpan",t);const n=Ai();return"pageload"===(n&&Ls(n).op)?n:void 0}function zl(e,t){if(!e.emit)return;e.emit("startNavigationSpan",t);const n=Ai();return"navigation"===(n&&Ls(n).op)?n:void 0}function ql(e){const t=Jn(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}const Wl=10;function Gl(e){const t=e.attributes&&e.attributes[Fi],n=e.data&&e.data[Fi],r=e.metadata&&e.metadata.source;return t||n||r}const Vl=zn;let Yl=0;function Kl(){return Yl>0}function Xl(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(hr(e))return e}catch(t){return e}const r=function(){const r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const o=r.map((e=>Xl(e,t)));return e.apply(this,o)}catch(e){throw Yl++,setTimeout((()=>{Yl--})),Ws((n=>{n.addEventProcessor((e=>(t.mechanism&&(Dr(e,void 0,void 0),Pr(e,t.mechanism)),e.extra={...e.extra,arguments:r},e))),Us(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(e){}pr(r,e),dr(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>e.name})}catch(e){}return r}const Jl="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Ql(e,t){const n=eu(e,t),r={type:t&&t.name,value:nu(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function Zl(e,t){return{exception:{values:[Ql(e,t)]}}}function eu(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(tu.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(e){}return[]}const tu=/Minified React error #\d+;/i;function nu(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function ru(e,t,n,r){const o=su(e,t,n&&n.syntheticException||void 0,r);return Pr(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),Ro(o)}function ou(e,t,n="info",r,o){const s=iu(e,t,r&&r.syntheticException||void 0,o);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),Ro(s)}function su(e,t,n,r,o){let s;if(wn(t)&&t.error){return Zl(e,t.error)}if(kn(t)||Sn(t,"DOMException")){const o=t;if("stack"in t)s=Zl(e,t);else{const t=o.name||(kn(o)?"DOMError":"DOMException"),i=o.message?`${t}: ${o.message}`:t;s=iu(e,i,n,r),Dr(s,i)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}if(bn(t))return Zl(e,t);if(In(t)||Cn(t)){return s=function(e,t,n,r){const o=Gs(),s=o&&o.getOptions().normalizeDepth,i={exception:{values:[{type:Cn(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:au(t,{isUnhandledRejection:r})}]},extra:{__serialized__:wo(t,s)}};if(n){const t=eu(e,n);t.length&&(i.exception.values[0].stacktrace={frames:t})}return i}(e,t,n,o),Pr(s,{synthetic:!0}),s}return s=iu(e,t,n,r),Dr(s,`${t}`,void 0),Pr(s,{synthetic:!0}),s}function iu(e,t,n,r){const o={};if(r&&n){const r=eu(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(Tn(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function au(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(fr(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Ln(n[0],t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:Ln(r,t)}return""}(e),r=t?"promise rejection":"exception";if(wn(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(Cn(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function cu(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:sr(r)}},s=function(e){return[{type:"user_report"},e]}(e);return ss(o,[s])}class lu extends ya{constructor(e){!function(e,t,n=[t],r="npm"){const o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:ai}))),version:ai}),e._metadata=o}(e,"browser",["browser"],Vl.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&Vl.document&&Vl.document.addEventListener("visibilitychange",(()=>{"hidden"===Vl.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return ru(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return ou(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(Jl&&rr.warn("SDK not enabled, will not capture user feedback."));const t=cu(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(Jl&&rr.log("No outcomes to send"));if(!this._dsn)return void(Jl&&rr.log("No dsn provided, will not send outcomes"));Jl&&rr.log("Sending outcomes:",e);const t=(n=e,ss((r=this._options.tunnel&&sr(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:o||Wo(),discarded_events:n}]]));var n,r,o;this._sendEnvelope(t)}}let uu;function du(e,t=function(){if(uu)return uu;if(Kr(Vl.fetch))return uu=Vl.fetch.bind(Vl);const e=Vl.document;let t=Vl.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(e){Jl&&rr.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return uu=t.bind(Vl)}()){let n=0,r=0;return Ea(e,(function(o){const s=o.body.length;n+=s,r++;const i={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,i).then((e=>(n-=s,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return uu=void 0,n-=s,r--,Ao(e)}}))}const pu=4;function hu(e){return Ea(e,(function(t){return new Oo(((n,r)=>{const o=new XMLHttpRequest;o.onerror=r,o.onreadystatechange=()=>{o.readyState===pu&&n({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&o.setRequestHeader(t,e.headers[t]);o.send(t.body)}))}))}const fu="?";function mu(e,t,n,r){const o={filename:e,function:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const gu=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,yu=/\((\S*)(?::(\d+))(?::(\d+))\)/,_u=[30,e=>{const t=gu.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=yu.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=Au(t[1]||fu,t[2]);return mu(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],vu=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,bu=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Su=[50,e=>{const t=vu.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=bu.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||fu;return[n,e]=Au(n,e),mu(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],wu=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,ku=[40,e=>{const t=wu.exec(e);return t?mu(t[2],t[1]||fu,+t[3],t[4]?+t[4]:void 0):void 0}],Eu=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,Tu=[10,e=>{const t=Eu.exec(e);return t?mu(t[2],t[3]||fu,+t[1]):void 0}],xu=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,Iu=[20,e=>{const t=xu.exec(e);return t?mu(t[5],t[3]||t[4]||fu,+t[1],+t[2]):void 0}],Cu=[_u,Su,ku],Ru=wr(...Cu),Au=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:fu,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Ou=1024,Mu="Breadcrumbs",Nu=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Mu,setupOnce(){},setup(e){t.console&&Ar(function(e){return function(t){if(Gs()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:zo(t.level),message:Pn(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${Pn(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}zs(n,{input:t.args,level:t.level})}}(e)),t.dom&&qr(function(e,t){return function(n){if(Gs()!==e)return;let r,o,s="object"==typeof t?t.serializeAttribute:void 0,i="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;i&&i>Ou&&(Jl&&rr.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${i} was configured. Sentry will use 1024 instead.`),i=Ou),"string"==typeof s&&(s=[s]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=Yn(t,{keyAttrs:s,maxStringLength:i}),o=Qn(t)}catch(e){r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};o&&(a.data={"ui.component_name":o}),zs(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&mo(function(e){return function(t){if(Gs()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[fo];if(!n||!r||!o)return;const{method:s,url:i,status_code:a,body:c}=o;zs({category:"xhr",data:{method:s,url:i,status_code:a},type:"http"},{xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r})}}(e)),t.fetch&&Jr(function(e){return function(t){if(Gs()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){zs({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response;zs({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:n,endTimestamp:r})}}}(e)),t.history&&uo(function(e){return function(t){if(Gs()!==e)return;let n=t.from,r=t.to;const o=No(Vl.location.href);let s=n?No(n):void 0;const i=No(r);s&&s.path||(s=o),o.protocol===i.protocol&&o.host===i.host&&(r=i.relative),o.protocol===s.protocol&&o.host===s.host&&(n=s.relative),zs({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){Gs()===e&&zs({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Lr(t)},{event:t})}}(e))}}},Lu=da(Mu,Nu);const Du="Dedupe",Pu=()=>{let e;return{name:Du,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!ju(e,t))return!1;if(!Fu(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Uu(t),r=Uu(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!ju(e,t))return!1;if(!Fu(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Jl&&rr.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}},$u=da(Du,Pu);function Fu(e,t){let n=Bu(e),r=Bu(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function ju(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function Uu(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Bu(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}const Hu="GlobalHandlers",zu=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Hu,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){no((t=>{const{stackParser:n,attachStacktrace:r}=Vu();if(Gs()!==e||Kl())return;const{msg:o,url:s,line:i,column:a,error:c}=t,l=void 0===c&&En(o)?function(e,t,n,r){const o=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let s=wn(e)?e.message:e,i="Error";const a=s.match(o);a&&(i=a[1],s=a[2]);const c={exception:{values:[{type:i,value:s}]}};return Wu(c,t,n,r)}(o,s,i,a):Wu(su(n,c||o,void 0,r,!1),s,i,a);l.level="error",Hs(l,{originalException:c,mechanism:{handled:!1,type:"onerror"}})}))}(e),Gu("onerror")),t.onunhandledrejection&&(!function(e){so((t=>{const{stackParser:n,attachStacktrace:r}=Vu();if(Gs()!==e||Kl())return;const o=function(e){if(xn(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),s=xn(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:su(n,o,void 0,r,!0);s.level="error",Hs(s,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),Gu("onunhandledrejection"))}}},qu=da(Hu,zu);function Wu(e,t,n,r){const o=e.exception=e.exception||{},s=o.values=o.values||[],i=s[0]=s[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],l=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=En(t)&&t.length>0?t:Xn();return 0===c.length&&c.push({colno:l,filename:d,function:"?",in_app:!0,lineno:u}),e}function Gu(e){Jl&&rr.log(`Global Handler attached: ${e}`)}function Vu(){const e=Gs();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Yu="HttpContext",Ku=()=>({name:Yu,setupOnce(){},preprocessEvent(e){if(!Vl.navigator&&!Vl.location&&!Vl.document)return;const t=e.request&&e.request.url||Vl.location&&Vl.location.href,{referrer:n}=Vl.document||{},{userAgent:r}=Vl.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...e.request,...t&&{url:t},headers:o};e.request=s}}),Xu=da(Yu,Ku),Ju="LinkedErrors",Qu=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:Ju,setupOnce(){},preprocessEvent(e,r,o){const s=o.getOptions();Fn(Ql,s.stackParser,s.maxValueLength,n,t,e,r)}}},Zu=da(Ju,Qu),ed=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],td="TryCatch",nd=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:td,setupOnce(){t.setTimeout&&ur(Vl,"setTimeout",od),t.setInterval&&ur(Vl,"setInterval",od),t.requestAnimationFrame&&ur(Vl,"requestAnimationFrame",sd),t.XMLHttpRequest&&"XMLHttpRequest"in Vl&&ur(XMLHttpRequest.prototype,"send",id);const e=t.eventTarget;if(e){(Array.isArray(e)?e:ed).forEach(ad)}}}},rd=da(td,nd);function od(e){return function(...t){const n=t[0];return t[0]=Xl(n,{mechanism:{data:{function:Er(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function sd(e){return function(t){return e.apply(this,[Xl(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Er(e)},handled:!1,type:"instrument"}})])}}function id(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&ur(n,e,(function(t){const n={mechanism:{data:{function:e,handler:Er(t)},handled:!1,type:"instrument"}},r=hr(t);return r&&(n.mechanism.data.handler=Er(r)),Xl(t,n)}))})),e.apply(this,t)}}function ad(e){const t=Vl,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(ur(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=Xl(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Er(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,Xl(r,{mechanism:{data:{function:"addEventListener",handler:Er(r),target:e},handled:!1,type:"instrument"}}),o])}})),ur(n,"removeEventListener",(function(e){return function(t,n,r){const o=n;try{const n=o&&o.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,o,r)}})))}const cd=[Ga(),Qa(),nd(),Nu(),zu(),Qu(),Pu(),Ku()];function ld(e){return[...cd]}function ud(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=ld()),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),Vl.SENTRY_RELEASE&&Vl.SENTRY_RELEASE.id&&(e.release=Vl.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(n=e.stackParser||Ru,Array.isArray(n)?wr(...n):n),integrations:ca(e),transport:e.transport||(Yr()?du:hu)};var n;!function(e,t){!0===t.debug&&(Ss?rr.enable():nr((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),Vs().update(t.initialScope);const n=new e(t);wa(n),function(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}(n)}(lu,t),e.autoSessionTracking&&function(){if(void 0===Vl.document)return void(Jl&&rr.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));Ys({ignoreDuration:!0}),Js(),uo((({from:e,to:t})=>{void 0!==e&&e!==t&&(Ys({ignoreDuration:!0}),Js())}))}()}var dd=Object.freeze({__proto__:null,GlobalHandlers:qu,TryCatch:rd,Breadcrumbs:Lu,LinkedErrors:Zu,HttpContext:Xu,Dedupe:$u});const pd=zn,hd="sentryReplaySession",fd="replay_event",md="Unable to send Replay",gd=15e4,yd=5e3,_d=2e7,vd=36e5;function bd(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}var Sd;function wd(e){const t=bd([e,"optionalAccess",e=>e.host]);return Boolean(bd([t,"optionalAccess",e=>e.shadowRoot])===e)}function kd(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function Ed(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,Td).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function Td(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=Ed(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Sd||(Sd={}));class xd{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const t=bd([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]);return r=()=>-1,null!=(n=t)?n:r();var n,r}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Id({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function Cd({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function Rd(e){return e.toLowerCase()}function Ad(e){return e.toUpperCase()}const Od="__rrweb_original__";function Md(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Rd(t):null}function Nd(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}let Ld=1;const Dd=new RegExp("[^a-z0-9-_:]"),Pd=-2;function $d(){return Ld++}let Fd,jd;const Ud=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Bd=/^(?:[a-z+]+:)?\/\//i,Hd=/^www\..*/i,zd=/^(data:)([^,]*),(.*)/i;function qd(e,t){return(e||"").replace(Ud,((e,n,r,o,s,i)=>{const a=r||s||i,c=n||o||"";if(!a)return e;if(Bd.test(a)||Hd.test(a))return`url(${c}${a}${c})`;if(zd.test(a))return`url(${c}${a}${c})`;if("/"===a[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${c})`;const l=t.split("/"),u=a.split("/");l.pop();for(const e of u)"."!==e&&(".."===e?l.pop():l.push(e));return`url(${c}${l.join("/")}${c})`}))}const Wd=/^[^ \t\n\r\u000c]+/,Gd=/^[, \t\n\r\u000c]+/;function Vd(e,t){if(!t||""===t.trim())return t;const n=e.createElement("a");return n.href=t,n.href}function Yd(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Kd(){const e=document.createElement("a");return e.href="",e.href}function Xd(e,t,n,r,o,s){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?Vd(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}const o=[];for(;r(Gd),!(n>=t.length);){let s=r(Wd);if(","===s.slice(-1))s=Vd(e,s.substring(0,s.length-1)),o.push(s);else{let r="";s=Vd(e,s);let i=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((s+r).trim());break}if(i)")"===e&&(i=!1);else{if(","===e){n+=1,o.push((s+r).trim());break}"("===e&&(i=!0)}r+=e,n+=1}}}return o.join(", ")}(e,r):"style"===n?qd(r,Kd()):"object"===t&&"data"===n?Vd(e,r):"function"==typeof s?s(n,r,o):r:Vd(e,r):r}function Jd(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Qd(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Qd(e.parentNode,t,n,r+1):-1}function Zd(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}function ep(e,t,n,r,o,s){try{const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===i)return!1;if("INPUT"===i.tagName){const e=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let a=-1,c=-1;if(s){if(c=Qd(i,Zd(r,o)),c<0)return!0;a=Qd(i,Zd(t,n),c>=0?c:1/0)}else{if(a=Qd(i,Zd(t,n)),a<0)return!1;c=Qd(i,Zd(r,o),a>=0?a:1/0)}return a>=0?!(c>=0)||a<=c:!(c>=0)&&!!s}catch(e){}return!!s}function tp(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskAttributeFn:c,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:f={},maskTextFn:m,maskInputFn:g,dataURLOptions:y={},inlineImages:_,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S=!1}=t,w=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:Sd.Document,childNodes:[],compatMode:e.compatMode}:{type:Sd.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Sd.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:w};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:s,inlineStylesheet:i,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:l,dataURLOptions:u={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:h,newlyAddedElement:f=!1,rootId:m,maskAllText:g,maskTextClass:y,unmaskTextClass:_,maskTextSelector:v,unmaskTextSelector:b}=t,S=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,o,s),w=function(e){if(e instanceof HTMLFormElement)return"form";const t=Rd(e.tagName);return Dd.test(t)?"div":t}(e);let k={};const E=e.attributes.length;for(let t=0;t<E;t++){const r=e.attributes[t];r.name&&!Jd(w,r.name,r.value)&&(k[r.name]=Xd(n,w,Rd(r.name),r.value,e,c))}if("link"===w&&i){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=Ed(t)),r&&(delete k.rel,delete k.href,k._cssText=qd(r,t.href))}if("style"===w&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=Ed(e.sheet);t&&(k._cssText=qd(t,Kd()))}if("input"===w||"textarea"===w||"select"===w||"option"===w){const t=e,n=Md(t),r=Nd(t,Ad(w),n),o=t.checked;if("submit"!==n&&"button"!==n&&r){const e=ep(t,y,v,_,b,Id({type:n,tagName:Ad(w),maskInputOptions:a}));k.value=Cd({isMasked:e,element:t,value:r,maskInputFn:l})}o&&(k.checked=o)}"option"===w&&(e.selected&&!a.select?k.selected=!0:delete k.selected);if("canvas"===w&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,s=Od in o?o[Od]:o;if(new Uint32Array(s.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(k.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){const t=e.toDataURL(u.type,u.quality),n=document.createElement("canvas");n.width=e.width,n.height=e.height;t!==n.toDataURL(u.type,u.quality)&&(k.rr_dataURL=t)}if("img"===w&&d){Fd||(Fd=n.createElement("canvas"),jd=Fd.getContext("2d"));const t=e,r=t.crossOrigin;t.crossOrigin="anonymous";const o=()=>{t.removeEventListener("load",o);try{Fd.width=t.naturalWidth,Fd.height=t.naturalHeight,jd.drawImage(t,0,0),k.rr_dataURL=Fd.toDataURL(u.type,u.quality)}catch(e){console.warn(`Cannot inline img src=${t.currentSrc}! Error: ${e}`)}r?k.crossOrigin=r:t.removeAttribute("crossorigin")};t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o)}"audio"!==w&&"video"!==w||(k.rr_mediaState=e.paused?"paused":"played",k.rr_mediaCurrentTime=e.currentTime);f||(e.scrollLeft&&(k.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(k.rr_scrollTop=e.scrollTop));if(S){const{width:t,height:n}=e.getBoundingClientRect();k={class:k.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==w||h(k.src)||(e.contentDocument||(k.rr_src=k.src),delete k.src);let T;try{customElements.get(w)&&(T=!0)}catch(e){}return{type:Sd.Element,tagName:w,attributes:k,childNodes:[],isSVG:Yd(e)||void 0,needBlock:S,rootId:m,isCustom:T}}(e,{doc:n,blockClass:o,blockSelector:s,unblockSelector:i,inlineStylesheet:h,maskAttributeFn:c,maskInputOptions:f,maskInputFn:g,dataURLOptions:y,inlineImages:_,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S,rootId:w,maskAllText:a,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:s,unmaskTextSelector:i,maskTextFn:a,maskInputOptions:c,maskInputFn:l,rootId:u}=t,d=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const h="STYLE"===d||void 0,f="SCRIPT"===d||void 0,m="TEXTAREA"===d||void 0;if(h&&p){try{e.nextSibling||e.previousSibling||bd([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(p=Ed(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}p=qd(p,Kd())}f&&(p="SCRIPT_PLACEHOLDER");const g=ep(e,r,s,o,i,n);h||f||m||!p||!g||(p=a?a(p,e.parentElement):p.replace(/[\S]/g,"*"));m&&p&&(c.textarea||g)&&(p=l?l(p,e.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===d&&p){p=Cd({isMasked:ep(e,r,s,o,i,Id({type:null,tagName:d,maskInputOptions:c})),element:e,value:p,maskInputFn:l})}return{type:Sd.Text,textContent:p||"",isStyle:h,rootId:u}}(e,{maskAllText:a,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:m,maskInputOptions:f,maskInputFn:g,rootId:w});case e.CDATA_SECTION_NODE:return{type:Sd.CDATA,textContent:"",rootId:w};case e.COMMENT_NODE:return{type:Sd.Comment,textContent:e.textContent||"",rootId:w};default:return!1}}function np(e){return null==e?"":e.toLowerCase()}function rp(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:h=!0,maskInputOptions:f={},maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v={},inlineImages:b=!1,recordCanvas:S=!1,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E=5e3,onStylesheetLoad:T,stylesheetLoadTimeout:x=5e3,keepIframeSrcFn:I=(()=>!1),newlyAddedElement:C=!1}=t;let{preserveWhiteSpace:R=!0}=t;const A=tp(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,dataURLOptions:v,inlineImages:b,recordCanvas:S,keepIframeSrcFn:I,newlyAddedElement:C});if(!A)return console.warn(e,"not serialized"),null;let O;O=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===Sd.Comment)return!0;if(e.type===Sd.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(np(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===np(e.attributes.name)||"icon"===np(e.attributes.rel)||"apple-touch-icon"===np(e.attributes.rel)||"shortcut icon"===np(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&np(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(np(e.attributes.property).match(/^(og|twitter|fb):/)||np(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===np(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===np(e.attributes.name)||"googlebot"===np(e.attributes.name)||"bingbot"===np(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===np(e.attributes.name)||"generator"===np(e.attributes.name)||"framework"===np(e.attributes.name)||"publisher"===np(e.attributes.name)||"progid"===np(e.attributes.name)||np(e.attributes.property).match(/^article:/)||np(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===np(e.attributes.name)||"yandex-verification"===np(e.attributes.name)||"csrf-token"===np(e.attributes.name)||"p:domain_verify"===np(e.attributes.name)||"verify-v1"===np(e.attributes.name)||"verification"===np(e.attributes.name)||"shopify-checkout-api-token"===np(e.attributes.name)))return!0}}return!1}(A,_)&&(R||A.type!==Sd.Text||A.isStyle||A.textContent.replace(/^\s+|\s+$/gm,"").length)?$d():Pd;const M=Object.assign(A,{id:O});if(r.add(e,M),O===Pd)return null;w&&w(e);let N=!p;if(M.type===Sd.Element){N=N&&!M.needBlock,delete M.needBlock;const t=e.shadowRoot;t&&kd(t)&&(M.isShadowHost=!0)}if((M.type===Sd.Document||M.type===Sd.Element)&&N){_.headWhitespace&&M.type===Sd.Element&&"head"===M.tagName&&(R=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:p,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:T,stylesheetLoadTimeout:x,keepIframeSrcFn:I};for(const n of Array.from(e.childNodes)){const e=rp(n,t);e&&M.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=rp(n,t);r&&(kd(e.shadowRoot)&&(r.isShadow=!0),M.childNodes.push(r))}}return e.parentNode&&wd(e.parentNode)&&kd(e.parentNode)&&(M.isShadow=!0),M.type===Sd.Element&&"iframe"===M.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let o,s=!1;try{o=r.document.readyState}catch(e){return}if("complete"!==o){const r=setTimeout((()=>{s||(t(),s=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(r),s=!0,t()}))}const i="about:blank";if(r.location.href!==i||e.src===i||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&k){const n=rp(t,{doc:t,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:T,stylesheetLoadTimeout:x,keepIframeSrcFn:I});n&&k(e,n)}}),E),M.type===Sd.Element&&"link"===M.tagName&&"stylesheet"===M.attributes.rel&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(e){return}if(r)return;const s=setTimeout((()=>{o||(t(),o=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(s),o=!0,t()}))}(e,(()=>{if(T){const t=rp(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:T,stylesheetLoadTimeout:x,keepIframeSrcFn:I});t&&T(e,t)}}),x),M}function op(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function sp(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const ip="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let ap={map:{},getId:()=>(console.error(ip),-1),getNode:()=>(console.error(ip),null),removeNodeFromMap(){console.error(ip)},has:()=>(console.error(ip),!1),reset(){console.error(ip)}};function cp(e,t,n={}){let r=null,o=0;return function(...s){const i=Date.now();o||!1!==n.leading||(o=i);const a=t-(i-o),c=this;a<=0||a>t?(r&&(!function(...e){Cp("clearTimeout")(...e)}(r),r=null),o=i,e.apply(c,s)):r||!1===n.trailing||(r=Rp((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,s)}),a))}}function lp(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){Rp((()=>{n.set.call(this,e)}),0),s&&s.set&&s.set.call(this,e)}}),()=>lp(e,t,s||{},!0)}function up(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(ap=new Proxy(ap,{get:(e,t,n)=>("map"===t&&console.error(ip),Reflect.get(e,t,n))}));let dp=Date.now;function pp(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:op([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||op([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||op([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:op([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||op([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||op([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function hp(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function fp(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function mp(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}function gp(e,t,n,r,o){if(!e)return!1;const s=mp(e);if(!s)return!1;const i=Zd(t,n);if(!o){const e=r&&s.matches(r);return i(s)&&!e}const a=Qd(s,i);let c=-1;return!(a<0)&&(r&&(c=Qd(s,Zd(null,r))),a>-1&&c<0||a<c)}function yp(e,t){return t.getId(e)===Pd}function _p(e,t){if(wd(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||_p(e.parentNode,t))}function vp(e){return Boolean(e.changedTouches)}function bp(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function Sp(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function wp(e){return Boolean(op([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(dp=()=>(new Date).getTime());class kp{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return t=this.styleIDMap.get(e),n=()=>-1,null!=t?t:n();var t,n}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Ep(e){let t=null;return op([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Tp(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=Ep(n);)n=t;return n}(e);return t.contains(n)}function xp(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||Tp(e))}const Ip={};function Cp(e){const t=Ip[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return Ip[e]=r.bind(window)}function Rp(...e){return Cp("setTimeout")(...e)}var Ap=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Ap||{}),Op=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(Op||{}),Mp=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Mp||{}),Np=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Np||{});function Lp(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function Dp(e){return"__ln"in e}class Pp{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=Lp([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Dp(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&Dp(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const $p=(e,t)=>`${e}@${t}`;class Fp{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new Pp,r=e=>{let t=e,n=Pd;for(;n===Pd;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!xp(o))return;const s=wd(o.parentNode)?this.mirror.getId(Ep(o)):this.mirror.getId(o.parentNode),i=r(o);if(-1===s||-1===i)return n.addNode(o);const a=rp(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{bp(e,this.mirror)&&this.iframeManager.addIframe(e),Sp(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),wp(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});a&&(e.push({parentId:s,nextId:i,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)Up(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||o(e);for(const e of this.addedSet)Hp(this.droppedSet,e)||Up(this.removes,e,this.mirror)?Hp(this.movedSet,e)?o(e):this.droppedSet.add(e):o(e);let s=null;for(;n.length;){let e=null;if(s){const t=this.mirror.getId(s.value.parentNode),n=r(s.value);-1!==t&&-1!==n&&(e=s)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}s=e.previous,n.removeNode(e.value),o(e.value)}const i={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(i.texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(i))},this.processMutation=e=>{if(!yp(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;gp(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:ep(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,mp(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,r=e.target.getAttribute(n);if("value"===n){const n=Md(t),o=t.tagName;r=Nd(t,o,n);const s=Id({maskInputOptions:this.maskInputOptions,tagName:o,type:n});r=Cd({isMasked:ep(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,s),element:t,value:r,maskInputFn:this.maskInputFn})}if(gp(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||r===e.oldValue)return;let o=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(r)){if(t.contentDocument)return;n="rr_src"}if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!Jd(t.tagName,n)&&(o.attributes[n]=Xd(this.doc,Rd(t.tagName),Rd(n),r,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),s=t.style.getPropertyPriority(e);r!==n.style.getPropertyValue(e)||s!==n.style.getPropertyPriority(e)?o.styleDiff[e]=""===s?r:[r,s]:o._unchangedStyles[e]=[r,s]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(o.styleDiff[e]=!1)}break}case"childList":if(gp(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=wd(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);gp(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||yp(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(jp(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||_p(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[$p(n,r)]?jp(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!wd(e.target)||!kd(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(yp(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[$p(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);gp(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),wp(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function jp(e,t){e.delete(t),t.childNodes.forEach((t=>jp(e,t)))}function Up(e,t,n){return 0!==e.length&&Bp(e,t,n)}function Bp(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return!!e.some((e=>e.id===o))||Bp(e,r,n)}function Hp(e,t){return 0!==e.size&&zp(e,t)}function zp(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||zp(e,n))}let qp;const Wp=e=>{if(!qp)return e;return(...t)=>{try{return e(...t)}catch(e){if(qp&&!0===qp(e))return()=>{};throw e}}};function Gp(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}const Vp=[];function Yp(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function Kp(e,t){const n=new Fp;Vp.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const o=Gp([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);o&&window[o]&&(r=window[o]);const s=new r(Wp((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Xp({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,c=[];let l=null;return Object.keys(Mp).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((i=>{let a=Rd(i);const u=(t=>i=>{const a=Yp(i);if(gp(a,r,o,s,!0))return;let c=null,u=t;if("pointerType"in i){switch(i.pointerType){case"mouse":c=Np.Mouse;break;case"touch":c=Np.Touch;break;case"pen":c=Np.Pen}c===Np.Touch?Mp[t]===Mp.MouseDown?u="TouchStart":Mp[t]===Mp.MouseUp&&(u="TouchEnd"):Np.Pen}else vp(i)&&(c=Np.Touch);null!==c?(l=c,(u.startsWith("Touch")&&c===Np.Touch||u.startsWith("Mouse")&&c===Np.Mouse)&&(c=null)):Mp[t]===Mp.Click&&(c=l,l=null);const d=vp(i)?i.changedTouches[0]:i;if(!d)return;const p=n.getId(a),{clientX:h,clientY:f}=d;Wp(e)({type:Mp[u],id:p,x:h,y:f,...null!==c&&{pointerType:c}})})(i);if(window.PointerEvent)switch(Mp[i]){case Mp.MouseDown:case Mp.MouseUp:a=a.replace("mouse","pointer");break;case Mp.TouchStart:case Mp.TouchEnd:return}c.push(sp(a,u,t))})),Wp((()=>{c.forEach((e=>e()))}))}function Jp({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:i}){return sp("scroll",Wp(cp(Wp((i=>{const a=Yp(i);if(!a||gp(a,r,o,s,!0))return;const c=n.getId(a);if(a===t&&t.defaultView){const n=pp(t.defaultView);e({id:c,x:n.left,y:n.top})}else e({id:c,x:a.scrollLeft,y:a.scrollTop})})),i.scroll||100)),t)}const Qp=["INPUT","TEXTAREA","SELECT"],Zp=new WeakMap;function eh({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,ignoreClass:i,ignoreSelector:a,maskInputOptions:c,maskInputFn:l,sampling:u,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:h,maskTextSelector:f,unmaskTextSelector:m}){function g(e){let n=Yp(e);const u=e.isTrusted,g=n&&Ad(n.tagName);if("OPTION"===g&&(n=n.parentElement),!n||!g||Qp.indexOf(g)<0||gp(n,r,o,s,!0))return;const _=n;if(_.classList.contains(i)||a&&_.matches(a))return;const v=Md(n);let b=Nd(_,g,v),S=!1;const w=Id({maskInputOptions:c,tagName:g,type:v}),k=ep(n,p,f,h,m,w);"radio"!==v&&"checkbox"!==v||(S=n.checked),b=Cd({isMasked:k,element:n,value:b,maskInputFn:l}),y(n,d?{text:b,isChecked:S,userTriggered:u}:{text:b,isChecked:S});const E=n.name;"radio"===v&&E&&S&&t.querySelectorAll(`input[type="radio"][name="${E}"]`).forEach((e=>{if(e!==n){const t=Cd({isMasked:k,element:e,value:Nd(e,g,v),maskInputFn:l});y(e,d?{text:t,isChecked:!S,userTriggered:!1}:{text:t,isChecked:!S})}}))}function y(t,r){const o=Zp.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){Zp.set(t,r);const o=n.getId(t);Wp(e)({...r,id:o})}}const _=("last"===u.input?["change"]:["input","change"]).map((e=>sp(e,Wp(g),t))),v=t.defaultView;if(!v)return()=>{_.forEach((e=>e()))};const b=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),S=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];return b&&b.set&&_.push(...S.map((e=>lp(e[0],e[1],{set(){Wp(g)({target:this,isTrusted:!1})}},!1,v)))),Wp((()=>{_.forEach((e=>e()))}))}function th(e){return function(e,t){if(sh("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||sh("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||sh("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||sh("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function nh(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function rh({mirror:e,stylesheetManager:t},n){let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const o="#document"===n.nodeName?Gp([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):Gp([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),s=Gp([o,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(Gp([o,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&o&&s?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){return Gp([s,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=Gp([s,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(e){}return n}}),Wp((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))):()=>{}}function oh(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=Kp(e,e.doc),o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,s="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let i,a=[];const c=cp(Wp((t=>{const n=Date.now()-i;e(a.map((e=>(e.timeOffset-=n,e))),t),a=[],i=null})),s),l=Wp(cp(Wp((e=>{const t=Yp(e),{clientX:n,clientY:o}=vp(e)?e.changedTouches[0]:e;i||(i=dp()),a.push({x:n,y:o,id:r.getId(t),timeOffset:dp()-i}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?Op.Drag:e instanceof MouseEvent?Op.MouseMove:Op.TouchMove)})),o,{trailing:!1})),u=[sp("mousemove",l,n),sp("touchmove",l,n),sp("drag",l,n)];return Wp((()=>{u.forEach((e=>e()))}))}(e),s=Xp(e),i=Jp(e),a=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return sp("resize",Wp(cp(Wp((()=>{const t=hp(),o=fp();n===t&&r===o||(e({width:Number(o),height:Number(t)}),n=t,r=o)})),200)),t)}(e,{win:n}),c=eh(e),l=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:s,doc:i}){const a=Wp((i=>cp(Wp((s=>{const a=Yp(s);if(!a||gp(a,t,n,r,!0))return;const{currentTime:c,volume:l,muted:u,playbackRate:d}=a;e({type:i,id:o.getId(a),currentTime:c,volume:l,muted:u,playbackRate:d})})),s.media||500))),c=[sp("play",a(0),i),sp("pause",a(1),i),sp("seeked",a(2),i),sp("volumechange",a(3),i),sp("ratechange",a(4),i)];return Wp((()=>{c.forEach((e=>e()))}))}(e),u=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:Wp(((r,o,s)=>{const[i,a]=s,{id:c,styleId:l}=nh(o,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:i,index:a}]}),r.apply(o,s)}))});const s=r.CSSStyleSheet.prototype.deleteRule;let i,a;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:Wp(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=nh(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:i}]}),r.apply(o,s)}))}),r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:Wp(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=nh(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replace:i}),r.apply(o,s)}))})),r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:Wp(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=nh(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replaceSync:i}),r.apply(o,s)}))}));const c={};ih("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(ih("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),ih("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),ih("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const l={};return Object.entries(c).forEach((([r,o])=>{l[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(l[r].insertRule,{apply:Wp(((r,o,s)=>{const[i,a]=s,{id:c,styleId:l}=nh(o.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:i,index:[...th(o),a||0]}]}),r.apply(o,s)}))}),o.prototype.deleteRule=new Proxy(l[r].deleteRule,{apply:Wp(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=nh(o.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:[...th(o),i]}]}),r.apply(o,s)}))})})),Wp((()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=s,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=l[e].insertRule,t.prototype.deleteRule=l[e].deleteRule}))}))}(e,{win:n}),d=rh(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const s=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:Wp(((o,i,a)=>{const[c,l,u]=a;if(n.has(c))return s.apply(i,[c,l,u]);const{id:d,styleId:p}=nh(Gp([i,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&e({id:d,styleId:p,set:{property:c,value:l,priority:u},index:th(i.parentRule)}),o.apply(i,a)}))});const i=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:Wp(((o,s,a)=>{const[c]=a;if(n.has(c))return i.apply(s,[c]);const{id:l,styleId:u}=nh(Gp([s,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(l&&-1!==l||u&&-1!==u)&&e({id:l,styleId:u,remove:{property:c},index:th(s.parentRule)}),o.apply(s,a)}))}),Wp((()=>{o.CSSStyleDeclaration.prototype.setProperty=s,o.CSSStyleDeclaration.prototype.removeProperty=i}))}(e,{win:n}),h=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,s=n.FontFace;n.FontFace=function(e,t,n){const r=new s(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const i=up(t.fonts,"add",(function(t){return function(n){return Rp(Wp((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=s})),r.push(i),Wp((()=>{r.forEach((e=>e()))}))}(e):()=>{},f=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,selectionCb:i}=e;let a=!0;const c=Wp((()=>{const e=t.getSelection();if(!e||a&&Gp([e,"optionalAccess",e=>e.isCollapsed]))return;a=e.isCollapsed||!1;const c=[],l=e.rangeCount||0;for(let t=0;t<l;t++){const i=e.getRangeAt(t),{startContainer:a,startOffset:l,endContainer:u,endOffset:d}=i;gp(a,r,o,s,!0)||gp(u,r,o,s,!0)||c.push({start:n.getId(a),startOffset:l,end:n.getId(u),endOffset:d})}i({ranges:c})}));return c(),sp("selectionchange",c)}(e),m=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?up(n.customElements,"define",(function(e){return function(n,r,o){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,r,o])}})):()=>{}}(e),g=[];for(const t of e.plugins)g.push(t.observer(t.callback,n,t.options));return Wp((()=>{Vp.forEach((e=>e.reset())),r.disconnect(),o(),s(),i(),a(),c(),l(),u(),d(),p(),h(),f(),m(),g.forEach((e=>e()))}))}function sh(e){return void 0!==window[e]}function ih(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class ah{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),s=r||this.getRemoteIdToIdMap(e);let i=o.get(t);return i||(i=this.generateIdFn(),o.set(t,i),s.set(i,t)),i}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function ch(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}class lh{constructor(){this.crossOriginIframeMirror=new ah($d),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class uh{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new ah($d),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new ah(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),ch([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case Ap.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:Ap.IncrementalSnapshot,data:{source:Op.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Ap.Meta:case Ap.Load:case Ap.DomContentLoaded:return!1;case Ap.Plugin:return t;case Ap.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case Ap.IncrementalSnapshot:switch(t.data.source){case Op.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Op.Drag:case Op.TouchMove:case Op.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Op.ViewportResize:return!1;case Op.MediaInteraction:case Op.MouseInteraction:case Op.Scroll:case Op.CanvasMutation:case Op.Input:return this.replaceIds(t.data,e,["id"]),t;case Op.StyleSheetRule:case Op.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Op.Font:return t;case Op.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case Op.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),ch([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===Sd.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class dh{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class ph{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!kd(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Kp({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Jp({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),Rp((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(rh({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(up(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&xp(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class hh{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class fh{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new kp,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:Td(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class mh{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){!function(...e){Cp("requestAnimationFrame")(...e)}((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let gh,yh;const _h=new xd;function vh(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:s=null,unblockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:l=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:h=null,inlineStylesheet:f=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:y,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,maxCanvasSize:S=null,packFn:w,sampling:k={},dataURLOptions:E={},mousemoveWait:T,recordCanvas:x=!1,recordCrossOriginIframes:I=!1,recordAfter:C=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:R=!1,collectFonts:A=!1,inlineImages:O=!1,plugins:M,keepIframeSrcFn:N=(()=>!1),ignoreCSSAttributes:L=new Set([]),errorHandler:D,onMutation:P,getCanvasManager:$}=e;qp=D;const F=!I||window.parent===window;let j=!1;if(!F)try{window.parent.document&&(j=!1)}catch(e){j=!0}if(F&&!t)throw new Error("emit function is required");void 0!==T&&void 0===k.mousemove&&(k.mousemove=T),_h.reset();const U=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==g?g:{},B=!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===y,headMetaDescKeywords:"all"===y}:y||{};let H;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let z=0;const q=e=>{for(const t of M||[])t.eventProcessor&&(e=t.eventProcessor(e));return w&&!j&&(e=w(e)),e};gh=(e,o)=>{const s=e;if(s.timestamp=dp(),!bs([Vp,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||s.type===Ap.FullSnapshot||s.type===Ap.IncrementalSnapshot&&s.data.source===Op.Mutation||Vp.forEach((e=>e.unfreeze())),F)bs([t,"optionalCall",e=>e(q(s),o)]);else if(j){const e={type:"rrweb",event:q(s),origin:window.location.origin,isCheckout:o};window.parent.postMessage(e,"*")}if(s.type===Ap.FullSnapshot)H=s,z=0;else if(s.type===Ap.IncrementalSnapshot){if(s.data.source===Op.Mutation&&s.data.isAttachIframe)return;z++;const e=r&&z>=r,t=n&&H&&s.timestamp-H.timestamp>n;(e||t)&&Z(!0)}};const W=e=>{gh({type:Ap.IncrementalSnapshot,data:{source:Op.Mutation,...e}})},G=e=>gh({type:Ap.IncrementalSnapshot,data:{source:Op.Scroll,...e}}),V=e=>gh({type:Ap.IncrementalSnapshot,data:{source:Op.CanvasMutation,...e}}),Y=new fh({mutationCb:W,adoptedStyleSheetCb:e=>gh({type:Ap.IncrementalSnapshot,data:{source:Op.AdoptedStyleSheet,...e}})}),K="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new lh:new uh({mirror:_h,mutationCb:W,stylesheetManager:Y,recordCrossOriginIframes:I,wrappedEmit:gh});for(const e of M||[])e.getMirror&&e.getMirror({nodeMirror:_h,crossOriginIframeMirror:K.crossOriginIframeMirror,crossOriginIframeStyleMirror:K.crossOriginIframeStyleMirror});const X=new mh,J=function(e,t){try{return e?e(t):new hh}catch(e){return console.warn("Unable to initialize CanvasManager"),new hh}}($,{mirror:_h,win:window,mutationCb:e=>gh({type:Ap.IncrementalSnapshot,data:{source:Op.CanvasMutation,...e}}),recordCanvas:x,blockClass:o,blockSelector:s,unblockSelector:i,maxCanvasSize:S,sampling:k.canvas,dataURLOptions:E,errorHandler:D}),Q="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new dh:new ph({mutationCb:W,scrollCb:G,bypassOptions:{onMutation:P,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskInputOptions:U,dataURLOptions:E,maskAttributeFn:_,maskTextFn:b,maskInputFn:v,recordCanvas:x,inlineImages:O,sampling:k,slimDOMOptions:B,iframeManager:K,stylesheetManager:Y,canvasManager:J,keepIframeSrcFn:N,processedNodeManager:X},mirror:_h}),Z=(e=!1)=>{gh({type:Ap.Meta,data:{href:window.location.href,width:fp(),height:hp()}},e),Y.reset(),Q.init(),Vp.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new xd,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:s=null,maskAllText:i=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:l=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:h=!1,maskAllInputs:f=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOM:_=!1,dataURLOptions:v,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:T,keepIframeSrcFn:x=(()=>!1)}=t||{};return rp(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,maskAllText:i,maskTextClass:a,unmaskTextClass:c,maskTextSelector:l,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===f?{}:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===_,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===_?{}:_,dataURLOptions:v,inlineImages:p,recordCanvas:h,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:T,keepIframeSrcFn:x,newlyAddedElement:!1})}(document,{mirror:_h,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskAllInputs:U,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,slimDOM:B,dataURLOptions:E,recordCanvas:x,inlineImages:O,onSerialize:e=>{bp(e,_h)&&K.addIframe(e),Sp(e,_h)&&Y.trackLinkElement(e),wp(e)&&Q.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{K.attachIframe(e,t),Q.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{Y.attachLinkElement(e,t)},keepIframeSrcFn:N});if(!t)return console.warn("Failed to snapshot the document");gh({type:Ap.FullSnapshot,data:{node:t,initialOffset:pp(window)}}),Vp.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Y.adoptStyleSheets(document.adoptedStyleSheets,_h.getId(document))};yh=Z;try{const e=[],t=e=>Wp(oh)({onMutation:P,mutationCb:W,mousemoveCb:(e,t)=>gh({type:Ap.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>gh({type:Ap.IncrementalSnapshot,data:{source:Op.MouseInteraction,...e}}),scrollCb:G,viewportResizeCb:e=>gh({type:Ap.IncrementalSnapshot,data:{source:Op.ViewportResize,...e}}),inputCb:e=>gh({type:Ap.IncrementalSnapshot,data:{source:Op.Input,...e}}),mediaInteractionCb:e=>gh({type:Ap.IncrementalSnapshot,data:{source:Op.MediaInteraction,...e}}),styleSheetRuleCb:e=>gh({type:Ap.IncrementalSnapshot,data:{source:Op.StyleSheetRule,...e}}),styleDeclarationCb:e=>gh({type:Ap.IncrementalSnapshot,data:{source:Op.StyleDeclaration,...e}}),canvasMutationCb:V,fontCb:e=>gh({type:Ap.IncrementalSnapshot,data:{source:Op.Font,...e}}),selectionCb:e=>{gh({type:Ap.IncrementalSnapshot,data:{source:Op.Selection,...e}})},customElementCb:e=>{gh({type:Ap.IncrementalSnapshot,data:{source:Op.CustomElement,...e}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,maskInputOptions:U,inlineStylesheet:f,sampling:k,recordCanvas:x,inlineImages:O,userTriggeredOnInput:R,collectFonts:A,doc:e,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,keepIframeSrcFn:N,blockSelector:s,unblockSelector:i,slimDOMOptions:B,dataURLOptions:E,mirror:_h,iframeManager:K,stylesheetManager:Y,shadowDomManager:Q,processedNodeManager:X,canvasManager:J,ignoreCSSAttributes:L,plugins:bs([M,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>gh({type:Ap.Plugin,data:{plugin:e.name,payload:t}})})))])||[]},{});K.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{Z(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(sp("DOMContentLoaded",(()=>{gh({type:Ap.DomContentLoaded,data:{}}),"DOMContentLoaded"===C&&n()}))),e.push(sp("load",(()=>{gh({type:Ap.Load,data:{}}),"load"===C&&n()}),window))),()=>{e.forEach((e=>e())),X.destroy(),yh=void 0,qp=void 0}}catch(e){console.warn(e)}}vh.mirror=_h,vh.takeFullSnapshot=function(e){if(!yh)throw new Error("please take full snapshot after start recording");yh(e)};const bh=3;function Sh(e){return e>9999999999?e:1e3*e}function wh(e){return e>9999999999?e/1e3:e}function kh(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:Ap.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:So(t,10,1e3)}}),"console"===t.category))))}const Eh="button,a";function Th(e){return e.closest(Eh)||e}function xh(e){const t=Ih(e);return t&&t instanceof Element?Th(t):t}function Ih(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let Ch;function Rh(e){return Ch||(Ch=[],ur(pd,"open",(function(e){return function(...t){if(Ch)try{Ch.forEach((e=>e()))}catch(e){}return e.apply(pd,t)}}))),Ch.push(e),()=>{const t=Ch?Ch.indexOf(e):-1;t>-1&&Ch.splice(t,1)}}class Ah{constructor(e,t,n=kh){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=Rh((()=>{this._lastMutation=Mh()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!Oh.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:wh(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=wh(e)}registerScroll(e=Date.now()){this._lastScroll=wh(e)}registerClick(e){const t=Th(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=Mh();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!n&&!r,{clickCount:s,clickBreadcrumb:i}=e;if(o){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",o={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.slowClickDetected",data:{...i.data,url:pd.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:s||1}};this._addBreadcrumbEvent(t,o)}else if(s>1){const e={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.multiClick",data:{...i.data,url:pd.location.href,route:t.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const Oh=["A","BUTTON","INPUT"];function Mh(){return Date.now()/1e3}function Nh(e,t){try{if(!function(e){return e.type===bh}(t))return;const{source:n}=t.data;if(n===Op.Mutation&&e.registerMutation(t.timestamp),n===Op.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===Op.MouseInteraction}(t)){const{type:n,id:r}=t.data,o=vh.mirror.getNode(r);o instanceof HTMLElement&&n===Mp.Click&&e.registerClick(o)}}catch(e){}}function Lh(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Dh;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Dh||(Dh={}));const Ph=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function $h(e){const t={};for(const n in e)if(Ph.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const Fh=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?xh(e.event):Ih(e.event),n=Yn(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return Lh({category:`ui.${e.name}`,...jh(t,n)})}(t);if(!n)return;const r="click"===t.name,o=r?t.event:void 0;var s,i,a;!(r&&e.clickDetector&&o&&o.target)||o.altKey||o.metaKey||o.ctrlKey||o.shiftKey||(s=e.clickDetector,i=n,a=xh(t.event),s.handleClick(i,a)),kh(e,n)};function jh(e,t){const n=vh.mirror.getId(e),r=n&&vh.mirror.getNode(n),o=r&&vh.mirror.getMeta(r),s=o&&function(e){return e.type===Dh.Element}(o)?o:null;return{message:t,data:s?{nodeId:n,node:{id:n,tagName:s.tagName,textContent:Array.from(s.childNodes).map((e=>e.type===Dh.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:$h(s.attributes)}}:{}}}function Uh(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s,target:i}=e;if(!i||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(i)||!s)return null;const a=t||r||o,c=1===s.length;if(!a&&c)return null;const l=Yn(i,{maxStringLength:200})||"<unknown>",u=jh(i,l);return Lh({category:"ui.keyDown",message:l,data:{...u.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s}})}(t);n&&kh(e,n)}const Bh={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:s,decodedBodySize:i,encodedBodySize:a,responseStatus:c,transferSize:l}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:zh(s),end:zh(o),name:r,data:{size:l,statusCode:c,decodedBodySize:i,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:o}=e,s=zh(o);return{type:n,name:r,start:s,end:s+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:s,encodedBodySize:i,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:l,loadEventStart:u,loadEventEnd:d,redirectCount:p,startTime:h,transferSize:f,type:m}=e;if(0===o)return null;return{type:`${t}.${m}`,start:zh(h),end:zh(s),name:n,data:{size:f,decodedBodySize:r,encodedBodySize:i,duration:o,domInteractive:l,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:u,loadEventEnd:d,domComplete:s,redirectCount:p}}}};function Hh(e){return Bh[e.entryType]?Bh[e.entryType](e):null}function zh(e){return((Vo||pd.performance.timeOrigin)+e)/1e3}function qh(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach((e=>{r.push(ol(e,n))})),r.push(rl((({metric:t})=>{e.replayPerformanceEntries.push(function(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,o=e.value,s=zh(o);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:s,end:s,data:{value:o,size:o,nodeId:r?vh.mirror.getId(r):void 0}}}(t))}))),()=>{r.forEach((e=>e()))}}const Wh="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Gh='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function Vh(e,t){Wh&&(rr.info(e),t&&Kh(e))}function Yh(e,t){Wh&&(rr.info(e),t&&setTimeout((()=>{Kh(e)}),0))}function Kh(e){zs({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class Xh extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class Jh{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>_d)throw new Xh;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?Sh(e):null}}class Qh{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){Vh("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((r,o)=>{const s=({data:t})=>{const i=t;if(i.method===e&&i.id===n){if(this._worker.removeEventListener("message",s),!i.success)return Wh&&rr.error("[Replay]",i.response),void o(new Error("Error in compression worker"));r(i.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class Zh{constructor(e){this._worker=new Qh(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=Sh(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>_d?Promise.reject(new Xh):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{Wh&&rr.warn('[Replay] Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class ef{constructor(e){this._fallback=new Jh,this._compression=new Zh(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void Vh("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const t of e)n.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n)}catch(e){Wh&&rr.warn("[Replay] Failed to add events when switching buffers.",e)}}}function tf({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob([Gh]);return URL.createObjectURL(e)}();return""}();if(!t)return;Vh("[Replay] Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new ef(n)}catch(e){Vh("[Replay] Failed to create compression worker")}}(t);if(e)return e}return Vh("[Replay] Using simple buffer"),new Jh}function nf(){try{return"sessionStorage"in pd&&!!pd.sessionStorage}catch(e){return!1}}function rf(e){!function(){if(!nf())return;try{pd.sessionStorage.removeItem(hd)}catch(e){}}(),e.session=void 0}function of(e){return void 0!==e&&Math.random()<e}function sf(e){const t=Date.now();return{id:e.id||Mr(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function af(e){if(nf())try{pd.sessionStorage.setItem(hd,JSON.stringify(e))}catch(e){}}function cf({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const o=function(e,t){return of(e)?"session":!!t&&"buffer"}(e,t),s=sf({sampled:o,previousSessionId:r});return n&&af(s),s}function lf(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function uf(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return lf(e.started,t,r)||lf(e.lastActivity,n,r)}function df(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!uf(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function pf({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},o){const s=o.stickySession&&function(e){if(!nf())return null;try{const t=pd.sessionStorage.getItem(hd);if(!t)return null;const n=JSON.parse(t);return Yh("[Replay] Loading existing session",e),sf(n)}catch(e){return null}}(e);return s?df(s,{sessionIdleExpire:t,maxReplayDuration:n})?(Yh("[Replay] Session in sessionStorage is expired, creating new one..."),cf(o,{previousSessionId:s.id})):s:(Yh("[Replay] Creating new session",e),cf(o,{previousSessionId:r}))}function hf(e,t,n){return!!mf(e,t)&&(ff(e,t,n),!0)}async function ff(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=function(e,t){try{if("function"==typeof t&&function(e){return e.type===Ap.Custom}(e))return t(e)}catch(e){return Wh&&rr.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",e),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!r)return;return await e.eventBuffer.addEvent(r)}catch(t){const n=t&&t instanceof Xh?"addEventSizeExceeded":"addEvent";Wh&&rr.error(t),await e.stop({reason:n});const r=Gs();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function mf(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Sh(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(Vh(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1))}function gf(e){return!e.type}function yf(e){return"transaction"===e.type}function _f(e){return"feedback"===e.type}function vf(e){const t=function(){const e=Gs();if(!e)return!1;const t=e.getTransport();if(!t)return!1;return t.send.__sentry__baseTransport__||!1}();return(n,r)=>{if(!e.isEnabled()||!gf(n)&&!yf(n))return;const o=r&&r.statusCode;t&&(!o||o<200||o>=300)||(yf(n)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,n):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"==typeof r&&!r(t))return;setTimeout((()=>{e.sendBufferedReplayOrFlush()}))}(e,n))}}function bf(e){return t=>{e.isEnabled()&&gf(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){kh(e,Lh({category:"replay.hydrate-error"}))}}(e,t)}}function Sf(e,t=!1){const n=t?vf(e):void 0;return Object.assign(((t,r)=>{if(!e.isEnabled())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!gf(t)&&!yf(t)&&!_f(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(_f(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:Ap.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,r)&&!e.getOptions()._experiments.captureExceptions)return Wh&&rr.log("[Replay] Ignoring error from rrweb internals",t),null;const o=function(e,t){return"buffer"===e.recordingMode&&t.message!==md&&!(!t.exception||t.type)&&of(e.getOptions().errorSampleRate)}(e,t);return(o||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),n&&n(t,{statusCode:200}),t}),{id:"Replay"})}function wf(e,t){return t.map((({type:t,start:n,end:r,name:o,data:s})=>{const i=e.throttledAddEvent({type:Ap.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:o,startTimestamp:n,endTimestamp:r,data:s}}});return"string"==typeof i?Promise.resolve(null):i}))}function kf(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(wf(e,[n]),!1))))}}function Ef(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!Wh||!e.getOptions()._experiments.traceInternals)&&Na(t,Gs())}(e,t.name)||e.addUpdate((()=>(wf(e,[t]),!0))))}function Tf(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,o=r[fo];if(!t||!n||!o)return null;const{method:s,url:i,status_code:a}=o;return void 0===i?null:{type:"resource.xhr",name:i,start:t/1e3,end:n/1e3,data:{method:s,statusCode:a}}}(t);Ef(e,n)}}function xf(e,t){if(e)try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Lf(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function If(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Cf(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Lf(e)];if(!e)return[void 0]}catch(t){return Wh&&rr.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Wh&&rr.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Rf(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function Af(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:s,statusCode:i,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:yr({method:s,statusCode:i,request:a,response:c})}}function Of(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Mf(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:s}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>gd,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,gd);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return r.body=o,s&&s.length>0&&(r._meta={warnings:s}),r}function Nf(e,t){return Object.keys(e).reduce(((n,r)=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=e[r]),n}),{})}function Lf(e){return new URLSearchParams(e).toString()}function Df(e,t){const n=function(e,t=pd.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(pd.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return $n(n,t)}async function Pf(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r}=t,{url:i,method:a,status_code:c=0,request_body_size:l,response_body_size:u}=e.data,d=Df(i,n.networkDetailAllowUrls)&&!Df(i,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const o=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return jf(e[0],t);if(2===e.length)return jf(e[1],t);return{}}(n,t):{};if(!e)return Mf(o,r,void 0);const s=$f(n),[i,a]=Cf(s),c=Mf(o,r,i);if(a)return Rf(c,a);return c}(n,t.input,l):Of(l),h=await async function(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},o,s){if(!e&&void 0!==s)return Of(s);const i=o?Ff(o.headers,r):{};if(!o||!t&&void 0!==s)return Mf(i,s,void 0);const[a,c]=await async function(e){const t=function(e){try{return e.clone()}catch(e){Wh&&rr.warn("[Replay] Failed to clone response body",e)}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const r=setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(r)))}))}(t);return[e]}catch(e){return Wh&&rr.warn("[Replay] Failed to get text body from response",e),[void 0,"BODY_PARSE_ERROR"]}}(o),l=function(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:o,headers:s}){try{const i=e&&e.length&&void 0===r?xf(e,n):r;return o?Mf(s,i,t?e:void 0):Of(i)}catch(e){return Wh&&rr.warn("[Replay] Failed to serialize response body",e),Mf(s,r,void 0)}}(a,{networkCaptureBodies:t,textEncoder:n,responseBodySize:s,captureDetails:e,headers:i});if(c)return Rf(l,c);return l}(d,n,t.response,u);return{startTimestamp:o,endTimestamp:s,url:i,method:a,statusCode:c,request:p,response:h}}(e,t,n),o=Af("resource.fetch",r);Ef(n.replay,o)}catch(e){Wh&&rr.error("[Replay] Failed to capture fetch breadcrumb",e)}}function $f(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function Ff(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function jf(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Ff(n,t):Array.isArray(n)?{}:Nf(n,t):{}}async function Uf(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r,input:i,xhr:a}=t,{url:c,method:l,status_code:u=0,request_body_size:d,response_body_size:p}=e.data;if(!c)return null;if(!a||!Df(c,n.networkDetailAllowUrls)||Df(c,n.networkDetailDenyUrls)){return{startTimestamp:o,endTimestamp:s,url:c,method:l,statusCode:u,request:Of(d),response:Of(p)}}const h=a[fo],f=h?Nf(h.request_headers,n.networkRequestHeaders):{},m=Nf(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n.toLowerCase()]=r,e}),{})}(a),n.networkResponseHeaders),[g,y]=n.networkCaptureBodies?Cf(i):[void 0],[_,v]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return Wh&&rr.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Wh&&rr.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return Wh&&rr.warn("[Replay] Failed to get xhr response body",...t),[void 0]}(a):[void 0],b=Mf(f,d,g),S=Mf(m,p,_);return{startTimestamp:o,endTimestamp:s,url:c,method:l,statusCode:u,request:y?Rf(b,y):b,response:v?Rf(S,v):S}}(e,t,n),o=Af("resource.xhr",r);Ef(n.replay,o)}catch(e){Wh&&rr.error("[Replay] Failed to capture xhr breadcrumb",e)}}function Bf(e,t,n){const{xhr:r,input:o}=t;if(!r)return;const s=xf(o,n.textEncoder),i=r.getResponseHeader("content-length")?If(r.getResponseHeader("content-length")):function(e,t,n){try{return xf("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e,n)}catch(e){return}}(r.response,r.responseType,n.textEncoder);void 0!==s&&(e.data.request_body_size=s),void 0!==i&&(e.data.response_body_size=i)}function Hf(e){const t=Gs();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:a}=e.getOptions(),c={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:a};t&&t.on?t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(Bf(t,n,e),Uf(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t,n){const{input:r,response:o}=t,s=xf(r?$f(r):void 0,n.textEncoder),i=o?If(o.headers.get("content-length")):void 0;void 0!==s&&(e.data.request_body_size=s),void 0!==i&&(e.data.response_body_size=i)}(t,n,e),Pf(t,n,e))}catch(e){Wh&&rr.warn("Error when enriching network breadcrumb")}}(c,e,t))):(Jr(function(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:o}=e;if(!n)return null;const{method:s,url:i}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:i,data:{method:s,statusCode:o?o.status:void 0}}}(t);Ef(e,n)}}(e)),mo(Tf(e)))}catch(e){}}let zf=null;const qf=e=>t=>{if(!e.isEnabled())return;const n=function(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();if(zf===t||!t)return null;if(zf=t,!function(e){return!!e.category}(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))return null;if("console"===t.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return Lh(e);let n=!1;const r=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>yd?(n=!0,`${e.slice(0,yd)}…`):e;if("object"==typeof e)try{const t=So(e,7);return JSON.stringify(t).length>yd?(n=!0,`${JSON.stringify(t,null,2).slice(0,yd)}…`):t}catch(e){}return e}));return Lh({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(t);return Lh(t)}(t);n&&kh(e,n)};function Wf(e){return!(!e||!e.on)}function Gf(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Vf(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(Wh&&rr.warn("[Replay] Received replay event after session expired."));const o=r||!t;t=!0,e.clickDetector&&Nh(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&o&&e.setInitialState(),!hf(e,n,o))return!0;if(!o)return!1;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;hf(e,function(e){const t=e.getOptions();return{type:Ap.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,o),e.session&&e.session.previousSessionId)return!0;if("buffer"===e.recordingMode&&e.session&&e.eventBuffer){const t=e.eventBuffer.getEarliestTimestamp();t&&(Vh(`[Replay] Updating session start time to earliest event in buffer to ${new Date(t)}`,e.getOptions()._experiments.traceInternals),e.session.started=t,e.getOptions().stickySession&&af(e.session))}return"session"===e.recordingMode&&e.flush(),!0}))}}async function Yf({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:s}){const i=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:l,initialTimestamp:u}=r,d=Gs(),p=Vs(),h=d&&d.getTransport(),f=d&&d.getDsn();if(!(d&&h&&f&&s.sampled))return;const m={type:fd,replay_start_timestamp:u/1e3,timestamp:o/1e3,error_ids:c,trace_ids:l,urls:a,replay_id:t,segment_id:n,replay_type:s.sampled},g=await async function({client:e,scope:t,replayId:n,event:r}){const o={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit&&e.emit("preprocessEvent",r,o);const s=await Ps(e.getOptions(),r,o,t,e,fi());if(!s)return null;s.platform=s.platform||"javascript";const i=e.getSdkMetadata&&e.getSdkMetadata(),{name:a,version:c}=i&&i.sdk||{};return s.sdk={...s.sdk,name:a||"sentry.javascript.unknown",version:c||"0.0.0"},s}({scope:p,client:d,replayId:t,event:m});if(!g)return d.recordDroppedEvent("event_processor","replay",m),void Vh("An event processor returned `null`, will not send event.");delete g.sdkProcessingMetadata;const y=function(e,t,n,r){return ss(fs(e,hs(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(g,i,f,d.getOptions().tunnel);let _;try{_=await h.send(y)}catch(e){const t=new Error(md);try{t.cause=e}catch(e){}throw t}if(!_)return _;if("number"==typeof _.statusCode&&(_.statusCode<200||_.statusCode>=300))throw new Kf(_.statusCode);const v=_s({},_);if(ys(v,"replay"))throw new Xf(v);return _}class Kf extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class Xf extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Jf(e,t={count:0,interval:5e3}){const{recordingData:n,options:r}=e;if(n.length)try{return await Yf(e),!0}catch(n){if(n instanceof Kf||n instanceof Xf)throw n;if(qs("Replays",{_retryCount:t.count}),Wh&&r._experiments&&r._experiments.captureExceptions&&Us(n),t.count>=3){const e=new Error(`${md} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,r)=>{setTimeout((async()=>{try{await Jf(e,t),n(!0)}catch(e){r(e)}}),t.interval)}))}}const Qf="__THROTTLED";function Zf(e,t,n){const r=new Map;let o=!1;return(...s)=>{const i=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach(((e,n)=>{n<t&&r.delete(n)}))})(i),[...r.values()].reduce(((e,t)=>e+t),0)>=t){const e=o;return o=!0,e?"__SKIPPED":Qf}o=!1;const a=r.get(i)||0;return r.set(i,a+1),e(...s)}}class em{constructor({options:e,recordingOptions:t}){em.prototype.__init.call(this),em.prototype.__init2.call(this),em.prototype.__init3.call(this),em.prototype.__init4.call(this),em.prototype.__init5.call(this),em.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let r,o,s;const i=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){void 0!==o&&clearTimeout(o),void 0!==s&&clearTimeout(s),o=s=void 0}function l(){return o&&clearTimeout(o),o=setTimeout(a,t),i&&void 0===s&&(s=setTimeout(a,i)),r}return l.cancel=c,l.flush=function(){return void 0!==o||void 0!==s?a():r},l}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Zf(((e,t)=>function(e,t,n){return mf(e,t)?ff(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),o=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;o&&(this.clickDetector=new Ah(this,o))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options;t<=0&&n<=0||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",Yh(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Yh("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const e=pf({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Yh("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=pf({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=vh({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:Vf(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{Vh("[Replay] Stopping Replay"+(t?` triggered by ${t}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,rf(this)}catch(e){this._handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Vh("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),Vh("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();Vh("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&lf(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${pd.location.pathname}${pd.location.hash}${pd.location.search}`,t=`${pd.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===Qf){const e=Lh({category:"replay.throttled"});this.addUpdate((()=>!hf(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastTransaction||Vs().getTransaction(),t=(e&&Ls(e).data||{})[Fi];if(e&&t&&["route","custom"].includes(t))return Ls(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=tf({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){Wh&&rr.error("[Replay]",e),Wh&&this._options._experiments&&this._options._experiments.captureExceptions&&Us(e)}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=pf({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!df(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{pd.document.addEventListener("visibilitychange",this._handleVisibilityChange),pd.addEventListener("blur",this._handleWindowBlur),pd.addEventListener("focus",this._handleWindowFocus),pd.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(e){const t=Vs(),n=Gs();t.addScopeListener(qf(e)),qr(Fh(e)),uo(kf(e)),Hf(e);const r=Sf(e,!Wf(n));n&&n.addEventProcessor?n.addEventProcessor(r):ba(r),Wf(n)&&(n.on("beforeSendEvent",bf(e)),n.on("afterSendEvent",vf(e)),n.on("createDsc",(t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)})),n.on("startTransaction",(t=>{e.lastTransaction=t})),n.on("finishTransaction",(t=>{e.lastTransaction=t})),n.on("beforeSendFeedback",((t,n)=>{const r=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&r&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=r)})))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=qh(this)}_removeListeners(){try{pd.document.removeEventListener("visibilitychange",this._handleVisibilityChange),pd.removeEventListener("blur",this._handleWindowBlur),pd.removeEventListener("focus",this._handleWindowFocus),pd.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===pd.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=Lh({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=Lh({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{Uh(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;uf(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):Vh("[Replay] Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:Ap.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){const e=(t=this.performanceEntries,t.map(Hh).filter(Boolean)).concat(this.replayPerformanceEntries);var t;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(wf(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(wf(e,[Gf(pd.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await Jf({replayId:e,recordingData:o,segmentId:r,eventContext:n,session:this.session,options:this.getOptions(),timestamp:t})}catch(e){this._handleException(e),this.stop({reason:"sendReplay"});const t=Gs();t&&t.recordDroppedEvent("send_error","replay")}}else Wh&&rr.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(Wh&&rr.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,o=n>this._options.maxReplayDuration+5e3;if(r||o)return Vh(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(r&&this._debouncedFlush());const s=this.eventBuffer;if(s&&0===this.session.segmentId&&!s.hasCheckout&&Vh("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(e){Wh&&rr.error(e)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&af(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,r=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||r){const e=Lh({category:"replay.mutations",data:{count:t,limit:r}});this._createCustomBreadcrumb(e)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function tm(e,t,n,r){const o=[...e,..."string"==typeof r?r.split(","):[],...t];return void 0!==n&&("string"==typeof n&&o.push(`.${n}`),nr((()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")}))),o.join(",")}const nm='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',rm=["content-length","content-type","accept"];let om=!1;class sm{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:o=!0,useCompression:s=!0,workerUrl:i,_experiments:a={},sessionSampleRate:c,errorSampleRate:l,maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:h=750,mutationLimit:f=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:y=[],networkDetailDenyUrls:_=[],networkCaptureBodies:v=!0,networkRequestHeaders:b=[],networkResponseHeaders:S=[],mask:w=[],maskAttributes:k=["title","placeholder"],unmask:E=[],block:T=[],unblock:x=[],ignore:I=[],maskFn:C,beforeAddRecordingEvent:R,beforeErrorSampling:A,blockClass:O,blockSelector:M,maskInputOptions:N,maskTextClass:L,maskTextSelector:D,ignoreClass:P}={}){this.name=sm.id;const $=function({mask:e,unmask:t,block:n,unblock:r,ignore:o,blockClass:s,blockSelector:i,maskTextClass:a,maskTextSelector:c,ignoreClass:l}){const u={maskTextSelector:tm(e,[".sentry-mask","[data-sentry-mask]"],a,c),unmaskTextSelector:tm(t,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:tm(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],s,i),unblockSelector:tm(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:tm(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],l)};return s instanceof RegExp&&(u.blockClass=s),a instanceof RegExp&&(u.maskTextClass=a),u}({mask:w,unmask:E,block:T,unblock:x,ignore:I,blockClass:O,blockSelector:M,maskTextClass:L,maskTextSelector:D,ignoreClass:P});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{...N||{},password:!0},maskTextFn:C,maskInputFn:C,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:s}){return r?o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?s:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s:s}({maskAttributes:k,maskAllText:u,privacyOptions:$,key:e,value:t,el:n}),...$,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,vd),stickySession:o,sessionSampleRate:c,errorSampleRate:l,useCompression:s,workerUrl:i,blockAllMedia:p,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:h,mutationLimit:f,slowClickTimeout:m,slowClickIgnoreSelectors:g,networkDetailAllowUrls:y,networkDetailDenyUrls:_,networkCaptureBodies:v,networkRequestHeaders:im(b),networkResponseHeaders:im(S),beforeAddRecordingEvent:R,beforeErrorSampling:A,_experiments:a},"number"==typeof c&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${c} })`),this._initialOptions.sessionSampleRate=c),"number"==typeof l&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${l} })`),this._initialOptions.errorSampleRate=l),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${nm}`:nm),this._isInitialized&&bo())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return om}set _isInitialized(e){om=e}setupOnce(){bo()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=function(e){const t=Gs(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...yr(e)};if(!n)return nr((()=>{console.warn("SDK client is not available.")})),r;null==e.sessionSampleRate&&null==e.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&nr((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));"number"==typeof n.replaysSessionSampleRate&&(r.sessionSampleRate=n.replaysSessionSampleRate);"number"==typeof n.replaysOnErrorSampleRate&&(r.errorSampleRate=n.replaysOnErrorSampleRate);return r}(this._initialOptions);this._replay=new em({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const e=Gs().getIntegrationByName("ReplayCanvas");if(!e)return;this._replay._canvas=e.getOptions()}catch(e){}}}function im(e){return[...rm,...e.map((e=>e.toLowerCase()))]}var am;function cm(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:cm(e.parentNode,t,n,r+1):-1}function lm(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}sm.__initStatic(),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(am||(am={}));const um="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let dm={map:{},getId:()=>(console.error(um),-1),getNode:()=>(console.error(um),null),removeNodeFromMap(){console.error(um)},has:()=>(console.error(um),!1),reset(){console.error(um)}};function pm(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){_m((()=>{n.set.call(this,e)}),0),s&&s.set&&s.set.call(this,e)}}),()=>pm(e,t,s||{},!0)}function hm(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}function fm(e,t,n,r,o){if(!e)return!1;const s=function(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}(e);if(!s)return!1;const i=lm(t,n);if(!o){const e=r&&s.matches(r);return i(s)&&!e}const a=cm(s,i);let c=-1;return!(a<0)&&(r&&(c=cm(s,lm(null,r))),a>-1&&c<0||a<c)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(dm=new Proxy(dm,{get:(e,t,n)=>("map"===t&&console.error(um),Reflect.get(e,t,n))})),/[1-9][0-9]{12}/.test(Date.now().toString());const mm={};function gm(e){const t=mm[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return mm[e]=r.bind(window)}function ym(...e){return gm("requestAnimationFrame")(...e)}function _m(...e){return gm("setTimeout")(...e)}var vm=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(vm||{});let bm;function Sm(e){bm=e}const wm=e=>{if(!bm)return e;return(...t)=>{try{return e(...t)}catch(e){if(bm&&!0===bm(e))return()=>{};throw e}}};for(var km="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Em="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Tm=0;Tm<64;Tm++)Em[km.charCodeAt(Tm)]=Tm;const xm=new Map;const Im=(e,t,n)=>{if(!e||!Am(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=xm.get(e);return n||(n=new Map,xm.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function Cm(e,t,n){if(e instanceof Array)return e.map((e=>Cm(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=km[n[t]>>2],o+=km[(3&n[t])<<4|n[t+1]>>4],o+=km[(15&n[t+1])<<2|n[t+2]>>6],o+=km[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[Cm(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[Cm(e.data,t,n),e.width,e.height]}}if(Am(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:Im(e,t,n)}}return e}const Rm=(e,t,n)=>e.map((e=>Cm(e,t,n))),Am=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function Om(e,t,n,r,o){const s=[];try{const i=hm(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(s,...i){if(!fm(this,t,n,r,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(s);if("__context"in this||(this.__context=e),o&&["webgl","webgl2"].includes(e))if(i[0]&&"object"==typeof i[0]){const e=i[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[s,...i])}}));s.push(i)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{s.forEach((e=>e()))}}function Mm(e,t,n,r,o,s,i,a){const c=[],l=Object.getOwnPropertyNames(e);for(const i of l)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(i))try{if("function"!=typeof e[i])continue;const l=hm(e,i,(function(e){return function(...c){const l=e.apply(this,c);if(Im(l,a,this),"tagName"in this.canvas&&!fm(this.canvas,r,o,s,!0)){const e=Rm(c,a,this),r={type:t,property:i,args:e};n(this.canvas,r)}return l}}));c.push(l)}catch(r){const o=pm(e,i,{set(e){n(this.canvas,{type:t,property:i,args:[e],setter:!0})}});c.push(o)}return c}class Nm{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,unblockSelector:s,maxCanvasSize:i,recordCanvas:a,dataURLOptions:c,errorHandler:l}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,l&&Sm(l),e.enableManualSnapshot||wm((()=>{a&&"all"===t&&this.initCanvasMutationObserver(n,r,o,s),a&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,o,s,i,{dataURLOptions:c})}))()}initCanvasFPSObserver(e,t,n,r,o,s,i){const a=Om(t,n,r,o,!0),c=this.takeSnapshot(!1,e,t,n,r,o,s,i.dataURLOptions);this.resetObservers=()=>{a(),cancelAnimationFrame(c)}}initCanvasMutationObserver(e,t,n,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=Om(e,t,n,r,!1),s=function(e,t,n,r,o){const s=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const i=hm(t.CanvasRenderingContext2D.prototype,a,(function(s){return function(...i){return fm(this.canvas,n,r,o,!0)||_m((()=>{const n=Rm(i,t,this);e(this.canvas,{type:vm["2D"],property:a,args:n})}),0),s.apply(this,i)}}));s.push(i)}catch(n){const r=pm(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:vm["2D"],property:a,args:[t],setter:!0})}});s.push(r)}return()=>{s.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r),i=function(e,t,n,r,o,s){const i=[];return i.push(...Mm(t.WebGLRenderingContext.prototype,vm.WebGL,e,n,r,o,0,t)),void 0!==t.WebGL2RenderingContext&&i.push(...Mm(t.WebGL2RenderingContext.prototype,vm.WebGL2,e,n,r,o,0,t)),()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.resetObservers=()=>{o(),s(),i()}}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.win,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.resetObservers=()=>{cancelAnimationFrame(n)}}takeSnapshot(e,t,n,r,o,s,i,a,c){const l=new Map,u=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());u.onmessage=e=>{const t=e.data,{id:n}=t;if(l.set(n,!1),!("base64"in t))return;const{base64:r,type:o,width:s,height:i}=t;this.mutationCb({id:n,type:vm["2D"],commands:[{property:"clearRect",args:[0,0,s,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:o}]},0,0,s,i]}]})};const d=1e3/t;let p,h=0;const f=t=>{h&&t-h<d||(h=t,(e=>{if(e)return[e];const t=[];return n.document.querySelectorAll("canvas").forEach((e=>{fm(e,r,o,s,!0)||t.push(e)})),t})(c).forEach((t=>{const n=this.mirror.getId(t);if(!l.get(n)&&t.width&&t.height){if(l.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===bs([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{u.postMessage({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:a,maxCanvasSize:i},[e])})).catch((e=>{wm((()=>{throw e}))()}))}}))),p=ym(f)};return p=ym(f),p}startPendingCanvasMutationFlusher(){ym((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,ym(e)};ym(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),ym((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const{type:t,...n}=e;return n})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}const Lm={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},Dm="ReplayCanvas",Pm=1280,$m=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Pm):Pm,n?Math.min(n,Pm):Pm]};let o;const s=new Promise((e=>o=e));return{name:Dm,setupOnce(){},getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=r;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const r=new Nm({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return o(r),r},...Lm[e||"medium"]||Lm.medium}},async snapshot(e){(await s).snapshot(e)}}},Fm=da(Dm,$m),jm=zn,Um="#ffffff",Bm="inherit",Hm="rgba(108, 95, 199, 1)",zm={fontFamily:"system-ui, 'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:Um,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",borderRadius:"25px",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:Hm,submitBorder:Hm,submitOutlineFocus:"#29232f",submitForeground:Um,submitForegroundHover:Um,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:Bm,inputForeground:Bm,inputBorder:"var(--border)",inputOutlineFocus:Hm,formBorderRadius:"20px",formContentBorderRadius:"6px"},qm=zm,Wm={...zm,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"},Gm="widget",Vm="api";async function Ym({feedback:{message:e,email:t,name:n,source:r,url:o}},{includeReplay:s=!0}={}){const i=Gs(),a=i&&i.getTransport(),c=i&&i.getDsn();if(!i||!a||!c)return;const l={contexts:{feedback:{contact_email:t,name:n,message:e,url:o,source:r}},type:"feedback"};return Ws((async e=>{e.clearBreadcrumbs(),[Vm,Gm].includes(String(r))&&e.setLevel("info");const t=await async function({client:e,scope:t,event:n}){const r={};e.emit&&e.emit("preprocessEvent",n,r);const o=await Ps(e.getOptions(),n,r,t,e,fi());return null===o?(e.recordDroppedEvent("event_processor","feedback",n),null):(o.platform=o.platform||"javascript",o)}({scope:e,client:i,event:l});if(!t)return;i.emit&&i.emit("beforeSendFeedback",t,{includeReplay:Boolean(s)});const n=na(t,c,i.getOptions()._metadata,i.getOptions().tunnel);let o;try{o=await a.send(n)}catch(e){const t=new Error("Unable to send Feedback");try{t.cause=e}catch(e){}throw t}if(o){if("number"==typeof o.statusCode&&(o.statusCode<200||o.statusCode>=300))throw new Error("Unable to send Feedback");return o}}))}function Km({name:e,email:t,message:n,source:r=Vm,url:o=Xn()},s={}){if(!n)throw new Error("Unable to submit feedback with empty message");return Ym({feedback:{name:e,email:t,message:n,url:o,source:r}},s)}const Xm="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Jm(e,t){return{...e,...t,themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function Qm(e){return`\n  --background: ${e.background};\n  --background-hover: ${e.backgroundHover};\n  --foreground: ${e.foreground};\n  --error: ${e.error};\n  --success: ${e.success};\n  --border: ${e.border};\n  --border-radius: ${e.borderRadius};\n  --box-shadow: ${e.boxShadow};\n\n  --submit-background: ${e.submitBackground};\n  --submit-background-hover: ${e.submitBackgroundHover};\n  --submit-border: ${e.submitBorder};\n  --submit-outline-focus: ${e.submitOutlineFocus};\n  --submit-foreground: ${e.submitForeground};\n  --submit-foreground-hover: ${e.submitForegroundHover};\n\n  --cancel-background: ${e.cancelBackground};\n  --cancel-background-hover: ${e.cancelBackgroundHover};\n  --cancel-border: ${e.cancelBorder};\n  --cancel-outline-focus: ${e.cancelOutlineFocus};\n  --cancel-foreground: ${e.cancelForeground};\n  --cancel-foreground-hover: ${e.cancelForegroundHover};\n\n  --input-background: ${e.inputBackground};\n  --input-foreground: ${e.inputForeground};\n  --input-border: ${e.inputBorder};\n  --input-outline-focus: ${e.inputOutlineFocus};\n\n  --form-border-radius: ${e.formBorderRadius};\n  --form-content-border-radius: ${e.formContentBorderRadius};\n  `}function Zm({id:e,colorScheme:t,themeDark:n,themeLight:r}){try{const o=jm.document,s=o.createElement("div");s.id=e;const i=s.attachShadow({mode:"open"});return i.appendChild(function(e,t,n){const r=e.createElement("style");return r.textContent=`\n:host {\n  --bottom: 1rem;\n  --right: 1rem;\n  --top: auto;\n  --left: auto;\n  --z-index: 100000;\n  --font-family: ${n.light.fontFamily};\n  --font-size: ${n.light.fontSize};\n\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${Qm("dark"===t?n.dark:n.light)}\n}\n\n${"system"===t?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${Qm(n.dark)}\n  }\n}`:""}\n}`,r}(o,t,{dark:n,light:r})),i.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.dialog {\n  line-height: 25px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n\n  border: var(--border);\n  border-radius: var(--form-border-radius);\n  background-color: var(--background);\n  color: var(--foreground);\n\n  width: 320px;\n  max-width: 100%;\n  max-height: calc(100% - 2rem);\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow);\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 20px;\n  font-weight: 600;\n  padding: 24px 24px 0 24px;\n  margin: 0;\n  margin-bottom: 16px;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n\n.error {\n  color: var(--error);\n  margin-bottom: 16px;\n}\n\n.form {\n  display: grid;\n  overflow: auto;\n  flex-direction: column;\n  gap: 16px;\n  padding: 0 24px 24px;\n}\n\n.form__error-container {\n  color: var(--error);\n}\n\n.form__error-container--hidden {\n  display: none;\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: grid;\n  gap: 4px;\n  align-items: center;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  line-height: inherit;\n  background-color: var(--input-background);\n  box-sizing: border-box;\n  border: var(--input-border);\n  border-radius: var(--form-content-border-radius);\n  color: var(--input-foreground);\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 500;\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  color: var(--input-foreground);\n  opacity: 0.65;\n}\n\n.form__input:focus-visible {\n  outline: 1px auto var(--input-outline-focus);\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--cancel-border);\n  border-radius: var(--form-content-border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 6px 16px;\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  background-color: var(--submit-background);\n  border-color: var(--submit-border);\n  color: var(--submit-foreground);\n}\n.btn--primary:hover {\n  background-color: var(--submit-background-hover);\n  color: var(--submit-foreground-hover);\n}\n.btn--primary:focus-visible {\n  outline: 1px auto var(--submit-outline-focus);\n}\n\n.btn--default {\n  background-color: var(--cancel-background);\n  color: var(--cancel-foreground);\n  font-weight: 500;\n}\n.btn--default:hover {\n  background-color: var(--cancel-background-hover);\n  color: var(--cancel-foreground-hover);\n}\n.btn--default:focus-visible {\n  outline: 1px auto var(--cancel-outline-focus);\n}\n\n.success-message {\n  background-color: var(--background);\n  border: var(--border);\n  border-radius: var(--border-radius);\n  box-shadow: var(--box-shadow);\n  font-weight: 600;\n  color: var(--success);\n  padding: 12px 24px;\n  line-height: 25px;\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success-icon path {\n  fill: var(--success);\n}\n",t}(o)),{shadow:i,host:s}}catch(e){throw rr.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function eg(e,t,n){if(!e)return;e.hideError();try{return await Km({...t,source:Gm},n)}catch(t){Xm&&rr.error(t),e&&e.showError("There was a problem submitting feedback, please wait and try again.")}}function tg(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}const ng=20,rg="http://www.w3.org/2000/svg";function og(e,t,...n){const r=jm.document.createElement(e);t&&Object.entries(t).forEach((([e,t])=>{"className"===e&&"string"==typeof t?r.setAttribute("class",t):"boolean"==typeof t&&t?r.setAttribute(e,""):"string"==typeof t?r.setAttribute(e,t):e.startsWith("on")&&"function"==typeof t&&r.addEventListener(e.substring(2).toLowerCase(),t)}));for(const e of n)sg(r,e);return r}function sg(e,t){const n=jm.document;if(null!=t)if(Array.isArray(t))for(const n of t)sg(e,n);else!1===t||("string"==typeof t?e.appendChild(n.createTextNode(t)):t instanceof Node?e.appendChild(t):e.appendChild(n.createTextNode(String(t))))}function ig({buttonLabel:e,onClick:t}){const n=og("button",{type:"button",className:"widget__actor","aria-label":e,"aria-hidden":"false"},function(){const e=e=>jm.document.createElementNS(rg,e),t=tg(e("svg"),{class:"feedback-icon",width:`${ng}`,height:`${ng}`,viewBox:`0 0 ${ng} ${ng}`,fill:"none"}),n=tg(e("g"),{clipPath:"url(#clip0_57_80)"}),r=tg(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const o=e("defs"),s=tg(e("clipPath"),{id:"clip0_57_80"}),i=tg(e("rect"),{width:`${ng}`,height:`${ng}`,fill:"white"});return s.appendChild(i),o.appendChild(s),t.appendChild(o).appendChild(s).appendChild(i),{get el(){return t}}}().el,e?og("span",{className:"widget__actor__text"},e):null);return n.addEventListener("click",(function(e){t&&t(e)})),{get el(){return n},show:()=>{n.classList.remove("widget__actor--hidden"),n.setAttribute("aria-hidden","false")},hide:()=>{n.classList.add("widget__actor--hidden"),n.setAttribute("aria-hidden","true")}}}function ag(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function cg({nameLabel:e,namePlaceholder:t,emailLabel:n,emailPlaceholder:r,messageLabel:o,messagePlaceholder:s,isRequiredLabel:i,cancelButtonLabel:a,submitButtonLabel:c,showName:l,showEmail:u,isNameRequired:d,isEmailRequired:p,defaultName:h,defaultEmail:f,onCancel:m,onSubmit:g}){const{el:y}=function({label:e}){return{el:og("button",{type:"submit",className:"btn btn--primary","aria-label":e},e)}}({label:c});const _=og("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});const v=og("input",{id:"name",type:l?"text":"hidden","aria-hidden":l?"false":"true",name:"name",required:d,className:"form__input",placeholder:t,value:h}),b=og("input",{id:"email",type:u?"text":"hidden","aria-hidden":u?"false":"true",name:"email",required:p,className:"form__input",placeholder:r,value:f}),S=og("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:s}),w=og("button",{type:"button",className:"btn btn--default","aria-label":a,onClick:e=>{m&&m(e)}},a),k=og("form",{className:"form",onSubmit:function(e){if(e.preventDefault(),e.target instanceof HTMLFormElement)try{if(g){const t=new FormData(e.target),n={name:ag(t,"name"),email:ag(t,"email"),message:ag(t,"message")};g(n)}}catch(e){}}},[_,l&&og("label",{htmlFor:"name",className:"form__label"},[og("span",{className:"form__label__text"},e,d&&og("span",{className:"form__label__text--required"},` ${i}`)),v]),!l&&v,u&&og("label",{htmlFor:"email",className:"form__label"},[og("span",{className:"form__label__text"},n,p&&og("span",{className:"form__label__text--required"},` ${i}`)),b]),!u&&b,og("label",{htmlFor:"message",className:"form__label"},[og("span",{className:"form__label__text"},o,og("span",{className:"form__label__text--required"},` ${i}`)),S]),og("div",{className:"btn-group"},[y,w])]);return{get el(){return k},showError:function(e){_.textContent=e,_.classList.remove("form__error-container--hidden"),_.setAttribute("aria-hidden","false")},hideError:function(){_.textContent="",_.classList.add("form__error-container--hidden"),_.setAttribute("aria-hidden","true")}}}const lg="http://www.w3.org/2000/svg";function ug({formTitle:e,showBranding:t,showName:n,showEmail:r,isNameRequired:o,isEmailRequired:s,colorScheme:i,defaultName:a,defaultEmail:c,onClosed:l,onCancel:u,onSubmit:d,...p}){let h=null;function f(){h&&(h.open=!1)}const{el:m,showError:g,hideError:y}=cg({showEmail:r,showName:n,isEmailRequired:s,isNameRequired:o,defaultName:a,defaultEmail:c,onSubmit:d,onCancel:u,...p});return h=og("dialog",{className:"dialog",open:!0,onClick:function(){f(),l&&l()}},og("div",{className:"dialog__content",onClick:e=>{e.stopPropagation()}},og("h2",{className:"dialog__header"},e,t&&og("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},function({colorScheme:e}){const t=e=>jm.document.createElementNS(lg,e),n=tg(t("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),r=tg(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(r);const o=t("defs"),s=t("style");return s.textContent=`\n    path {\n      fill: ${"dark"===e?"#fff":"#362d59"};\n    }`,"system"===e&&(s.textContent+="\n    @media (prefers-color-scheme: dark) {\n      path: {\n        fill: '#fff';\n      }\n    }\n    "),o.append(s),n.append(o),{get el(){return n}}}({colorScheme:i}).el)),m)),{get el(){return h},showError:g,hideError:y,open:function(){h&&(h.open=!0)},close:f,checkIsOpen:function(){return h&&!0===h.open||!1}}}const dg=16,pg=17,hg="http://www.w3.org/2000/svg";function fg({message:e,onRemove:t}){function n(){r&&(r.remove(),t&&t())}const r=og("div",{className:"success-message",onClick:n},function(){const e=e=>jm.document.createElementNS(hg,e),t=tg(e("svg"),{class:"success-icon",width:`${dg}`,height:`${pg}`,viewBox:`0 0 ${dg} ${pg}`,fill:"none"}),n=tg(e("g"),{clipPath:"url(#clip0_57_156)"}),r=tg(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=tg(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);const s=e("defs"),i=tg(e("clipPath"),{id:"clip0_57_156"}),a=tg(e("rect"),{width:`${dg}`,height:`${dg}`,fill:"white",transform:"translate(0 0.5)"});return i.appendChild(a),s.appendChild(i),t.appendChild(s).appendChild(i).appendChild(a),{get el(){return t}}}().el,e);return{el:r,remove:n}}function mg({shadow:e,options:{shouldCreateActor:t=!0,...n},attachTo:r}){let o,s,i=!1;async function a(t){if(!s)return;const r=[];if(n.isNameRequired&&!t.name&&r.push(n.nameLabel),n.isEmailRequired&&!t.email&&r.push(n.emailLabel),t.message||r.push(n.messageLabel),r.length>0)return void s.showError(`Please enter in the following required fields: ${r.join(", ")}`);await eg(s,t)?(h(),function(){if(e)try{const t=fg({message:n.successMessageText,onRemove:()=>{r&&clearTimeout(r),l()}});if(!t.el)throw new Error("Unable to show success message");e.appendChild(t.el);const r=setTimeout((()=>{t&&t.remove()}),5e3)}catch(e){rr.error(e)}}(),n.onSubmitSuccess&&n.onSubmitSuccess()):n.onSubmitError&&n.onSubmitError()}function c(){const e=Gs(),t=e&&e.getIntegrationByName&&e.getIntegrationByName("Replay");t&&t.flush().catch((e=>{Xm&&rr.error(e)}))}function l(){o&&o.show()}function u(){o&&o.hide()}function d(){try{if(s)return s.open(),i=!0,n.onFormOpen&&n.onFormOpen(),void c();const t=n.useSentryUser,r=Vs(),o=r&&r.getUser();if(s=ug({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,isRequiredLabel:n.isRequiredLabel,defaultName:t&&o&&o[t.name]||"",defaultEmail:t&&o&&o[t.email]||"",onClosed:()=>{l(),i=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{p(),l()},onSubmit:a}),!s.el)throw new Error("Unable to open Feedback dialog");e.appendChild(s.el),u(),n.onFormOpen&&n.onFormOpen(),c()}catch(e){rr.error(e)}}function p(){s&&(s.close(),i=!1,n.onFormClose&&n.onFormClose())}function h(){if(s){p();const e=s.el;e&&e.remove(),s=void 0}}function f(){i||d(),u()}return r?r.addEventListener("click",f):t&&(o=ig({buttonLabel:n.buttonLabel,onClick:f}),o.el&&e.appendChild(o.el)),{get actor(){return o},get dialog(){return s},showActor:l,hideActor:u,removeActor:function(){o&&o.el&&o.el.remove()},openDialog:d,closeDialog:p,removeDialog:h}}const gg=jm.document;class yg{static __initStatic(){this.id="Feedback"}constructor({autoInject:e=!0,id:t="sentry-feedback",isEmailRequired:n=!1,isNameRequired:r=!1,showBranding:o=!0,showEmail:s=!0,showName:i=!0,useSentryUser:a={email:"email",name:"username"},themeDark:c,themeLight:l,colorScheme:u="system",buttonLabel:d="Report a Bug",cancelButtonLabel:p="Cancel",submitButtonLabel:h="Send Bug Report",formTitle:f="Report a Bug",emailPlaceholder:m="your.email@example.org",emailLabel:g="Email",messagePlaceholder:y="What's the bug? What did you expect?",messageLabel:_="Description",namePlaceholder:v="Your Name",nameLabel:b="Name",isRequiredLabel:S="(required)",successMessageText:w="Thank you for your report!",onFormClose:k,onFormOpen:E,onSubmitError:T,onSubmitSuccess:x}={}){this.name=yg.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={autoInject:e,showBranding:o,id:t,isEmailRequired:n,isNameRequired:r,showEmail:s,showName:i,useSentryUser:a,colorScheme:u,themeDark:{...Wm,...c},themeLight:{...qm,...l},buttonLabel:d,cancelButtonLabel:p,submitButtonLabel:h,formTitle:f,emailLabel:g,emailPlaceholder:m,messageLabel:_,messagePlaceholder:y,nameLabel:b,namePlaceholder:v,isRequiredLabel:S,successMessageText:w,onFormClose:k,onFormOpen:E,onSubmitError:T,onSubmitSuccess:x}}setupOnce(){if(bo())try{this._cleanupWidgetIfExists();const{autoInject:e}=this.options;if(!e)return;this._createWidget(this.options)}catch(e){Xm&&rr.error(e)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(e,t){try{const n=Jm(this.options,t||{});return this._ensureShadowHost(n,(({shadow:t})=>{const r="string"==typeof e?gg.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r)return Xm&&rr.error("[Feedback] Unable to attach to target element"),null;const o=mg({shadow:t,options:n,attachTo:r});return this._widgets.add(o),this._widget||(this._widget=o),o}))}catch(e){return Xm&&rr.error(e),null}}createWidget(e){try{return this._createWidget(Jm(this.options,e||{}))}catch(e){return Xm&&rr.error(e),null}}removeWidget(e){if(!e)return!1;try{if(this._widgets.has(e))return e.removeActor(),e.removeDialog(),this._widgets.delete(e),this._widget===e&&(this._widget=null),!0}catch(e){Xm&&rr.error(e)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const e=gg.querySelector(`#${this.options.id}`);e&&e.remove()}_createWidget(e){return this._ensureShadowHost(e,(({shadow:t})=>{const n=mg({shadow:t,options:e});return!this._hasInsertedActorStyles&&n.actor&&(t.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.widget__actor {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  line-height: 16px;\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 16px;\n  text-decoration: none;\n  z-index: 9000;\n\n  color: var(--foreground);\n  background-color: var(--background);\n  border: var(--border);\n  box-shadow: var(--box-shadow);\n  opacity: 1;\n  transition: opacity 0.1s ease-in-out;\n}\n\n.widget__actor:hover {\n  background-color: var(--background-hover);\n}\n\n.widget__actor svg {\n  width: 16px;\n  height: 16px;\n}\n\n.widget__actor--hidden {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.widget__actor__text {\n}\n\n@media (max-width: 600px) {\n  .widget__actor__text {\n    display: none;\n  }\n}\n\n.feedback-icon path {\n  fill: var(--foreground);\n}\n",t}(gg)),this._hasInsertedActorStyles=!0),this._widgets.add(n),this._widget||(this._widget=n),n}))}_ensureShadowHost(e,t){let n=!1;if(!this._shadow||!this._host){const{id:t,colorScheme:r,themeLight:o,themeDark:s}=e,{shadow:i,host:a}=Zm({id:t,colorScheme:r,themeLight:o,themeDark:s});this._shadow=i,this._host=a,n=!0}this._host.dataset.sentryFeedbackColorscheme=e.colorScheme;const r=t({shadow:this._shadow,host:this._host});return n&&gg.body.appendChild(this._host),r}}yg.__initStatic();const _g="CaptureConsole",vg=(e={})=>{const t=e.levels||er;return{name:_g,setupOnce(){},setup(e){"console"in zn&&Ar((({args:n,level:r})=>{Gs()===e&&t.includes(r)&&function(e,t){const n={level:zo(t),extra:{arguments:e}};Ws((r=>{if(r.addEventProcessor((e=>(e.logger="console",Pr(e,{handled:!1,type:"console"}),e))),"assert"===t&&!1===e[0]){const t=`Assertion failed: ${Pn(e.slice(1)," ")||"console.assert"}`;return r.setExtra("arguments",e.slice(1)),void Bs(t,n)}const o=e.find((e=>e instanceof Error));if("error"===t&&o)return void Us(o,n);Bs(Pn(e," "),n)}))}(n,r)}))}}};da(_g,vg);const bg="Debug",Sg=(e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:bg,setupOnce(){},setup(e){e.on&&e.on("beforeSendEvent",((e,n)=>{t.debugger,nr((()=>{t.stringify?(console.log(JSON.stringify(e,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(e),n&&Object.keys(n).length&&console.log(n))}))}))}}};da(bg,Sg);const wg="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,kg="Dedupe",Eg=()=>{let e;return{name:kg,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!xg(e,t))return!1;if(!Tg(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Ig(t),r=Ig(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!xg(e,t))return!1;if(!Tg(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return wg&&rr.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};function Tg(e,t){let n=Cg(e),r=Cg(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function xg(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function Ig(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Cg(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}da(kg,Eg);const Rg="ExtraErrorData",Ag=(e={})=>{const t=e.depth||3,n=e.captureErrorCause||!1;return{name:Rg,setupOnce(){},processEvent:(e,r)=>function(e,t={},n,r){if(!t.originalException||!bn(t.originalException))return e;const o=t.originalException.name||t.originalException.constructor.name,s=function(e,t){try{const n=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],r={};for(const t of Object.keys(e)){if(-1!==n.indexOf(t))continue;const o=e[t];r[t]=bn(o)?o.toString():o}if(t&&void 0!==e.cause&&(r.cause=bn(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];r[e]=bn(n)?n.toString():n}}return r}catch(e){wg&&rr.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,r);if(s){const t={...e.contexts},r=So(s,n);return In(r)&&(dr(r,"__sentry_skip_normalization__",!0),t[o]=r),{...e,contexts:t}}return e}(e,r,t,n)}};function Og(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}da(Rg,Ag);var Mg={exports:{}};
/*!
	    localForage -- Offline Storage, Improved
	    Version 1.10.0
	    https://localforage.github.io/localForage
	    (c) 2013-2017 Mozilla, Apache License 2.0
	*/!function(e,t){e.exports=function e(t,n,r){function o(i,a){if(!n[i]){if(!t[i]){if(!a&&Og)return Og(i);if(s)return s(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[i]={exports:{}};t[i][0].call(l.exports,(function(e){var n=t[i][1][e];return o(n||e)}),l,l.exports,e,t,n,r)}return n[i].exports}for(var s=Og,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){(function(e){var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var s=0,i=new o(u),a=e.document.createTextNode("");i.observe(a,{characterData:!0}),n=function(){a.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,n=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}function d(e){1!==l.push(e)||r||n()}t.exports=d}).call(this,void 0!==Lt?Lt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var r=e(1);function o(){}var s={},i=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&h(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return s.reject(e,t)}r===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,r)}))}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,s.reject(e,t))}function o(t){n||(n=!0,s.resolve(e,t))}function i(){t(o,r)}var a=f(i);"error"===a.status&&r(a.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function m(e){return e instanceof this?e:s.resolve(new this(o),e)}function g(e){var t=new this(o);return s.reject(t,e)}function y(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var i=new Array(n),a=0,c=-1,l=new this(o);++c<n;)u(e[c],c);return l;function u(e,o){function c(e){i[o]=e,++a!==n||r||(r=!0,s.resolve(l,i))}t.resolve(e).then(c,(function(e){r||(r=!0,s.reject(l,e))}))}}function _(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var i=-1,a=new this(o);++i<n;)c(e[i]);return a;function c(e){t.resolve(e).then((function(e){r||(r=!0,s.resolve(a,e))}),(function(e){r||(r=!0,s.reject(a,e))}))}}t.exports=l,l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===i)return this;var n=new this.constructor(o);return this.state!==c?d(n,this.state===a?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){s.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var n=f(p,t);if("error"===n.status)return s.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=a,e.outcome=t;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(t)}return e},s.reject=function(e,t){e.state=i,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},l.resolve=m,l.reject=g,l.all=y,l.race=_},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==Lt?Lt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var i=s();function a(){try{if(!i||!i.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function c(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var l=Promise;function u(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function d(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function p(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function h(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",m=void 0,g={},y=Object.prototype.toString,_="readonly",v="readwrite";function b(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function S(e){return new l((function(t){var n=e.transaction(f,v),r=c([""]);n.objectStore(f).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function w(e){return"boolean"==typeof m?l.resolve(m):S(e).then((function(e){return m=e}))}function k(e){var t=g[e.name],n={};n.promise=new l((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function E(e){var t=g[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function T(e,t){var n=g[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function x(e,t){return new l((function(n,r){if(g[e.name]=g[e.name]||P(),e.db){if(!t)return n(e.db);k(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var s=i.open.apply(i,o);t&&(s.onupgradeneeded=function(t){var n=s.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(f)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),s.onerror=function(e){e.preventDefault(),r(s.error)},s.onsuccess=function(){var t=s.result;t.onversionchange=function(e){e.target.close()},n(t),E(e)}}))}function I(e){return x(e,!1)}function C(e){return x(e,!0)}function R(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var s=e.db.version+1;s>e.version&&(e.version=s)}return!0}return!1}function A(e){return new l((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function O(e){return c([b(atob(e.data))],{type:e.type})}function M(e){return e&&e.__local_forage_encoded_blob}function N(e){var t=this,n=t._initReady().then((function(){var e=g[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return d(n,e,e),n}function L(e){k(e);for(var t=g[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,I(e).then((function(t){return e.db=t,R(e)?C(e):t})).then((function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(t){throw T(e,t),t}))}function D(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return l.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),C(e)})).then((function(){return L(e).then((function(){D(e,t,n,r-1)}))})).catch(n);n(o)}}function P(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function $(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=g[n.name];o||(o=P(),g[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=N);var s=[];function i(){return l.resolve()}for(var a=0;a<o.forages.length;a++){var c=o.forages[a];c!==t&&s.push(c._initReady().catch(i))}var u=o.forages.slice(0);return l.all(s).then((function(){return n.db=o.db,I(n)})).then((function(e){return n.db=e,R(n,t._defaultConfig.version)?C(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var s=u[r];s!==t&&(s._dbInfo.db=n.db,s._dbInfo.version=n.version)}}))}function F(e,t){var n=this;e=p(e);var r=new l((function(t,r){n.ready().then((function(){D(n._dbInfo,_,(function(o,s){if(o)return r(o);try{var i=s.objectStore(n._dbInfo.storeName).get(e);i.onsuccess=function(){var e=i.result;void 0===e&&(e=null),M(e)&&(e=O(e)),t(e)},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function j(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){D(n._dbInfo,_,(function(o,s){if(o)return r(o);try{var i=s.objectStore(n._dbInfo.storeName).openCursor(),a=1;i.onsuccess=function(){var n=i.result;if(n){var r=n.value;M(r)&&(r=O(r));var o=e(r,n.key,a++);void 0!==o?t(o):n.continue()}else t()},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function U(e,t,n){var r=this;e=p(e);var o=new l((function(n,o){var s;r.ready().then((function(){return s=r._dbInfo,"[object Blob]"===y.call(t)?w(s.db).then((function(e){return e?t:A(t)})):t})).then((function(t){D(r._dbInfo,v,(function(s,i){if(s)return o(s);try{var a=i.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=a.put(t,e);i.oncomplete=function(){void 0===t&&(t=null),n(t)},i.onabort=i.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return u(o,n),o}function B(e,t){var n=this;e=p(e);var r=new l((function(t,r){n.ready().then((function(){D(n._dbInfo,v,(function(o,s){if(o)return r(o);try{var i=s.objectStore(n._dbInfo.storeName).delete(e);s.oncomplete=function(){t()},s.onerror=function(){r(i.error)},s.onabort=function(){var e=i.error?i.error:i.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function H(e){var t=this,n=new l((function(e,n){t.ready().then((function(){D(t._dbInfo,v,(function(r,o){if(r)return n(r);try{var s=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=s.error?s.error:s.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function z(e){var t=this,n=new l((function(e,n){t.ready().then((function(){D(t._dbInfo,_,(function(r,o){if(r)return n(r);try{var s=o.objectStore(t._dbInfo.storeName).count();s.onsuccess=function(){e(s.result)},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function q(e,t){var n=this,r=new l((function(t,r){e<0?t(null):n.ready().then((function(){D(n._dbInfo,_,(function(o,s){if(o)return r(o);try{var i=s.objectStore(n._dbInfo.storeName),a=!1,c=i.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||a?t(n.key):(a=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function W(e){var t=this,n=new l((function(e,n){t.ready().then((function(){D(t._dbInfo,_,(function(r,o){if(r)return n(r);try{var s=o.objectStore(t._dbInfo.storeName).openKeyCursor(),i=[];s.onsuccess=function(){var t=s.result;t?(i.push(t.key),t.continue()):e(i)},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function G(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var s=e.name===n.name&&o._dbInfo.db?l.resolve(o._dbInfo.db):I(e).then((function(t){var n=g[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t}));r=e.storeName?s.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;k(e);var r=g[e.name],o=r.forages;t.close();for(var s=0;s<o.length;s++){var a=o[s];a._dbInfo.db=null,a._dbInfo.version=n}var c=new l((function(t,r){var o=i.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}));return c.then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,E(n._dbInfo)}})).catch((function(t){throw(T(e,t)||l.resolve()).catch((function(){})),t}))}})):s.then((function(t){k(e);var n=g[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;var s=new l((function(t,n){var r=i.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}));return s.then((function(e){n.db=e;for(var t=0;t<r.length;t++)E(r[t]._dbInfo)})).catch((function(t){throw(T(e,t)||l.resolve()).catch((function(){})),t}))}))}else r=l.reject("Invalid arguments");return u(r,t),r}var V={_driver:"asyncStorage",_initStorage:$,_support:a(),iterate:j,getItem:F,setItem:U,removeItem:B,clear:H,length:z,key:q,keys:W,dropInstance:G};function Y(){return"function"==typeof openDatabase}var K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",X="~~local_forage_type~",J=/^~~local_forage_type~([^~]+)~/,Q="__lfsc__:",Z=Q.length,ee="arbf",te="blob",ne="si08",re="ui08",oe="uic8",se="si16",ie="si32",ae="ur16",ce="ui32",le="fl32",ue="fl64",de=Z+ee.length,pe=Object.prototype.toString;function he(e){var t,n,r,o,s,i=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var l=new ArrayBuffer(i),u=new Uint8Array(l);for(t=0;t<a;t+=4)n=K.indexOf(e[t]),r=K.indexOf(e[t+1]),o=K.indexOf(e[t+2]),s=K.indexOf(e[t+3]),u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|o>>2,u[c++]=(3&o)<<6|63&s;return l}function fe(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=K[n[t]>>2],r+=K[(3&n[t])<<4|n[t+1]>>4],r+=K[(15&n[t+1])<<2|n[t+2]>>6],r+=K[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function me(e,t){var n="";if(e&&(n=pe.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===pe.call(e.buffer))){var r,o=Q;e instanceof ArrayBuffer?(r=e,o+=ee):(r=e.buffer,"[object Int8Array]"===n?o+=ne:"[object Uint8Array]"===n?o+=re:"[object Uint8ClampedArray]"===n?o+=oe:"[object Int16Array]"===n?o+=se:"[object Uint16Array]"===n?o+=ae:"[object Int32Array]"===n?o+=ie:"[object Uint32Array]"===n?o+=ce:"[object Float32Array]"===n?o+=le:"[object Float64Array]"===n?o+=ue:t(new Error("Failed to get type for BinaryArray"))),t(o+fe(r))}else if("[object Blob]"===n){var s=new FileReader;s.onload=function(){var n=X+e.type+"~"+fe(this.result);t(Q+te+n)},s.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function ge(e){if(e.substring(0,Z)!==Q)return JSON.parse(e);var t,n=e.substring(de),r=e.substring(Z,de);if(r===te&&J.test(n)){var o=n.match(J);t=o[1],n=n.substring(o[0].length)}var s=he(n);switch(r){case ee:return s;case te:return c([s],{type:t});case ne:return new Int8Array(s);case re:return new Uint8Array(s);case oe:return new Uint8ClampedArray(s);case se:return new Int16Array(s);case ae:return new Uint16Array(s);case ie:return new Int32Array(s);case ce:return new Uint32Array(s);case le:return new Float32Array(s);case ue:return new Float64Array(s);default:throw new Error("Unkown type: "+r)}}var ye={serialize:me,deserialize:ge,stringToBuffer:he,bufferToString:fe};function _e(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function ve(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new l((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(o){_e(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=ye,o}function be(e,t,n,r,o,s){e.executeSql(n,r,o,(function(e,i){i.code===i.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?s(e,i):_e(e,t,(function(){e.executeSql(n,r,o,s)}),s)}),s):s(e,i)}),s)}function Se(e,t){var n=this;e=p(e);var r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function we(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var s=r.rows,i=s.length,a=0;a<i;a++){var c=s.item(a),l=c.value;if(l&&(l=o.serializer.deserialize(l)),void 0!==(l=e(l,c.key,a+1)))return void t(l)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function ke(e,t,n,r){var o=this;e=p(e);var s=new l((function(s,i){o.ready().then((function(){void 0===t&&(t=null);var a=t,c=o._dbInfo;c.serializer.serialize(t,(function(t,l){l?i(l):c.db.transaction((function(n){be(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){s(a)}),(function(e,t){i(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void s(ke.apply(o,[e,a,n,r-1]));i(t)}}))}))})).catch(i)}));return u(s,n),s}function Ee(e,t,n){return ke.apply(this,[e,t,n,1])}function Te(e,t){var n=this;e=p(e);var r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function xe(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ie(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ce(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Re(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ae(e){return new l((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],s=0;s<r.rows.length;s++)o.push(r.rows.item(s).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Oe(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return r=e.name?new l((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(Ae(r))})).then((function(e){return new l((function(t,n){e.db.transaction((function(r){function o(e){return new l((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var s=[],i=0,a=e.storeNames.length;i<a;i++)s.push(o(e.storeNames[i]));l.all(s).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):l.reject("Invalid arguments"),u(r,t),r}var Me={_driver:"webSQLStorage",_initStorage:ve,_support:Y(),iterate:we,getItem:Se,setItem:Ee,removeItem:Te,clear:xe,length:Ie,key:Ce,keys:Re,dropInstance:Oe};function Ne(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Le(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function De(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function Pe(){return!De()||localStorage.length>0}function $e(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=Le(e,t._defaultConfig),Pe()?(t._dbInfo=n,n.serializer=ye,l.resolve()):l.reject()}function Fe(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return u(n,e),n}function je(e,t){var n=this;e=p(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return u(r,t),r}function Ue(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,s=localStorage.length,i=1,a=0;a<s;a++){var c=localStorage.key(a);if(0===c.indexOf(r)){var l=localStorage.getItem(c);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,c.substring(o),i++)))return l}}}));return u(r,t),r}function Be(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return u(r,t),r}function He(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var s=localStorage.key(o);0===s.indexOf(e.keyPrefix)&&r.push(s.substring(e.keyPrefix.length))}return r}));return u(n,e),n}function ze(e){var t=this.keys().then((function(e){return e.length}));return u(t,e),t}function qe(e,t){var n=this;e=p(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return u(r,t),r}function We(e,t,n){var r=this;e=p(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new l((function(o,s){var i=r._dbInfo;i.serializer.serialize(t,(function(t,r){if(r)s(r);else try{localStorage.setItem(i.keyPrefix+e,t),o(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||s(e),s(e)}}))}))}));return u(o,n),o}function Ge(e,t){if(t=h.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return r=e.name?new l((function(t){e.storeName?t(Le(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):l.reject("Invalid arguments"),u(r,t),r}var Ve={_driver:"localStorageWrapper",_initStorage:$e,_support:Ne(),iterate:Ue,getItem:je,setItem:We,removeItem:qe,clear:Fe,length:ze,key:Be,keys:He,dropInstance:Ge},Ye=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ke=function(e,t){for(var n=e.length,r=0;r<n;){if(Ye(e[r],t))return!0;r++}return!1},Xe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Je={},Qe={},Ze={INDEXEDDB:V,WEBSQL:Me,LOCALSTORAGE:Ve},et=[Ze.INDEXEDDB._driver,Ze.WEBSQL._driver,Ze.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ot(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function st(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Xe(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var it=function(){function e(t){for(var n in o(this,e),Ze)if(Ze.hasOwnProperty(n)){var r=Ze[n],s=r._driver;this[n]=s,Je[s]||this.defineDriver(r)}this._defaultConfig=st({},rt),this._config=st({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new l((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var s=nt.concat("_initStorage"),i=0,a=s.length;i<a;i++){var c=s[i];if((!Ke(tt,c)||e[c])&&"function"!=typeof e[c])return void n(o)}var d=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=l.reject(t);return u(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var o=tt[n];e[o]||(e[o]=t(o))}};d();var p=function(n){Je[r]&&console.info("Redefining LocalForage driver: "+r),Je[r]=e,Qe[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(p,n):p(!!e._support):p(!0)}catch(e){n(e)}}));return d(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Je[e]?l.resolve(Je[e]):l.reject(new Error("Driver not found."));return d(r,t,n),r},e.prototype.getSerializer=function(e){var t=l.resolve(ye);return d(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return d(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Xe(e)||(e=[e]);var o=this._getSupportedDrivers(e);function s(){r._config.driver=r.driver()}function i(e){return r._extend(e),s(),r._ready=r._initStorage(r._config),r._ready}function a(e){return function(){var t=0;function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(i).catch(n)}s();var a=new Error("No available storage method found.");return r._driverSet=l.reject(a),r._driverSet}return n()}}var c=null!==this._driverSet?this._driverSet.catch((function(){return l.resolve()})):l.resolve();return this._driverSet=c.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,s(),r._wrapLibraryMethodsWithReady(),r._initDriver=a(o)}))})).catch((function(){s();var e=new Error("No available storage method found.");return r._driverSet=l.reject(e),r._driverSet})),d(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Qe[e]},e.prototype._extend=function(e){st(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)ot(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),at=new it;t.exports=at},{3:3}]},{},[4])(4)}(Mg);const Ng=zn;class Lg{static __initStatic(){this.id="Offline"}constructor(e={}){this.name=Lg.id,this.maxStoredEvents=e.maxStoredEvents||30,this.offlineEventStore=Mg.exports.createInstance({name:"sentry/offlineEventStore"})}setupOnce(e,t){this.hub=t(),"addEventListener"in Ng&&Ng.addEventListener("online",(()=>{this._sendEvents().catch((()=>{wg&&rr.warn("could not send cached events")}))}));const n=e=>this.hub&&this.hub.getIntegration(Lg)&&"navigator"in Ng&&"onLine"in Ng.navigator&&!Ng.navigator.onLine?(wg&&rr.log("Event dropped due to being a offline - caching instead"),this._cacheEvent(e).then((e=>this._enforceMaxEvents())).catch((e=>{wg&&rr.warn("could not cache event while offline")})),null):e;n.id=this.name,e(n),"navigator"in Ng&&"onLine"in Ng.navigator&&Ng.navigator.onLine&&this._sendEvents().catch((()=>{wg&&rr.warn("could not send cached events")}))}async _cacheEvent(e){return this.offlineEventStore.setItem(Mr(),So(e))}async _enforceMaxEvents(){const e=[];return this.offlineEventStore.iterate(((t,n,r)=>{e.push({cacheKey:n,event:t})})).then((()=>this._purgeEvents(e.sort(((e,t)=>(t.event.timestamp||0)-(e.event.timestamp||0))).slice(this.maxStoredEvents<e.length?this.maxStoredEvents:e.length).map((e=>e.cacheKey))))).catch((e=>{wg&&rr.warn("could not enforce max events")}))}async _purgeEvent(e){return this.offlineEventStore.removeItem(e)}async _purgeEvents(e){return Promise.all(e.map((e=>this._purgeEvent(e)))).then()}async _sendEvents(){return this.offlineEventStore.iterate(((e,t,n)=>{this.hub?(this.hub.captureEvent(e),this._purgeEvent(t).catch((e=>{wg&&rr.warn("could not purge event from cache")}))):wg&&rr.warn("no hub found - could not send cached event")}))}}Lg.__initStatic();const Dg=zn,Pg="ReportingObserver",$g=new WeakMap,Fg=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if($g.has(Gs()))for(const t of e)Ws((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let r="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;r=[e.crashId||"",e.reason||""].join(" ").trim()||r}else{r=t.body.message||r}}Bs(`${n}: ${r}`)}))}return{name:Pg,setupOnce(){if(!("ReportingObserver"in Vr))return;new Dg.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){$g.set(e,!0)}}};da(Pg,Fg);const jg="RewriteFrames",Ug=(e={})=>{const t=e.root,n=e.prefix||"app:///",r=e.iteratee||(e=>{if(!e.filename)return e;const r=/^[a-zA-Z]:\\/.test(e.filename)||e.filename.includes("\\")&&!e.filename.includes("/"),o=/^\//.test(e.filename);if(r||o){const o=r?e.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):e.filename,s=t?function(e,t){e=To(e).slice(1),t=To(t).slice(1);const n=xo(e.split("/")),r=xo(t.split("/")),o=Math.min(n.length,r.length);let s=o;for(let e=0;e<o;e++)if(n[e]!==r[e]){s=e;break}let i=[];for(let e=s;e<n.length;e++)i.push("..");return i=i.concat(r.slice(s)),i.join("/")}(t,o):Io(o);e.filename=`${n}${s}`}return e});return{name:jg,setupOnce(){},processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>r(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}};da(jg,Ug);const Bg="SessionTiming",Hg=()=>{const e=Date.now();return{name:Bg,setupOnce(){},processEvent(t){const n=Date.now();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}};da(Bg,Hg);const zg="Transaction";function qg(e){return e.module||e.function?`${e.module||"?"}/${e.function||"?"}`:"<unknown>"}da(zg,(()=>({name:zg,setupOnce(){},processEvent(e){const t=function(e){const t=e.exception&&e.exception.values&&e.exception.values[0];return t&&t.stacktrace&&t.stacktrace.frames||[]}(e);for(let n=t.length-1;n>=0;n--){const r=t[n];if(!0===r.in_app){e.transaction=qg(r);break}}return e}})));const Wg="HttpClient",Gg=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:Wg,setupOnce(){},setup(e){!function(e,t){if(!Xr())return;Jr((n=>{if(Gs()!==e)return;const{response:r,args:o}=n,[s,i]=o;r&&function(e,t,n,r){if(Kg(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,r);let o,s,i,a;Jg()&&([{headers:o,cookies:i},{headers:s,cookies:a}]=[{cookieHeader:"Cookie",obj:e},{cookieHeader:"Set-Cookie",obj:n}].map((({cookieHeader:e,obj:t})=>{const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=Yg(t))}catch(t){wg&&rr.log(`Could not extract cookies from header ${e}`)}return{headers:n,cookies:r}})));Hs(Xg({url:e.url,method:e.method,status:n.status,requestHeaders:o,responseHeaders:s,requestCookies:i,responseCookies:a}))}}(t,s,r,i)}))}(e,t),function(e,t){if(!("XMLHttpRequest"in zn))return;mo((n=>{if(Gs()!==e)return;const r=n.xhr,o=r[fo];if(!o)return;const{method:s,request_headers:i}=o;try{!function(e,t,n,r){if(Kg(e,t.status,t.responseURL)){let e,o,s;if(Jg()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(o=Yg(e))}catch(e){wg&&rr.log("Could not extract cookies from response headers")}try{s=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n]=r,e}),{})}(t)}catch(e){wg&&rr.log("Could not extract headers from response")}e=r}Hs(Xg({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:s,responseCookies:o}))}}(t,r,s,i)}catch(e){wg&&rr.warn("Error while extracting response event form XHR response",e)}}))}(e,t)}}};function Vg(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function Yg(e){return e.split("; ").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=r,e}),{})}function Kg(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(r=e.failedRequestTargets,o=n,r.some((e=>"string"==typeof e?o.includes(e):e.test(o))))&&!Na(n,Gs());var r,o}function Xg(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:Vg(e.responseHeaders)}}};return Pr(n,{type:"http.client",handled:!1}),n}function Jg(){const e=Gs();return!!e&&Boolean(e.getOptions().sendDefaultPii)}da(Wg,Gg);const Qg=zn,Zg="ContextLines",ey=(e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:Zg,setupOnce(){},processEvent:e=>function(e,t){const n=Qg.document,r=Qg.location&&Lo(Qg.location.href);if(!n||!r)return e;const o=e.exception&&e.exception.values;if(!o||!o.length)return e;const s=n.documentElement.innerHTML;if(!s)return e;const i=["<!DOCTYPE html>","<html>",...s.split("\n"),"</html>"];return o.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>function(e,t,n,r){if(e.filename!==n||!e.lineno||!t.length)return e;return function(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map((e=>Dn(e,0))),t.context_line=Dn(e[Math.min(r-1,o)],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map((e=>Dn(e,0)))}(t,e,r),e}(e,i,r,t))))})),e}(e,t)}};function ty(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function ny(e){return ty(e.getAllKeys())}function ry(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=ty(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{insert:async t=>{try{const r=await ls(t,e.textEncoder);await function(e,t,n){return e((e=>ny(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),ty(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},pop:async()=>{try{const t=await function(e){return e((e=>ny(e).then((t=>{if(0!==t.length)return ty(e.get(t[0])).then((n=>(e.delete(t[0]),ty(e.transaction).then((()=>n)))))}))))}(n());if(t)return function(e,t,n){let r="string"==typeof e?t.encode(e):e;function o(e){const t=r.subarray(0,e);return r=r.subarray(e+1),t}function s(){let e=r.indexOf(10);return e<0&&(e=r.length),JSON.parse(n.decode(o(e)))}const i=s(),a=[];for(;r.length;){const e=s(),t="number"==typeof e.length?e.length:void 0;a.push([e,t?o(t):s()])}return[i,a]}(t,e.textEncoder||new TextEncoder,e.textDecoder||new TextDecoder)}catch(e){}}}}da(Zg,ey);const oy=1e6,sy=String(0),iy="main";let ay="",cy="",ly="",uy=Vl.navigator&&Vl.navigator.userAgent||"",dy="";const py=Vl.navigator&&Vl.navigator.language||Vl.navigator&&Vl.navigator.languages&&Vl.navigator.languages[0]||"";const hy=Vl.navigator&&Vl.navigator.userAgentData;var fy;function my(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[sy]:{name:iy}}};if(!e.samples.length)return r;const o=e.samples[0].timestamp,s="number"==typeof performance.timeOrigin?performance.timeOrigin:Vo||0,i=s-(Vo||s);for(let s=0;s<e.samples.length;s++){const a=e.samples[s];if(void 0===a.stackId){void 0===t&&(t=n,r.stacks[t]=[],n++),r.samples[s]={elapsed_since_start_ns:((a.timestamp+i-o)*oy).toFixed(0),stack_id:t,thread_id:sy};continue}let c=e.stacks[a.stackId];const l=[];for(;c;){l.push(c.frameId);const t=e.frames[c.frameId];void 0===r.frames[c.frameId]&&(r.frames[c.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),c=void 0===c.parentId?void 0:e.stacks[c.parentId]}const u={elapsed_since_start_ns:((a.timestamp+i-o)*oy).toFixed(0),stack_id:n,thread_id:sy};r.stacks[n]=l,r.samples[s]=u,n++}return r}(e):e}function gy(e,t,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const o=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&Jl&&rr.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(r),s=my(n),i=t||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:Date.now()),a="number"==typeof r.timestamp?1e3*r.timestamp:Date.now();return{event_id:e,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||ws,runtime:{name:"javascript",version:Vl.navigator.userAgent},os:{name:ay,version:cy,build_number:uy},device:{locale:py,model:dy,manufacturer:uy,architecture:ly,is_emulator:!1},debug_meta:{images:vy(n.resources)},profile:s,transactions:[{name:r.transaction||"",id:r.event_id||Mr(),trace_id:o,active_thread_id:sy,relative_start_ns:"0",relative_end_ns:(1e6*(a-i)).toFixed(0)}]}}function yy(e){return"pageload"===e.op}"object"==typeof(fy=hy)&&null!==fy&&"getHighEntropyValues"in fy&&hy.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(ay=e.platform||"",ly=e.architecture||"",dy=e.model||"",cy=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];uy=`${t.brand} ${t.version}`}})).catch((e=>{}));const _y=new WeakMap;function vy(e){const t=zn._sentryDebugIds;if(!t)return[];const n=Gs(),r=n&&n.getOptions(),o=r&&r.stackParser;if(!o)return[];let s;const i=_y.get(o);i?s=i:(s=new Map,_y.set(o,s));const a=Object.keys(t).reduce(((e,n)=>{let r;const i=s.get(n);i?r=i:(r=o(n),s.set(n,r));for(let o=r.length-1;o>=0;o--){const s=r[o],i=s&&s.filename;if(s&&i){e[i]=t[n];break}}return e}),{}),c=[];for(const t of e)t&&a[t]&&c.push({type:"sourcemap",code_file:t,debug_id:a[t]});return c}let by=!1;const Sy=3e4;function wy(e){if(by)return Jl&&rr.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return Jl&&rr.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=Gs(),n=t&&t.getOptions();if(!n)return Jl&&rr.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(o=r)&&"boolean"!=typeof o||"number"==typeof o&&isNaN(o)?(Jl&&rr.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),0):!0===o||!1===o||!(o<0||o>1)||(Jl&&rr.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${o}.`),0)))return Jl&&rr.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var o;if(!r)return Jl&&rr.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||(Jl&&rr.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function ky(e,t,n,r){return function(e){return e.samples.length<2?(Jl&&rr.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(Jl&&rr.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?gy(e,t,n,r):null}const Ey=new Map;function Ty(e){const t=Ey.get(e);return t&&Ey.delete(e),t}function xy(e){let t;yy(e)&&(t=1e3*Go());const n=function(){const e=Vl.Profiler;if("function"!=typeof e)return void(Jl&&rr.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(Sy/10);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){Jl&&(rr.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),rr.log("[Profiling] Disabling profiling for current user session.")),by=!0}}();if(!n)return e;Jl&&rr.log(`[Profiling] started profiling transaction: ${Ls(e).description}`);const r=Mr();async function o(){return e&&n?n.stop().then((t=>(s&&(Vl.clearTimeout(s),s=void 0),Jl&&rr.log(`[Profiling] stopped profiling of transaction: ${Ls(e).description}`),t?(function(e,t){if(Ey.set(e,t),Ey.size>30){const e=Ey.keys().next().value;Ey.delete(e)}}(r,t),null):(Jl&&rr.log(`[Profiling] profiler returned null profile for: ${Ls(e).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((e=>(Jl&&rr.log("[Profiling] error while stopping profiler:",e),null))):null}let s=Vl.setTimeout((()=>{Jl&&rr.log("[Profiling] max profile duration elapsed, stopping profiling for:",Ls(e).description),o()}),Sy);const i=e.end.bind(e);return e.end=function(){return e?(o().then((()=>{e.setContext("profile",{profile_id:r,start_timestamp:t}),i()}),(()=>{i()})),e):i()},e}const Iy="BrowserProfiling",Cy=()=>({name:Iy,setupOnce(){},setup(e){const t=Vs().getTransaction();t&&yy(t)&&wy(t)&&xy(t),"function"==typeof e.on?(e.on("startTransaction",(e=>{wy(e)&&xy(e)})),e.on("beforeEnvelope",(e=>{if(!Ey.size)return;const t=function(e){const t=[];return as(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,r=t&&t.profile&&t.profile.profile_id,o=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof r){Jl&&rr.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!r){Jl&&rr.log("[Profiling] cannot find profile for a transaction without a profile context");continue}t&&t.profile&&delete t.profile;const s=Ty(r);if(!s){Jl&&rr.log(`[Profiling] Could not retrieve profile for transaction: ${r}`);continue}const i=ky(r,o,s,e);i&&n.push(i)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))):rr.warn("[Profiling] Client does not support hooks, profiling will be disabled")}}),Ry=da(Iy,Cy);let Ay={};Vl.Sentry&&Vl.Sentry.Integrations&&(Ay=Vl.Sentry.Integrations);const Oy={...Ay,...cc,...dd};var My=Object.freeze({__proto__:null,Integrations:Oy,FunctionToString:Za,Hub:ui,InboundFilters:Va,ModuleMetadata:Ua,SDK_VERSION:ai,SEMANTIC_ATTRIBUTE_SENTRY_OP:Ui,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:Bi,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:ji,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:Fi,Scope:si,addBreadcrumb:zs,addEventProcessor:ba,addGlobalEventProcessor:Es,addIntegration:function(e){const t=Gs();t&&t.addIntegration?t.addIntegration(e):Ss&&rr.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)},addTracingExtensions:ea,captureEvent:Hs,captureException:Us,captureMessage:Bs,captureSession:Js,close:async function(e){const t=Gs();return t?t.close(e):(Ss&&rr.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))},configureScope:function(e){hi().configureScope(e)},continueTrace:({sentryTrace:e,baggage:t},n)=>{const r=Vs(),{traceparentData:o,dynamicSamplingContext:s,propagationContext:i}=function(e,t){const n=ns(e),r=Qo(t),{traceId:o,parentSpanId:s,parentSampled:i}=n||{};return n?{traceparentData:n,dynamicSamplingContext:r||{},propagationContext:{traceId:o||Mr(),parentSpanId:s||Mr().substring(16),spanId:Mr().substring(16),sampled:i,dsc:r||{}}}:{traceparentData:n,dynamicSamplingContext:void 0,propagationContext:{traceId:o||Mr(),spanId:Mr().substring(16)}}}(e,t);r.setPropagationContext(i),Ss&&o&&rr.log(`[Tracing] Continuing trace ${o.traceId}.`);const a={...o,metadata:yr({dynamicSamplingContext:s})};return n?mi((()=>n(a))):a},createTransport:Ea,endSession:Ks,extractTraceparentData:vi,flush:async function(e){const t=Gs();return t?t.flush(e):(Ss&&rr.warn("Cannot flush events. No client defined."),Promise.resolve(!1))},functionToStringIntegration:Qa,getActiveSpan:Ai,getActiveTransaction:_i,getClient:Gs,getCurrentHub:hi,getCurrentScope:Vs,getHubFromCarrier:gi,getSpanStatusFromHttpCode:ki,inboundFiltersIntegration:Ga,isInitialized:function(){return!!Gs()},lastEventId:function(){return hi().lastEventId()},makeMain:pi,makeMultiplexedTransport:function(e,t){return n=>{const r=e(n),o=new Map;function s(t,r){const s=r?`${t}:${r}`:t;let i=o.get(s);if(!i){const a=ir(t);if(!a)return;const c=ia(a,n.tunnel);i=r?function(e,t){return n=>{const r=e(n);return{...r,send:async e=>{const n=Oa(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)}}}}(e,r)({...n,url:c}):e({...n,url:c}),o.set(s,i)}return[t,i]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return Oa(e,n)}}).map((e=>"string"==typeof e?s(e,void 0):s(e.dsn,e.release))).filter((e=>!!e));0===n.length&&n.push(["",r]);return(await Promise.all(n.map((([t,n])=>n.send(function(e,t){return ss(t?{...e[0],dsn:t}:e[0],e[1])}(e,t))))))[0]},flush:async function(e){const t=[await r.flush(e)];for(const[,n]of o)t.push(await n.flush(e));return t.every((e=>e))}}}},metrics:ac,moduleMetadataIntegration:ja,parameterize:function(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n},setContext:qs,setCurrentClient:wa,setExtra:function(e,t){hi().setExtra(e,t)},setExtras:function(e){hi().setExtras(e)},setHttpStatus:Ti,setMeasurement:ta,setTag:function(e,t){hi().setTag(e,t)},setTags:function(e){hi().setTags(e)},setUser:function(e){hi().setUser(e)},spanStatusfromHttpCode:Ei,startInactiveSpan:Ri,startSession:Ys,startSpan:Ci,startSpanManual:function(e,t){const n=Mi(e);return mi((()=>Ws(e.scope,(r=>{const o=hi(),s=r.getSpan(),i=e.onlyIfParent&&!s?void 0:Oi(o,{parentSpan:s,spanContext:n,forceTransaction:e.forceTransaction,scope:r});function a(){i&&i.end()}return xi((()=>t(i,a)),(()=>{if(i&&i.isRecording()){const{status:e}=Ls(i);e&&"ok"!==e||i.setStatus("internal_error")}}))}))))},startTransaction:function(e,t){return hi().startTransaction({...e},t)},trace:function(e,t,n=(()=>{}),r=(()=>{})){const o=hi(),s=Vs(),i=s.getSpan(),a=Mi(e),c=Oi(o,{parentSpan:i,spanContext:a,forceTransaction:!1,scope:s});return s.setSpan(c),xi((()=>t(c)),(e=>{c&&c.setStatus("internal_error"),n(e,c)}),(()=>{c&&c.end(),s.setSpan(i),r()}))},withActiveSpan:function(e,t){return Ws((n=>(n.setSpan(e),t(n))))},withIsolationScope:function(e){return mi((()=>e(fi())))},withScope:Ws,WINDOW:Vl,BrowserClient:lu,makeFetchTransport:du,makeXHRTransport:hu,chromeStackLineParser:_u,defaultStackLineParsers:Cu,defaultStackParser:Ru,geckoStackLineParser:Su,opera10StackLineParser:Tu,opera11StackLineParser:Iu,winjsStackLineParser:ku,eventFromException:ru,eventFromMessage:ou,exceptionFromError:Ql,createUserFeedbackEnvelope:cu,captureUserFeedback:function(e){const t=Gs();t&&t.captureUserFeedback(e)},defaultIntegrations:cd,forceLoad:function(){},getDefaultIntegrations:ld,init:ud,onLoad:function(e){e()},showReportDialog:(e={},t=hi())=>{if(!Vl.document)return void(Jl&&rr.error("Global document not defined in showReportDialog call"));const{client:n,scope:r}=t.getStackTop(),o=e.dsn||n&&n.getDsn();if(!o)return void(Jl&&rr.error("DSN not configured for showReportDialog call"));r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const s=Vl.document.createElement("script");s.async=!0,s.crossOrigin="anonymous",s.src=function(e,t){const n=cr(e);if(!n)return"";const r=`${oa(n)}embed/error-page/`;let o=`dsn=${sr(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(o+=`&name=${encodeURIComponent(e.name)}`),e.email&&(o+=`&email=${encodeURIComponent(e.email)}`)}else o+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${r}?${o}`}(o,e),e.onLoad&&(s.onload=e.onLoad);const{onClose:i}=e;if(i){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{i()}finally{Vl.removeEventListener("message",e)}};Vl.addEventListener("message",e)}const a=Vl.document.head||Vl.document.body;a?a.appendChild(s):Jl&&rr.error("Not injecting report dialog. No injection point found in HTML")},wrap:function(e){return Xl(e)()},Breadcrumbs:Lu,breadcrumbsIntegration:Nu,Dedupe:$u,GlobalHandlers:qu,globalHandlersIntegration:zu,HttpContext:Xu,httpContextIntegration:Ku,LinkedErrors:Zu,linkedErrorsIntegration:Qu,TryCatch:rd,browserApiErrorsIntegration:nd,Replay:sm,getReplay:function(){const e=Gs();return e&&e.getIntegrationByName&&e.getIntegrationByName("Replay")},replayIntegration:e=>new sm(e),ReplayCanvas:Fm,replayCanvasIntegration:$m,Feedback:yg,feedbackIntegration:e=>new yg(e),sendFeedback:Km,captureConsoleIntegration:vg,contextLinesIntegration:ey,debugIntegration:Sg,dedupeIntegration:Eg,extraErrorDataIntegration:Ag,httpClientIntegration:Gg,reportingObserverIntegration:Fg,rewriteFramesIntegration:Ug,sessionTimingIntegration:Hg,BrowserTracing:class{constructor(e){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,ea(),lc&&(this._hasSetTracePropagationTargets=!(!e||!e.tracePropagationTargets&&!e.tracingOrigins)),this.options={...Fl,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=kl(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&xl(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&El(),this.options._experiments.enableInteractions&&Tl(),this._latestRoute={name:void 0,context:void 0}}setupOnce(e,t){this._getCurrentHub=t;const n=t().getClient(),r=n&&n.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:s,startTransactionOnPageLoad:i,markBackgroundTransactions:a,traceFetch:c,traceXHR:l,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=this.options,h=r&&r.tracePropagationTargets,f=h||this.options.tracePropagationTargets;lc&&this._hasSetTracePropagationTargets&&h&&rr.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o((e=>{const n=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,e,t),n}),i,s),a&&Ec(),p.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),Ll({traceFetch:c,traceXHR:l,tracePropagationTargets:f,shouldCreateSpanForRequest:u,enableHTTPTimings:d})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(lc&&rr.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const t=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:r,finalTimeout:o,heartbeatInterval:s}=this.options,i="pageload"===e.op;let a;if(i){const t=i?jl("sentry-trace"):"",n=i?jl("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:s,sampled:c}=rs(t,n);a={traceId:r,parentSpanId:s,parentSampled:c,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else a={trimEnd:!0,...e};const c="function"==typeof n?n(a):a,l=void 0===c?{...a,sampled:!1}:c;l.metadata=l.name!==a.name?{...l.metadata,source:"custom"}:l.metadata,this._latestRoute.name=l.name,this._latestRoute.context=l,!1===l.sampled&&lc&&rr.log(`[Tracing] Will not send ${l.op} transaction because of beforeNavigate.`),lc&&rr.log(`[Tracing] Starting ${l.op} transaction on scope`);const{location:u}=kc,d=Zi(t,l,r,o,!0,{location:u},s,i);return i&&kc.document&&(kc.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(kc.document.readyState)&&d.sendAutoFinishSignal()})),["interactive","complete"].includes(kc.document.readyState)&&d.sendAutoFinishSignal()),d.registerBeforeFinishCallback((e=>{this._collectWebVitals(),Cl(e)})),d}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:r}=this.options,o="ui.action.click",s=_i();if(s&&s.op&&["navigation","pageload"].includes(s.op))return void(lc&&rr.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub)return void(lc&&rr.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`));if(!this._latestRoute.name)return void(lc&&rr.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`));const i=this._getCurrentHub(),{location:a}=kc,c={name:this._latestRoute.name,op:o,trimEnd:!0,data:{[Fi]:this._latestRoute.context?Ul(this._latestRoute.context):"url"}};e=Zi(i,c,t,n,!0,{location:a},r)};["click"].forEach((e=>{kc.document&&addEventListener(e,t,{once:!1,capture:!0})}))}_registerInpInteractionListener(){const e=({entries:e})=>{const t=Gs(),n=void 0!==t&&void 0!==t.getIntegrationByName?t.getIntegrationByName("Replay"):void 0,r=void 0!==n?n.getReplayId():void 0,o=_i(),s=Vs(),i=void 0!==s?s.getUser():void 0;e.forEach((e=>{if(function(e){return"duration"in e}(e)){const t=e.interactionId;if(void 0===t)return;const n=this._interactionIdToRouteNameMapping[t],s=e.duration,a=e.startTime,c=Object.keys(this._interactionIdToRouteNameMapping),l=c.length>0?c.reduce(((e,t)=>this._interactionIdToRouteNameMapping[e].duration<this._interactionIdToRouteNameMapping[t].duration?e:t)):void 0;if("first-input"===e.entryType){if(c.map((e=>this._interactionIdToRouteNameMapping[e])).some((e=>e.duration===s&&e.startTime===a)))return}if(!t)return;if(n)n.duration=Math.max(n.duration,s);else if(c.length<10||void 0===l||s>this._interactionIdToRouteNameMapping[l].duration){const e=this._latestRoute.name,n=this._latestRoute.context;e&&n&&(l&&Object.keys(this._interactionIdToRouteNameMapping).length>=10&&delete this._interactionIdToRouteNameMapping[l],this._interactionIdToRouteNameMapping[t]={routeName:e,duration:s,parentContext:n,user:i,activeTransaction:o,replayId:r,startTime:a})}}}))};ol("event",e),ol("first-input",e)}},browserTracingIntegration:(e={})=>{const t=!!lc&&!(!e.tracePropagationTargets&&!e.tracingOrigins);ea(),!e.tracePropagationTargets&&e.tracingOrigins&&(e.tracePropagationTargets=e.tracingOrigins);const n={...Bl,...e},r=kl(),o={};n.enableInp&&xl(o,n.interactionsSampleRate),n.enableLongTask&&El(),n._experiments.enableInteractions&&Tl();const s={name:void 0,context:void 0};function i(e){const t=hi(),{beforeStartSpan:o,idleTimeout:i,finalTimeout:a,heartbeatInterval:c}=n,l="pageload"===e.op;let u;if(l){const t=l?ql("sentry-trace"):"",n=l?ql("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:s,sampled:i}=rs(t,n);u={traceId:r,parentSpanId:s,parentSampled:i,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else u={trimEnd:!0,...e};const d=o?o(u):u;d.metadata=d.name!==u.name?{...d.metadata,source:"custom"}:d.metadata,s.name=d.name,s.context=d,!1===d.sampled&&lc&&rr.log(`[Tracing] Will not send ${d.op} transaction because of beforeNavigate.`),lc&&rr.log(`[Tracing] Starting ${d.op} transaction on scope`);const{location:p}=kc,h=Zi(t,d,i,a,!0,{location:p},c,l);return l&&kc.document&&(kc.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(kc.document.readyState)&&h.sendAutoFinishSignal()})),["interactive","complete"].includes(kc.document.readyState)&&h.sendAutoFinishSignal()),h.registerBeforeFinishCallback((e=>{r(),Cl(e)})),h}return{name:"BrowserTracing",setupOnce:()=>{},afterAllSetup(e){const r=e.getOptions(),{markBackgroundSpan:a,traceFetch:c,traceXHR:l,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=n,h=r&&r.tracePropagationTargets,f=h||n.tracePropagationTargets;let m;lc&&t&&h&&rr.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let g=kc.location&&kc.location.href;if(e.on&&(e.on("startNavigationSpan",(e=>{m&&(lc&&rr.log(`[Tracing] Finishing current transaction with op: ${Ls(m).op}`),m.end()),m=i({op:"navigation",...e})})),e.on("startPageLoadSpan",(e=>{m&&(lc&&rr.log(`[Tracing] Finishing current transaction with op: ${Ls(m).op}`),m.end()),m=i({op:"pageload",...e})}))),n.instrumentPageLoad&&e.emit&&kc.location){const t={name:kc.location.pathname,startTimestamp:Vo?Vo/1e3:void 0,origin:"auto.pageload.browser",attributes:{[Fi]:"url"}};Hl(e,t)}n.instrumentNavigation&&e.emit&&kc.location&&uo((({to:t,from:n})=>{if(void 0===n&&g&&-1!==g.indexOf(t))g=void 0;else if(n!==t){g=void 0;const t={name:kc.location.pathname,origin:"auto.navigation.browser",attributes:{[Fi]:"url"}};zl(e,t)}})),a&&Ec(),p.enableInteractions&&function(e,t){let n;const r=()=>{const{idleTimeout:r,finalTimeout:o,heartbeatInterval:s}=e,i="ui.action.click",a=_i();if(a&&a.op&&["navigation","pageload"].includes(a.op))return void(lc&&rr.warn(`[Tracing] Did not create ${i} transaction because a pageload or navigation transaction is in progress.`));if(n&&(n.setFinishReason("interactionInterrupted"),n.end(),n=void 0),!t.name)return void(lc&&rr.warn(`[Tracing] Did not create ${i} transaction because _latestRouteName is missing.`));const{location:c}=kc,l={name:t.name,op:i,trimEnd:!0,data:{[Fi]:t.context?Gl(t.context):"url"}};n=Zi(hi(),l,r,o,!0,{location:c},s)};["click"].forEach((e=>{kc.document&&addEventListener(e,r,{once:!1,capture:!0})}))}(n,s),n.enableInp&&function(e,t){const n=({entries:n})=>{const r=Gs(),o=void 0!==r&&void 0!==r.getIntegrationByName?r.getIntegrationByName("Replay"):void 0,s=void 0!==o?o.getReplayId():void 0,i=_i(),a=Vs(),c=void 0!==a?a.getUser():void 0;n.forEach((n=>{if(function(e){return"duration"in e}(n)){const r=n.interactionId;if(void 0===r)return;const o=e[r],a=n.duration,l=n.startTime,u=Object.keys(e),d=u.length>0?u.reduce(((t,n)=>e[t].duration<e[n].duration?t:n)):void 0;if("first-input"===n.entryType){if(u.map((t=>e[t])).some((e=>e.duration===a&&e.startTime===l)))return}if(!r)return;if(o)o.duration=Math.max(o.duration,a);else if(u.length<Wl||void 0===d||a>e[d].duration){const n=t.name,o=t.context;n&&o&&(d&&Object.keys(e).length>=Wl&&delete e[d],e[r]={routeName:n,duration:a,parentContext:o,user:c,activeTransaction:i,replayId:s,startTime:l})}}}))};ol("event",n),ol("first-input",n)}(o,s),Ll({traceFetch:c,traceXHR:l,tracePropagationTargets:f,shouldCreateSpanForRequest:u,enableHTTPTimings:d})},options:n}},defaultRequestInstrumentationOptions:Nl,instrumentOutgoingRequests:Ll,startBrowserTracingNavigationSpan:zl,startBrowserTracingPageLoadSpan:Hl,makeBrowserOfflineTransport:function(e){return function(e){return t=>e({...t,createStore:ry})}(Aa(e))},onProfilingStartRouteTransaction:function(e){return e?wy(e)?xy(e):e:(Jl&&rr.log("[Profiling] Transaction is undefined, skipping profiling"),e)},BrowserProfilingIntegration:Ry,browserProfilingIntegration:Cy});const Ny=(e,t)=>((e,t)=>{if(!e)throw new Error("No settings supplied to getServiceType");if(!Object.keys(Pe).includes(t))throw new Error("Unidentified service name supplied to getServiceType");if(!e.isLoggedIn)return $e;switch(t){case Pe.TRANSLATOR:return e.translatorServiceType;case Pe.WRITE:return e.writeServiceType;case Pe.API:return e.apiServiceType;case Pe.DOC_TRANSLATOR:return e.docTranslatorServiceType}})(e,t)===Fe,Ly=e=>!![/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/].some((t=>t.test(e))),Dy={dsn:"https://f7c23f019d154c319e91e8de004727dc@errortracking.deepl.com/12",release:"deepl-browser-extension@1.30.0",environment:Be(),tracesSampleRate:ze()?.1:1,sampleRate:ze()?.1:1,ignoreErrors:[/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/],beforeSend(e){const t=e.message||e.exception&&e.exception.values&&e.exception.values[0].value||"";return Ly(t)?null:(He()&&console.error(e),e)}};const Py=e=>{chrome.storage.sync.get(["installationId","session","isLoggedIn","translatorServiceType","writeServiceType"],(function(t){e.setTag("internal_session_id",t?.session?.id),e.setTag("is_translator_pro",Ny(t,Pe.TRANSLATOR)),e.setTag("is_write_pro",Ny(t,Pe.WRITE)),e.setTag("is_logged_in",t.isLoggedIn)})),chrome.storage.local.get("browserInstanceId",(function(t){e.setTag("browser_instance_id",t.browserInstanceId)})),chrome.storage.onChanged.addListener((t=>(t?.session?.newValue&&e.setTag("internal_session_id",t.session.newValue.id),t?.installationId&&e.setUser({id:t.installationId}),t?.browser_instance_id&&e.setTag("browser_instance_id",We.browserInstanceId.newValue),!0!==t.isLoggedIn?.newValue&&!1!==t.isLoggedIn?.newValue||e.setTag("is_logged_in",t.isLoggedIn.newValue),t.translatorServiceType&&chrome.storage.sync.get(["isLoggedIn"],e.setTag("is_translator_pro",Ny({...We,translatorServiceType:t.translatorServiceType.newValue},Pe.TRANSLATOR))),t.writeServiceType&&chrome.storage.sync.get(["isLoggedIn"],e.setTag("is_write_pro",Ny({...We,writeServiceType:t.writeServiceType.newValue},Pe.WRITE))),!0)))};return(He()||(window.addEventListener("error",(function(e){const t=e.message||e.error&&e.error.message||"";Ly(t)&&e.preventDefault()})),window.addEventListener("unhandledrejection",(function(e){const t=e.reason&&e.reason.message||"";Ly(t)&&e.preventDefault()}))),ud({...Dy}),Py(My),My).setContext("appContext",{location:"onboarding"}),new class extends _e{constructor(e){super(),ye(this,e,_n,yn,a,{})}}({target:document.body}),e.SCREENS=Se,e.currentStep=we,e.onboardingSteps=Te,e.updateRoute=Ee,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=onboarding.js.map
