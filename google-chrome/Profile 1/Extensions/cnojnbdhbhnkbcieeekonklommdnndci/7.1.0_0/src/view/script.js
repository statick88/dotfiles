(()=>{"use strict";var e,t,r,a={7226:(e,t,r)=>{var a=r(7416),i=r(1128),o=r(2024),n=r(822),s=r(4526);const c={key:0,class:"view-content"},l={class:"image-header"},g={key:0,class:"image-url-container"},m=["href","title"],d={class:"image-details-container"},u={class:"image-name-text"},p={key:0,class:"image-data-container"},v={key:0,class:"image-data-separator"},h={class:"image-preview"},w=["srcset","type"],f=["src","alt"],y={key:1,class:"error-content"},b={class:"error-text"};var I=r(9329),k=r(8618);const L={components:{[I.qw.name]:I.qw,[I.In.name]:I.In,[I.K0.name]:I.K0},data:function(){return{dataLoaded:!1,showError:"",previewImage:null,imageDetails:[],imageLoaded:!1,theme:""}},methods:{getText:k.q4,initSetup:async function(){try{await this.setup()}catch(e){throw this.showError=(0,k.q4)("error_internalError"),e}finally{this.dataLoaded=!0}},setup:async function(){const e=new URL(window.location.href).searchParams.get("id");if((0,i.GZ)(e)){const t=await(0,i.NI)({message:{id:"storageRequest",asyncResponse:!0,saveReceipt:!0,storageId:e},transferResponse:!0,openConnection:this.$env.isSafari});t?(this.previewImage=t,document.title=(0,k.q4)("pageTitle",[t.imageFilename||(0,k.q4)("pageTitle_view"),(0,k.q4)("extensionName")])):this.showError=(0,k.q4)("error_sessionExpired")}else this.showError=(0,k.q4)("error_invalidPageUrl");this.theme=await(0,i.xB)(),document.addEventListener("themeChange",(e=>{this.theme=e.detail}))},onPreviewImageLoad:function(){this.setPreviewImageLoaded()},onPreviewImageError:function(e){const t=e.target.previousElementSibling;t.srcset=e.target.src,t.type="image/svg+xml",this.setPreviewImageLoaded()},setPreviewImageLoaded:function(){this.imageLoaded||(this.setImageDetails(),this.imageLoaded=!0)},setImageDetails:function(){const e=document.querySelector(".image-preview .image");let t,r;(0,i.uH)(e)&&(t=e.naturalWidth,r=e.naturalHeight),this.imageDetails=(0,i.Oe)({width:t,height:r,size:this.previewImage.imageSize,type:this.previewImage.imageType,iecSize:!this.$env.isWindows})},copyImageUrl:async function(){await navigator.clipboard.writeText(this.previewImage.imageUrl)}},created:function(){this.initSetup()}},E=(0,r(1535).A)(L,[["render",function(e,t,r,a,i,o){const I=(0,n.g2)("vn-icon-button"),k=(0,n.g2)("vn-icon"),L=(0,n.g2)("vn-app");return e.dataLoaded?((0,n.uX)(),(0,n.Wv)(L,{key:0},{default:(0,n.k6)((()=>[e.previewImage&&!e.showError?((0,n.uX)(),(0,n.CE)("div",c,[(0,n.Lk)("div",l,[e.previewImage.imageUrl?((0,n.uX)(),(0,n.CE)("div",g,[(0,n.Lk)("a",{class:"image-url-link",href:e.previewImage.imageUrl,title:e.previewImage.imageFilename},(0,s.toDisplayString)(e.previewImage.imageUrl),9,m),(0,n.eW)(),(0,n.bF)(I,{src:"/src/assets/icons/misc/content-copy.svg",title:o.getText("buttonTooltip_copyImageUrl"),onClick:o.copyImageUrl},null,8,["title","onClick"])])):(0,n.Q3)("",!0),(0,n.eW)(),(0,n.Lk)("div",d,[(0,n.Lk)("div",u,(0,s.toDisplayString)(e.previewImage.imageFilename),1),(0,n.eW)(),e.imageLoaded?((0,n.uX)(),(0,n.CE)("div",p,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.imageDetails,((e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:t},[t?((0,n.uX)(),(0,n.CE)("div",v,"â€¢")):(0,n.Q3)("",!0),(0,n.eW)(),(0,n.Lk)("div",{class:(0,s.normalizeClass)({[`image-${e.kind}-text`]:!0})},(0,s.toDisplayString)(e.text),3)],64)))),128))])):(0,n.Q3)("",!0)])]),(0,n.eW)(),(0,n.Lk)("picture",h,[(0,n.Lk)("source",{srcset:e.previewImage.imageDataUrl,type:e.previewImage.imageType},null,8,w),(0,n.eW)(),(0,n.Lk)("img",{class:"image",src:`/src/assets/icons/misc/${"dark"===e.theme?"broken-image-dark":"broken-image"}.svg`,onErrorOnce:t[0]||(t[0]=(...e)=>o.onPreviewImageError&&o.onPreviewImageError(...e)),onLoad:t[1]||(t[1]=(...e)=>o.onPreviewImageLoad&&o.onPreviewImageLoad(...e)),alt:e.previewImage.imageFilename},null,40,f)])])):(0,n.Q3)("",!0),(0,n.eW)(),e.showError?((0,n.uX)(),(0,n.CE)("div",y,[(0,n.bF)(k,{class:"error-icon",src:"/src/assets/icons/misc/error.svg"}),(0,n.eW)(),(0,n.Lk)("div",b,(0,s.toDisplayString)(e.showError),1)])):(0,n.Q3)("",!0)])),_:1})):(0,n.Q3)("",!0)}]]);!async function(){await(0,i.rn)(["400 14px Roboto","500 14px Roboto"]);const e=(0,a.createApp)(E);await(0,i.K7)(e),await(0,o.H)(e),e.mount("body")}()}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return a[e].call(r.exports,r,r.exports,o),r.exports}o.m=a,e=[],o.O=(t,r,a,i)=>{if(!r){var n=1/0;for(g=0;g<e.length;g++){for(var[r,a,i]=e[g],s=!0,c=0;c<r.length;c++)(!1&i||n>=i)&&Object.keys(o.O).every((e=>o.O[e](r[c])))?r.splice(c--,1):(s=!1,i<n&&(n=i));if(s){e.splice(g--,1);var l=a();void 0!==l&&(t=l)}}return t}i=i||0;for(var g=e.length;g>0&&e[g-1][2]>i;g--)e[g]=e[g-1];e[g]=[r,a,i]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,a){if(1&a&&(e=this(e)),8&a)return e;if("object"==typeof e&&e){if(4&a&&e.__esModule)return e;if(16&a&&"function"==typeof e.then)return e}var i=Object.create(null);o.r(i);var n={};t=t||[null,r({}),r([]),r(r)];for(var s=2&a&&e;"object"==typeof s&&!~t.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,o.d(i,n),i},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.j=6552,(()=>{var e={6552:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var a,i,[n,s,c]=r,l=0;if(n.some((t=>0!==e[t]))){for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(c)var g=c(o)}for(t&&t(r);l<n.length;l++)i=n[l],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(g)},r=globalThis.webpackChunksearch_by_image=globalThis.webpackChunksearch_by_image||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=o.O(void 0,[8830],(()=>o(7226)));n=o.O(n)})();