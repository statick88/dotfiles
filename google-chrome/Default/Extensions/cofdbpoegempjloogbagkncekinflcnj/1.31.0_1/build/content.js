var content=function(e){"use strict";function t(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage(e,(function(e){e&&e.error&&n(e),t(e)}))}))}function n(e,n){return t({action:"dlSendNotification",payload:{type:e,options:n}})}async function o(e){if(!chrome.tabs)return;const t=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(t[0].id,e)}const r=[{langCode:"AR",langCodeForSpeech:"ar-AR",langCodeForIta:"ar"},{langCode:"BG",langCodeForSpeech:"bg-BG",langCodeForIta:"bg"},{langCode:"CS",langCodeForSpeech:"cs-CZ",langCodeForIta:"cs"},{langCode:"DA",langCodeForSpeech:"da-DK",langCodeForIta:"da"},{langCode:"DE",langCodeForSpeech:"de-DE",supportsFormality:!0,langCodeForIta:"de"},{langCode:"EL",langCodeForSpeech:"el-GR",langCodeForIta:"el"},{langCode:"EN-GB",langCodeForSpeech:"en",voice:"Google UK English Male",langCodeForIta:"en-GB"},{langCode:"EN-US",langCodeForSpeech:"en",voice:"Google UK English Male",langCodeForIta:"en-US"},{langCode:"ES",langCodeForSpeech:"es-ES",voice:"Google espaÃ±ol",label:"ES",supportsFormality:!0,langCodeForIta:"es"},{langCode:"ET",langCodeForSpeech:"et",langCodeForIta:"et"},{langCode:"FI",langCodeForSpeech:"fi-FI",voice:"Satu",langCodeForIta:"fi"},{langCode:"FR",langCodeForSpeech:"fr-FR",voice:"Thomas",supportsFormality:!0,langCodeForIta:"fr"},{langCode:"HU",langCodeForSpeech:"hu-HU",langCodeForIta:"hu"},{langCode:"ID",langCodeForSpeech:"id-ID",langCodeForIta:"id"},{langCode:"IT",langCodeForSpeech:"it-IT",supportsFormality:!0,langCodeForIta:"it"},{langCode:"JA",langCodeForSpeech:"ja-JP",supportsFormality:!0,langCodeForIta:"ja"},{langCode:"KO",langCodeForSpeech:"ko-KR",langCodeForIta:"ko"},{langCode:"LT",langCodeForSpeech:"lt",langCodeForIta:"lt"},{langCode:"LV",langCodeForSpeech:"lv",langCodeForIta:"lv"},{langCode:"NB",langCodeForSpeech:"nb-NO",langCodeForIta:"nb"},{langCode:"NL",langCodeForSpeech:"nl-NL",voice:"Google Nederlands",label:"NL",supportsFormality:!0,langCodeForIta:"nl"},{langCode:"PL",langCodeForSpeech:"pl-PL",supportsFormality:!0,langCodeForIta:"pl"},{langCode:"PT-BR",langCodeForSpeech:"pt-PT",supportsFormality:!0,langCodeForIta:"pt-BR"},{langCode:"PT-PT",langCodeForSpeech:"pt-PT",supportsFormality:!0,langCodeForIta:"pt-PT"},{langCode:"RO",langCodeForSpeech:"ro-RO",langCodeForIta:"ro"},{langCode:"RU",langCodeForSpeech:"ru-RU",supportsFormality:!0,langCodeForIta:"ru"},{langCode:"SK",langCodeForSpeech:"sk-SK",langCodeForIta:"sk"},{langCode:"SL",langCodeForSpeech:"sl",langCodeForIta:"sl"},{langCode:"SV",langCodeForSpeech:"sv-SE",langCodeForIta:"sv"},{langCode:"TR",langCodeForSpeech:"tr-TR",langCodeForIta:"tr"},{langCode:"UK",langCodeForSpeech:"uk-UA",langCodeForIta:"uk"},{langCode:"ZH",langCodeForSpeech:"zh-CN",langCodeForIta:"zh-Hans"},{langCode:"ZH-HANT",langCodeForSpeech:"zh-HANT",langCodeForIta:"zh-Hant"}],i=["EN-GB","EN-US","EN","DE","FR","ES","PT-PT","PT-BR","PT","IT"],s=["EN-GB","EN-US","EN","DE"],a=["ES","FR","IT","PT","PT-BR","PT-PT"],l=1,c=2,d={none:"",ongoingTranslation:"ONGOING_TRANSLATION",isTranslationComplete:"IS_TRANLSATION_COMPLETE",showOriginal:"SHOW_ORIGINAL",ongoingAutoDetection:"ON_GOING_AUTODETECTION",anonymousUserMaxCharExceeded:"ANONYMOUS_USER_MAX_CHAR_EXCEEDED"},u="",p="ONGOING_WRITE",m=1,g=2,h="inline",f="automatic",_="manual",v="input",y={notLoggedIn:1,loggedInPro:2,loggedInFree:3},w=1500,b=5e3,E=2e3,T=2e3,S=1,x=3,$=4,C=1,k=2,L=3,I=1,A=2,R={enabled:1,disabled:2},M=[/[^.]+\.deepl\.com/g,/[^.]+\.figma\.com/g],N=[/docs.google\.com\/spreadsheets/g],O=[/[^.]+\.deepl\.com/g],D={deepl_inline_ui:{z_index:2147483650}},P={hintKeyboardShortcut:"HINT_KEYBOARD_SHORTCUT",inputTranslation:"INPUT_TRANSLATION",inlineTranslation:"INLINE_TRANSLATION",fullPageTranslation:"FULL_PAGE_TRANSLATION",accountSuccessfullyCreated:"ACCOUNT_SUCCESSFULLY_CREATED",successfullyLoggedIn:"SUCCESSFULLY_LOGGED_IN",glidesPreventAssetLoss:"GSLIDES_WARNING_TO_AVOID_ASSET_LOSS",showAdsForMSAddins:"SHOW_ADS_FOR_MS_ADDINS"},U={green_theme:"green_theme",warning_theme:"warning_theme",ads_theme:"ads_theme"},B={inlineTranslationTriggerIcon:"INLINE_TRANSLATION_TRIGGER_ICON",inlineTranslationSettingsIcon:"INLINE_TRANSLATION_SETTINGS_ICON",inlineTranslationSettingPopup:"INLINE_TRANSLATION_SETTING_POPUP",inputTranslationTriggerIcon:"INPUT_TRANSLATION_TRIGGER_ICON",inputImproveTriggerIcon:"INPUT_IMPROVE_TRIGGER_ICON",inputTranslationSettingsIcon:"INPUT_TRANSLATION_SETTINGS_ICON",inputTranslationSettingPopup:"INPUT_TRANSLATION_SETTING_POPUP",settingsPageFPT:"SETTINGS_PAGE_FPT",settingsPageReading:"SETTINGS_PAGE_READING",settingsPageWriting:"SETTINGS_PAGE_WRITING",settingsPageIntegrations:"SETTINGS_PAGE_INTEGRATIONS",fptHideModal:"FPT_HIDE_MODAL",inputTranslationReadMoreLink:"INPUT_TRANSLATION_READ_MORE_LINK",inlineTranslationReadMoreLink:"INLINE_TRANSLATION_READ_MORE_LINK",fptTranslationReadMoreLink:"FPT_TRANSLATION_READ_MORE_LINK",extensionHubToggleSwitch:"EXTENSION_HUB_TOGGLE_SWITCH",hubCustomizeShortcut:"HUB_CUSTOMIZE_SHORTCUT",hubLoginButton:"HUB_LOGIN_BUTTON",hubUpgradeToProLink:"HUB_UPGRADE_TO_PRO_LINK",hubTryProLink:"HUB_TRY_PRO_LINK",hubTryWriteProLink:"HUB_TRY_WRITE_PRO_LINK",settingsPageCustomizeShortcutButton:"SETTINGS_PAGE_CUSTOMIZE_SHORTCUT_BUTTON",hubFPTEnableCheckbox:"HUB_FPT_ENABLE_CHECKBOX",hubFPTDisableCheckbox:"HUB_FPT_DISABLE_CHECKBOX",deeplWriteIcon:"DEEPL_WRITE_ICON",gmailOnboardingPopup:"gmailOnboardingPopup",gmailOnboardingIcon:"gmailOnboardingIcon",gmailCharLimitLogin:"gmailCharLimitLogin",gmailFeedbackSurvey:"gmailFeedbackSurvey",hubViewIntegrations:"HUB_VIEW_INTEGRATIONS",hubCloseCustomizationsWidget:"HUB_CLOSE_CUSTOMIZATIONS_WIDGET",gslidesFeedbackSurvey:"GSLIDES_FEEDBACK_SURVEY",gslidesCharLimitLogin:"GSLIDES_CHAR_LIMIT_LOGIN",zendeskTryProLink:"ZENDESK_TRY_PRO_LINK",onboardingSignUp:"ONBOARDING_SIGN_UP",onboardingSkipSignUp:"ONBOARDING_SKIP_SIGN_UP",onboardingLoginLink:"ONBOARDING_LOGIN_LINK",onboardingSeeAllIntegrations:"ONBOARDING_SEE_ALL_INTEGRATIONS",iconToggleInHubTranslator:"ICON_TOGGLE_IN_HUB_TRANSLATOR",iconToggleInHubWrite:"ICON_TOGGLE_IN_HUB_WRITE",manageIconSettings:"MANAGE_ICON_SETTINGS",writeLanguageSwitchedInHub:"WRITE_LANGUAGE_SWITCHED_IN_HUB",writeLanguageSwitchedInSettings:"WRITE_LANGUAGE_SWITCHED_IN_SETTINGS"},W="trigger-translation",z="CLICK_ON_SHORTCUT_NOTIFICATION",F="CLICK_ON_INLINE_TRANSLATION_SHOW_ALTERNATIVES",H="CLICK_ON_INLINE_TRANSLATION_CLOSE_ICON",j="CLICK_ON_LOGOUT_MENU_ENTRY",G="CLICK_ON_REVIEW_WINDOW_CLOSE_ACTION",q={disablePerSite:"DISABLE_PER_SITE",disableEverywhere:"DISABLE_EVERYWHERE",enableEverywhere:"ENABLE_EVERYWHERE",enablePerSite:"ENABLE_PER_SITE"},V="INPUT_TRANSLATION",Y="INLINE_TRANSLATION",K=1,Z=2,X={unspecified:0,chrome:1,edge:2,local:3,firefox:4},Q={chrome:"cofdbpoegempjloogbagkncekinflcnj",edge:"fancfknaplihpclbhbpclnmmjcjanbaf",local:"ocpdpnakdghopjcifldjidbdmfobmmoi",firefox:"firefox-extension@deepl.com"},J={deepl:/^(.*\.)?deepl\.com$/gm,linguee:/^(.*\.)?linguee\.[a-z]{2,3}$/gm,google_translate:/^translate\.google\.com$/gm,gmail:/^mail\.google\.com$/gm},ee={word_365:"euc-word-edit.officeapps.live.com",power_point_365:"euc-powerpoint.officeapps.live.com"},te={word_365:"WacFrame_Word_0",power_point_365:"WacFrame_PowerPoint_0"},ne={initial:"INITIAL",feedback:"FEEDBACK",review:"REVIEW",gmail:"GMAIL",gslides:"GSLIDES",customer_segmentation:"CUSTOMER_SEGMENTATION",arabic_survey:"ARABIC_SURVEY"},oe={close_icon:1,deepl_icon:2,outside_click:3},re={default:"DEFAULT",gdocs:"GDOCS",zendesk:"ZENDESK",whatsappWeb:"WHATSAPP_WEB",twitter:"TWITTER",gmail:"GMAIL",gslides:"GSLIDES",linkedIn:"LINKEDIN",youtube:"YOUTUBE"},ie="source",se="target",ae={translate:"translate",write:"write"},le=["script","style"],ce=["a","abbr","acronym","b","bdo","big","br","button","cite","code","dfn","em","i","img","input","kbd","label","map","object","q","samp","script","select","small","span","strong","sub","sup","textarea","time","tt","var","font"],de="OPEN_TICKET",ue="DETECT_TICKET_LANGUAGE",pe="SWITCH_TICKET_LANGUAGE",me="ENABLE_AUTOTRANSLATE",ge="DISABLE_AUTOTRANSLATE",he="TRANSLATE_MESSAGE",fe="TRANSLATE_INPUT",_e="ERROR",ve="TICKET",ye="LIVE_CHAT",we=50,be={TRANSLATOR:"TRANSLATOR",WRITE:"WRITE",API:"API",DOC_TRANSLATOR:"DOC_TRANSLATOR"},Ee={free:"free",pro:"pro",none:"none"},Te="TEXT_REFINEMENT_REQUEST",Se="GDOCS_INSERT_COPY",xe="GDOCS_DISCARD_COPY",$e="GDOCS_CHAR_LIMIT_REACHED",Ce="RESULT_ACCEPTED",ke="RESULT_REVERTED",Le="ERROR",Ie="RESULT_ACCEPTED",Ae="RESULT_REVERTED",Re="ALTERNATIVES_OPENED",Me="SEGMENTATION_SELECTED",Ne="ALTERNATIVE_SELECTED",Oe="SHOWN",De="CLICKED",Pe={READING_VIEW_TRANSLATE:"READING_VIEW_TRANSLATE",COMPOSE_VIEW_TRANSLATE:"COMPOSE_VIEW_TRANSLATE",COMPOSE_VIEW_IMPROVE:"COMPOSE_VIEW_IMPROVE"},Ue="ANONYMOUS_USER_LIMIT_EXCEEDED",Be="FREE_ACCOUNT_LIMIT_EXCEEDED",We="WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED",ze="WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED",Fe="PRO_TRIAL",He="LOGIN",je="SIGNUP",Ge={ANONYMOUS:"ANONYMOUS",FREE:"FREE"},qe={WORD:"word",SENTENCE:"sentence"},Ve=["JA","ZH"],Ye={none:"None",pro:"Pro",free:"Free"},Ke="auto",Ze="formal",Xe="informal",Qe="undefined",Je=["simple","business","academic","casual"],et=["enthusiastic","friendly","confident","diplomatic"],tt=(e,t)=>{if(!e)throw new Error("No settings supplied to getServiceType");if(!Object.keys(be).includes(t))throw new Error("Unidentified service name supplied to getServiceType");if(!e.isLoggedIn)return Ee.free;switch(t){case be.TRANSLATOR:return e.translatorServiceType;case be.WRITE:return e.writeServiceType;case be.API:return e.apiServiceType;case be.DOC_TRANSLATOR:return e.docTranslatorServiceType}},nt=(e,t)=>tt(e,t)===Ee.pro,ot=(e,t)=>tt(e,t)===Ee.free,rt=(e,t)=>tt(e,t)===Ee.none,it=e=>!!e.isLoggedIn&&ot(e,be.WRITE),st=(e,t)=>e.isLoggedIn&&ot(e,t),at={chrome:"Chrome",edge:"Edge",brave:"Brave",firefox:"Firefox",opera:"Opera",safari:"Safari"};function lt(){return!!window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}function ct(e,t){let n;try{switch(e){case at.chrome:case at.brave:n=t.split("Chrome/")[1].split(" ")[0];break;case at.edge:n=t.split("Edg/")[1].split(" ")[0];break;case at.firefox:n=t.split("Firefox/")[1].split(" ")[0];break;case at.opera:n=t.split("OPR/")[1].split(" ")[0];break;case at.safari:n=t.split("Version/")[1].split(" ")[0]}}catch(t){console.error(`Could not get the browsers (${e}) version from user agent`,t)}try{!n&&navigator?.userAgentData&&function(e){return e===at.chrome||e===at.edge||e===at.brave||e===at.opera}(e)&&(n=dt(e).version)}catch(t){console.error(`Could not get the chromium browsers (${e}) version`,t)}return n&&"string"==typeof n?n:"unknown_browser_version"}function dt(e){if(!navigator.userAgentData||!e)return;const t=new RegExp(`${e}`,"i");return navigator.userAgentData.brands.filter((e=>t.test(e.brand)))[0]}function ut(){const e=navigator?.userAgent||"unknown_user_agent",t=navigator?.userAgentData?.platform||navigator?.platform||"unknown_platform";let n="unknown_browser",o="unknown_browser_version",r=navigator?.language||"unknown_browser_language";chrome?.i18n?.getUILanguage&&(r=chrome.i18n.getUILanguage());try{const t=e.match(/chrome|chromium|crios/i),r=e.match(/edg/i)||dt(at.edge),i=e.match(/firefox|fxios/i),s=e.match(/opr\//i)||dt(at.opera),a=e.match(/safari/i),l=dt(at.brave);t?(n=at.chrome,r&&(n=at.edge),s&&(n=at.opera),l&&(n=at.brave)):r?n=at.edge:i?n=at.firefox:s?n=at.opera:a&&(n=at.safari),o=ct(n,e)}catch(e){console.error("Could not get the name of the brower",e)}return{userAgent:e,platform:t,browser:n,browserVersion:o,browserLang:r}}function pt(){if({IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.31.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.31.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.31.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365"},APP_VERSION:"1.31.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,REVIEW_UI_WITH_ITA:!1,BATCH_TRANSLATE_HTML_REQUEST:!0}}.browserBuild)return{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.31.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.31.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.31.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365"},APP_VERSION:"1.31.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,REVIEW_UI_WITH_ITA:!1,BATCH_TRANSLATE_HTML_REQUEST:!0}}.browserBuild.toLowerCase()===at.firefox.toLowerCase();const e=chrome.runtime.getURL("");return ut().browser===at.firefox||/moz-extension:\/\//gm.test(e)}const mt=()=>{const e=/(outlook\.office\.com|sharepoint\.com|microsoft|office)/,t=new URL(window.location.href);if(!e.test(t.origin))return!1;const n=t.origin.match(e);return!!n&&n[0]};var gt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ht={exports:{}};
/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */
!function(e,t){e.exports=function(){const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:o,getOwnPropertyDescriptor:r}=Object;let{freeze:i,seal:s,create:a}=Object,{apply:l,construct:c}="undefined"!=typeof Reflect&&Reflect;i||(i=function(e){return e}),s||(s=function(e){return e}),l||(l=function(e,t,n){return e.apply(t,n)}),c||(c=function(e,t){return new e(...t)});const d=E(Array.prototype.forEach),u=E(Array.prototype.pop),p=E(Array.prototype.push),m=E(String.prototype.toLowerCase),g=E(String.prototype.toString),h=E(String.prototype.match),f=E(String.prototype.replace),_=E(String.prototype.indexOf),v=E(String.prototype.trim),y=E(Object.prototype.hasOwnProperty),w=E(RegExp.prototype.test),b=T(TypeError);function E(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return l(e,t,o)}}function T(e){return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return c(e,n)}}function S(e,o){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;t&&t(e,null);let i=o.length;for(;i--;){let t=o[i];if("string"==typeof t){const e=r(t);e!==t&&(n(o)||(o[i]=e),t=e)}e[t]=!0}return e}function x(e){for(let t=0;t<e.length;t++)y(e,t)||(e[t]=null);return e}function $(t){const n=a(null);for(const[o,r]of e(t))y(t,o)&&(Array.isArray(r)?n[o]=x(r):r&&"object"==typeof r&&r.constructor===Object?n[o]=$(r):n[o]=r);return n}function C(e,t){for(;null!==e;){const n=r(e,t);if(n){if(n.get)return E(n.get);if("function"==typeof n.value)return E(n.value)}e=o(e)}function n(){return null}return n}const k=i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),L=i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),I=i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),A=i(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),R=i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),M=i(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),N=i(["#text"]),O=i(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),D=i(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),P=i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),U=i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),B=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),W=s(/<%[\w\W]*|[\w\W]*%>/gm),z=s(/\${[\w\W]*}/gm),F=s(/^data-[\-\w.\u00B7-\uFFFF]/),H=s(/^aria-[\-\w]+$/),j=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G=s(/^(?:\w+script|data):/i),q=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),V=s(/^html$/i),Y=s(/^[a-z][.\w]*(-[.\w]+)+$/i);var K=Object.freeze({__proto__:null,MUSTACHE_EXPR:B,ERB_EXPR:W,TMPLIT_EXPR:z,DATA_ATTR:F,ARIA_ATTR:H,IS_ALLOWED_URI:j,IS_SCRIPT_OR_DATA:G,ATTR_WHITESPACE:q,DOCTYPE_NAME:V,CUSTOM_ELEMENT:Y});const Z={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},X=function(){return"undefined"==typeof window?null:window},Q=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const o="data-tt-policy-suffix";t&&t.hasAttribute(o)&&(n=t.getAttribute(o));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function J(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X();const n=e=>J(e);if(n.version="3.1.6",n.removed=[],!t||!t.document||t.document.nodeType!==Z.document)return n.isSupported=!1,n;let{document:o}=t;const r=o,s=r.currentScript,{DocumentFragment:l,HTMLTemplateElement:c,Node:E,Element:T,NodeFilter:x,NamedNodeMap:B=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:W,DOMParser:z,trustedTypes:F}=t,H=T.prototype,G=C(H,"cloneNode"),q=C(H,"remove"),Y=C(H,"nextSibling"),ee=C(H,"childNodes"),te=C(H,"parentNode");if("function"==typeof c){const e=o.createElement("template");e.content&&e.content.ownerDocument&&(o=e.content.ownerDocument)}let ne,oe="";const{implementation:re,createNodeIterator:ie,createDocumentFragment:se,getElementsByTagName:ae}=o,{importNode:le}=r;let ce={};n.isSupported="function"==typeof e&&"function"==typeof te&&re&&void 0!==re.createHTMLDocument;const{MUSTACHE_EXPR:de,ERB_EXPR:ue,TMPLIT_EXPR:pe,DATA_ATTR:me,ARIA_ATTR:ge,IS_SCRIPT_OR_DATA:he,ATTR_WHITESPACE:fe,CUSTOM_ELEMENT:_e}=K;let{IS_ALLOWED_URI:ve}=K,ye=null;const we=S({},[...k,...L,...I,...R,...N]);let be=null;const Ee=S({},[...O,...D,...P,...U]);let Te=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Se=null,xe=null,$e=!0,Ce=!0,ke=!1,Le=!0,Ie=!1,Ae=!0,Re=!1,Me=!1,Ne=!1,Oe=!1,De=!1,Pe=!1,Ue=!0,Be=!1;const We="user-content-";let ze=!0,Fe=!1,He={},je=null;const Ge=S({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let qe=null;const Ve=S({},["audio","video","img","source","image","track"]);let Ye=null;const Ke=S({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ze="http://www.w3.org/1998/Math/MathML",Xe="http://www.w3.org/2000/svg",Qe="http://www.w3.org/1999/xhtml";let Je=Qe,et=!1,tt=null;const nt=S({},[Ze,Xe,Qe],g);let ot=null;const rt=["application/xhtml+xml","text/html"],it="text/html";let st=null,at=null;const lt=o.createElement("form"),ct=function(e){return e instanceof RegExp||e instanceof Function},dt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!at||at!==e){if(e&&"object"==typeof e||(e={}),e=$(e),ot=-1===rt.indexOf(e.PARSER_MEDIA_TYPE)?it:e.PARSER_MEDIA_TYPE,st="application/xhtml+xml"===ot?g:m,ye=y(e,"ALLOWED_TAGS")?S({},e.ALLOWED_TAGS,st):we,be=y(e,"ALLOWED_ATTR")?S({},e.ALLOWED_ATTR,st):Ee,tt=y(e,"ALLOWED_NAMESPACES")?S({},e.ALLOWED_NAMESPACES,g):nt,Ye=y(e,"ADD_URI_SAFE_ATTR")?S($(Ke),e.ADD_URI_SAFE_ATTR,st):Ke,qe=y(e,"ADD_DATA_URI_TAGS")?S($(Ve),e.ADD_DATA_URI_TAGS,st):Ve,je=y(e,"FORBID_CONTENTS")?S({},e.FORBID_CONTENTS,st):Ge,Se=y(e,"FORBID_TAGS")?S({},e.FORBID_TAGS,st):{},xe=y(e,"FORBID_ATTR")?S({},e.FORBID_ATTR,st):{},He=!!y(e,"USE_PROFILES")&&e.USE_PROFILES,$e=!1!==e.ALLOW_ARIA_ATTR,Ce=!1!==e.ALLOW_DATA_ATTR,ke=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Le=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Ie=e.SAFE_FOR_TEMPLATES||!1,Ae=!1!==e.SAFE_FOR_XML,Re=e.WHOLE_DOCUMENT||!1,Oe=e.RETURN_DOM||!1,De=e.RETURN_DOM_FRAGMENT||!1,Pe=e.RETURN_TRUSTED_TYPE||!1,Ne=e.FORCE_BODY||!1,Ue=!1!==e.SANITIZE_DOM,Be=e.SANITIZE_NAMED_PROPS||!1,ze=!1!==e.KEEP_CONTENT,Fe=e.IN_PLACE||!1,ve=e.ALLOWED_URI_REGEXP||j,Je=e.NAMESPACE||Qe,Te=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&ct(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Te.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ct(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Te.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Te.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ie&&(Ce=!1),De&&(Oe=!0),He&&(ye=S({},N),be=[],!0===He.html&&(S(ye,k),S(be,O)),!0===He.svg&&(S(ye,L),S(be,D),S(be,U)),!0===He.svgFilters&&(S(ye,I),S(be,D),S(be,U)),!0===He.mathMl&&(S(ye,R),S(be,P),S(be,U))),e.ADD_TAGS&&(ye===we&&(ye=$(ye)),S(ye,e.ADD_TAGS,st)),e.ADD_ATTR&&(be===Ee&&(be=$(be)),S(be,e.ADD_ATTR,st)),e.ADD_URI_SAFE_ATTR&&S(Ye,e.ADD_URI_SAFE_ATTR,st),e.FORBID_CONTENTS&&(je===Ge&&(je=$(je)),S(je,e.FORBID_CONTENTS,st)),ze&&(ye["#text"]=!0),Re&&S(ye,["html","head","body"]),ye.table&&(S(ye,["tbody"]),delete Se.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw b('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw b('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ne=e.TRUSTED_TYPES_POLICY,oe=ne.createHTML("")}else void 0===ne&&(ne=Q(F,s)),null!==ne&&"string"==typeof oe&&(oe=ne.createHTML(""));i&&i(e),at=e}},ut=S({},["mi","mo","mn","ms","mtext"]),pt=S({},["foreignobject","annotation-xml"]),mt=S({},["title","style","font","a","script"]),gt=S({},[...L,...I,...A]),ht=S({},[...R,...M]),ft=function(e){let t=te(e);t&&t.tagName||(t={namespaceURI:Je,tagName:"template"});const n=m(e.tagName),o=m(t.tagName);return!!tt[e.namespaceURI]&&(e.namespaceURI===Xe?t.namespaceURI===Qe?"svg"===n:t.namespaceURI===Ze?"svg"===n&&("annotation-xml"===o||ut[o]):Boolean(gt[n]):e.namespaceURI===Ze?t.namespaceURI===Qe?"math"===n:t.namespaceURI===Xe?"math"===n&&pt[o]:Boolean(ht[n]):e.namespaceURI===Qe?!(t.namespaceURI===Xe&&!pt[o])&&!(t.namespaceURI===Ze&&!ut[o])&&!ht[n]&&(mt[n]||!gt[n]):!("application/xhtml+xml"!==ot||!tt[e.namespaceURI]))},_t=function(e){p(n.removed,{element:e});try{te(e).removeChild(e)}catch(t){q(e)}},vt=function(e,t){try{p(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){p(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!be[e])if(Oe||De)try{_t(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},yt=function(e){let t=null,n=null;if(Ne)e="<remove></remove>"+e;else{const t=h(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===ot&&Je===Qe&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=ne?ne.createHTML(e):e;if(Je===Qe)try{t=(new z).parseFromString(r,ot)}catch(e){}if(!t||!t.documentElement){t=re.createDocument(Je,"template",null);try{t.documentElement.innerHTML=et?oe:r}catch(e){}}const i=t.body||t.documentElement;return e&&n&&i.insertBefore(o.createTextNode(n),i.childNodes[0]||null),Je===Qe?ae.call(t,Re?"html":"body")[0]:Re?t.documentElement:i},wt=function(e){return ie.call(e.ownerDocument||e,e,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT|x.SHOW_PROCESSING_INSTRUCTION|x.SHOW_CDATA_SECTION,null)},bt=function(e){return e instanceof W&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof B)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},Et=function(e){return"function"==typeof E&&e instanceof E},Tt=function(e,t,o){ce[e]&&d(ce[e],(e=>{e.call(n,t,o,at)}))},St=function(e){let t=null;if(Tt("beforeSanitizeElements",e,null),bt(e))return _t(e),!0;const o=st(e.nodeName);if(Tt("uponSanitizeElement",e,{tagName:o,allowedTags:ye}),e.hasChildNodes()&&!Et(e.firstElementChild)&&w(/<[/\w]/g,e.innerHTML)&&w(/<[/\w]/g,e.textContent))return _t(e),!0;if(e.nodeType===Z.progressingInstruction)return _t(e),!0;if(Ae&&e.nodeType===Z.comment&&w(/<[/\w]/g,e.data))return _t(e),!0;if(!ye[o]||Se[o]){if(!Se[o]&&$t(o)){if(Te.tagNameCheck instanceof RegExp&&w(Te.tagNameCheck,o))return!1;if(Te.tagNameCheck instanceof Function&&Te.tagNameCheck(o))return!1}if(ze&&!je[o]){const t=te(e)||e.parentNode,n=ee(e)||e.childNodes;if(n&&t)for(let o=n.length-1;o>=0;--o){const r=G(n[o],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,Y(e))}}return _t(e),!0}return e instanceof T&&!ft(e)?(_t(e),!0):"noscript"!==o&&"noembed"!==o&&"noframes"!==o||!w(/<\/no(script|embed|frames)/i,e.innerHTML)?(Ie&&e.nodeType===Z.text&&(t=e.textContent,d([de,ue,pe],(e=>{t=f(t,e," ")})),e.textContent!==t&&(p(n.removed,{element:e.cloneNode()}),e.textContent=t)),Tt("afterSanitizeElements",e,null),!1):(_t(e),!0)},xt=function(e,t,n){if(Ue&&("id"===t||"name"===t)&&(n in o||n in lt))return!1;if(Ce&&!xe[t]&&w(me,t));else if($e&&w(ge,t));else if(!be[t]||xe[t]){if(!($t(e)&&(Te.tagNameCheck instanceof RegExp&&w(Te.tagNameCheck,e)||Te.tagNameCheck instanceof Function&&Te.tagNameCheck(e))&&(Te.attributeNameCheck instanceof RegExp&&w(Te.attributeNameCheck,t)||Te.attributeNameCheck instanceof Function&&Te.attributeNameCheck(t))||"is"===t&&Te.allowCustomizedBuiltInElements&&(Te.tagNameCheck instanceof RegExp&&w(Te.tagNameCheck,n)||Te.tagNameCheck instanceof Function&&Te.tagNameCheck(n))))return!1}else if(Ye[t]);else if(w(ve,f(n,fe,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==_(n,"data:")||!qe[e])if(ke&&!w(he,f(n,fe,"")));else if(n)return!1;return!0},$t=function(e){return"annotation-xml"!==e&&h(e,_e)},Ct=function(e){Tt("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:be};let r=t.length;for(;r--;){const i=t[r],{name:s,namespaceURI:a,value:l}=i,c=st(s);let p="value"===s?l:v(l);if(o.attrName=c,o.attrValue=p,o.keepAttr=!0,o.forceKeepAttr=void 0,Tt("uponSanitizeAttribute",e,o),p=o.attrValue,Ae&&w(/((--!?|])>)|<\/(style|title)/i,p)){vt(s,e);continue}if(o.forceKeepAttr)continue;if(vt(s,e),!o.keepAttr)continue;if(!Le&&w(/\/>/i,p)){vt(s,e);continue}Ie&&d([de,ue,pe],(e=>{p=f(p,e," ")}));const m=st(e.nodeName);if(xt(m,c,p)){if(!Be||"id"!==c&&"name"!==c||(vt(s,e),p=We+p),ne&&"object"==typeof F&&"function"==typeof F.getAttributeType)if(a);else switch(F.getAttributeType(m,c)){case"TrustedHTML":p=ne.createHTML(p);break;case"TrustedScriptURL":p=ne.createScriptURL(p)}try{a?e.setAttributeNS(a,s,p):e.setAttribute(s,p),bt(e)?_t(e):u(n.removed)}catch(e){}}}Tt("afterSanitizeAttributes",e,null)},kt=function e(t){let n=null;const o=wt(t);for(Tt("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)Tt("uponSanitizeShadowNode",n,null),St(n)||(n.content instanceof l&&e(n.content),Ct(n));Tt("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null,i=null,s=null,a=null;if(et=!e,et&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Et(e)){if("function"!=typeof e.toString)throw b("toString is not a function");if("string"!=typeof(e=e.toString()))throw b("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Me||dt(t),n.removed=[],"string"==typeof e&&(Fe=!1),Fe){if(e.nodeName){const t=st(e.nodeName);if(!ye[t]||Se[t])throw b("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof E)o=yt("\x3c!----\x3e"),i=o.ownerDocument.importNode(e,!0),i.nodeType===Z.element&&"BODY"===i.nodeName||"HTML"===i.nodeName?o=i:o.appendChild(i);else{if(!Oe&&!Ie&&!Re&&-1===e.indexOf("<"))return ne&&Pe?ne.createHTML(e):e;if(o=yt(e),!o)return Oe?null:Pe?oe:""}o&&Ne&&_t(o.firstChild);const c=wt(Fe?e:o);for(;s=c.nextNode();)St(s)||(s.content instanceof l&&kt(s.content),Ct(s));if(Fe)return e;if(Oe){if(De)for(a=se.call(o.ownerDocument);o.firstChild;)a.appendChild(o.firstChild);else a=o;return(be.shadowroot||be.shadowrootmode)&&(a=le.call(r,a,!0)),a}let u=Re?o.outerHTML:o.innerHTML;return Re&&ye["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&w(V,o.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+u),Ie&&d([de,ue,pe],(e=>{u=f(u,e," ")})),ne&&Pe?ne.createHTML(u):u},n.setConfig=function(){dt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Me=!0},n.clearConfig=function(){at=null,Me=!1},n.isValidAttribute=function(e,t,n){at||dt({});const o=st(e),r=st(t);return xt(o,r,n)},n.addHook=function(e,t){"function"==typeof t&&(ce[e]=ce[e]||[],p(ce[e],t))},n.removeHook=function(e){if(ce[e])return u(ce[e])},n.removeHooks=function(e){ce[e]&&(ce[e]=[])},n.removeAllHooks=function(){ce={}},n}var ee=J();return ee}()}(ht);const ft=(e,t={})=>ht.exports.sanitize(e,{USE_PROFILES:{html:!0},...t}),_t=()=>{const e=new URL(window.location.href);return"https:"===e.protocol&&"docs.google.com"===e.hostname&&"/document/"===e.pathname.slice(0,10)},vt=()=>{const e=document.querySelector(".docs-texteventtarget-iframe")?.contentWindow;return{iFrame:e,editable:e&&e.document.querySelector("[contenteditable=true]")}},yt=()=>{const{iFrame:e,editable:t}=vt();if(!e||!t)return;const n=new e.ClipboardEvent("copy",{bubbles:!0,clipboardData:new e.DataTransfer});t.dispatchEvent(n)},wt=()=>{const{iFrame:e,editable:t}=vt();if(!e||!t)return;const n=new e.CustomEvent("copy",{bubbles:!0});t.dispatchEvent(n);const o=(e=>{if(0===e.length)return!0;for(let t=0;t<e.length;t++)if(8203!==e.charCodeAt(t))return!1;return!0})(t.innerText.trim());return{html:o?"":ft(t.innerHTML),text:o?"":t.innerText}},bt=()=>{const e=document.querySelector("deepl-gdocs-icon")?.shadowRoot.querySelector(".dl-gdocs-icon");if(!e)return void console.error("GDocs Icon was not present while trying to get the coordinates");const t=e.getBoundingClientRect(),n=document.body.parentNode.getBoundingClientRect(),{top:o,left:r,right:i,bottom:s,height:a,width:l}=t;return{x:r-n.left,y:s-n.top,selectedTop:o,selectedBottom:s,selectedRight:n.width-i,selectedLeft:r+window.scrollX,selectedWidth:l,height:a}},Et=()=>{const e=document.querySelector("#docs-instant-bubble"),t=document.querySelector(".kix-appview-editor"),n=document.querySelector(".kix-page-paginated"),o=120,r=40,i=t.getBoundingClientRect();let s=!1;const a={top:0,left:0};try{if(!e)throw new Error;const t=e.getBoundingClientRect();if(t.left<=0)throw new Error;const n=Math.round(t.top+134||0);a.left=t.left,a.top=n?n+20:0,a.top+o/2<i.top+10&&(a.top=i.top+10),a.top-o/2>i.bottom&&(s=!0)}catch(e){if(n){const e=n.getBoundingClientRect();a.left=e.right-r/2,a.top=i.top+30}}return a.left+r/2>i.right&&(s=!0),{shouldBeOutOfViewport:s,newPosition:a}},Tt=()=>!!document.querySelector("#docs-toolbar-wrapper"),St=e=>{const t=e.clipboardData.getData("application/x-vnd.google-docs-document-slice-clip+wrapped"),n=JSON.parse(t),o=JSON.parse(n.data).resolved,r=[];let i="";for(let e=0;e<o.dsl_spacers.length;e++){const t=o.dsl_spacers[e];o.dsl_styleslices.forEach((t=>{if(t.stsl_styles.length>0&&t.stsl_styles[e]){const n=`a${r.length+1}`;r.push({entity_type:t.stsl_type,entity_abbreviation:n,entity:t.stsl_styles[e]}),i+=`<${n}>`}})),i+=t}const s=[],a=i.split("\n").map((e=>{const t=e.replace(/<a\d+>/g,"").trim().length>0;if(t){const{leading:n,trailing:o,processedLine:r}=xt(e);return s.push(r),{isTranslatable:t,index:s.length-1,leading:n,trailing:o}}return{isTranslatable:t,line:e}}));return{textLines:s,entities:r,contentReference:a,originalObject:n,originalText:o.dsl_spacers}},xt=e=>{const{leadingEntities:t,processedLine:n}=$t(e),{trailingEntities:o,processedLine:r}=Ct(n);return{leading:t,trailing:o,processedLine:r}},$t=e=>{let t="",n="",o="",r=!0;for(const i of e){if(r){const e=o[o.length-1];if("<"===i&&0===o.length){o="<";continue}if(">"===i&&o.length>0&&e.match(/\d/)){t=t+o+">",o="";continue}if("a"===i&&o.length>0&&"<"===e){o+="a";continue}if(i.match(/\d/)&&o.length>0&&("a"===e||e.match(/\d/))){o+=i;continue}if(kt(i)&&0===o.length){t+=i;continue}r=!1,o=""}n+=i}return{processedLine:n,leadingEntities:t}},Ct=e=>{let t="",n="",o="",r=!0;for(const i of e.split("").reverse()){if(r){if(">"===i&&0===o.length){o=">";continue}if("<"===i&&o.length>0&&"a"===o[0]){t="<"+o+t,o="";continue}if("a"===i&&o.length>0&&o[0].match(/\d/)){o="a"+o;continue}if(i.match(/\d/)&&o.length>0&&(">"===o[0]||o[0].match(/\d/))){o=i+o;continue}if(kt(i)&&0===o.length){t=i+t;continue}r=!1,o=""}n=i+n}return{processedLine:n,trailingEntities:t}},kt=e=>[16,17,18,28].includes(e.charCodeAt(0)),Lt=({textLines:e,entities:t,contentReference:n})=>{let o=n.map((t=>t.isTranslatable?`${t.leading}${Array.isArray(e[t.index])?e[t.index].join(""):e[t.index]}${t.trailing}`:t.line)).join("\n");o=o.replace(/<\/a(\d+)>/g,"<a$1>");let r="",i=[],s=0,a=0;for(;s+a<o.length;){const e=s+a;if("<"===o[e]&&"a"===o[e+1]){let n="<a",r=!0,l=!1,c=!0;for(;c;){const t=o[e+n.length];">"===t?(n+=t,l||(r=!1),c=!1):t.match(/\d/)?(n+=t,l=!0):(r=!1,c=!1)}if(r){a+=n.length;const e=t.find((e=>`<${e.entity_abbreviation}>`===n));i.push({...e,new_position:s});continue}}r+=o[e],s++}return{processedText:r,processedEntities:i}},It=e=>e.replace(/<(\/)?a(\d+)>/g,""),At=e=>{const{characterMappings:t,cleanSentence:n}=Mt(e),o=/[^\s.,:;!?"()*ï½ï½ ï½¡ï½¢ï½£ï½¤ï½¥ããããããããããããããããããããããã ãª ã« ã¬ ã­]/,r=[];let i="",s=0,a=!1;for(let e=0;e<n.length;e++){const l=n[e],c=o.test(l);c!==a&&i.length>0&&(r.push({text:i,isWord:a,offsetStart:s,offsetLength:i.length,offsetStartRaw:t[s],offsetLengthRaw:t[s+i.length]}),i=""),a=c,i+=l,1===i.length&&(s=e)}return i&&r.push({text:i,isWord:a,offsetStart:s,offsetLength:i.length,offsetStartRaw:t[s],offsetLengthRaw:t[s+i.length]}),r},Rt=({entities:e,text:t,originalObject:n})=>{const o=Nt({entities:e,text:t,originalObject:n});Ot(o)},Mt=e=>{const t=[];let n="";const o=e.split(/(<a\d+>)/g);let r=0;for(let e=0;e<o.length;e++){const i=o[e];if(!/^<a\d+>$/.test(i)){n+=i;for(let e=0;e<i.length;e++)t.push(r+e)}r+=i.length}return{characterMappings:t,cleanSentence:n}},Nt=({entities:e,text:t,originalObject:n})=>{const o=JSON.parse(n.data),r=o.resolved.dsl_styleslices.map((t=>{const n=e.filter((e=>e.entity_type===t.stsl_type));if(0===n.length)return t;const o={};let r=0;n.forEach((e=>{r=e.new_position>r?e.new_position:r,o[`${e.new_position}`]=e.entity}));const i=[];for(let e=0;e<=r;e++)i.push(o[`${e}`]||null);return{...t,stsl_styles:i}})),i={...o.resolved,dsl_spacers:t,dsl_styleslices:r},s={...n,data:JSON.stringify({...o,resolved:i})};return JSON.stringify(s)},Ot=e=>{const{editable:t}=vt();let n;const o="application/x-vnd.google-docs-document-slice-clip+wrapped";if(pt())n=new ClipboardEvent("paste",{dataType:o,data:e});else{const t=new DataTransfer;t.setData(o,e),n=new ClipboardEvent("paste",{bubbles:!0,clipboardData:t})}t.dispatchEvent(n)};function Dt(e){return!!e&&(["EN"].includes(e)?e="EN-GB":["PT"].includes(e)&&(e="PT-PT"),r.map((e=>e.langCode)).includes(e))}const Pt=e=>e.substring(0,2).toUpperCase();async function Ut(e,t=!1){let n="";const o=await chrome.i18n.detectLanguage(e);return o&&o.languages?.length>0&&(n=o.languages.sort(((e,t)=>t.percentage-e.percentage))[0].language.substr(0,2).toUpperCase()),t?{langCode:n,isReliable:o.isReliable,detectedLanguages:o.languages.sort(((e,t)=>t.percentage-e.percentage)).map((e=>({langCode:e.language.substr(0,2).toUpperCase(),percentage:e.percentage})))}:n}const Bt=()=>{let e,t,n=!1;return r.map((o=>{let r;return n=["EN-US","EN-GB","PT-PT","PT-BR","ZH-HANT"].includes(o.langCode),n&&(({optionLabel:e,selectedLabel:t}=function(e){switch(e.langCode){case"EN-US":return{optionLabel:chrome.i18n.getMessage("supported_languages_EN_US"),selectedLabel:chrome.i18n.getMessage("selected_languages_EN_US")};case"EN-GB":return{optionLabel:chrome.i18n.getMessage("supported_languages_EN_UK"),selectedLabel:chrome.i18n.getMessage("selected_languages_EN_UK")};case"PT-PT":return{optionLabel:chrome.i18n.getMessage("supported_languages_PT_PT"),selectedLabel:chrome.i18n.getMessage("selected_languages_PT_PT")};case"PT-BR":return{optionLabel:chrome.i18n.getMessage("supported_languages_PT_BR"),selectedLabel:chrome.i18n.getMessage("selected_languages_PT_BR")};case"ZH-HANT":return{optionLabel:chrome.i18n.getMessage("supported_languages_ZH_HANT"),selectedLabel:chrome.i18n.getMessage("supported_languages_ZH_HANT")};default:return{optionLabel:chrome.i18n.getMessage("supported_languages_undefined"),selectedLabel:chrome.i18n.getMessage("supported_languages_undefined")}}}(o)),r=o.langCode.slice(0,2).toLowerCase()+o.langCode.slice(2)),{value:o.langCode,label:n?e:chrome.i18n.getMessage(`supported_languages_${o.langCode}`),selectedOptionLabel:n?t:chrome.i18n.getMessage(`supported_languages_${o.langCode}`),regionalVariant:r}})).sort(((e,t)=>e.label.localeCompare(t.label,chrome.i18n.getUILanguage())))};function Wt(e){return"EN"===e?"EN-GB":"PT"===e?"PT-PT":e}function zt(e,t,n){return"EN"===e?t["EN-GB"]===n||t["EN-US"]===n:"PT"===e?t["PT-PT"]===n||t["PT-BR"]===n:t[e]===n}const Ft=e=>i.includes(e?.substr(0,2).toUpperCase()),Ht=e=>{const t=r.find((t=>t.langCode===e));return t&&t.supportsFormality},jt=e=>{const t=e||chrome.i18n.getUILanguage();return["ar","he","fa","ur"].includes(t.toLowerCase().substr(0,2))?"rtl":"ltr"};function Gt(e){if("rtl"===e.dir)return!0;return"rtl"===window.getComputedStyle(e).direction}function qt(e){return/^[\p{L}\p{M}\p{N}\p{Pc}]+$/u.test(e)}const Vt=()=>{const e="https://docs.google.com";return window.location.href.substr(0,23)===e&&!!document.querySelector("#sketchy-hidden-iframe")},Yt=async()=>{const e=[],t=n=>{const o=[],r=[];for(let e=0;e<n.children.length;e++){const t=n.children[e];"text"===t.tagName.toLowerCase()?o.push(t):"g"===t.tagName.toLowerCase()&&r.push(t)}o.length>0&&e.push(o.map((e=>e.textContent)).join(" "));for(const e of r)t(e)},n=Qt();if(n){t(n);const o=e.join("\n");return await Ut(o)}},Kt=async()=>{const e=Qt(),t=document.querySelector("#canvas-container").getBoundingClientRect();if(e){const n=t.left-2,o=t.top-2,r=t.right+2,i=t.bottom+2,s=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window,clientX:n,clientY:o});e.dispatchEvent(s);for(let t=1;t<=10;t++){const s=new MouseEvent("mousemove",{bubbles:!0,cancelable:!0,view:window,clientX:n+t/10*(r-n),clientY:o+t/10*(i-o)});e.dispatchEvent(s),await new Promise((e=>setTimeout(e,25)))}const a=new MouseEvent("mouseup",{bubbles:!0,cancelable:!0,view:window,clientX:r,clientY:i});e.dispatchEvent(a)}},Zt=e=>{const t=[],n=[];for(const n of e){const e=n[0],o=n[1];if(15===e){const e=n[4];if(""===e.trim())continue;const r=t.find((e=>e.id===o));if(r)continue;const i={id:o,originalContent:e,translatedContent:"",sentencesIndexes:[],originalSentences:[],translatedSentences:[],modifiers:[],secondaryModifiers:[],entity:n,orphanModifiers:[],orphanModifiersIntegrityCheck:[]};t.push(i)}else if(17===e){const e=t.find((e=>e.id===o));if(!e)continue;e.modifiers.push(n)}else if(41===e){const e=t.find((e=>e.id===o));if(!e)continue;e.secondaryModifiers.push(n)}}for(let e=0;e<t.length;e++){const o=t[e];o.orphanModifiers=Jt(o);const{originalSentences:r,orphanModifiersIntegrityCheck:i}=nn(o);o.originalSentences=r,o.orphanModifiersIntegrityCheck=i;for(const e of o.originalSentences)o.sentencesIndexes.push(n.length),n.push(e)}return{entities:t,sentencesToTranslate:n}},Xt=({entity:e,translatedSentences:t,modifiersToDelete:n})=>{e.translatedSentences=e.sentencesIndexes.map((e=>t[e]));const{translatedContent:o,orphanModifiersMappingEquivalences:r}=on(e);if(e.translatedContent=o,!e.translatedContent||e.translatedContent===e.originalContent)return;e.entity[4]=e.translatedContent;const i=rn(r,e);for(let t=0;t<e.modifiers.length;t++){const o=e.modifiers[t];let r=!1;if(sn(o,i)){const{start:e,end:t}=an(o,i);t<=e?r=!0:(o[3]=e,o[4]=t)}else r=!0;r&&n.push(o)}},Qt=()=>Array.from(document.querySelectorAll("#pages svg")).find((e=>"none"!==getComputedStyle(e).display)),Jt=({originalContent:e,modifiers:t})=>{const n=tn(e);return en(t).filter((e=>!n.includes(e)))},en=e=>{const t=[];for(const n of e)t.includes(n[3])||t.push(n[3]),t.includes(n[4])||t.push(n[4]);return t},tn=e=>{const t=e.split("\n"),n=[0];let o=0;for(const e of t){const t=o+e.length;n.includes(t)||n.push(t),n.includes(t+1)||n.push(t+1),o=t+1}return n},nn=({originalContent:e,orphanModifiers:t})=>{let n=0;const o={},r=e.split("\n").map((e=>{let r="";for(let i=0;i<e.length;i++){const s=n+i;if(t.includes(s)){const n=t.indexOf(s);/\s/.test(e[i])&&(o[`${n}`]=e[i]),r+=`<a${n}>`}r+=e[i]}return n+=e.length+1,r}));return{orphanModifiersIntegrityCheck:o,originalSentences:r}},on=e=>{let t={},n=0;return{translatedContent:e.translatedSentences.map((o=>{const r={};let i=0;const s=o.replace(/<a\d+>/g,((t,s)=>{const a=t.match(/<a(\d+)>/);if(a){const l=a[1],c=t.length,d=e.orphanModifiers[Number(l)];void 0!==d&&(r[`${d}`]=i+n+s-c*Object.keys(r).length);const u=o.charAt(s+c);if(u&&void 0!==e.orphanModifiersIntegrityCheck[`${l}`]&&e.orphanModifiersIntegrityCheck[`${l}`]!==u)return i++,e.orphanModifiersIntegrityCheck[`${l}`]}return""}));return t={...t,...r},n+=s.length+1,s})).join("\n"),orphanModifiersMappingEquivalences:t}},rn=(e={},{originalContent:t,translatedContent:n})=>{const o=tn(t),r=tn(n),i={};for(let e=0;e<o.length;e++)i[`${o[e]}`]=r[e];return{...e,...i}},sn=(e,t)=>{const n=e[3],o=e[4];return void 0!==t[`${n}`]&&void 0!==t[`${o}`]},an=(e,t)=>{const n=e[3],o=e[4];return{start:t[`${n}`],end:t[`${o}`]}},ln=(e=25,t=null)=>new Promise((n=>setTimeout((()=>n(t)),e)));function cn(){return crypto.randomUUID()}const dn={prod:"production",dev:"development",test:"testing"};function un(){return dn.prod}function pn(){return un()===dn.dev}function mn(){return un()===dn.prod}const gn=Object.prototype.toString;function hn(e){switch(gn.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return $n(e,Error)}}function fn(e,t){return gn.call(e)===`[object ${t}]`}function _n(e){return fn(e,"ErrorEvent")}function vn(e){return fn(e,"DOMError")}function yn(e){return fn(e,"String")}function wn(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function bn(e){return null===e||wn(e)||"object"!=typeof e&&"function"!=typeof e}function En(e){return fn(e,"Object")}function Tn(e){return"undefined"!=typeof Event&&$n(e,Event)}function Sn(e){return fn(e,"RegExp")}function xn(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function $n(e,t){try{return e instanceof t}catch(e){return!1}}function Cn(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function kn(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function Ln(e,t){let n=e;const o=n.length;if(o<=150)return n;t>o&&(t=o);let r=Math.max(t-60,0);r<5&&(r=0);let i=Math.min(r+140,o);return i>o-5&&(i=o),i===o&&(r=Math.max(i-140,0)),n=n.slice(r,i),r>0&&(n=`'{snip} ${n}`),i<o&&(n+=" {snip}"),n}function In(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const o=e[t];try{Cn(o)?n.push("[VueViewModel]"):n.push(String(o))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function An(e,t=[],n=!1){return t.some((t=>function(e,t,n=!1){return!!yn(e)&&(Sn(t)?t.test(e):!!yn(t)&&(n?e===t:e.includes(t)))}(e,t,n)))}function Rn(e,t,n=250,o,r,i,s){if(!(i.exception&&i.exception.values&&s&&$n(s.originalException,Error)))return;const a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;var l,c;a&&(i.exception.values=(l=Mn(e,t,r,s.originalException,o,i.exception.values,a,0),c=n,l.map((e=>(e.value&&(e.value=kn(e.value,c)),e)))))}function Mn(e,t,n,o,r,i,s,a){if(i.length>=n+1)return i;let l=[...i];if($n(o[r],Error)){Nn(s,a);const i=e(t,o[r]),c=l.length;On(i,r,c,a),l=Mn(e,t,n,o[r],r,[i,...l],i,c)}return Array.isArray(o.errors)&&o.errors.forEach(((o,i)=>{if($n(o,Error)){Nn(s,a);const c=e(t,o),d=l.length;On(c,`errors[${i}]`,d,a),l=Mn(e,t,n,o,r,[c,...l],c,d)}})),l}function Nn(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function On(e,t,n,o){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:o}}function Dn(e){return e&&e.Math==Math?e:void 0}const Pn="object"==typeof globalThis&&Dn(globalThis)||"object"==typeof window&&Dn(window)||"object"==typeof self&&Dn(self)||"object"==typeof global&&Dn(global)||function(){return this}()||{};function Un(){return Pn}function Bn(e,t,n){const o=n||Pn,r=o.__SENTRY__=o.__SENTRY__||{};return r[e]||(r[e]=t())}const Wn=Un(),zn=80;function Fn(e,t={}){if(!e)return"<unknown>";try{let n=e;const o=5,r=[];let i=0,s=0;const a=" > ",l=a.length;let c;const d=Array.isArray(t)?t:t.keyAttrs,u=!Array.isArray(t)&&t.maxStringLength||zn;for(;n&&i++<o&&(c=Hn(n,d),!("html"===c||i>1&&s+r.length*l+c.length>=u));)r.push(c),s+=c.length,n=n.parentNode;return r.reverse().join(a)}catch(e){return"<unknown>"}}function Hn(e,t){const n=e,o=[];let r,i,s,a,l;if(!n||!n.tagName)return"";if(Wn.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;o.push(n.tagName.toLowerCase());const c=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(c&&c.length)c.forEach((e=>{o.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&o.push(`#${n.id}`),r=n.className,r&&yn(r))for(i=r.split(/\s+/),l=0;l<i.length;l++)o.push(`.${i[l]}`);const d=["aria-label","type","name","title","alt"];for(l=0;l<d.length;l++)s=d[l],a=n.getAttribute(s),a&&o.push(`[${s}="${a}"]`);return o.join("")}function jn(){try{return Wn.document.location.href}catch(e){return""}}const Gn="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,qn=["debug","info","warn","error","log","assert","trace"],Vn={};function Yn(e){if(!("console"in Pn))return e();const t=Pn.console,n={},o=Object.keys(Vn);o.forEach((e=>{const o=Vn[e];n[e]=t[e],t[e]=o}));try{return e()}finally{o.forEach((e=>{t[e]=n[e]}))}}const Kn=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Gn?qn.forEach((n=>{t[n]=(...t)=>{e&&Yn((()=>{Pn.console[n](`Sentry Logger [${n}]:`,...t)}))}})):qn.forEach((e=>{t[e]=()=>{}})),t}(),Zn=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Xn(e,t=!1){const{host:n,path:o,pass:r,port:i,projectId:s,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&r?`:${r}`:""}@${n}${i?`:${i}`:""}/${o?`${o}/`:o}${s}`}function Qn(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Jn(e){const t="string"==typeof e?function(e){const t=Zn.exec(e);if(!t)return void Yn((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,o,r="",i,s="",a]=t.slice(1);let l="",c=a;const d=c.split("/");if(d.length>1&&(l=d.slice(0,-1).join("/"),c=d.pop()),c){const e=c.match(/^\d+/);e&&(c=e[0])}return Qn({host:i,pass:r,path:l,projectId:c,port:s,protocol:n,publicKey:o})}(e):Qn(e);if(t&&function(e){if(!Gn)return!0;const{port:t,projectId:n,protocol:o}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(Kn.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(o)?t&&isNaN(parseInt(t,10))&&(Kn.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(Kn.error(`Invalid Sentry Dsn: Invalid protocol ${o}`),1):(Kn.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}class eo extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function to(e,t,n){if(!(t in e))return;const o=e[t],r=n(o);"function"==typeof r&&oo(r,o),e[t]=r}function no(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){Gn&&Kn.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function oo(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,no(e,"__sentry_original__",t)}catch(e){}}function ro(e){return e.__sentry_original__}function io(e){if(hn(e))return{message:e.message,name:e.name,stack:e.stack,...ao(e)};if(Tn(e)){const t={type:e.type,target:so(e.target),currentTarget:so(e.currentTarget),...ao(e)};return"undefined"!=typeof CustomEvent&&$n(e,CustomEvent)&&(t.detail=e.detail),t}return e}function so(e){try{return t=e,"undefined"!=typeof Element&&$n(t,Element)?Fn(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function ao(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function lo(e){return co(e,new Map)}function co(e,t){if(function(e){if(!En(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const o={};t.set(e,o);for(const n of Object.keys(e))void 0!==e[n]&&(o[n]=co(e[n],t));return o}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const o=[];return t.set(e,o),e.forEach((e=>{o.push(co(e,t))})),o}return e}const uo=50,po=/\(error: (.*)\)/,mo=/captureMessage|captureException/;const go="<anonymous>";function ho(e){try{return e&&"function"==typeof e&&e.name||go}catch(e){return go}}const fo={},_o={};function vo(e,t){fo[e]=fo[e]||[],fo[e].push(t)}function yo(e,t){_o[e]||(t(),_o[e]=!0)}function wo(e,t){const n=e&&fo[e];if(n)for(const o of n)try{o(t)}catch(t){Gn&&Kn.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${ho(o)}\nError:`,t)}}function bo(e){const t="console";vo(t,e),yo(t,Eo)}function Eo(){"console"in Pn&&qn.forEach((function(e){e in Pn.console&&to(Pn.console,e,(function(t){return Vn[e]=t,function(...t){wo("console",{args:t,level:e});const n=Vn[e];n&&n.apply(Pn.console,t)}}))}))}function To(){const e=Pn,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function So(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function xo(e){const{message:t,event_id:n}=e;if(t)return t;const o=So(e);return o?o.type&&o.value?`${o.type}: ${o.value}`:o.type||o.value||n||"<unknown>":n||"<unknown>"}function $o(e,t,n){const o=e.exception=e.exception||{},r=o.values=o.values||[],i=r[0]=r[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function Co(e,t){const n=So(e);if(!n)return;const o=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...o,...t},t&&"data"in t){const e={...o&&o.data,...t.data};n.mechanism.data=e}}function ko(e){if(e&&e.__sentry_captured__)return!0;try{no(e,"__sentry_captured__",!0)}catch(e){}return!1}function Lo(e){return Array.isArray(e)?e:[e]}const Io=Pn,Ao=1e3;let Ro,Mo,No;function Oo(e){vo("dom",e),yo("dom",Do)}function Do(){if(!Io.document)return;const e=wo.bind(null,"dom"),t=Po(e,!0);Io.document.addEventListener("click",t,!1),Io.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=Io[t]&&Io[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(to(n,"addEventListener",(function(t){return function(n,o,r){if("click"===n||"keypress"==n)try{const o=this,i=o.__sentry_instrumentation_handlers__=o.__sentry_instrumentation_handlers__||{},s=i[n]=i[n]||{refCount:0};if(!s.handler){const o=Po(e);s.handler=o,t.call(this,n,o,r)}s.refCount++}catch(e){}return t.call(this,n,o,r)}})),to(n,"removeEventListener",(function(e){return function(t,n,o){if("click"===t||"keypress"==t)try{const n=this,r=n.__sentry_instrumentation_handlers__||{},i=r[t];i&&(i.refCount--,i.refCount<=0&&(e.call(this,t,i.handler,o),i.handler=void 0,delete r[t]),0===Object.keys(r).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,o)}})))}))}function Po(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const o=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,o))return;no(n,"_sentryCaptured",!0),o&&!o._sentryId&&no(o,"_sentryId",To());const r="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==Mo)return!1;try{if(!e.target||e.target._sentryId!==No)return!1}catch(e){}return!0}(n)){e({event:n,name:r,global:t}),Mo=n.type,No=o?o._sentryId:void 0}clearTimeout(Ro),Ro=Io.setTimeout((()=>{No=void 0,Mo=void 0}),Ao)}}const Uo=Un();function Bo(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Wo(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in Uo))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(Bo(Uo.fetch))return!0;let e=!1;const t=Uo.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Bo(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){Gn&&Kn.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}function zo(e){const t="fetch";vo(t,e),yo(t,Fo)}function Fo(){Wo()&&to(Pn,"fetch",(function(e){return function(...t){const{method:n,url:o}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:jo(t),method:Ho(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:jo(t),method:Ho(t,"method")?String(t.method).toUpperCase():"GET"}}(t),r={args:t,fetchData:{method:n,url:o},startTimestamp:Date.now()};return wo("fetch",{...r}),e.apply(Pn,t).then((e=>(wo("fetch",{...r,endTimestamp:Date.now(),response:e}),e)),(e=>{throw wo("fetch",{...r,endTimestamp:Date.now(),error:e}),e}))}}))}function Ho(e,t){return!!e&&"object"==typeof e&&!!e[t]}function jo(e){return"string"==typeof e?e:e?Ho(e,"url")?e.url:e.toString?e.toString():"":""}let Go=null;function qo(){Go=Pn.onerror,Pn.onerror=function(e,t,n,o,r){return wo("error",{column:o,error:r,line:n,msg:e,url:t}),!(!Go||Go.__SENTRY_LOADER__)&&Go.apply(this,arguments)},Pn.onerror.__SENTRY_INSTRUMENTED__=!0}let Vo=null;function Yo(){Vo=Pn.onunhandledrejection,Pn.onunhandledrejection=function(e){return wo("unhandledrejection",e),!(Vo&&!Vo.__SENTRY_LOADER__)||Vo.apply(this,arguments)},Pn.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Ko=Un();const Zo=Pn;let Xo;function Qo(e){const t="history";vo(t,e),yo(t,Jo)}function Jo(){if(!function(){const e=Ko.chrome,t=e&&e.app&&e.app.runtime,n="history"in Ko&&!!Ko.history.pushState&&!!Ko.history.replaceState;return!t&&n}())return;const e=Zo.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=Xo,t=String(n);Xo=t;wo("history",{from:e,to:t})}return e.apply(this,t)}}Zo.onpopstate=function(...t){const n=Zo.location.href,o=Xo;Xo=n;if(wo("history",{from:o,to:n}),e)try{return e.apply(this,t)}catch(e){}},to(Zo.history,"pushState",t),to(Zo.history,"replaceState",t)}const er=Pn,tr="__sentry_xhr_v3__";function nr(e){vo("xhr",e),yo("xhr",or)}function or(){if(!er.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;to(e,"open",(function(e){return function(...t){const n=Date.now(),o=yn(t[0])?t[0].toUpperCase():void 0,r=function(e){if(yn(e))return e;try{return e.toString()}catch(e){}return}(t[1]);if(!o||!r)return e.apply(this,t);this[tr]={method:o,url:r,request_headers:{}},"POST"===o&&r.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const i=()=>{const e=this[tr];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}wo("xhr",{args:[o,r],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?to(this,"onreadystatechange",(function(e){return function(...t){return i(),e.apply(this,t)}})):this.addEventListener("readystatechange",i),to(this,"setRequestHeader",(function(e){return function(...t){const[n,o]=t,r=this[tr];return r&&yn(n)&&yn(o)&&(r.request_headers[n.toLowerCase()]=o),e.apply(this,t)}})),e.apply(this,t)}})),to(e,"send",(function(e){return function(...t){const n=this[tr];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);return wo("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}function rr(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function ir(e,t){return e.require(t)}function sr(e){let t;try{t=ir(module,e)}catch(e){}try{const{cwd:n}=ir(module,"process");t=ir(module,`${n()}/node_modules/${e}`)}catch(e){}return t}function ar(){return"undefined"!=typeof window&&(!rr()||void 0!==Pn.process&&"renderer"===Pn.process.type)}function lr(e,t=100,n=1/0){try{return dr("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function cr(e,t=3,n=102400){const o=lr(e,t);return r=o,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(r))>n?cr(e,t-1,n):o;var r}function dr(e,t,n=1/0,o=1/0,r=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[i,s]=r;if(null==t||["number","boolean","string"].includes(typeof t)&&("number"!=typeof(a=t)||a==a))return t;var a;const l=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(Cn(t))return"[VueViewModel]";if(function(e){return En(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${ho(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!l.startsWith("[object "))return l;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return l.replace("object ","");if(i(t))return"[Circular ~]";const d=t;if(d&&"function"==typeof d.toJSON)try{return dr("",d.toJSON(),c-1,o,r)}catch(e){}const u=Array.isArray(t)?[]:{};let p=0;const m=io(t);for(const e in m){if(!Object.prototype.hasOwnProperty.call(m,e))continue;if(p>=o){u[e]="[MaxProperties ~]";break}const t=m[e];u[e]=dr(e,t,c-1,o,r),p++}return s(t),u}const ur=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function pr(...e){let t="",n=!1;for(let o=e.length-1;o>=-1&&!n;o--){const r=o>=0?e[o]:"/";r&&(t=`${r}/${t}`,n="/"===r.charAt(0))}return t=function(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const o=e[t];"."===o?e.splice(t,1):".."===o?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}(t.split("/").filter((e=>!!e)),!n).join("/"),(n?"/":"")+t||"."}function mr(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function gr(e,t){let n=function(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=ur.exec(t);return n?n.slice(1):[]}(e)[2];return t&&n.slice(-1*t.length)===t&&(n=n.slice(0,n.length-t.length)),n}var hr;function fr(e){return new vr((t=>{t(e)}))}function _r(e){return new vr(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(hr||(hr={}));class vr{constructor(e){vr.prototype.__init.call(this),vr.prototype.__init2.call(this),vr.prototype.__init3.call(this),vr.prototype.__init4.call(this),this._state=hr.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new vr(((n,o)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){o(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){o(e)}else o(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new vr(((t,n)=>{let o,r;return this.then((t=>{r=!1,o=t,e&&e()}),(t=>{r=!0,o=t,e&&e()})).then((()=>{r?n(o):t(o)}))}))}__init(){this._resolve=e=>{this._setResult(hr.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(hr.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===hr.PENDING&&(xn(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===hr.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===hr.RESOLVED&&e[1](this._value),this._state===hr.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function yr(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(o){if(!(void 0===e||t.length<e))return _r(new eo("Not adding Promise because buffer limit was reached."));const r=o();return-1===t.indexOf(r)&&t.push(r),r.then((()=>n(r))).then(null,(()=>n(r).then(null,(()=>{})))),r},drain:function(e){return new vr(((n,o)=>{let r=t.length;if(!r)return n(!0);const i=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{fr(e).then((()=>{--r||(clearTimeout(i),n(!0))}),o)}))}))}}}function wr(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",o=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:o,relative:t[5]+n+o}}function br(e){return e.split(/[\?#]/,1)[0]}function Er(e){return e.split(/\\?\//).filter((e=>e.length>0&&","!==e)).length}const Tr={ip:!1,request:!0,transaction:!0,user:!0},Sr=["cookies","data","headers","method","query_string","url"],xr=["id","username","email"];function $r(e,t={}){const n=e.method&&e.method.toUpperCase();let o="",r="url";t.customRoute||e.route?(o=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,r="route"):(e.originalUrl||e.url)&&(o=br(e.originalUrl||e.url||""));let i="";return t.method&&n&&(i+=n),t.method&&t.path&&(i+=" "),t.path&&o&&(i+=o),[i,r]}function Cr(e,t){const{include:n=Sr,deps:o}=t||{},r={},i=e.headers||{},s=e.method,a=i.host||e.hostname||e.host||"<no host>",l="https"===e.protocol||e.socket&&e.socket.encrypted?"https":"http",c=e.originalUrl||e.url||"",d=c.startsWith(l)?c:`${l}://${a}${c}`;return n.forEach((t=>{switch(t){case"headers":r.headers=i,n.includes("cookies")||delete r.headers.cookie;break;case"method":r.method=s;break;case"url":r.url=d;break;case"cookies":r.cookies=e.cookies||i.cookie&&function(e){const t={};let n=0;for(;n<e.length;){const o=e.indexOf("=",n);if(-1===o)break;let r=e.indexOf(";",n);if(-1===r)r=e.length;else if(r<o){n=e.lastIndexOf(";",o-1)+1;continue}const i=e.slice(n,o).trim();if(void 0===t[i]){let n=e.slice(o+1,r).trim();34===n.charCodeAt(0)&&(n=n.slice(1,-1));try{t[i]=-1!==n.indexOf("%")?decodeURIComponent(n):n}catch(e){t[i]=n}}n=r+1}return t}(i.cookie)||{};break;case"query_string":r.query_string=function(e,t){let n=e.originalUrl||e.url||"";if(!n)return;n.startsWith("/")&&(n=`http://dogs.are.great${n}`);try{return e.query||"undefined"!=typeof URL&&new URL(n).search.slice(1)||t&&t.url&&t.url.parse(n).query||void 0}catch(e){return}}(e,o);break;case"data":if("GET"===s||"HEAD"===s)break;void 0!==e.body&&(r.data=yn(e.body)?e.body:JSON.stringify(lr(e.body)));break;default:({}).hasOwnProperty.call(e,t)&&(r[t]=e[t])}})),r}function kr(e,t,n){const o={...Tr,...n&&n.include};if(o.request){const r=Array.isArray(o.request)?Cr(t,{include:o.request,deps:n&&n.deps}):Cr(t,{deps:n&&n.deps});e.request={...e.request,...r}}if(o.user){const n=t.user&&En(t.user)?function(e,t){const n={};return(Array.isArray(t)?t:xr).forEach((t=>{e&&t in e&&(n[t]=e[t])})),n}(t.user,o.user):{};Object.keys(n).length&&(e.user={...e.user,...n})}if(o.ip){const n=t.ip||t.socket&&t.socket.remoteAddress;n&&(e.user={...e.user,ip_address:n})}return o.transaction&&!e.transaction&&(e.transaction=function(e,t){switch(t){case"path":return $r(e,{path:!0})[0];case"handler":return e.route&&e.route.stack&&e.route.stack[0]&&e.route.stack[0].name||"<anonymous>";default:return $r(e,{path:!0,method:!0,customRoute:e._reconstructedRoute?e._reconstructedRoute:void 0})[0]}}(t,o.transaction)),e}const Lr=["fatal","error","warning","log","info","debug"];function Ir(e){return"warn"===e?"warning":Lr.includes(e)?e:"log"}const Ar=1e3;function Rr(){return Date.now()/Ar}const Mr=function(){const{performance:e}=Pn;if(!e||!e.now)return Rr;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/Ar}(),Nr=(()=>{const{performance:e}=Pn;if(!e||!e.now)return;const t=36e5,n=e.now(),o=Date.now(),r=e.timeOrigin?Math.abs(e.timeOrigin+n-o):t,i=r<t,s=e.timing&&e.timing.navigationStart,a="number"==typeof s?Math.abs(s+n-o):t;return i||a<t?r<=a?e.timeOrigin:s:o})();function Or(e,t=[]){return[e,t]}function Dr(e,t){const[n,o]=e;return[n,[...o,t]]}function Pr(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function Ur(e,t){return(t||new TextEncoder).encode(e)}function Br(e,t){const[n,o]=e;let r=JSON.stringify(n);function i(e){"string"==typeof r?r="string"==typeof e?r+e:[Ur(r,t),e]:r.push("string"==typeof e?Ur(e,t):e)}for(const e of o){const[t,n]=e;if(i(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)i(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(lr(n))}i(e)}}return"string"==typeof r?r:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let o=0;for(const t of e)n.set(t,o),o+=t.length;return n}(r)}function Wr(e,t){const n="string"==typeof e.data?Ur(e.data,t):e.data;return[lo({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const zr={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Fr(e){return zr[e]}function Hr(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function jr(e,t,n,o){const r=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&o&&{dsn:Xn(o)},...r&&{trace:lo({...r})}}}const Gr=6e4;function qr(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function Vr(e,{statusCode:t,headers:n},o=Date.now()){const r={...e},i=n&&n["x-sentry-rate-limits"],s=n&&n["retry-after"];if(i)for(const e of i.trim().split(",")){const[t,n,,,i]=e.split(":",5),s=parseInt(t,10),a=1e3*(isNaN(s)?60:s);if(n)for(const e of n.split(";"))"metric_bucket"===e&&i&&!i.split(";").includes("custom")||(r[e]=o+a);else r.all=o+a}else s?r.all=o+function(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const o=Date.parse(`${e}`);return isNaN(o)?Gr:o-t}(s,o):429===t&&(r.all=o+6e4);return r}function Yr(e,t){const n={type:t.name||t.constructor.name,value:t.message},o=function(e,t){return e(t.stack||"",1)}(e,t);return o.length&&(n.stacktrace={frames:o}),n}function Kr(e){let t,n=e[0],o=1;for(;o<e.length;){const r=e[o],i=e[o+1];if(o+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const Zr="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Xr="production";function Qr(){return Bn("globalEventProcessors",(()=>[]))}function Jr(e){Qr().push(e)}function ei(e,t,n,o=0){return new vr(((r,i)=>{const s=e[o];if(null===t||"function"!=typeof s)r(t);else{const a=s({...t},n);Zr&&s.id&&null===a&&Kn.log(`Event processor "${s.id}" dropped event`),xn(a)?a.then((t=>ei(e,t,n,o+1).then(r))).then(null,i):ei(e,a,n,o+1).then(r).then(null,i)}}))}function ti(e){const t=Mr(),n={sid:To(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return lo({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&ni(n,e),n}function ni(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Mr(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:To()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}const oi=1;function ri(e){const{spanId:t,traceId:n}=e.spanContext(),{data:o,op:r,parent_span_id:i,status:s,tags:a,origin:l}=si(e);return lo({data:o,op:r,parent_span_id:i,span_id:t,status:s,tags:a,trace_id:n,origin:l})}function ii(e){return e>9999999999?e/1e3:e}function si(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function ai(e){const{traceFlags:t}=e.spanContext();return Boolean(t&oi)}function li(e,t,n,o,r,i){const{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,l={...t,event_id:t.event_id||n.event_id||To(),timestamp:t.timestamp||Rr()},c=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:o,dist:r,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:Xr);void 0===e.release&&void 0!==o&&(e.release=o);void 0===e.dist&&void 0!==r&&(e.dist=r);e.message&&(e.message=kn(e.message,i));const s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=kn(s.value,i));const a=e.request;a&&a.url&&(a.url=kn(a.url,i))}(l,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(l,c),void 0===t.type&&function(e,t){const n=Pn._sentryDebugIds;if(!n)return;let o;const r=ci.get(t);r?o=r:(o=new Map,ci.set(t,o));const i=Object.keys(n).reduce(((e,r)=>{let i;const s=o.get(r);s?i=s:(i=t(r),o.set(r,i));for(let t=i.length-1;t>=0;t--){const o=i[t];if(o.filename){e[o.filename]=n[r];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=i[e.filename])}))}))}catch(e){}}(l,e.stackParser);const d=function(e,t){if(!t)return e;const n=e?e.clone():new $i;return n.update(t),n}(o,n.captureContext);n.mechanism&&Co(l,n.mechanism);const u=r&&r.getEventProcessors?r.getEventProcessors():[],p=function(){xi||(xi=new $i);return xi}().getScopeData();if(i){Ti(p,i.getScopeData())}if(d){Ti(p,d.getScopeData())}const m=[...n.attachments||[],...p.attachments];m.length&&(n.attachments=m),Ei(l,p);return ei([...u,...Qr(),...p.eventProcessors],l,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof s&&s>0?function(e,t,n){if(!e)return null;const o={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:lr(e.data,t,n)}})))},...e.user&&{user:lr(e.user,t,n)},...e.contexts&&{contexts:lr(e.contexts,t,n)},...e.extra&&{extra:lr(e.extra,t,n)}};e.contexts&&e.contexts.trace&&o.contexts&&(o.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(o.contexts.trace.data=lr(e.contexts.trace.data,t,n)));e.spans&&(o.spans=e.spans.map((e=>{const o=si(e).data;return o&&(e.data=lr(o,t,n)),e})));return o}(e,s,a):e)))}const ci=new WeakMap;function di(e){if(e)return function(e){return e instanceof $i||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>ui.includes(e)))}(e)?{captureContext:e}:e}const ui=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function pi(e,t){return Ni().captureException(e,di(t))}function mi(e,t){const n="string"==typeof t?t:void 0,o="string"!=typeof t?{captureContext:t}:void 0;return Ni().captureMessage(e,n,o)}function gi(e,t){return Ni().captureEvent(e,t)}function hi(e,t){Ni().addBreadcrumb(e,t)}function fi(...e){const t=Ni();if(2===e.length){const[n,o]=e;return n?t.withScope((()=>(t.getStackTop().scope=n,o(n)))):t.withScope(o)}return t.withScope(e[0])}function _i(){return Ni().getClient()}function vi(){return Ni().getScope()}function yi(e){return e.transaction}function wi(e,t,n){const o=t.getOptions(),{publicKey:r}=t.getDsn()||{},{segment:i}=n&&n.getUser()||{},s=lo({environment:o.environment||Xr,release:o.release,user_segment:i,public_key:r,trace_id:e});return t.emit&&t.emit("createDsc",s),s}function bi(e){const t=_i();if(!t)return{};const n=wi(si(e).trace_id||"",t,vi()),o=yi(e);if(!o)return n;const r=o&&o._frozenDynamicSamplingContext;if(r)return r;const{sampleRate:i,source:s}=o.metadata;null!=i&&(n.sample_rate=`${i}`);const a=si(o);return s&&"url"!==s&&(n.transaction=a.description),n.sampled=String(ai(o)),t.emit&&t.emit("createDsc",n),n}function Ei(e,t){const{fingerprint:n,span:o,breadcrumbs:r,sdkProcessingMetadata:i}=t;!function(e,t){const{extra:n,tags:o,user:r,contexts:i,level:s,transactionName:a}=t,l=lo(n);l&&Object.keys(l).length&&(e.extra={...l,...e.extra});const c=lo(o);c&&Object.keys(c).length&&(e.tags={...c,...e.tags});const d=lo(r);d&&Object.keys(d).length&&(e.user={...d,...e.user});const u=lo(i);u&&Object.keys(u).length&&(e.contexts={...u,...e.contexts});s&&(e.level=s);a&&(e.transaction=a)}(e,t),o&&function(e,t){e.contexts={trace:ri(t),...e.contexts};const n=yi(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:bi(t),...e.sdkProcessingMetadata};const o=si(n).description;o&&(e.tags={transaction:o,...e.tags})}}(e,o),function(e,t){e.fingerprint=e.fingerprint?Lo(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,r),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,i)}function Ti(e,t){const{extra:n,tags:o,user:r,contexts:i,level:s,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:d,attachments:u,propagationContext:p,transactionName:m,span:g}=t;Si(e,"extra",n),Si(e,"tags",o),Si(e,"user",r),Si(e,"contexts",i),Si(e,"sdkProcessingMetadata",a),s&&(e.level=s),m&&(e.transactionName=m),g&&(e.span=g),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),u.length&&(e.attachments=[...e.attachments,...u]),e.propagationContext={...e.propagationContext,...p}}function Si(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[t][o]=n[o])}}let xi;class $i{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Ci()}static clone(e){return e?e.clone():new $i}clone(){const e=new $i;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&ni(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof $i){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(En(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Ci(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const o={timestamp:Rr(),...e},r=this._breadcrumbs;return r.push(o),this._breadcrumbs=r.length>n?r.slice(-n):r,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:o,_extra:r,_user:i,_level:s,_fingerprint:a,_eventProcessors:l,_propagationContext:c,_sdkProcessingMetadata:d,_transactionName:u,_span:p}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:o,extra:r,user:i,level:s,fingerprint:a||[],eventProcessors:l,propagationContext:c,sdkProcessingMetadata:d,transactionName:u,span:p}}applyToEvent(e,t={},n=[]){Ei(e,this.getScopeData());return ei([...n,...Qr(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:To();if(!this._client)return Kn.warn("No client configured on scope - will not capture exception!"),n;const o=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:o,...t,event_id:n},this),n}captureMessage(e,t,n){const o=n&&n.event_id?n.event_id:To();if(!this._client)return Kn.warn("No client configured on scope - will not capture message!"),o;const r=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:r,...n,event_id:o},this),o}captureEvent(e,t){const n=t&&t.event_id?t.event_id:To();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(Kn.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function Ci(){return{traceId:To(),spanId:To().substring(16)}}const ki="7.116.0",Li=parseFloat(ki),Ii=100;class Ai{constructor(e,t,n,o=Li){let r,i;this._version=o,t?r=t:(r=new $i,r.setClient(e)),n?i=n:(i=new $i,i.setClient(e)),this._stack=[{scope:r}],e&&this.bindClient(e),this._isolationScope=i}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(e){throw this.popScope(),e}return xn(n)?n.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:To(),o=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:o,...t,event_id:n}),n}captureMessage(e,t,n){const o=this._lastEventId=n&&n.event_id?n.event_id:To(),r=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:r,...n,event_id:o}),o}captureEvent(e,t){const n=t&&t.event_id?t.event_id:To();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:o}=this.getStackTop();if(!o)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:i=Ii}=o.getOptions&&o.getOptions()||{};if(i<=0)return;const s={timestamp:Rr(),...e},a=r?Yn((()=>r(s,t))):s;null!==a&&(o.emit&&o.emit("beforeAddBreadcrumb",a,t),n.addBreadcrumb(a,i))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=Mi(this);try{e(this)}finally{Mi(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return Zr&&Kn.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(Zr&&!n){this.getClient()?Kn.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):Kn.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),ni(e,n)}(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:o,environment:r=Xr}=n&&n.getOptions()||{},{userAgent:i}=Pn.navigator||{},s=ti({release:o,environment:r,user:t.getUser(),...i&&{userAgent:i},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&ni(a,{status:"exited"}),this.endSession(),t.setSession(s),s}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){const n=Ri().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);Zr&&Kn.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function Ri(){return Pn.__SENTRY__=Pn.__SENTRY__||{extensions:{},hub:void 0},Pn}function Mi(e){const t=Ri(),n=Di(t);return Pi(t,e),n}function Ni(){const e=Ri();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=Ri()){t=e,t&&t.__SENTRY__&&t.__SENTRY__.hub&&!Di(e).isOlderThan(Li)||Pi(e,new Ai);var t;return Di(e)}(e)}function Oi(){return Ni().getIsolationScope()}function Di(e){return Bn("hub",(()=>new Ai),e)}function Pi(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}var Ui;function Bi(e,t,n=(()=>{})){let o;try{o=e()}catch(e){throw t(e),n(),e}return function(e,t,n){if(xn(e))return e.then((e=>(n(),e)),(e=>{throw t(e),n(),e}));return n(),e}(o,t,n)}function Wi(e,t){const n=function(e){if(e.startTime){const n={...e};return n.startTimestamp="number"==typeof(t=e.startTime)?ii(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?ii(t.getTime()):Mr(),delete n.startTime,n}var t;return e}(e);return function(e,t={}){const n=Ri();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}((()=>fi(e.scope,(o=>{const r=Ni(),i=o.getSpan(),s=e.onlyIfParent&&!i?void 0:function(e,{parentSpan:t,spanContext:n,forceTransaction:o,scope:r}){if(!function(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=_i(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}())return;const i=Oi();let s;if(t&&!o)s=t.startChild(n);else if(t){const o=bi(t),{traceId:r,spanId:i}=t.spanContext(),a=ai(t);s=e.startTransaction({traceId:r,parentSpanId:i,parentSampled:a,...n,metadata:{dynamicSamplingContext:o,...n.metadata}})}else{const{traceId:t,dsc:o,parentSpanId:a,sampled:l}={...i.getPropagationContext(),...r.getPropagationContext()};s=e.startTransaction({traceId:t,parentSpanId:a,parentSampled:l,...n,metadata:{dynamicSamplingContext:o,...n.metadata}})}return r.setSpan(s),function(e,t,n){e&&(no(e,Fi,n),no(e,zi,t))}(s,r,i),s}(r,{parentSpan:i,spanContext:n,forceTransaction:e.forceTransaction,scope:o});return Bi((()=>t(s)),(()=>{if(s){const{status:e}=si(s);e&&"ok"!==e||s.setStatus("internal_error")}}),(()=>s&&s.end()))}))))}!function(e){e.Ok="ok";e.DeadlineExceeded="deadline_exceeded";e.Unauthenticated="unauthenticated";e.PermissionDenied="permission_denied";e.NotFound="not_found";e.ResourceExhausted="resource_exhausted";e.InvalidArgument="invalid_argument";e.Unimplemented="unimplemented";e.Unavailable="unavailable";e.InternalError="internal_error";e.UnknownError="unknown_error";e.Cancelled="cancelled";e.AlreadyExists="already_exists";e.FailedPrecondition="failed_precondition";e.Aborted="aborted";e.OutOfRange="out_of_range";e.DataLoss="data_loss"}(Ui||(Ui={}));const zi="_sentryScope",Fi="_sentryIsolationScope";let Hi;function ji(e,t,n,o,r,i){const s=vi().getSpan();if(s){const a=function(e){return Hi?Hi.get(e):void 0}(s)||new Map,l=`${e}:${t}@${o}`,c=a.get(i);if(c){const[,e]=c;a.set(i,[l,{min:Math.min(e.min,n),max:Math.max(e.max,n),count:e.count+=1,sum:e.sum+=n,tags:e.tags}])}else a.set(i,[l,{min:n,max:n,count:1,sum:n,tags:r}]);Hi||(Hi=new WeakMap),Hi.set(s,a)}}const Gi="sentry.source";function qi(e,t,n,o){const r=Hr(n),i=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const s=jr(e,r,o,t);delete e.sdkProcessingMetadata;return Or(s,[[{type:i},e]])}const Vi="7";function Yi(e,t){return n={sentry_key:e.publicKey,sentry_version:Vi,...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}const Ki=[];function Zi(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function Xi(e,t,n){if(n[t.name])Zr&&Kn.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===Ki.indexOf(t.name)&&(t.setupOnce(Jr,Ni),Ki.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,o)=>n(t,o,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const n=t.processEvent.bind(t),o=Object.assign(((t,o)=>n(t,o,e)),{id:t.name});e.addEventProcessor(o)}Zr&&Kn.log(`Integration installed: ${t.name}`)}}function Qi(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}function Ji(e){return e.replace(/[^\w\-./]+/gi,"")}const es=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function ts(e){return[...e].reduce(((e,t)=>e+function(e){for(const[t,n]of es)if(e===t)return n;return e}(t)),"")}function ns(e,t,n,o){const r={sent_at:(new Date).toISOString()};n&&n.sdk&&(r.sdk={name:n.sdk.name,version:n.sdk.version}),o&&t&&(r.dsn=Xn(t));const i=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),o=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${o}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return Or(r,[i])}const os="Not capturing exception because it's already been captured.";class rs{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Jn(e.dsn):Zr&&Kn.warn("No DSN provided, client will not send events."),this._dsn){const t=function(e,t={}){const n="string"==typeof t?t:t.tunnel,o="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${Yi(e,o)}`}(this._dsn,e);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(ko(e))return void(Zr&&Kn.log(os));let o=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{o=e}))),o}captureMessage(e,t,n,o){let r=n&&n.event_id;const i=wn(e)?e:String(e),s=bn(e)?this.eventFromMessage(i,t,n):this.eventFromException(e,n);return this._process(s.then((e=>this._captureEvent(e,n,o))).then((e=>{r=e}))),r}captureEvent(e,t,n){if(t&&t.originalException&&ko(t.originalException))return void(Zr&&Kn.log(os));let o=t&&t.event_id;const r=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,r||n).then((e=>{o=e}))),o}captureSession(e){"string"!=typeof e.release?Zr&&Kn.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),ni(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):fr(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return Zr&&Kn.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];Xi(this,e,this._integrations),t||Zi(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=qi(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=Dr(n,Wr(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const o=this._sendEnvelope(n);o&&o.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,o){const r=Hr(n);return Or({sent_at:(new Date).toISOString(),...r&&{sdk:r},...!!o&&t&&{dsn:Xn(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const n=`${e}:${t}`;Zr&&Kn.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}captureAggregateMetrics(e){Zr&&Kn.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=ns(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&Xi(e,t,n)})),n}(this,e),Zi(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let n=!1,o=!1;const r=t.exception&&t.exception.values;if(r){o=!0;for(const e of r){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const i="ok"===e.status;(i&&0===e.errors||i&&n)&&(ni(e,{...n&&{status:"crashed"},errors:e.errors||Number(o||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new vr((t=>{let n=0;const o=setInterval((()=>{0==this._numProcessing?(clearInterval(o),t(!0)):(n+=1,e&&n>=e&&(clearInterval(o),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,o=Oi()){const r=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),this.emit("preprocessEvent",e,t),li(r,e,t,n,this,o).then((e=>{if(null===e)return e;const t={...o.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:o,spanId:r,parentSpanId:i,dsc:s}=t;e.contexts={trace:{trace_id:o,span_id:r,parent_span_id:i},...e.contexts};const a=s||wi(o,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(Zr){const t=e;"log"===t.logLevel?Kn.log(t.message):Kn.warn(t)}}))}_processEvent(e,t,n){const o=this.getOptions(),{sampleRate:r}=o,i=ss(e),s=is(e),a=e.type||"error",l=`before send for type \`${a}\``;if(s&&"number"==typeof r&&Math.random()>r)return this.recordDroppedEvent("sample_rate","error",e),_r(new eo(`Discarding event because it's not included in the random sample (sampling rate = ${r})`,"log"));const c="replay_event"===a?"replay":a,d=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,d).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",c,e),new eo("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const r=function(e,t,n){const{beforeSend:o,beforeSendTransaction:r}=e;if(is(t)&&o)return o(t,n);if(ss(t)&&r)return r(t,n);return t}(o,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(xn(e))return e.then((e=>{if(!En(e)&&null!==e)throw new eo(n);return e}),(e=>{throw new eo(`${t} rejected with ${e}`)}));if(!En(e)&&null!==e)throw new eo(n);return e}(r,l)})).then((o=>{if(null===o)throw this.recordDroppedEvent("before_send",c,e),new eo(`${l} returned \`null\`, will not send event.`,"log");const r=n&&n.getSession();!i&&r&&this._updateSessionFromEvent(r,o);const s=o.transaction_info;if(i&&s&&o.transaction!==e.transaction){const e="custom";o.transaction_info={...s,source:e}}return this.sendEvent(o,t),o})).then(null,(e=>{if(e instanceof eo)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new eo(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{Zr&&Kn.error("Error while sending event:",e)}));Zr&&Kn.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,o]=t.split(":");return{reason:n,category:o,quantity:e[t]}}))}}function is(e){return void 0===e.type}function ss(e){return"transaction"===e.type}const as={c:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},g:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},d:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},s:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}(e):e)).join(":")}}},ls=30;function cs(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}function ds(e,t){const n=t&&function(e){return void 0!==e.getClient}(t)?t.getClient():t,o=n&&n.getDsn(),r=n&&n.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,o)||function(e,t){if(!t)return!1;return us(e)===us(t)}(e,r)}function us(e){return"/"===e[e.length-1]?e.slice(0,-1):e}const ps=new Map,ms=new Set;function gs(e,t){return function(e){if(Pn._sentryModuleMetadata)for(const t of Object.keys(Pn._sentryModuleMetadata)){const n=Pn._sentryModuleMetadata[t];if(ms.has(t))continue;ms.add(t);const o=e(t);for(const e of o.reverse())if(e.filename){ps.set(e.filename,n);break}}}(e),ps.get(t)}const hs="ModuleMetadata",fs=()=>({name:hs,setupOnce(){},setup(e){"function"==typeof e.on&&e.on("beforeEnvelope",(e=>{Pr(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(!function(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}(t),e[1]=t)}}))}))},processEvent:(e,t,n)=>(function(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename)continue;const t=gs(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}(n.getOptions().stackParser,e),e)});Qi(hs,fs);const _s={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},vs="RequestData",ys=(e={})=>{const t=kr,n={..._s,...e,include:{method:!0,..._s.include,...e.include,user:e.include&&"boolean"==typeof e.include.user?e.include.user:{..._s.include.user,...(e.include||{}).user}}};return{name:vs,setupOnce(){},processEvent(e,o,r){const{transactionNamingScheme:i}=n,{sdkProcessingMetadata:s={}}=e,a=s.request;if(!a)return e;const l=s.requestDataOptionsFromExpressHandler||s.requestDataOptionsFromGCPWrapper||function(e){const{transactionNamingScheme:t,include:{ip:n,user:o,...r}}=e,i=[];for(const[e,t]of Object.entries(r))t&&i.push(e);let s;if(void 0===o)s=!0;else if("boolean"==typeof o)s=o;else{const e=[];for(const[t,n]of Object.entries(o))n&&e.push(t);s=e}return{include:{ip:n,user:s,request:0!==i.length?i:void 0,transaction:t}}}(n),c=t(e,a,l);if("transaction"===e.type||"handler"===i)return c;const d=a._sentryTransaction;if(d){const e=si(d).description||"",t="sentry.javascript.nextjs"===function(e){try{return e.getOptions()._metadata.sdk.name}catch(e){return}}(r)?e.startsWith("/api"):"path"!==i,[n]=$r(a,{path:!0,method:t,customRoute:e});c.transaction=n}return c}}};Qi(vs,ys);const ws=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],bs=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],Es="InboundFilters",Ts=(e={})=>({name:Es,setupOnce(){},processEvent(t,n,o){const r=o.getOptions(),i=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:ws],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:bs],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,r);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return Zr&&Kn.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${xo(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));Zr&&0===t.length&&Kn.error(`Could not extract message for event ${xo(e)}`);return t}(e).some((e=>An(e,t)))}(e,t.ignoreErrors))return Zr&&Kn.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${xo(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&An(n,t)}(e,t.ignoreTransactions))return Zr&&Kn.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${xo(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=Ss(e);return!!n&&An(n,t)}(e,t.denyUrls))return Zr&&Kn.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${xo(e)}.\nUrl: ${Ss(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=Ss(e);return!n||An(n,t)}(e,t.allowUrls))return Zr&&Kn.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${xo(e)}.\nUrl: ${Ss(e)}`),!0;return!1}(t,i)?null:t}});Qi(Es,Ts);function Ss(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return Zr&&Kn.error(`Cannot extract url for event ${xo(e)}`),null}}let xs;const $s="FunctionToString",Cs=new WeakMap,ks=()=>({name:$s,setupOnce(){xs=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=ro(this),n=Cs.has(_i())&&void 0!==t?t:this;return xs.apply(n,e)}}catch(e){}},setup(e){Cs.set(e,!0)}}),Ls=(Qi($s,ks),"LinkedErrors"),Is=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:Ls,setupOnce(){},preprocessEvent(e,o,r){const i=r.getOptions();Rn(Yr,i.stackParser,i.maxValueLength,n,t,e,o)}}};Qi(Ls,Is);class As{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,n,o="none",r={},i=Mr()){const s=Math.floor(i),a=t.replace(/[^\w\-.]+/gi,"_");const l=function(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[Ji(n)]=ts(String(e[n])));return t}(r),c=function(e){return e.replace(/[^\w]+/gi,"_")}(o),d=function(e,t,n,o){return`${e}${t}${n}${Object.entries(lo(o)).sort(((e,t)=>e[0].localeCompare(t[0])))}`}(e,a,c,l);let u=this._buckets.get(d);const p=u&&"s"===e?u.metric.weight:0;u?(u.metric.add(n),u.timestamp<s&&(u.timestamp=s)):(u={metric:new as[e](n),timestamp:s,metricType:e,name:a,unit:c,tags:l},this._buckets.set(d,u));ji(e,a,"string"==typeof n?u.metric.weight-p:n,c,r,d)}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const e=Array.from(this._buckets).map((([,e])=>e));this._client.captureAggregateMetrics(e)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const Rs="MetricsAggregator",Ms=()=>({name:Rs,setupOnce(){},setup(e){e.metricsAggregator=new As(e)}});Qi(Rs,Ms);const Ns="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Os(e){const t=Kr([e,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);return"sentry"!==(Kr([t,"optionalAccess",e=>e.instrumenter])||"sentry")}class Ds{static __initStatic(){this.id="Express"}constructor(e={}){this.name=Ds.id,this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}setupOnce(e,t){this._router?Os(t)?Ns&&Kn.log("Express Integration is skipped because of instrumenter configuration."):(function(e,t=[]){t.forEach((t=>function(e,t){const n=e[t];return e[t]=function(...e){return n.call(this,...function(e,t){return e.map((e=>"function"==typeof e?Ps(e,t):Array.isArray(e)?e.map((e=>"function"==typeof e?Ps(e,t):e)):e))}(e,t))},e}(e,t)))}(this._router,this._methods),function(e){const t="settings"in e;t&&void 0===e._router&&e.lazyrouter&&e.lazyrouter();const n=t?e._router:e;if(!n)return Ns&&Kn.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(Ns&&Kn.debug("Routing instrumentation is currently only supported in Express 4."));const o=Object.getPrototypeOf(n),r=o.process_params;o.process_params=function(e,t,n,o,i){n._reconstructedRoute||(n._reconstructedRoute="");const{layerRoutePath:s,isRegex:a,isArray:l,numExtraSegments:c}=function(e){let t=Kr([e,"access",e=>e.route,"optionalAccess",e=>e.path]);const n=Sn(t),o=Array.isArray(t);if(!t){const[n]=Pn.process.versions.node.split(".").map(Number);n>=16&&(t=Us(e.path,e.regexp,e.keys))}if(!t)return{isRegex:n,isArray:o,numExtraSegments:0};const r=o?Math.max((s=t,s.reduce(((e,t)=>e+Er(t.toString())),0)-Er(e.path||"")),0):0,i=function(e,t){if(e)return t.map((e=>e.toString())).join(",");return t&&t.toString()}(o,t);var s;return{layerRoutePath:i,isRegex:n,isArray:o,numExtraSegments:r}}(e);let d;(s||a||l)&&(n._hasParameters=!0),d=s||(function(e,t,n){const o=Kr([br(e||""),"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>!!e))]);let r=0;const i=Kr([t,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>!!e)),"access",e=>e.length])||0;return Kr([n,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>Kr([o,"optionalAccess",e=>e[i+r]])===e&&(r+=1,!0))),"access",e=>e.join,"call",e=>e("/")])}(n.originalUrl,n._reconstructedRoute,e.path)||"");const u=d.split("/").filter((e=>e.length>0&&(a||l||!e.includes("*")))).join("/");u&&u.length>0&&(n._reconstructedRoute+=`/${u}${a?"/":""}`);if(Er(br(n.originalUrl||""))+c===Er(n._reconstructedRoute)){n._hasParameters||n._reconstructedRoute!==n.originalUrl&&(n._reconstructedRoute=n.originalUrl?br(n.originalUrl):n.originalUrl);const e=o.__sentry_transaction,t=e&&si(e).data||{};if(e&&"custom"!==t[Gi]){const t=n._reconstructedRoute||"/",[o,r]=$r(n,{path:!0,method:!0,customRoute:t});e.updateName(o),e.setAttribute(Gi,r)}}return r.call(this,e,t,n,o,i)}}(this._router)):Ns&&Kn.error("ExpressIntegration is missing an Express instance")}}function Ps(e,t){const n=e.length;switch(n){case 2:return function(n,o){const r=o.__sentry_transaction;if(r){const n=r.startChild({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"});o.once("finish",(()=>{n.end()}))}return e.call(this,n,o)};case 3:return function(n,o,r){const i=Kr([o.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,n,o,(function(...e){Kr([i,"optionalAccess",e=>e.end,"call",e=>e()]),r.call(this,...e)}))};case 4:return function(n,o,r,i){const s=Kr([r.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,n,o,r,(function(...e){Kr([s,"optionalAccess",e=>e.end,"call",e=>e()]),i.call(this,...e)}))};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${n}`)}}Ds.__initStatic();const Us=(e,t,n)=>{if(!(e&&t&&n&&0!==Object.keys(n).length&&Kr([n,"access",e=>e[0],"optionalAccess",e=>e.offset])))return;const o=n.sort(((e,t)=>e.offset-t.offset)),r=new RegExp(t,`${t.flags}d`).exec(e);if(!r||!r.indices)return;const[,...i]=r.indices;if(i.length!==o.length)return;let s=e,a=0;return i.forEach(((e,t)=>{if(e){const[n,r]=e,i=s.substring(0,n-a),l=`:${o[t].name}`,c=s.substring(r-a);s=i+l+c,a+=r-n-l.length}})),s};class Bs{static __initStatic(){this.id="Postgres"}constructor(e={}){this.name=Bs.id,this._usePgNative=!!e.usePgNative,this._module=e.module}loadDependency(){return this._module=this._module||sr("pg")}setupOnce(e,t){if(Os(t))return void(Ns&&Kn.log("Postgres Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(!n)return void(Ns&&Kn.error("Postgres Integration was unable to require `pg` package."));const o=this._usePgNative?Kr([n,"access",e=>e.native,"optionalAccess",e=>e.Client]):n.Client;o?to(o.prototype,"query",(function(e){return function(n,o,r){const i=t().getScope().getSpan(),s={"db.system":"postgresql"};try{this.database&&(s["db.name"]=this.database),this.host&&(s["server.address"]=this.host),this.port&&(s["server.port"]=this.port),this.user&&(s["db.user"]=this.user)}catch(e){}const a=Kr([i,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.text,op:"db",origin:"auto.db.postgres",data:s})]);if("function"==typeof r)return e.call(this,n,o,(function(e,t){Kr([a,"optionalAccess",e=>e.end,"call",e=>e()]),r(e,t)}));if("function"==typeof o)return e.call(this,n,(function(e,t){Kr([a,"optionalAccess",e=>e.end,"call",e=>e()]),o(e,t)}));const l=void 0!==o?e.call(this,n,o):e.call(this,n);return xn(l)?l.then((e=>(Kr([a,"optionalAccess",e=>e.end,"call",e=>e()]),e))):(Kr([a,"optionalAccess",e=>e.end,"call",e=>e()]),l)}})):Ns&&Kn.error("Postgres Integration was unable to access 'pg-native' bindings.")}}Bs.__initStatic();class Ws{static __initStatic(){this.id="Mysql"}constructor(){this.name=Ws.id}loadDependency(){return this._module=this._module||sr("mysql/lib/Connection.js")}setupOnce(e,t){if(Os(t))return void(Ns&&Kn.log("Mysql Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(!n)return void(Ns&&Kn.error("Mysql Integration was unable to require `mysql` package."));let o;try{n.prototype.connect=new Proxy(n.prototype.connect,{apply:(e,t,n)=>(o||(o=t.config),e.apply(t,n))})}catch(e){Ns&&Kn.error("Mysql Integration was unable to instrument `mysql` config.")}function r(e){if(!e)return;const t=o?{"server.address":o.host,"server.port":o.port,"db.user":o.user}:{};Object.keys(t).forEach((n=>{e.setAttribute(n,t[n])})),e.end()}to(n,"createQuery",(function(e){return function(n,o,i){const s=Kr([t().getScope().getSpan(),"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if("function"==typeof i)return e.call(this,n,o,(function(e,t,n){r(s),i(e,t,n)}));if("function"==typeof o)return e.call(this,n,(function(e,t,n){r(s),o(e,t,n)}));const a=e.call(this,n,o);return a.on("end",(()=>{r(s)})),a}}))}}Ws.__initStatic();const zs=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],Fs={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class Hs{static __initStatic(){this.id="Mongo"}constructor(e={}){this.name=Hs.id,this._operations=Array.isArray(e.operations)?e.operations:zs,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}loadDependency(){const e=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||sr(e)}setupOnce(e,t){if(Os(t))return void(Ns&&Kn.log("Mongo Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(n)this._instrumentOperations(n.Collection,this._operations,t);else{const e=this._useMongoose?"mongoose":"mongodb";Ns&&Kn.error(`Mongo Integration was unable to require \`${e}\` package.`)}}_instrumentOperations(e,t,n){t.forEach((t=>this._patchOperation(e,t,n)))}_patchOperation(e,t,n){if(!(t in e.prototype))return;const o=this._getSpanContextFromOperationArguments.bind(this);to(e.prototype,t,(function(e){return function(...r){const i=r[r.length-1],s=n(),a=s.getScope(),l=s.getClient(),c=a.getSpan(),d=Kr([l,"optionalAccess",e=>e.getOptions,"call",e=>e(),"access",e=>e.sendDefaultPii]);if("function"!=typeof i||"mapReduce"===t&&2===r.length){const n=Kr([c,"optionalAccess",e=>e.startChild,"call",e=>e(o(this,t,r,d))]),i=e.call(this,...r);if(xn(i))return i.then((e=>(Kr([n,"optionalAccess",e=>e.end,"call",e=>e()]),e)));if((u=i)&&"object"==typeof u&&u.once&&"function"==typeof u.once){const e=i;try{e.once("close",(()=>{Kr([n,"optionalAccess",e=>e.end,"call",e=>e()])}))}catch(e){Kr([n,"optionalAccess",e=>e.end,"call",e=>e()])}return e}return Kr([n,"optionalAccess",e=>e.end,"call",e=>e()]),i}var u;const p=Kr([c,"optionalAccess",e=>e.startChild,"call",e=>e(o(this,t,r.slice(0,-1)))]);return e.call(this,...r.slice(0,-1),(function(e,t){Kr([p,"optionalAccess",e=>e.end,"call",e=>e()]),i(e,t)}))}}))}_getSpanContextFromOperationArguments(e,t,n,o=!1){const r={"db.system":"mongodb","db.name":e.dbName,"db.operation":t,"db.mongodb.collection":e.collectionName},i={op:"db",origin:"auto.db.mongo",description:t,data:r},s=Fs[t],a=Array.isArray(this._describeOperations)?this._describeOperations.includes(t):this._describeOperations;if(!s||!a||!o)return i;try{if("mapReduce"===t){const[e,t]=n;r[s[0]]="string"==typeof e?e:e.name||"<anonymous>",r[s[1]]="string"==typeof t?t:t.name||"<anonymous>"}else for(let e=0;e<s.length;e++)r[`db.mongodb.${s[e]}`]=JSON.stringify(n[e])}catch(e){}return i}}Hs.__initStatic();class js{static __initStatic(){this.id="Prisma"}constructor(e={}){if(this.name=js.id,(t=e.client)&&t.$use&&!e.client._sentryInstrumented){no(e.client,"_sentryInstrumented",!0);const t={};try{const n=e.client._engineConfig;if(n){const{activeProvider:e,clientVersion:o}=n;e&&(t["db.system"]=e),o&&(t["db.prisma.version"]=o)}}catch(e){}e.client.$use(((e,n)=>{if(Os(Ni))return n(e);const o=e.action,r=e.model;return Wi({name:r?`${r} ${o}`:o,onlyIfParent:!0,op:"db.prisma",attributes:{"sentry.origin":"auto.db.prisma"},data:{...t,"db.operation":o}},(()=>n(e)))}))}else Ns&&Kn.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",e.client);var t}setupOnce(){}}js.__initStatic();class Gs{static __initStatic(){this.id="GraphQL"}constructor(){this.name=Gs.id}loadDependency(){return this._module=this._module||sr("graphql/execution/execute.js")}setupOnce(e,t){if(Os(t))return void(Ns&&Kn.log("GraphQL Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();n?to(n,"execute",(function(e){return function(...n){const o=t().getScope(),r=o.getSpan(),i=Kr([r,"optionalAccess",e=>e.startChild,"call",e=>e({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);Kr([o,"optionalAccess",e=>e.setSpan,"call",e=>e(i)]);const s=e.call(this,...n);return xn(s)?s.then((e=>(Kr([i,"optionalAccess",e=>e.end,"call",e=>e()]),Kr([o,"optionalAccess",e=>e.setSpan,"call",e=>e(r)]),e))):(Kr([i,"optionalAccess",e=>e.end,"call",e=>e()]),Kr([o,"optionalAccess",e=>e.setSpan,"call",e=>e(r)]),s)}})):Ns&&Kn.error("GraphQL Integration was unable to require graphql/execution package.")}}Gs.__initStatic();class qs{static __initStatic(){this.id="Apollo"}constructor(e={useNestjs:!1}){this.name=qs.id,this._useNest=!!e.useNestjs}loadDependency(){return this._useNest?this._module=this._module||sr("@nestjs/graphql"):this._module=this._module||sr("apollo-server-core"),this._module}setupOnce(e,t){if(Os(t))Ns&&Kn.log("Apollo Integration is skipped because of instrumenter configuration.");else if(this._useNest){const e=this.loadDependency();if(!e)return void(Ns&&Kn.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package."));to(e.GraphQLFactory.prototype,"mergeWithSchema",(function(e){return function(...n){return to(this.resolversExplorerService,"explore",(function(e){return function(){return Vs(Lo(e.call(this)),t)}})),e.call(this,...n)}}))}else{const e=this.loadDependency();if(!e)return void(Ns&&Kn.error("Apollo Integration was unable to require apollo-server-core package."));to(e.ApolloServerBase.prototype,"constructSchema",(function(e){return function(){if(!this.config.resolvers)return Ns&&(this.config.schema?(Kn.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),Kn.warn()):this.config.modules&&Kn.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),Kn.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),e.call(this);const n=Lo(this.config.resolvers);return this.config.resolvers=Vs(n,t),e.call(this)}}))}}}function Vs(e,t){return e.map((e=>(Object.keys(e).forEach((n=>{Object.keys(e[n]).forEach((o=>{"function"==typeof e[n][o]&&function(e,t,n,o){to(e[t],n,(function(e){return function(...r){const i=Kr([o().getScope().getSpan(),"optionalAccess",e=>e.startChild,"call",e=>e({description:`${t}.${n}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),s=e.call(this,...r);return xn(s)?s.then((e=>(Kr([i,"optionalAccess",e=>e.end,"call",e=>e()]),e))):(Kr([i,"optionalAccess",e=>e.end,"call",e=>e()]),s)}}))}(e,n,o,t)}))})),e)))}qs.__initStatic();const Ys=Pn,Ks=()=>Ys.__WEB_VITALS_POLYFILL__?Ys.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=Ys.performance.timing,t=Ys.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n})()):Ys.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],Zs=()=>{const e=Ks();return e&&e.activationStart||0},Xs=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const o=new PerformanceObserver((e=>{t(e.getEntries())}));return o.observe(Object.assign({type:e,buffered:!0},n||{})),o}}catch(e){}},Qs=(e,t)=>{const n=o=>{"pagehide"!==o.type&&"hidden"!==Ys.document.visibilityState||(e(o),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};Ys.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))};let Js=-1;const ea=()=>(Js<0&&(Ys.document&&Ys.document.visibilityState&&(Js="hidden"!==Ys.document.visibilityState||Ys.document.prerendering?1/0:0),Qs((({timeStamp:e})=>{Js=e}),!0)),{get firstHiddenTime(){return Js}}),ta={},na=e=>{const t=ea(),n=((e,t)=>{const n=Ks();let o="navigate";return n&&(o=Ys.document&&Ys.document.prerendering||Zs()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:o}})("LCP");let o;const r=e=>{const r=e[e.length-1];if(r){const e=Math.max(r.startTime-Zs(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[r],o())}},i=Xs("largest-contentful-paint",r);if(i){o=((e,t,n)=>{let o,r;return i=>{t.value>=0&&(i||n)&&(r=t.value-(o||0),(r||void 0===o)&&(o=t.value,t.delta=r,e(t)))}})(e,n);const t=()=>{ta[n.id]||(r(i.takeRecords()),i.disconnect(),ta[n.id]=!0,o(!0))};return["keydown","click"].forEach((e=>{Ys.document&&addEventListener(e,t,{once:!0,capture:!0})})),Qs(t,!0),t}},oa={},ra={};let ia;function sa(e,t=!1){return function(e,t,n,o,r=!1){let i;da(e,t),ra[e]||(i=n(),ra[e]=!0);o&&t({metric:o});return ua(e,t,r?i:void 0)}("lcp",e,ca,ia,t)}function aa(e,t){return da(e,t),ra[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);Xs(e,(t=>{la(e,{entries:t})}),t)}(e),ra[e]=!0),ua(e,t)}function la(e,t){const n=oa[e];if(n&&n.length)for(const o of n)try{o(t)}catch(t){Ns&&Kn.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${ho(o)}\nError:`,t)}}function ca(){return na((e=>{la("lcp",{metric:e}),ia=e}))}function da(e,t){oa[e]=oa[e]||[],oa[e].push(t)}function ua(e,t,n){return()=>{n&&n();const o=oa[e];if(!o)return;const r=o.indexOf(t);-1!==r&&o.splice(r,1)}}const pa=Pn;let ma=0;function ga(){return ma>0}function ha(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(ro(e))return e}catch(t){return e}const o=function(){const o=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const r=o.map((e=>ha(e,t)));return e.apply(this,r)}catch(e){throw ma++,setTimeout((()=>{ma--})),fi((n=>{n.addEventProcessor((e=>(t.mechanism&&($o(e,void 0,void 0),Co(e,t.mechanism)),e.extra={...e.extra,arguments:o},e))),pi(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=e[t])}catch(e){}oo(o,e),no(e,"__sentry_wrapped__",o);try{Object.getOwnPropertyDescriptor(o,"name").configurable&&Object.defineProperty(o,"name",{get:()=>e.name})}catch(e){}return o}const fa="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function _a(e,t){const n=ya(e,t),o={type:t&&t.name,value:ba(t)};return n.length&&(o.stacktrace={frames:n}),void 0===o.type&&""===o.value&&(o.value="Unrecoverable error caught"),o}function va(e,t){return{exception:{values:[_a(e,t)]}}}function ya(e,t){const n=t.stacktrace||t.stack||"",o=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(wa.test(e.message))return 1}return 0}(t);try{return e(n,o)}catch(e){}return[]}const wa=/Minified React error #\d+;/i;function ba(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function Ea(e,t,n,o,r){let i;if(_n(t)&&t.error){return va(e,t.error)}if(vn(t)||fn(t,"DOMException")){const r=t;if("stack"in t)i=va(e,t);else{const t=r.name||(vn(r)?"DOMError":"DOMException"),s=r.message?`${t}: ${r.message}`:t;i=Ta(e,s,n,o),$o(i,s)}return"code"in r&&(i.tags={...i.tags,"DOMException.code":`${r.code}`}),i}if(hn(t))return va(e,t);if(En(t)||Tn(t)){return i=function(e,t,n,o){const r=_i(),i=r&&r.getOptions().normalizeDepth,s={exception:{values:[{type:Tn(t)?t.constructor.name:o?"UnhandledRejection":"Error",value:Sa(t,{isUnhandledRejection:o})}]},extra:{__serialized__:cr(t,i)}};if(n){const t=ya(e,n);t.length&&(s.exception.values[0].stacktrace={frames:t})}return s}(e,t,n,r),Co(i,{synthetic:!0}),i}return i=Ta(e,t,n,o),$o(i,`${t}`,void 0),Co(i,{synthetic:!0}),i}function Ta(e,t,n,o){const r={};if(o&&n){const o=ya(e,n);o.length&&(r.exception={values:[{value:t,stacktrace:{frames:o}}]})}if(wn(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return r.logentry={message:e,params:n},r}return r.message=t,r}function Sa(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(io(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return kn(n[0],t);for(let e=n.length;e>0;e--){const o=n.slice(0,e).join(", ");if(!(o.length>t))return e===n.length?o:kn(o,t)}return""}(e),o=t?"promise rejection":"exception";if(_n(e))return`Event \`ErrorEvent\` captured as ${o} with message \`${e.message}\``;if(Tn(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${o}`}return`Object captured as ${o} with keys: ${n}`}class xa extends rs{constructor(e){!function(e,t,n=[t],o="npm"){const r=e._metadata||{};r.sdk||(r.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${o}:@sentry/${e}`,version:ki}))),version:ki}),e._metadata=r}(e,"browser",["browser"],pa.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&pa.document&&pa.document.addEventListener("visibilitychange",(()=>{"hidden"===pa.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,n,o){const r=Ea(e,t,n&&n.syntheticException||void 0,o);return Co(r),r.level="error",n&&n.event_id&&(r.event_id=n.event_id),fr(r)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function(e,t,n="info",o,r){const i=Ta(e,t,o&&o.syntheticException||void 0,r);return i.level=n,o&&o.event_id&&(i.event_id=o.event_id),fr(i)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(fa&&Kn.warn("SDK not enabled, will not capture user feedback."));const t=function(e,{metadata:t,tunnel:n,dsn:o}){const r={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!o&&{dsn:Xn(o)}},i=function(e){return[{type:"user_report"},e]}(e);return Or(r,[i])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(fa&&Kn.log("No outcomes to send"));if(!this._dsn)return void(fa&&Kn.log("No dsn provided, will not send outcomes"));fa&&Kn.log("Sending outcomes:",e);const t=(n=e,Or((o=this._options.tunnel&&Xn(this._dsn))?{dsn:o}:{},[[{type:"client_report"},{timestamp:r||Rr(),discarded_events:n}]]));var n,o,r;this._sendEnvelope(t)}}let $a;function Ca(e,t=function(){if($a)return $a;if(Bo(pa.fetch))return $a=pa.fetch.bind(pa);const e=pa.document;let t=pa.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const o=n.contentWindow;o&&o.fetch&&(t=o.fetch),e.head.removeChild(n)}catch(e){fa&&Kn.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return $a=t.bind(pa)}()){let n=0,o=0;return function(e,t,n=yr(e.bufferSize||ls)){let o={};function r(r){const i=[];if(Pr(r,((t,n)=>{const r=Fr(n);if(qr(o,r)){const o=cs(t,n);e.recordDroppedEvent("ratelimit_backoff",r,o)}else i.push(t)})),0===i.length)return fr();const s=Or(r[0],i),a=t=>{Pr(s,((n,o)=>{const r=cs(n,o);e.recordDroppedEvent(t,Fr(o),r)}))};return n.add((()=>t({body:Br(s,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&Zr&&Kn.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),o=Vr(o,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof eo)return Zr&&Kn.error("Skipped sending event because buffer is full."),a("queue_overflow"),fr();throw e}))}return r.__sentry__baseTransport__=!0,{send:r,flush:e=>n.drain(e)}}(e,(function(r){const i=r.body.length;n+=i,o++;const s={body:r.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&o<15,...e.fetchOptions};try{return t(e.url,s).then((e=>(n-=i,o--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return $a=void 0,n-=i,o--,_r(e)}}))}const ka="?";function La(e,t,n,o){const r={filename:e,function:t,in_app:!0};return void 0!==n&&(r.lineno=n),void 0!==o&&(r.colno=o),r}const Ia=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Aa=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ra=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Ma=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Na=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Oa=function(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const o=[],r=e.split("\n");for(let e=n;e<r.length;e++){const n=r[e];if(n.length>1024)continue;const i=po.test(n)?n.replace(po,"$1"):n;if(!i.match(/\S*Error: /)){for(const e of t){const t=e(i);if(t){o.push(t);break}}if(o.length>=uo)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop();t.reverse(),mo.test(t[t.length-1].function||"")&&(t.pop(),mo.test(t[t.length-1].function||"")&&t.pop());return t.slice(0,uo).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(o)}}(...[[30,e=>{const t=Ia.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Aa.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=Da(t[1]||ka,t[2]);return La(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,e=>{const t=Ra.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Ma.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||ka;return[n,e]=Da(n,e),La(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],[40,e=>{const t=Na.exec(e);return t?La(t[2],t[1]||ka,+t[3],t[4]?+t[4]:void 0):void 0}]]),Da=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),o=-1!==e.indexOf("safari-web-extension");return n||o?[-1!==e.indexOf("@")?e.split("@")[0]:ka,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Pa=1024,Ua="Breadcrumbs",Ba=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Ua,setupOnce(){},setup(e){t.console&&bo(function(e){return function(t){if(_i()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:Ir(t.level),message:In(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${In(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}hi(n,{input:t.args,level:t.level})}}(e)),t.dom&&Oo(function(e,t){return function(n){if(_i()!==e)return;let o,r,i="object"==typeof t?t.serializeAttribute:void 0,s="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;s&&s>Pa&&(fa&&Kn.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${s} was configured. Sentry will use 1024 instead.`),s=Pa),"string"==typeof i&&(i=[i]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;o=Fn(t,{keyAttrs:i,maxStringLength:s}),r=function(e){if(!Wn.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}(t)}catch(e){o="<unknown>"}if(0===o.length)return;const a={category:`ui.${n.name}`,message:o};r&&(a.data={"ui.component_name":r}),hi(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&nr(function(e){return function(t){if(_i()!==e)return;const{startTimestamp:n,endTimestamp:o}=t,r=t.xhr[tr];if(!n||!o||!r)return;const{method:i,url:s,status_code:a,body:l}=r;hi({category:"xhr",data:{method:i,url:s,status_code:a},type:"http"},{xhr:t.xhr,input:l,startTimestamp:n,endTimestamp:o})}}(e)),t.fetch&&zo(function(e){return function(t){if(_i()!==e)return;const{startTimestamp:n,endTimestamp:o}=t;if(o&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){hi({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:o})}else{const e=t.response;hi({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:n,endTimestamp:o})}}}(e)),t.history&&Qo(function(e){return function(t){if(_i()!==e)return;let n=t.from,o=t.to;const r=wr(pa.location.href);let i=n?wr(n):void 0;const s=wr(o);i&&i.path||(i=r),r.protocol===s.protocol&&r.host===s.host&&(o=s.relative),r.protocol===i.protocol&&r.host===i.host&&(n=i.relative),hi({category:"navigation",data:{from:n,to:o}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){_i()===e&&hi({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:xo(t)},{event:t})}}(e))}}};Qi(Ua,Ba);const Wa="Dedupe",za=()=>{let e;return{name:Wa,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,o=t.message;if(!n&&!o)return!1;if(n&&!o||!n&&o)return!1;if(n!==o)return!1;if(!Ha(e,t))return!1;if(!Fa(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=ja(t),o=ja(e);if(!n||!o)return!1;if(n.type!==o.type||n.value!==o.value)return!1;if(!Ha(e,t))return!1;if(!Fa(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return fa&&Kn.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};Qi(Wa,za);function Fa(e,t){let n=Ga(e),o=Ga(t);if(!n&&!o)return!0;if(n&&!o||!n&&o)return!1;if(o.length!==n.length)return!1;for(let e=0;e<o.length;e++){const t=o[e],r=n[e];if(t.filename!==r.filename||t.lineno!==r.lineno||t.colno!==r.colno||t.function!==r.function)return!1}return!0}function Ha(e,t){let n=e.fingerprint,o=t.fingerprint;if(!n&&!o)return!0;if(n&&!o||!n&&o)return!1;try{return!(n.join("")!==o.join(""))}catch(e){return!1}}function ja(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Ga(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}const qa="GlobalHandlers",Va=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:qa,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){!function(e){const t="error";vo(t,e),yo(t,qo)}((t=>{const{stackParser:n,attachStacktrace:o}=Za();if(_i()!==e||ga())return;const{msg:r,url:i,line:s,column:a,error:l}=t,c=void 0===l&&yn(r)?function(e,t,n,o){const r=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let i=_n(e)?e.message:e,s="Error";const a=i.match(r);a&&(s=a[1],i=a[2]);const l={exception:{values:[{type:s,value:i}]}};return Ya(l,t,n,o)}(r,i,s,a):Ya(Ea(n,l||r,void 0,o,!1),i,s,a);c.level="error",gi(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})}))}(e),Ka("onerror")),t.onunhandledrejection&&(!function(e){!function(e){const t="unhandledrejection";vo(t,e),yo(t,Yo)}((t=>{const{stackParser:n,attachStacktrace:o}=Za();if(_i()!==e||ga())return;const r=function(e){if(bn(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),i=bn(r)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(r)}`}]}}:Ea(n,r,void 0,o,!0);i.level="error",gi(i,{originalException:r,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),Ka("onunhandledrejection"))}}};Qi(qa,Va);function Ya(e,t,n,o){const r=e.exception=e.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},l=a.frames=a.frames||[],c=isNaN(parseInt(o,10))?void 0:o,d=isNaN(parseInt(n,10))?void 0:n,u=yn(t)&&t.length>0?t:jn();return 0===l.length&&l.push({colno:c,filename:u,function:"?",in_app:!0,lineno:d}),e}function Ka(e){fa&&Kn.log(`Global Handler attached: ${e}`)}function Za(){const e=_i();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Xa="HttpContext",Qa=()=>({name:Xa,setupOnce(){},preprocessEvent(e){if(!pa.navigator&&!pa.location&&!pa.document)return;const t=e.request&&e.request.url||pa.location&&pa.location.href,{referrer:n}=pa.document||{},{userAgent:o}=pa.navigator||{},r={...e.request&&e.request.headers,...n&&{Referer:n},...o&&{"User-Agent":o}},i={...e.request,...t&&{url:t},headers:r};e.request=i}}),Ja=(Qi(Xa,Qa),"LinkedErrors"),el=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:Ja,setupOnce(){},preprocessEvent(e,o,r){const i=r.getOptions();Rn(_a,i.stackParser,i.maxValueLength,n,t,e,o)}}},tl=(Qi(Ja,el),["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"]),nl="TryCatch",ol=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:nl,setupOnce(){t.setTimeout&&to(pa,"setTimeout",rl),t.setInterval&&to(pa,"setInterval",rl),t.requestAnimationFrame&&to(pa,"requestAnimationFrame",il),t.XMLHttpRequest&&"XMLHttpRequest"in pa&&to(XMLHttpRequest.prototype,"send",sl);const e=t.eventTarget;if(e){(Array.isArray(e)?e:tl).forEach(al)}}}};Qi(nl,ol);function rl(e){return function(...t){const n=t[0];return t[0]=ha(n,{mechanism:{data:{function:ho(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function il(e){return function(t){return e.apply(this,[ha(t,{mechanism:{data:{function:"requestAnimationFrame",handler:ho(e)},handled:!1,type:"instrument"}})])}}function sl(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&to(n,e,(function(t){const n={mechanism:{data:{function:e,handler:ho(t)},handled:!1,type:"instrument"}},o=ro(t);return o&&(n.mechanism.data.handler=ho(o)),ha(t,n)}))})),e.apply(this,t)}}function al(e){const t=pa,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(to(n,"addEventListener",(function(t){return function(n,o,r){try{"function"==typeof o.handleEvent&&(o.handleEvent=ha(o.handleEvent,{mechanism:{data:{function:"handleEvent",handler:ho(o),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,ha(o,{mechanism:{data:{function:"addEventListener",handler:ho(o),target:e},handled:!1,type:"instrument"}}),r])}})),to(n,"removeEventListener",(function(e){return function(t,n,o){const r=n;try{const n=r&&r.__sentry_wrapped__;n&&e.call(this,t,n,o)}catch(e){}return e.call(this,t,r,o)}})))}const ll=[Ts(),ks(),ol(),Ba(),Va(),el(),za(),Qa()];const cl=Pn,dl="sentryReplaySession",ul="replay_event",pl="Unable to send Replay",ml=15e4,gl=5e3,hl=2e7,fl=36e5;function _l(e){let t,n=e[0],o=1;for(;o<e.length;){const r=e[o],i=e[o+1];if(o+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}var vl;function yl(e){const t=_l([e,"optionalAccess",e=>e.host]);return Boolean(_l([t,"optionalAccess",e=>e.shadowRoot])===e)}function wl(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function bl(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,El).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function El(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=bl(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(vl||(vl={}));class Tl{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const t=_l([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]);return o=()=>-1,null!=(n=t)?n:o();var n,o}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Sl({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function xl({isMasked:e,element:t,value:n,maskInputFn:o}){let r=n||"";return e?(o&&(r=o(r,t)),"*".repeat(r.length)):r}function $l(e){return e.toLowerCase()}function Cl(e){return e.toUpperCase()}const kl="__rrweb_original__";function Ll(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?$l(t):null}function Il(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}let Al=1;const Rl=new RegExp("[^a-z0-9-_:]"),Ml=-2;function Nl(){return Al++}let Ol,Dl;const Pl=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Ul=/^(?:[a-z+]+:)?\/\//i,Bl=/^www\..*/i,Wl=/^(data:)([^,]*),(.*)/i;function zl(e,t){return(e||"").replace(Pl,((e,n,o,r,i,s)=>{const a=o||i||s,l=n||r||"";if(!a)return e;if(Ul.test(a)||Bl.test(a))return`url(${l}${a}${l})`;if(Wl.test(a))return`url(${l}${a}${l})`;if("/"===a[0])return`url(${l}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${l})`;const c=t.split("/"),d=a.split("/");c.pop();for(const e of d)"."!==e&&(".."===e?c.pop():c.push(e));return`url(${l}${c.join("/")}${l})`}))}const Fl=/^[^ \t\n\r\u000c]+/,Hl=/^[, \t\n\r\u000c]+/;function jl(e,t){if(!t||""===t.trim())return t;const n=e.createElement("a");return n.href=t,n.href}function Gl(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function ql(){const e=document.createElement("a");return e.href="",e.href}function Vl(e,t,n,o,r,i){return o?"src"===n||"href"===n&&("use"!==t||"#"!==o[0])||"xlink:href"===n&&"#"!==o[0]?jl(e,o):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function o(e){let o;const r=e.exec(t.substring(n));return r?(o=r[0],n+=o.length,o):""}const r=[];for(;o(Hl),!(n>=t.length);){let i=o(Fl);if(","===i.slice(-1))i=jl(e,i.substring(0,i.length-1)),r.push(i);else{let o="";i=jl(e,i);let s=!1;for(;;){const e=t.charAt(n);if(""===e){r.push((i+o).trim());break}if(s)")"===e&&(s=!1);else{if(","===e){n+=1,r.push((i+o).trim());break}"("===e&&(s=!0)}o+=e,n+=1}}}return r.join(", ")}(e,o):"style"===n?zl(o,ql()):"object"===t&&"data"===n?jl(e,o):"function"==typeof i?i(n,o,r):o:jl(e,o):o}function Yl(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Kl(e,t,n=1/0,o=0){return e?e.nodeType!==e.ELEMENT_NODE||o>n?-1:t(e)?o:Kl(e.parentNode,t,n,o+1):-1}function Zl(e,t){return n=>{const o=n;if(null===o)return!1;try{if(e)if("string"==typeof e){if(o.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const o=e.classList[n];if(t.test(o))return!0}return!1}(o,e))return!0;return!(!t||!o.matches(t))}catch(e){return!1}}}function Xl(e,t,n,o,r,i){try{const s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===s)return!1;if("INPUT"===s.tagName){const e=s.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let a=-1,l=-1;if(i){if(l=Kl(s,Zl(o,r)),l<0)return!0;a=Kl(s,Zl(t,n),l>=0?l:1/0)}else{if(a=Kl(s,Zl(t,n)),a<0)return!1;l=Kl(s,Zl(o,r),a>=0?a:1/0)}return a>=0?!(l>=0)||a<=l:!(l>=0)&&!!i}catch(e){}return!!i}function Ql(e,t){const{doc:n,mirror:o,blockClass:r,blockSelector:i,unblockSelector:s,maskAllText:a,maskAttributeFn:l,maskTextClass:c,unmaskTextClass:d,maskTextSelector:u,unmaskTextSelector:p,inlineStylesheet:m,maskInputOptions:g={},maskTextFn:h,maskInputFn:f,dataURLOptions:_={},inlineImages:v,recordCanvas:y,keepIframeSrcFn:w,newlyAddedElement:b=!1}=t,E=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,o);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:vl.Document,childNodes:[],compatMode:e.compatMode}:{type:vl.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:vl.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:E};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:o,blockSelector:r,unblockSelector:i,inlineStylesheet:s,maskInputOptions:a={},maskAttributeFn:l,maskInputFn:c,dataURLOptions:d={},inlineImages:u,recordCanvas:p,keepIframeSrcFn:m,newlyAddedElement:g=!1,rootId:h,maskAllText:f,maskTextClass:_,unmaskTextClass:v,maskTextSelector:y,unmaskTextSelector:w}=t,b=function(e,t,n,o){try{if(o&&e.matches(o))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const o=e.classList[n];if(t.test(o))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,o,r,i),E=function(e){if(e instanceof HTMLFormElement)return"form";const t=$l(e.tagName);return Rl.test(t)?"div":t}(e);let T={};const S=e.attributes.length;for(let t=0;t<S;t++){const o=e.attributes[t];o.name&&!Yl(E,o.name,o.value)&&(T[o.name]=Vl(n,E,$l(o.name),o.value,e,l))}if("link"===E&&s){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let o=null;t&&(o=bl(t)),o&&(delete T.rel,delete T.href,T._cssText=zl(o,t.href))}if("style"===E&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=bl(e.sheet);t&&(T._cssText=zl(t,ql()))}if("input"===E||"textarea"===E||"select"===E||"option"===E){const t=e,n=Ll(t),o=Il(t,Cl(E),n),r=t.checked;if("submit"!==n&&"button"!==n&&o){const e=Xl(t,_,y,v,w,Sl({type:n,tagName:Cl(E),maskInputOptions:a}));T.value=xl({isMasked:e,element:t,value:o,maskInputFn:c})}r&&(T.checked=r)}"option"===E&&(e.selected&&!a.select?T.selected=!0:delete T.selected);if("canvas"===E&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let o=0;o<e.height;o+=50){const r=t.getImageData,i=kl in r?r[kl]:r;if(new Uint32Array(i.call(t,n,o,Math.min(50,e.width-n),Math.min(50,e.height-o)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(T.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){const t=e.toDataURL(d.type,d.quality),n=document.createElement("canvas");n.width=e.width,n.height=e.height;t!==n.toDataURL(d.type,d.quality)&&(T.rr_dataURL=t)}if("img"===E&&u){Ol||(Ol=n.createElement("canvas"),Dl=Ol.getContext("2d"));const t=e,o=t.crossOrigin;t.crossOrigin="anonymous";const r=()=>{t.removeEventListener("load",r);try{Ol.width=t.naturalWidth,Ol.height=t.naturalHeight,Dl.drawImage(t,0,0),T.rr_dataURL=Ol.toDataURL(d.type,d.quality)}catch(e){console.warn(`Cannot inline img src=${t.currentSrc}! Error: ${e}`)}o?T.crossOrigin=o:t.removeAttribute("crossorigin")};t.complete&&0!==t.naturalWidth?r():t.addEventListener("load",r)}"audio"!==E&&"video"!==E||(T.rr_mediaState=e.paused?"paused":"played",T.rr_mediaCurrentTime=e.currentTime);g||(e.scrollLeft&&(T.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(T.rr_scrollTop=e.scrollTop));if(b){const{width:t,height:n}=e.getBoundingClientRect();T={class:T.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==E||m(T.src)||(e.contentDocument||(T.rr_src=T.src),delete T.src);let x;try{customElements.get(E)&&(x=!0)}catch(e){}return{type:vl.Element,tagName:E,attributes:T,childNodes:[],isSVG:Gl(e)||void 0,needBlock:b,rootId:h,isCustom:x}}(e,{doc:n,blockClass:r,blockSelector:i,unblockSelector:s,inlineStylesheet:m,maskAttributeFn:l,maskInputOptions:g,maskInputFn:f,dataURLOptions:_,inlineImages:v,recordCanvas:y,keepIframeSrcFn:w,newlyAddedElement:b,rootId:E,maskAllText:a,maskTextClass:c,unmaskTextClass:d,maskTextSelector:u,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:o,unmaskTextClass:r,maskTextSelector:i,unmaskTextSelector:s,maskTextFn:a,maskInputOptions:l,maskInputFn:c,rootId:d}=t,u=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const m="STYLE"===u||void 0,g="SCRIPT"===u||void 0,h="TEXTAREA"===u||void 0;if(m&&p){try{e.nextSibling||e.previousSibling||_l([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(p=bl(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}p=zl(p,ql())}g&&(p="SCRIPT_PLACEHOLDER");const f=Xl(e,o,i,r,s,n);m||g||h||!p||!f||(p=a?a(p,e.parentElement):p.replace(/[\S]/g,"*"));h&&p&&(l.textarea||f)&&(p=c?c(p,e.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===u&&p){p=xl({isMasked:Xl(e,o,i,r,s,Sl({type:null,tagName:u,maskInputOptions:l})),element:e,value:p,maskInputFn:c})}return{type:vl.Text,textContent:p||"",isStyle:m,rootId:d}}(e,{maskAllText:a,maskTextClass:c,unmaskTextClass:d,maskTextSelector:u,unmaskTextSelector:p,maskTextFn:h,maskInputOptions:g,maskInputFn:f,rootId:E});case e.CDATA_SECTION_NODE:return{type:vl.CDATA,textContent:"",rootId:E};case e.COMMENT_NODE:return{type:vl.Comment,textContent:e.textContent||"",rootId:E};default:return!1}}function Jl(e){return null==e?"":e.toLowerCase()}function ec(e,t){const{doc:n,mirror:o,blockClass:r,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:u,skipChild:p=!1,inlineStylesheet:m=!0,maskInputOptions:g={},maskAttributeFn:h,maskTextFn:f,maskInputFn:_,slimDOMOptions:v,dataURLOptions:y={},inlineImages:w=!1,recordCanvas:b=!1,onSerialize:E,onIframeLoad:T,iframeLoadTimeout:S=5e3,onStylesheetLoad:x,stylesheetLoadTimeout:$=5e3,keepIframeSrcFn:C=(()=>!1),newlyAddedElement:k=!1}=t;let{preserveWhiteSpace:L=!0}=t;const I=Ql(e,{doc:n,mirror:o,blockClass:r,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:u,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:h,maskTextFn:f,maskInputFn:_,dataURLOptions:y,inlineImages:w,recordCanvas:b,keepIframeSrcFn:C,newlyAddedElement:k});if(!I)return console.warn(e,"not serialized"),null;let A;A=o.hasNode(e)?o.getId(e):!function(e,t){if(t.comment&&e.type===vl.Comment)return!0;if(e.type===vl.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Jl(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Jl(e.attributes.name)||"icon"===Jl(e.attributes.rel)||"apple-touch-icon"===Jl(e.attributes.rel)||"shortcut icon"===Jl(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Jl(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Jl(e.attributes.property).match(/^(og|twitter|fb):/)||Jl(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Jl(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Jl(e.attributes.name)||"googlebot"===Jl(e.attributes.name)||"bingbot"===Jl(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Jl(e.attributes.name)||"generator"===Jl(e.attributes.name)||"framework"===Jl(e.attributes.name)||"publisher"===Jl(e.attributes.name)||"progid"===Jl(e.attributes.name)||Jl(e.attributes.property).match(/^article:/)||Jl(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Jl(e.attributes.name)||"yandex-verification"===Jl(e.attributes.name)||"csrf-token"===Jl(e.attributes.name)||"p:domain_verify"===Jl(e.attributes.name)||"verify-v1"===Jl(e.attributes.name)||"verification"===Jl(e.attributes.name)||"shopify-checkout-api-token"===Jl(e.attributes.name)))return!0}}return!1}(I,v)&&(L||I.type!==vl.Text||I.isStyle||I.textContent.replace(/^\s+|\s+$/gm,"").length)?Nl():Ml;const R=Object.assign(I,{id:A});if(o.add(e,R),A===Ml)return null;E&&E(e);let M=!p;if(R.type===vl.Element){M=M&&!R.needBlock,delete R.needBlock;const t=e.shadowRoot;t&&wl(t)&&(R.isShadowHost=!0)}if((R.type===vl.Document||R.type===vl.Element)&&M){v.headWhitespace&&R.type===vl.Element&&"head"===R.tagName&&(L=!1);const t={doc:n,mirror:o,blockClass:r,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:u,skipChild:p,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:h,maskTextFn:f,maskInputFn:_,slimDOMOptions:v,dataURLOptions:y,inlineImages:w,recordCanvas:b,preserveWhiteSpace:L,onSerialize:E,onIframeLoad:T,iframeLoadTimeout:S,onStylesheetLoad:x,stylesheetLoadTimeout:$,keepIframeSrcFn:C};for(const n of Array.from(e.childNodes)){const e=ec(n,t);e&&R.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const o=ec(n,t);o&&(wl(e.shadowRoot)&&(o.isShadow=!0),R.childNodes.push(o))}}return e.parentNode&&yl(e.parentNode)&&wl(e.parentNode)&&(R.isShadow=!0),R.type===vl.Element&&"iframe"===R.tagName&&function(e,t,n){const o=e.contentWindow;if(!o)return;let r,i=!1;try{r=o.document.readyState}catch(e){return}if("complete"!==r){const o=setTimeout((()=>{i||(t(),i=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(o),i=!0,t()}))}const s="about:blank";if(o.location.href!==s||e.src===s||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&T){const n=ec(t,{doc:t,mirror:o,blockClass:r,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:h,maskTextFn:f,maskInputFn:_,slimDOMOptions:v,dataURLOptions:y,inlineImages:w,recordCanvas:b,preserveWhiteSpace:L,onSerialize:E,onIframeLoad:T,iframeLoadTimeout:S,onStylesheetLoad:x,stylesheetLoadTimeout:$,keepIframeSrcFn:C});n&&T(e,n)}}),S),R.type===vl.Element&&"link"===R.tagName&&"stylesheet"===R.attributes.rel&&function(e,t,n){let o,r=!1;try{o=e.sheet}catch(e){return}if(o)return;const i=setTimeout((()=>{r||(t(),r=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(i),r=!0,t()}))}(e,(()=>{if(x){const t=ec(e,{doc:n,mirror:o,blockClass:r,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:h,maskTextFn:f,maskInputFn:_,slimDOMOptions:v,dataURLOptions:y,inlineImages:w,recordCanvas:b,preserveWhiteSpace:L,onSerialize:E,onIframeLoad:T,iframeLoadTimeout:S,onStylesheetLoad:x,stylesheetLoadTimeout:$,keepIframeSrcFn:C});t&&x(e,t)}}),$),R}function tc(e){let t,n=e[0],o=1;for(;o<e.length;){const r=e[o],i=e[o+1];if(o+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}function nc(e,t,n=document){const o={capture:!0,passive:!0};return n.addEventListener(e,t,o),()=>n.removeEventListener(e,t,o)}const oc="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let rc={map:{},getId:()=>(console.error(oc),-1),getNode:()=>(console.error(oc),null),removeNodeFromMap(){console.error(oc)},has:()=>(console.error(oc),!1),reset(){console.error(oc)}};function ic(e,t,n={}){let o=null,r=0;return function(...i){const s=Date.now();r||!1!==n.leading||(r=s);const a=t-(s-r),l=this;a<=0||a>t?(o&&(!function(...e){xc("clearTimeout")(...e)}(o),o=null),r=s,e.apply(l,i)):o||!1===n.trailing||(o=$c((()=>{r=!1===n.leading?0:Date.now(),o=null,e.apply(l,i)}),a))}}function sc(e,t,n,o,r=window){const i=r.Object.getOwnPropertyDescriptor(e,t);return r.Object.defineProperty(e,t,o?n:{set(e){$c((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>sc(e,t,i||{},!0)}function ac(e,t,n){try{if(!(t in e))return()=>{};const o=e[t],r=n(o);return"function"==typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:o}})),e[t]=r,()=>{e[t]=o}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(rc=new Proxy(rc,{get:(e,t,n)=>("map"===t&&console.error(oc),Reflect.get(e,t,n))}));let lc=Date.now;function cc(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:tc([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||tc([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||tc([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:tc([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||tc([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||tc([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function dc(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function uc(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function pc(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}function mc(e,t,n,o,r){if(!e)return!1;const i=pc(e);if(!i)return!1;const s=Zl(t,n);if(!r){const e=o&&i.matches(o);return s(i)&&!e}const a=Kl(i,s);let l=-1;return!(a<0)&&(o&&(l=Kl(i,Zl(null,o))),a>-1&&l<0||a<l)}function gc(e,t){return t.getId(e)===Ml}function hc(e,t){if(yl(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||hc(e.parentNode,t))}function fc(e){return Boolean(e.changedTouches)}function _c(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function vc(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function yc(e){return Boolean(tc([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(lc=()=>(new Date).getTime());class wc{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return t=this.styleIDMap.get(e),n=()=>-1,null!=t?t:n();var t,n}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function bc(e){let t=null;return tc([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Ec(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=bc(n);)n=t;return n}(e);return t.contains(n)}function Tc(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||Ec(e))}const Sc={};function xc(e){const t=Sc[e];if(t)return t;const n=window.document;let o=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const r=t.contentWindow;r&&r[e]&&(o=r[e]),n.head.removeChild(t)}catch(e){}return Sc[e]=o.bind(window)}function $c(...e){return xc("setTimeout")(...e)}var Cc=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Cc||{}),kc=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(kc||{}),Lc=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Lc||{}),Ic=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Ic||{});function Ac(e){let t,n=e[0],o=1;for(;o<e.length;){const r=e[o],i=e[o+1];if(o+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}function Rc(e){return"__ln"in e}class Mc{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=Ac([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Rc(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&Rc(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Nc=(e,t)=>`${e}@${t}`;class Oc{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new Mc,o=e=>{let t=e,n=Ml;for(;n===Ml;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},r=r=>{if(!r.parentNode||!Tc(r))return;const i=yl(r.parentNode)?this.mirror.getId(bc(r)):this.mirror.getId(r.parentNode),s=o(r);if(-1===i||-1===s)return n.addNode(r);const a=ec(r,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{_c(e,this.mirror)&&this.iframeManager.addIframe(e),vc(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),yc(r)&&this.shadowDomManager.addShadowRoot(r.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});a&&(e.push({parentId:i,nextId:s,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)Pc(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||r(e);for(const e of this.addedSet)Bc(this.droppedSet,e)||Pc(this.removes,e,this.mirror)?Bc(this.movedSet,e)?r(e):this.droppedSet.add(e):r(e);let i=null;for(;n.length;){let e=null;if(i){const t=this.mirror.getId(i.value.parentNode),n=o(i.value);-1!==t&&-1!==n&&(e=i)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===o(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const o=t.parentNode.host;if(-1!==this.mirror.getId(o)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}i=e.previous,n.removeNode(e.value),r(e.value)}const s={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),o=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+o).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(s.texts.length||s.attributes.length||s.removes.length||s.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(s))},this.processMutation=e=>{if(!gc(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;mc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:Xl(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,pc(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,o=e.target.getAttribute(n);if("value"===n){const n=Ll(t),r=t.tagName;o=Il(t,r,n);const i=Sl({maskInputOptions:this.maskInputOptions,tagName:r,type:n});o=xl({isMasked:Xl(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,i),element:t,value:o,maskInputFn:this.maskInputFn})}if(mc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||o===e.oldValue)return;let r=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(o)){if(t.contentDocument)return;n="rr_src"}if(r||(r={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(r),this.attributeMap.set(e.target,r)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!Yl(t.tagName,n)&&(r.attributes[n]=Vl(this.doc,$l(t.tagName),$l(n),o,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const o=t.style.getPropertyValue(e),i=t.style.getPropertyPriority(e);o!==n.style.getPropertyValue(e)||i!==n.style.getPropertyPriority(e)?r.styleDiff[e]=""===i?o:[o,i]:r._unchangedStyles[e]=[o,i]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(r.styleDiff[e]=!1)}break}case"childList":if(mc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),o=yl(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);mc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||gc(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(Dc(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||hc(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Nc(n,o)]?Dc(this.movedSet,t):this.removes.push({parentId:o,id:n,isShadow:!(!yl(e.target)||!wl(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(gc(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[Nc(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);mc(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),yc(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Dc(e,t){e.delete(t),t.childNodes.forEach((t=>Dc(e,t)))}function Pc(e,t,n){return 0!==e.length&&Uc(e,t,n)}function Uc(e,t,n){const{parentNode:o}=t;if(!o)return!1;const r=n.getId(o);return!!e.some((e=>e.id===r))||Uc(e,o,n)}function Bc(e,t){return 0!==e.size&&Wc(e,t)}function Wc(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||Wc(e,n))}let zc;const Fc=e=>{if(!zc)return e;return(...t)=>{try{return e(...t)}catch(e){if(zc&&!0===zc(e))return()=>{};throw e}}};function Hc(e){let t,n=e[0],o=1;for(;o<e.length;){const r=e[o],i=e[o+1];if(o+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const jc=[];function Gc(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function qc(e,t){const n=new Oc;jc.push(n),n.init(e);let o=window.MutationObserver||window.__rrMutationObserver;const r=Hc([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);r&&window[r]&&(o=window[r]);const i=new o(Fc((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function Vc({mouseInteractionCb:e,doc:t,mirror:n,blockClass:o,blockSelector:r,unblockSelector:i,sampling:s}){if(!1===s.mouseInteraction)return()=>{};const a=!0===s.mouseInteraction||void 0===s.mouseInteraction?{}:s.mouseInteraction,l=[];let c=null;return Object.keys(Lc).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((s=>{let a=$l(s);const d=(t=>s=>{const a=Gc(s);if(mc(a,o,r,i,!0))return;let l=null,d=t;if("pointerType"in s){switch(s.pointerType){case"mouse":l=Ic.Mouse;break;case"touch":l=Ic.Touch;break;case"pen":l=Ic.Pen}l===Ic.Touch?Lc[t]===Lc.MouseDown?d="TouchStart":Lc[t]===Lc.MouseUp&&(d="TouchEnd"):Ic.Pen}else fc(s)&&(l=Ic.Touch);null!==l?(c=l,(d.startsWith("Touch")&&l===Ic.Touch||d.startsWith("Mouse")&&l===Ic.Mouse)&&(l=null)):Lc[t]===Lc.Click&&(l=c,c=null);const u=fc(s)?s.changedTouches[0]:s;if(!u)return;const p=n.getId(a),{clientX:m,clientY:g}=u;Fc(e)({type:Lc[d],id:p,x:m,y:g,...null!==l&&{pointerType:l}})})(s);if(window.PointerEvent)switch(Lc[s]){case Lc.MouseDown:case Lc.MouseUp:a=a.replace("mouse","pointer");break;case Lc.TouchStart:case Lc.TouchEnd:return}l.push(nc(a,d,t))})),Fc((()=>{l.forEach((e=>e()))}))}function Yc({scrollCb:e,doc:t,mirror:n,blockClass:o,blockSelector:r,unblockSelector:i,sampling:s}){return nc("scroll",Fc(ic(Fc((s=>{const a=Gc(s);if(!a||mc(a,o,r,i,!0))return;const l=n.getId(a);if(a===t&&t.defaultView){const n=cc(t.defaultView);e({id:l,x:n.left,y:n.top})}else e({id:l,x:a.scrollLeft,y:a.scrollTop})})),s.scroll||100)),t)}const Kc=["INPUT","TEXTAREA","SELECT"],Zc=new WeakMap;function Xc({inputCb:e,doc:t,mirror:n,blockClass:o,blockSelector:r,unblockSelector:i,ignoreClass:s,ignoreSelector:a,maskInputOptions:l,maskInputFn:c,sampling:d,userTriggeredOnInput:u,maskTextClass:p,unmaskTextClass:m,maskTextSelector:g,unmaskTextSelector:h}){function f(e){let n=Gc(e);const d=e.isTrusted,f=n&&Cl(n.tagName);if("OPTION"===f&&(n=n.parentElement),!n||!f||Kc.indexOf(f)<0||mc(n,o,r,i,!0))return;const v=n;if(v.classList.contains(s)||a&&v.matches(a))return;const y=Ll(n);let w=Il(v,f,y),b=!1;const E=Sl({maskInputOptions:l,tagName:f,type:y}),T=Xl(n,p,g,m,h,E);"radio"!==y&&"checkbox"!==y||(b=n.checked),w=xl({isMasked:T,element:n,value:w,maskInputFn:c}),_(n,u?{text:w,isChecked:b,userTriggered:d}:{text:w,isChecked:b});const S=n.name;"radio"===y&&S&&b&&t.querySelectorAll(`input[type="radio"][name="${S}"]`).forEach((e=>{if(e!==n){const t=xl({isMasked:T,element:e,value:Il(e,f,y),maskInputFn:c});_(e,u?{text:t,isChecked:!b,userTriggered:!1}:{text:t,isChecked:!b})}}))}function _(t,o){const r=Zc.get(t);if(!r||r.text!==o.text||r.isChecked!==o.isChecked){Zc.set(t,o);const r=n.getId(t);Fc(e)({...o,id:r})}}const v=("last"===d.input?["change"]:["input","change"]).map((e=>nc(e,Fc(f),t))),y=t.defaultView;if(!y)return()=>{v.forEach((e=>e()))};const w=y.Object.getOwnPropertyDescriptor(y.HTMLInputElement.prototype,"value"),b=[[y.HTMLInputElement.prototype,"value"],[y.HTMLInputElement.prototype,"checked"],[y.HTMLSelectElement.prototype,"value"],[y.HTMLTextAreaElement.prototype,"value"],[y.HTMLSelectElement.prototype,"selectedIndex"],[y.HTMLOptionElement.prototype,"selected"]];return w&&w.set&&v.push(...b.map((e=>sc(e[0],e[1],{set(){Fc(f)({target:this,isTrusted:!1})}},!1,y)))),Fc((()=>{v.forEach((e=>e()))}))}function Qc(e){return function(e,t){if(nd("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||nd("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||nd("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||nd("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Jc(e,t,n){let o,r;return e?(e.ownerNode?o=t.getId(e.ownerNode):r=n.getId(e),{styleId:r,id:o}):{}}function ed({mirror:e,stylesheetManager:t},n){let o=null;o="#document"===n.nodeName?e.getId(n):e.getId(n.host);const r="#document"===n.nodeName?Hc([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):Hc([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),i=Hc([r,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(Hc([r,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==o&&-1!==o&&r&&i?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return Hc([i,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=Hc([i,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==o&&-1!==o)try{t.adoptStyleSheets(e,o)}catch(e){}return n}}),Fc((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))):()=>{}}function td(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const o=qc(e,e.doc),r=function({mousemoveCb:e,sampling:t,doc:n,mirror:o}){if(!1===t.mousemove)return()=>{};const r="number"==typeof t.mousemove?t.mousemove:50,i="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let s,a=[];const l=ic(Fc((t=>{const n=Date.now()-s;e(a.map((e=>(e.timeOffset-=n,e))),t),a=[],s=null})),i),c=Fc(ic(Fc((e=>{const t=Gc(e),{clientX:n,clientY:r}=fc(e)?e.changedTouches[0]:e;s||(s=lc()),a.push({x:n,y:r,id:o.getId(t),timeOffset:lc()-s}),l("undefined"!=typeof DragEvent&&e instanceof DragEvent?kc.Drag:e instanceof MouseEvent?kc.MouseMove:kc.TouchMove)})),r,{trailing:!1})),d=[nc("mousemove",c,n),nc("touchmove",c,n),nc("drag",c,n)];return Fc((()=>{d.forEach((e=>e()))}))}(e),i=Vc(e),s=Yc(e),a=function({viewportResizeCb:e},{win:t}){let n=-1,o=-1;return nc("resize",Fc(ic(Fc((()=>{const t=dc(),r=uc();n===t&&o===r||(e({width:Number(r),height:Number(t)}),n=t,o=r)})),200)),t)}(e,{win:n}),l=Xc(e),c=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:o,mirror:r,sampling:i,doc:s}){const a=Fc((s=>ic(Fc((i=>{const a=Gc(i);if(!a||mc(a,t,n,o,!0))return;const{currentTime:l,volume:c,muted:d,playbackRate:u}=a;e({type:s,id:r.getId(a),currentTime:l,volume:c,muted:d,playbackRate:u})})),i.media||500))),l=[nc("play",a(0),s),nc("pause",a(1),s),nc("seeked",a(2),s),nc("volumechange",a(3),s),nc("ratechange",a(4),s)];return Fc((()=>{l.forEach((e=>e()))}))}(e),d=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:o}){if(!o.CSSStyleSheet||!o.CSSStyleSheet.prototype)return()=>{};const r=o.CSSStyleSheet.prototype.insertRule;o.CSSStyleSheet.prototype.insertRule=new Proxy(r,{apply:Fc(((o,r,i)=>{const[s,a]=i,{id:l,styleId:c}=Jc(r,t,n.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:s,index:a}]}),o.apply(r,i)}))});const i=o.CSSStyleSheet.prototype.deleteRule;let s,a;o.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:Fc(((o,r,i)=>{const[s]=i,{id:a,styleId:l}=Jc(r,t,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,removes:[{index:s}]}),o.apply(r,i)}))}),o.CSSStyleSheet.prototype.replace&&(s=o.CSSStyleSheet.prototype.replace,o.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:Fc(((o,r,i)=>{const[s]=i,{id:a,styleId:l}=Jc(r,t,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,replace:s}),o.apply(r,i)}))})),o.CSSStyleSheet.prototype.replaceSync&&(a=o.CSSStyleSheet.prototype.replaceSync,o.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:Fc(((o,r,i)=>{const[s]=i,{id:a,styleId:l}=Jc(r,t,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,replaceSync:s}),o.apply(r,i)}))}));const l={};od("CSSGroupingRule")?l.CSSGroupingRule=o.CSSGroupingRule:(od("CSSMediaRule")&&(l.CSSMediaRule=o.CSSMediaRule),od("CSSConditionRule")&&(l.CSSConditionRule=o.CSSConditionRule),od("CSSSupportsRule")&&(l.CSSSupportsRule=o.CSSSupportsRule));const c={};return Object.entries(l).forEach((([o,r])=>{c[o]={insertRule:r.prototype.insertRule,deleteRule:r.prototype.deleteRule},r.prototype.insertRule=new Proxy(c[o].insertRule,{apply:Fc(((o,r,i)=>{const[s,a]=i,{id:l,styleId:c}=Jc(r.parentStyleSheet,t,n.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:s,index:[...Qc(r),a||0]}]}),o.apply(r,i)}))}),r.prototype.deleteRule=new Proxy(c[o].deleteRule,{apply:Fc(((o,r,i)=>{const[s]=i,{id:a,styleId:l}=Jc(r.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,removes:[{index:[...Qc(r),s]}]}),o.apply(r,i)}))})})),Fc((()=>{o.CSSStyleSheet.prototype.insertRule=r,o.CSSStyleSheet.prototype.deleteRule=i,s&&(o.CSSStyleSheet.prototype.replace=s),a&&(o.CSSStyleSheet.prototype.replaceSync=a),Object.entries(l).forEach((([e,t])=>{t.prototype.insertRule=c[e].insertRule,t.prototype.deleteRule=c[e].deleteRule}))}))}(e,{win:n}),u=ed(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:o},{win:r}){const i=r.CSSStyleDeclaration.prototype.setProperty;r.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:Fc(((r,s,a)=>{const[l,c,d]=a;if(n.has(l))return i.apply(s,[l,c,d]);const{id:u,styleId:p}=Jc(Hc([s,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,o.styleMirror);return(u&&-1!==u||p&&-1!==p)&&e({id:u,styleId:p,set:{property:l,value:c,priority:d},index:Qc(s.parentRule)}),r.apply(s,a)}))});const s=r.CSSStyleDeclaration.prototype.removeProperty;return r.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:Fc(((r,i,a)=>{const[l]=a;if(n.has(l))return s.apply(i,[l]);const{id:c,styleId:d}=Jc(Hc([i,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,o.styleMirror);return(c&&-1!==c||d&&-1!==d)&&e({id:c,styleId:d,remove:{property:l},index:Qc(i.parentRule)}),r.apply(i,a)}))}),Fc((()=>{r.CSSStyleDeclaration.prototype.setProperty=i,r.CSSStyleDeclaration.prototype.removeProperty=s}))}(e,{win:n}),m=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const o=[],r=new WeakMap,i=n.FontFace;n.FontFace=function(e,t,n){const o=new i(e,t,n);return r.set(o,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),o};const s=ac(t.fonts,"add",(function(t){return function(n){return $c(Fc((()=>{const t=r.get(n);t&&(e(t),r.delete(n))})),0),t.apply(this,[n])}}));return o.push((()=>{n.FontFace=i})),o.push(s),Fc((()=>{o.forEach((e=>e()))}))}(e):()=>{},g=function(e){const{doc:t,mirror:n,blockClass:o,blockSelector:r,unblockSelector:i,selectionCb:s}=e;let a=!0;const l=Fc((()=>{const e=t.getSelection();if(!e||a&&Hc([e,"optionalAccess",e=>e.isCollapsed]))return;a=e.isCollapsed||!1;const l=[],c=e.rangeCount||0;for(let t=0;t<c;t++){const s=e.getRangeAt(t),{startContainer:a,startOffset:c,endContainer:d,endOffset:u}=s;mc(a,o,r,i,!0)||mc(d,o,r,i,!0)||l.push({start:n.getId(a),startOffset:c,end:n.getId(d),endOffset:u})}s({ranges:l})}));return l(),nc("selectionchange",l)}(e),h=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?ac(n.customElements,"define",(function(e){return function(n,o,r){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,o,r])}})):()=>{}}(e),f=[];for(const t of e.plugins)f.push(t.observer(t.callback,n,t.options));return Fc((()=>{jc.forEach((e=>e.reset())),o.disconnect(),r(),i(),s(),a(),l(),c(),d(),u(),p(),m(),g(),h(),f.forEach((e=>e()))}))}function nd(e){return void 0!==window[e]}function od(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class rd{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,o){const r=n||this.getIdToRemoteIdMap(e),i=o||this.getRemoteIdToIdMap(e);let s=r.get(t);return s||(s=this.generateIdFn(),r.set(t,s),i.set(s,t)),s}getIds(e,t){const n=this.getIdToRemoteIdMap(e),o=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,o)))}getRemoteId(e,t,n){const o=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const r=o.get(t);return r||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function id(e){let t,n=e[0],o=1;for(;o<e.length;){const r=e[o],i=e[o+1];if(o+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}class sd{constructor(){this.crossOriginIframeMirror=new rd(Nl),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class ad{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new rd(Nl),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new rd(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),id([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const o=this.transformCrossOriginEvent(n,t.data.event);o&&this.wrappedEmit(o,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case Cc.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:Cc.IncrementalSnapshot,data:{source:kc.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Cc.Meta:case Cc.Load:case Cc.DomContentLoaded:return!1;case Cc.Plugin:return t;case Cc.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case Cc.IncrementalSnapshot:switch(t.data.source){case kc.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case kc.Drag:case kc.TouchMove:case kc.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case kc.ViewportResize:return!1;case kc.MediaInteraction:case kc.MouseInteraction:case kc.Scroll:case kc.CanvasMutation:case kc.Input:return this.replaceIds(t.data,e,["id"]),t;case kc.StyleSheetRule:case kc.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case kc.Font:return t;case kc.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case kc.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),id([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,o){for(const r of o)(Array.isArray(t[r])||"number"==typeof t[r])&&(Array.isArray(t[r])?t[r]=e.getIds(n,t[r]):t[r]=e.getId(n,t[r]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===vl.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class ld{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class cd{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!wl(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=qc({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Yc({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),$c((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(ed({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(ac(e.prototype,"attachShadow",(function(e){return function(o){const r=e.call(this,o);return this.shadowRoot&&Tc(this)&&n.addShadowRoot(this.shadowRoot,t),r}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class dd{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class ud{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new wc,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},o=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),o.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:El(e),index:t})))})),n.styleIds.push(e)}o.length>0&&(n.styles=o),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class pd{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){!function(...e){xc("requestAnimationFrame")(...e)}((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let md,gd;const hd=new Tl;function fd(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:o,blockClass:r="rr-block",blockSelector:i=null,unblockSelector:s=null,ignoreClass:a="rr-ignore",ignoreSelector:l=null,maskAllText:c=!1,maskTextClass:d="rr-mask",unmaskTextClass:u=null,maskTextSelector:p=null,unmaskTextSelector:m=null,inlineStylesheet:g=!0,maskAllInputs:h,maskInputOptions:f,slimDOMOptions:_,maskAttributeFn:v,maskInputFn:y,maskTextFn:w,maxCanvasSize:b=null,packFn:E,sampling:T={},dataURLOptions:S={},mousemoveWait:x,recordCanvas:$=!1,recordCrossOriginIframes:C=!1,recordAfter:k=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:L=!1,collectFonts:I=!1,inlineImages:A=!1,plugins:R,keepIframeSrcFn:M=(()=>!1),ignoreCSSAttributes:N=new Set([]),errorHandler:O,onMutation:D,getCanvasManager:P}=e;zc=O;const U=!C||window.parent===window;let B=!1;if(!U)try{window.parent.document&&(B=!1)}catch(e){B=!0}if(U&&!t)throw new Error("emit function is required");void 0!==x&&void 0===T.mousemove&&(T.mousemove=x),hd.reset();const W=!0===h?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==f?f:{},z=!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===_,headMetaDescKeywords:"all"===_}:_||{};let F;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let H=0;const j=e=>{for(const t of R||[])t.eventProcessor&&(e=t.eventProcessor(e));return E&&!B&&(e=E(e)),e};md=(e,r)=>{const i=e;if(i.timestamp=lc(),!Kr([jc,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||i.type===Cc.FullSnapshot||i.type===Cc.IncrementalSnapshot&&i.data.source===kc.Mutation||jc.forEach((e=>e.unfreeze())),U)Kr([t,"optionalCall",e=>e(j(i),r)]);else if(B){const e={type:"rrweb",event:j(i),origin:window.location.origin,isCheckout:r};window.parent.postMessage(e,"*")}if(i.type===Cc.FullSnapshot)F=i,H=0;else if(i.type===Cc.IncrementalSnapshot){if(i.data.source===kc.Mutation&&i.data.isAttachIframe)return;H++;const e=o&&H>=o,t=n&&F&&i.timestamp-F.timestamp>n;(e||t)&&J(!0)}};const G=e=>{md({type:Cc.IncrementalSnapshot,data:{source:kc.Mutation,...e}})},q=e=>md({type:Cc.IncrementalSnapshot,data:{source:kc.Scroll,...e}}),V=e=>md({type:Cc.IncrementalSnapshot,data:{source:kc.CanvasMutation,...e}}),Y=new ud({mutationCb:G,adoptedStyleSheetCb:e=>md({type:Cc.IncrementalSnapshot,data:{source:kc.AdoptedStyleSheet,...e}})}),K="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new sd:new ad({mirror:hd,mutationCb:G,stylesheetManager:Y,recordCrossOriginIframes:C,wrappedEmit:md});for(const e of R||[])e.getMirror&&e.getMirror({nodeMirror:hd,crossOriginIframeMirror:K.crossOriginIframeMirror,crossOriginIframeStyleMirror:K.crossOriginIframeStyleMirror});const Z=new pd,X=function(e,t){try{return e?e(t):new dd}catch(e){return console.warn("Unable to initialize CanvasManager"),new dd}}(P,{mirror:hd,win:window,mutationCb:e=>md({type:Cc.IncrementalSnapshot,data:{source:kc.CanvasMutation,...e}}),recordCanvas:$,blockClass:r,blockSelector:i,unblockSelector:s,maxCanvasSize:b,sampling:T.canvas,dataURLOptions:S,errorHandler:O}),Q="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new ld:new cd({mutationCb:G,scrollCb:q,bypassOptions:{onMutation:D,blockClass:r,blockSelector:i,unblockSelector:s,maskAllText:c,maskTextClass:d,unmaskTextClass:u,maskTextSelector:p,unmaskTextSelector:m,inlineStylesheet:g,maskInputOptions:W,dataURLOptions:S,maskAttributeFn:v,maskTextFn:w,maskInputFn:y,recordCanvas:$,inlineImages:A,sampling:T,slimDOMOptions:z,iframeManager:K,stylesheetManager:Y,canvasManager:X,keepIframeSrcFn:M,processedNodeManager:Z},mirror:hd}),J=(e=!1)=>{md({type:Cc.Meta,data:{href:window.location.href,width:uc(),height:dc()}},e),Y.reset(),Q.init(),jc.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new Tl,blockClass:o="rr-block",blockSelector:r=null,unblockSelector:i=null,maskAllText:s=!1,maskTextClass:a="rr-mask",unmaskTextClass:l=null,maskTextSelector:c=null,unmaskTextSelector:d=null,inlineStylesheet:u=!0,inlineImages:p=!1,recordCanvas:m=!1,maskAllInputs:g=!1,maskAttributeFn:h,maskTextFn:f,maskInputFn:_,slimDOM:v=!1,dataURLOptions:y,preserveWhiteSpace:w,onSerialize:b,onIframeLoad:E,iframeLoadTimeout:T,onStylesheetLoad:S,stylesheetLoadTimeout:x,keepIframeSrcFn:$=(()=>!1)}=t||{};return ec(e,{doc:e,mirror:n,blockClass:o,blockSelector:r,unblockSelector:i,maskAllText:s,maskTextClass:a,unmaskTextClass:l,maskTextSelector:c,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:u,maskInputOptions:!0===g?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===g?{}:g,maskAttributeFn:h,maskTextFn:f,maskInputFn:_,slimDOMOptions:!0===v||"all"===v?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===v,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===v?{}:v,dataURLOptions:y,inlineImages:p,recordCanvas:m,preserveWhiteSpace:w,onSerialize:b,onIframeLoad:E,iframeLoadTimeout:T,onStylesheetLoad:S,stylesheetLoadTimeout:x,keepIframeSrcFn:$,newlyAddedElement:!1})}(document,{mirror:hd,blockClass:r,blockSelector:i,unblockSelector:s,maskAllText:c,maskTextClass:d,unmaskTextClass:u,maskTextSelector:p,unmaskTextSelector:m,inlineStylesheet:g,maskAllInputs:W,maskAttributeFn:v,maskInputFn:y,maskTextFn:w,slimDOM:z,dataURLOptions:S,recordCanvas:$,inlineImages:A,onSerialize:e=>{_c(e,hd)&&K.addIframe(e),vc(e,hd)&&Y.trackLinkElement(e),yc(e)&&Q.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{K.attachIframe(e,t),Q.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{Y.attachLinkElement(e,t)},keepIframeSrcFn:M});if(!t)return console.warn("Failed to snapshot the document");md({type:Cc.FullSnapshot,data:{node:t,initialOffset:cc(window)}}),jc.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Y.adoptStyleSheets(document.adoptedStyleSheets,hd.getId(document))};gd=J;try{const e=[],t=e=>Fc(td)({onMutation:D,mutationCb:G,mousemoveCb:(e,t)=>md({type:Cc.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>md({type:Cc.IncrementalSnapshot,data:{source:kc.MouseInteraction,...e}}),scrollCb:q,viewportResizeCb:e=>md({type:Cc.IncrementalSnapshot,data:{source:kc.ViewportResize,...e}}),inputCb:e=>md({type:Cc.IncrementalSnapshot,data:{source:kc.Input,...e}}),mediaInteractionCb:e=>md({type:Cc.IncrementalSnapshot,data:{source:kc.MediaInteraction,...e}}),styleSheetRuleCb:e=>md({type:Cc.IncrementalSnapshot,data:{source:kc.StyleSheetRule,...e}}),styleDeclarationCb:e=>md({type:Cc.IncrementalSnapshot,data:{source:kc.StyleDeclaration,...e}}),canvasMutationCb:V,fontCb:e=>md({type:Cc.IncrementalSnapshot,data:{source:kc.Font,...e}}),selectionCb:e=>{md({type:Cc.IncrementalSnapshot,data:{source:kc.Selection,...e}})},customElementCb:e=>{md({type:Cc.IncrementalSnapshot,data:{source:kc.CustomElement,...e}})},blockClass:r,ignoreClass:a,ignoreSelector:l,maskAllText:c,maskTextClass:d,unmaskTextClass:u,maskTextSelector:p,unmaskTextSelector:m,maskInputOptions:W,inlineStylesheet:g,sampling:T,recordCanvas:$,inlineImages:A,userTriggeredOnInput:L,collectFonts:I,doc:e,maskAttributeFn:v,maskInputFn:y,maskTextFn:w,keepIframeSrcFn:M,blockSelector:i,unblockSelector:s,slimDOMOptions:z,dataURLOptions:S,mirror:hd,iframeManager:K,stylesheetManager:Y,shadowDomManager:Q,processedNodeManager:Z,canvasManager:X,ignoreCSSAttributes:N,plugins:Kr([R,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>md({type:Cc.Plugin,data:{plugin:e.name,payload:t}})})))])||[]},{});K.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{J(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(nc("DOMContentLoaded",(()=>{md({type:Cc.DomContentLoaded,data:{}}),"DOMContentLoaded"===k&&n()}))),e.push(nc("load",(()=>{md({type:Cc.Load,data:{}}),"load"===k&&n()}),window))),()=>{e.forEach((e=>e())),Z.destroy(),gd=void 0,zc=void 0}}catch(e){console.warn(e)}}fd.mirror=hd,fd.takeFullSnapshot=function(e){if(!gd)throw new Error("please take full snapshot after start recording");gd(e)};const _d=3;function vd(e){return e>9999999999?e:1e3*e}function yd(e){return e>9999999999?e/1e3:e}function wd(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:Cc.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:lr(t,10,1e3)}}),"console"===t.category))))}const bd="button,a";function Ed(e){return e.closest(bd)||e}function Td(e){const t=Sd(e);return t&&t instanceof Element?Ed(t):t}function Sd(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let xd;function $d(e){return xd||(xd=[],to(cl,"open",(function(e){return function(...t){if(xd)try{xd.forEach((e=>e()))}catch(e){}return e.apply(cl,t)}}))),xd.push(e),()=>{const t=xd?xd.indexOf(e):-1;t>-1&&xd.splice(t,1)}}class Cd{constructor(e,t,n=wd){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=$d((()=>{this._lastMutation=Ld()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!kd.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:yd(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=yd(e)}registerScroll(e=Date.now()){this._lastScroll=yd(e)}registerClick(e){const t=Ed(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=Ld();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,o=e.mutationAfter&&e.mutationAfter<=this._threshold,r=!n&&!o,{clickCount:i,clickBreadcrumb:s}=e;if(r){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),o=n<1e3*this._timeout?"mutation":"timeout",r={type:"default",message:s.message,timestamp:s.timestamp,category:"ui.slowClickDetected",data:{...s.data,url:cl.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:o,clickCount:i||1}};this._addBreadcrumbEvent(t,r)}else if(i>1){const e={type:"default",message:s.message,timestamp:s.timestamp,category:"ui.multiClick",data:{...s.data,url:cl.location.href,route:t.getCurrentRoute(),clickCount:i,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const kd=["A","BUTTON","INPUT"];function Ld(){return Date.now()/1e3}function Id(e,t){try{if(!function(e){return e.type===_d}(t))return;const{source:n}=t.data;if(n===kc.Mutation&&e.registerMutation(t.timestamp),n===kc.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===kc.MouseInteraction}(t)){const{type:n,id:o}=t.data,r=fd.mirror.getNode(o);r instanceof HTMLElement&&n===Lc.Click&&e.registerClick(r)}}catch(e){}}function Ad(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Rd;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Rd||(Rd={}));const Md=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Nd(e){const t={};for(const n in e)if(Md.has(n)){let o=n;"data-testid"!==n&&"data-test-id"!==n||(o="testId"),t[o]=e[n]}return t}const Od=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,o=null;try{o=t?Td(e.event):Sd(e.event),n=Fn(o,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:o,message:n}}(e);return Ad({category:`ui.${e.name}`,...Dd(t,n)})}(t);if(!n)return;const o="click"===t.name,r=o?t.event:void 0;var i,s,a;!(o&&e.clickDetector&&r&&r.target)||r.altKey||r.metaKey||r.ctrlKey||r.shiftKey||(i=e.clickDetector,s=n,a=Td(t.event),i.handleClick(s,a)),wd(e,n)};function Dd(e,t){const n=fd.mirror.getId(e),o=n&&fd.mirror.getNode(n),r=o&&fd.mirror.getMeta(o),i=r&&function(e){return e.type===Rd.Element}(r)?r:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map((e=>e.type===Rd.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:Nd(i.attributes)}}:{}}}function Pd(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:o,altKey:r,key:i,target:s}=e;if(!s||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(s)||!i)return null;const a=t||o||r,l=1===i.length;if(!a&&l)return null;const c=Fn(s,{maxStringLength:200})||"<unknown>",d=Dd(s,c);return Ad({category:"ui.keyDown",message:c,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:o,altKey:r,key:i}})}(t);n&&wd(e,n)}const Ud={resource:function(e){const{entryType:t,initiatorType:n,name:o,responseEnd:r,startTime:i,decodedBodySize:s,encodedBodySize:a,responseStatus:l,transferSize:c}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:Wd(i),end:Wd(r),name:o,data:{size:c,statusCode:l,decodedBodySize:s,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:o,startTime:r}=e,i=Wd(r);return{type:n,name:o,start:i,end:i+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:o,duration:r,domComplete:i,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,domInteractive:c,loadEventStart:d,loadEventEnd:u,redirectCount:p,startTime:m,transferSize:g,type:h}=e;if(0===r)return null;return{type:`${t}.${h}`,start:Wd(m),end:Wd(i),name:n,data:{size:g,decodedBodySize:o,encodedBodySize:s,duration:r,domInteractive:c,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,loadEventStart:d,loadEventEnd:u,domComplete:i,redirectCount:p}}}};function Bd(e){return Ud[e.entryType]?Ud[e.entryType](e):null}function Wd(e){return((Nr||cl.performance.timeOrigin)+e)/1e3}function zd(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const o=[];return["navigation","paint","resource"].forEach((e=>{o.push(aa(e,n))})),o.push(sa((({metric:t})=>{e.replayPerformanceEntries.push(function(e){const t=e.entries,n=t[t.length-1],o=n?n.element:void 0,r=e.value,i=Wd(r);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:i,end:i,data:{value:r,size:r,nodeId:o?fd.mirror.getId(o):void 0}}}(t))}))),()=>{o.forEach((e=>e()))}}const Fd="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Hd='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function jd(e,t){Fd&&(Kn.info(e),t&&qd(e))}function Gd(e,t){Fd&&(Kn.info(e),t&&setTimeout((()=>{qd(e)}),0))}function qd(e){hi({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class Vd extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class Yd{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>hl)throw new Vd;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?vd(e):null}}class Kd{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){jd("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((o,r)=>{const i=({data:t})=>{const s=t;if(s.method===e&&s.id===n){if(this._worker.removeEventListener("message",i),!s.success)return Fd&&Kn.error("[Replay]",s.response),void r(new Error("Error in compression worker"));o(s.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class Zd{constructor(e){this._worker=new Kd(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=vd(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>hl?Promise.reject(new Vd):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{Fd&&Kn.warn('[Replay] Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class Xd{constructor(e){this._fallback=new Yd,this._compression=new Zd(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void jd("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const t of e)n.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n)}catch(e){Fd&&Kn.warn("[Replay] Failed to add events when switching buffers.",e)}}}function Qd({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob([Hd]);return URL.createObjectURL(e)}();return""}();if(!t)return;jd("[Replay] Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new Xd(n)}catch(e){jd("[Replay] Failed to create compression worker")}}(t);if(e)return e}return jd("[Replay] Using simple buffer"),new Yd}function Jd(){try{return"sessionStorage"in cl&&!!cl.sessionStorage}catch(e){return!1}}function eu(e){!function(){if(!Jd())return;try{cl.sessionStorage.removeItem(dl)}catch(e){}}(),e.session=void 0}function tu(e){return void 0!==e&&Math.random()<e}function nu(e){const t=Date.now();return{id:e.id||To(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function ou(e){if(Jd())try{cl.sessionStorage.setItem(dl,JSON.stringify(e))}catch(e){}}function ru({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:o}={}){const r=function(e,t){return tu(e)?"session":!!t&&"buffer"}(e,t),i=nu({sampled:r,previousSessionId:o});return n&&ou(i),i}function iu(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function su(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:o=Date.now()}){return iu(e.started,t,o)||iu(e.lastActivity,n,o)}function au(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!su(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function lu({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:o},r){const i=r.stickySession&&function(e){if(!Jd())return null;try{const t=cl.sessionStorage.getItem(dl);if(!t)return null;const n=JSON.parse(t);return Gd("[Replay] Loading existing session",e),nu(n)}catch(e){return null}}(e);return i?au(i,{sessionIdleExpire:t,maxReplayDuration:n})?(Gd("[Replay] Session in sessionStorage is expired, creating new one..."),ru(r,{previousSessionId:i.id})):i:(Gd("[Replay] Creating new session",e),ru(r,{previousSessionId:o}))}function cu(e,t,n){return!!uu(e,t)&&(du(e,t,n),!0)}async function du(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const o=function(e,t){try{if("function"==typeof t&&function(e){return e.type===Cc.Custom}(e))return t(e)}catch(e){return Fd&&Kn.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",e),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!o)return;return await e.eventBuffer.addEvent(o)}catch(t){const n=t&&t instanceof Vd?"addEventSizeExceeded":"addEvent";Fd&&Kn.error(t),await e.stop({reason:n});const o=_i();o&&o.recordDroppedEvent("internal_sdk_error","replay")}}function uu(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=vd(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(jd(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1))}function pu(e){return!e.type}function mu(e){return"transaction"===e.type}function gu(e){return"feedback"===e.type}function hu(e){const t=function(){const e=_i();if(!e)return!1;const t=e.getTransport();if(!t)return!1;return t.send.__sentry__baseTransport__||!1}();return(n,o)=>{if(!e.isEnabled()||!pu(n)&&!mu(n))return;const r=o&&o.statusCode;t&&(!r||r<200||r>=300)||(mu(n)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,n):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:o}=e.getOptions();if("function"==typeof o&&!o(t))return;setTimeout((()=>{e.sendBufferedReplayOrFlush()}))}(e,n))}}function fu(e){return t=>{e.isEnabled()&&pu(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){wd(e,Ad({category:"replay.hydrate-error"}))}}(e,t)}}function _u(e,t=!1){const n=t?hu(e):void 0;return Object.assign(((t,o)=>{if(!e.isEnabled())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!pu(t)&&!mu(t)&&!gu(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(gu(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:Cc.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,o)&&!e.getOptions()._experiments.captureExceptions)return Fd&&Kn.log("[Replay] Ignoring error from rrweb internals",t),null;const r=function(e,t){return"buffer"===e.recordingMode&&t.message!==pl&&!(!t.exception||t.type)&&tu(e.getOptions().errorSampleRate)}(e,t);return(r||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),n&&n(t,{statusCode:200}),t}),{id:"Replay"})}function vu(e,t){return t.map((({type:t,start:n,end:o,name:r,data:i})=>{const s=e.throttledAddEvent({type:Cc.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:r,startTimestamp:n,endTimestamp:o,data:i}}});return"string"==typeof s?Promise.resolve(null):s}))}function yu(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,o=Date.now()/1e3;return{type:"navigation.push",start:o,end:o,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(vu(e,[n]),!1))))}}function wu(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!Fd||!e.getOptions()._experiments.traceInternals)&&ds(t,_i())}(e,t.name)||e.addUpdate((()=>(vu(e,[t]),!0))))}function bu(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,xhr:o}=e,r=o[tr];if(!t||!n||!r)return null;const{method:i,url:s,status_code:a}=r;return void 0===s?null:{type:"resource.xhr",name:s,start:t/1e3,end:n/1e3,data:{method:i,statusCode:a}}}(t);wu(e,n)}}function Eu(e,t){if(e)try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Iu(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function Tu(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Su(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Iu(e)];if(!e)return[void 0]}catch(t){return Fd&&Kn.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Fd&&Kn.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function xu(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},o=n.warnings||[];return n.warnings=[...o,t],e._meta=n,e}function $u(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:o,url:r,method:i,statusCode:s,request:a,response:l}=t;return{type:e,start:n/1e3,end:o/1e3,name:r,data:lo({method:i,statusCode:s,request:a,response:l})}}function Cu(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function ku(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const o={headers:e,size:t},{body:r,warnings:i}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>ml,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,ml);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}â¦`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return o.body=r,i&&i.length>0&&(o._meta={warnings:i}),o}function Lu(e,t){return Object.keys(e).reduce(((n,o)=>{const r=o.toLowerCase();return t.includes(r)&&e[o]&&(n[r]=e[o]),n}),{})}function Iu(e){return new URLSearchParams(e).toString()}function Au(e,t){const n=function(e,t=cl.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(cl.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const o=n.href;if(!e.endsWith("/")&&o.endsWith("/"))return o.slice(0,-1);return o}(e);return An(n,t)}async function Ru(e,t,n){try{const o=await async function(e,t,n){const o=Date.now(),{startTimestamp:r=o,endTimestamp:i=o}=t,{url:s,method:a,status_code:l=0,request_body_size:c,response_body_size:d}=e.data,u=Au(s,n.networkDetailAllowUrls)&&!Au(s,n.networkDetailDenyUrls),p=u?function({networkCaptureBodies:e,networkRequestHeaders:t},n,o){const r=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return Ou(e[0],t);if(2===e.length)return Ou(e[1],t);return{}}(n,t):{};if(!e)return ku(r,o,void 0);const i=Mu(n),[s,a]=Su(i),l=ku(r,o,s);if(a)return xu(l,a);return l}(n,t.input,c):Cu(c),m=await async function(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:o},r,i){if(!e&&void 0!==i)return Cu(i);const s=r?Nu(r.headers,o):{};if(!r||!t&&void 0!==i)return ku(s,i,void 0);const[a,l]=await async function(e){const t=function(e){try{return e.clone()}catch(e){Fd&&Kn.warn("[Replay] Failed to clone response body",e)}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const o=setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(o)))}))}(t);return[e]}catch(e){return Fd&&Kn.warn("[Replay] Failed to get text body from response",e),[void 0,"BODY_PARSE_ERROR"]}}(r),c=function(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:o,captureDetails:r,headers:i}){try{const s=e&&e.length&&void 0===o?Eu(e,n):o;return r?ku(i,s,t?e:void 0):Cu(s)}catch(e){return Fd&&Kn.warn("[Replay] Failed to serialize response body",e),ku(i,o,void 0)}}(a,{networkCaptureBodies:t,textEncoder:n,responseBodySize:i,captureDetails:e,headers:s});if(l)return xu(c,l);return c}(u,n,t.response,d);return{startTimestamp:r,endTimestamp:i,url:s,method:a,statusCode:l,request:p,response:m}}(e,t,n),r=$u("resource.fetch",o);wu(n.replay,r)}catch(e){Fd&&Kn.error("[Replay] Failed to capture fetch breadcrumb",e)}}function Mu(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function Nu(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function Ou(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Nu(n,t):Array.isArray(n)?{}:Lu(n,t):{}}async function Du(e,t,n){try{const o=function(e,t,n){const o=Date.now(),{startTimestamp:r=o,endTimestamp:i=o,input:s,xhr:a}=t,{url:l,method:c,status_code:d=0,request_body_size:u,response_body_size:p}=e.data;if(!l)return null;if(!a||!Au(l,n.networkDetailAllowUrls)||Au(l,n.networkDetailDenyUrls)){return{startTimestamp:r,endTimestamp:i,url:l,method:c,statusCode:d,request:Cu(u),response:Cu(p)}}const m=a[tr],g=m?Lu(m.request_headers,n.networkRequestHeaders):{},h=Lu(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,o]=t.split(": ");return e[n.toLowerCase()]=o,e}),{})}(a),n.networkResponseHeaders),[f,_]=n.networkCaptureBodies?Su(s):[void 0],[v,y]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return Fd&&Kn.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Fd&&Kn.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return Fd&&Kn.warn("[Replay] Failed to get xhr response body",...t),[void 0]}(a):[void 0],w=ku(g,u,f),b=ku(h,p,v);return{startTimestamp:r,endTimestamp:i,url:l,method:c,statusCode:d,request:_?xu(w,_):w,response:y?xu(b,y):b}}(e,t,n),r=$u("resource.xhr",o);wu(n.replay,r)}catch(e){Fd&&Kn.error("[Replay] Failed to capture xhr breadcrumb",e)}}function Pu(e,t,n){const{xhr:o,input:r}=t;if(!o)return;const i=Eu(r,n.textEncoder),s=o.getResponseHeader("content-length")?Tu(o.getResponseHeader("content-length")):function(e,t,n){try{return Eu("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e,n)}catch(e){return}}(o.response,o.responseType,n.textEncoder);void 0!==i&&(e.data.request_body_size=i),void 0!==s&&(e.data.response_body_size=s)}function Uu(e){const t=_i();try{const n=new TextEncoder,{networkDetailAllowUrls:o,networkDetailDenyUrls:r,networkCaptureBodies:i,networkRequestHeaders:s,networkResponseHeaders:a}=e.getOptions(),l={replay:e,textEncoder:n,networkDetailAllowUrls:o,networkDetailDenyUrls:r,networkCaptureBodies:i,networkRequestHeaders:s,networkResponseHeaders:a};t&&t.on?t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(Pu(t,n,e),Du(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t,n){const{input:o,response:r}=t,i=Eu(o?Mu(o):void 0,n.textEncoder),s=r?Tu(r.headers.get("content-length")):void 0;void 0!==i&&(e.data.request_body_size=i),void 0!==s&&(e.data.response_body_size=s)}(t,n,e),Ru(t,n,e))}catch(e){Fd&&Kn.warn("Error when enriching network breadcrumb")}}(l,e,t))):(zo(function(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,fetchData:o,response:r}=e;if(!n)return null;const{method:i,url:s}=o;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:s,data:{method:i,statusCode:r?r.status:void 0}}}(t);wu(e,n)}}(e)),nr(bu(e)))}catch(e){}}let Bu=null;const Wu=e=>t=>{if(!e.isEnabled())return;const n=function(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();if(Bu===t||!t)return null;if(Bu=t,!function(e){return!!e.category}(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))return null;if("console"===t.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return Ad(e);let n=!1;const o=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>gl?(n=!0,`${e.slice(0,gl)}â¦`):e;if("object"==typeof e)try{const t=lr(e,7);return JSON.stringify(t).length>gl?(n=!0,`${JSON.stringify(t,null,2).slice(0,gl)}â¦`):t}catch(e){}return e}));return Ad({...e,data:{...e.data,arguments:o,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(t);return Ad(t)}(t);n&&wd(e,n)};function zu(e){const t=vi(),n=_i();t.addScopeListener(Wu(e)),Oo(Od(e)),Qo(yu(e)),Uu(e);const o=_u(e,!Fu(n));n&&n.addEventProcessor?n.addEventProcessor(o):function(e){const t=_i();t&&t.addEventProcessor&&t.addEventProcessor(e)}(o),Fu(n)&&(n.on("beforeSendEvent",fu(e)),n.on("afterSendEvent",hu(e)),n.on("createDsc",(t=>{const n=e.getSessionId();if(n&&e.isEnabled()&&"session"===e.recordingMode){e.checkAndHandleExpiredSession()&&(t.replay_id=n)}})),n.on("startTransaction",(t=>{e.lastTransaction=t})),n.on("finishTransaction",(t=>{e.lastTransaction=t})),n.on("beforeSendFeedback",((t,n)=>{const o=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&o&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=o)})))}function Fu(e){return!(!e||!e.on)}function Hu(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:o}=e,r=Date.now()/1e3;return{type:"memory",name:"memory",start:r,end:r,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:o}}}}function ju(e){let t=!1;return(n,o)=>{if(!e.checkAndHandleExpiredSession())return void(Fd&&Kn.warn("[Replay] Received replay event after session expired."));const r=o||!t;t=!0,e.clickDetector&&Id(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&r&&e.setInitialState(),!cu(e,n,r))return!0;if(!r)return!1;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;cu(e,function(e){const t=e.getOptions();return{type:Cc.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,r),e.session&&e.session.previousSessionId)return!0;if("buffer"===e.recordingMode&&e.session&&e.eventBuffer){const t=e.eventBuffer.getEarliestTimestamp();t&&(jd(`[Replay] Updating session start time to earliest event in buffer to ${new Date(t)}`,e.getOptions()._experiments.traceInternals),e.session.started=t,e.getOptions().stickySession&&ou(e.session))}return"session"===e.recordingMode&&e.flush(),!0}))}}async function Gu({recordingData:e,replayId:t,segmentId:n,eventContext:o,timestamp:r,session:i}){const s=function({recordingData:e,headers:t}){let n;const o=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${o}${e}`;else{const t=(new TextEncoder).encode(o);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:l,traceIds:c,initialTimestamp:d}=o,u=_i(),p=vi(),m=u&&u.getTransport(),g=u&&u.getDsn();if(!(u&&m&&g&&i.sampled))return;const h={type:ul,replay_start_timestamp:d/1e3,timestamp:r/1e3,error_ids:l,trace_ids:c,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},f=await async function({client:e,scope:t,replayId:n,event:o}){const r={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit&&e.emit("preprocessEvent",o,r);const i=await li(e.getOptions(),o,r,t,e,Oi());if(!i)return null;i.platform=i.platform||"javascript";const s=e.getSdkMetadata&&e.getSdkMetadata(),{name:a,version:l}=s&&s.sdk||{};return i.sdk={...i.sdk,name:a||"sentry.javascript.unknown",version:l||"0.0.0"},i}({scope:p,client:u,replayId:t,event:h});if(!f)return u.recordDroppedEvent("event_processor","replay",h),void jd("An event processor returned `null`, will not send event.");delete f.sdkProcessingMetadata;const _=function(e,t,n,o){return Or(jr(e,Hr(e),o,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(f,s,g,u.getOptions().tunnel);let v;try{v=await m.send(_)}catch(e){const t=new Error(pl);try{t.cause=e}catch(e){}throw t}if(!v)return v;if("number"==typeof v.statusCode&&(v.statusCode<200||v.statusCode>=300))throw new qu(v.statusCode);const y=Vr({},v);if(qr(y,"replay"))throw new Vu(y);return v}class qu extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class Vu extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Yu(e,t={count:0,interval:5e3}){const{recordingData:n,options:o}=e;var r,i;if(n.length)try{return await Gu(e),!0}catch(n){if(n instanceof qu||n instanceof Vu)throw n;if(r="Replays",i={_retryCount:t.count},Ni().setContext(r,i),Fd&&o._experiments&&o._experiments.captureExceptions&&pi(n),t.count>=3){const e=new Error(`${pl} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,o)=>{setTimeout((async()=>{try{await Yu(e,t),n(!0)}catch(e){o(e)}}),t.interval)}))}}const Ku="__THROTTLED";function Zu(e,t,n){const o=new Map;let r=!1;return(...i)=>{const s=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;o.forEach(((e,n)=>{n<t&&o.delete(n)}))})(s),[...o.values()].reduce(((e,t)=>e+t),0)>=t){const e=r;return r=!0,e?"__SKIPPED":Ku}r=!1;const a=o.get(s)||0;return o.set(s,a+1),e(...i)}}class Xu{constructor({options:e,recordingOptions:t}){Xu.prototype.__init.call(this),Xu.prototype.__init2.call(this),Xu.prototype.__init3.call(this),Xu.prototype.__init4.call(this),Xu.prototype.__init5.call(this),Xu.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let o,r,i;const s=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return l(),o=e(),o}function l(){void 0!==r&&clearTimeout(r),void 0!==i&&clearTimeout(i),r=i=void 0}function c(){return r&&clearTimeout(r),r=setTimeout(a,t),s&&void 0===i&&(i=setTimeout(a,s)),o}return c.cancel=l,c.flush=function(){return void 0!==r||void 0!==i?a():o},c}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Zu(((e,t)=>function(e,t,n){return uu(e,t)?du(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:o}=this.getOptions(),r=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:o?o.join(","):""}:void 0;r&&(this.clickDetector=new Cd(this,r))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options;t<=0&&n<=0||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",Gd(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Gd("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const e=lu({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Gd("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=lu({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=fd({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:ju(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{jd("[Replay] Stopping Replay"+(t?` triggered by ${t}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,eu(this)}catch(e){this._handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),jd("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),jd("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();jd("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&iu(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${cl.location.pathname}${cl.location.hash}${cl.location.search}`,t=`${cl.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===Ku){const e=Ad({category:"replay.throttled"});this.addUpdate((()=>!cu(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastTransaction||vi().getTransaction(),t=(e&&si(e).data||{})[Gi];if(e&&t&&["route","custom"].includes(t))return si(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Qd({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){Fd&&Kn.error("[Replay]",e),Fd&&this._options._experiments&&this._options._experiments.captureExceptions&&pi(e)}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=lu({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!au(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{cl.document.addEventListener("visibilitychange",this._handleVisibilityChange),cl.addEventListener("blur",this._handleWindowBlur),cl.addEventListener("focus",this._handleWindowFocus),cl.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(zu(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=zd(this)}_removeListeners(){try{cl.document.removeEventListener("visibilitychange",this._handleVisibilityChange),cl.removeEventListener("blur",this._handleWindowBlur),cl.removeEventListener("focus",this._handleWindowFocus),cl.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===cl.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=Ad({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=Ad({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{Pd(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;su(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):jd("[Replay] Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:Cc.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){const e=(t=this.performanceEntries,t.map(Bd).filter(Boolean)).concat(this.replayPerformanceEntries);var t;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(vu(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(vu(e,[Hu(cl.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),o=this.session.segmentId++;this._maybeSaveSession();const r=await this.eventBuffer.finish();await Yu({replayId:e,recordingData:r,segmentId:o,eventContext:n,session:this.session,options:this.getOptions(),timestamp:t})}catch(e){this._handleException(e),this.stop({reason:"sendReplay"});const t=_i();t&&t.recordDroppedEvent("send_error","replay")}}else Fd&&Kn.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(Fd&&Kn.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const o=n<this._options.minReplayDuration,r=n>this._options.maxReplayDuration+5e3;if(o||r)return jd(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${o?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(o&&this._debouncedFlush());const i=this.eventBuffer;if(i&&0===this.session.segmentId&&!i.hasCheckout&&jd("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(e){Fd&&Kn.error(e)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&ou(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,o=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||o){const e=Ad({category:"replay.mutations",data:{count:t,limit:o}});this._createCustomBreadcrumb(e)}return!o||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function Qu(e,t,n,o){const r=[...e,..."string"==typeof o?o.split(","):[],...t];return void 0!==n&&("string"==typeof n&&r.push(`.${n}`),Yn((()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")}))),r.join(",")}const Ju='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',ep=["content-length","content-type","accept"];let tp=!1;class np{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:o=36e5,stickySession:r=!0,useCompression:i=!0,workerUrl:s,_experiments:a={},sessionSampleRate:l,errorSampleRate:c,maskAllText:d=!0,maskAllInputs:u=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:m=750,mutationLimit:g=1e4,slowClickTimeout:h=7e3,slowClickIgnoreSelectors:f=[],networkDetailAllowUrls:_=[],networkDetailDenyUrls:v=[],networkCaptureBodies:y=!0,networkRequestHeaders:w=[],networkResponseHeaders:b=[],mask:E=[],maskAttributes:T=["title","placeholder"],unmask:S=[],block:x=[],unblock:$=[],ignore:C=[],maskFn:k,beforeAddRecordingEvent:L,beforeErrorSampling:I,blockClass:A,blockSelector:R,maskInputOptions:M,maskTextClass:N,maskTextSelector:O,ignoreClass:D}={}){this.name=np.id;const P=function({mask:e,unmask:t,block:n,unblock:o,ignore:r,blockClass:i,blockSelector:s,maskTextClass:a,maskTextSelector:l,ignoreClass:c}){const d={maskTextSelector:Qu(e,[".sentry-mask","[data-sentry-mask]"],a,l),unmaskTextSelector:Qu(t,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:Qu(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],i,s),unblockSelector:Qu(o,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:Qu(r,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],c)};return i instanceof RegExp&&(d.blockClass=i),a instanceof RegExp&&(d.maskTextClass=a),d}({mask:E,unmask:S,block:x,unblock:$,ignore:C,blockClass:A,blockSelector:R,maskTextClass:N,maskTextSelector:O,ignoreClass:D});if(this._recordingOptions={maskAllInputs:u,maskAllText:d,maskInputOptions:{...M||{},password:!0},maskTextFn:k,maskInputFn:k,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:o,privacyOptions:r,value:i}){return o?r.unmaskTextSelector&&e.matches(r.unmaskTextSelector)?i:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i:i}({maskAttributes:T,maskAllText:d,privacyOptions:P,key:e,value:t,el:n}),...P,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(o,fl),stickySession:r,sessionSampleRate:l,errorSampleRate:c,useCompression:i,workerUrl:s,blockAllMedia:p,maskAllInputs:u,maskAllText:d,mutationBreadcrumbLimit:m,mutationLimit:g,slowClickTimeout:h,slowClickIgnoreSelectors:f,networkDetailAllowUrls:_,networkDetailDenyUrls:v,networkCaptureBodies:y,networkRequestHeaders:op(w),networkResponseHeaders:op(b),beforeAddRecordingEvent:L,beforeErrorSampling:I,_experiments:a},"number"==typeof l&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${l} })`),this._initialOptions.sessionSampleRate=l),"number"==typeof c&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${c} })`),this._initialOptions.errorSampleRate=c),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Ju}`:Ju),this._isInitialized&&ar())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return tp}set _isInitialized(e){tp=e}setupOnce(){ar()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=function(e){const t=_i(),n=t&&t.getOptions(),o={sessionSampleRate:0,errorSampleRate:0,...lo(e)};if(!n)return Yn((()=>{console.warn("SDK client is not available.")})),o;null==e.sessionSampleRate&&null==e.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&Yn((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));"number"==typeof n.replaysSessionSampleRate&&(o.sessionSampleRate=n.replaysSessionSampleRate);"number"==typeof n.replaysOnErrorSampleRate&&(o.errorSampleRate=n.replaysOnErrorSampleRate);return o}(this._initialOptions);this._replay=new Xu({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const e=_i().getIntegrationByName("ReplayCanvas");if(!e)return;this._replay._canvas=e.getOptions()}catch(e){}}}function op(e){return[...ep,...e.map((e=>e.toLowerCase()))]}var rp;function ip(e,t,n=1/0,o=0){return e?e.nodeType!==e.ELEMENT_NODE||o>n?-1:t(e)?o:ip(e.parentNode,t,n,o+1):-1}function sp(e,t){return n=>{const o=n;if(null===o)return!1;try{if(e)if("string"==typeof e){if(o.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const o=e.classList[n];if(t.test(o))return!0}return!1}(o,e))return!0;return!(!t||!o.matches(t))}catch(e){return!1}}}np.__initStatic(),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(rp||(rp={}));const ap="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let lp={map:{},getId:()=>(console.error(ap),-1),getNode:()=>(console.error(ap),null),removeNodeFromMap(){console.error(ap)},has:()=>(console.error(ap),!1),reset(){console.error(ap)}};function cp(e,t,n,o,r=window){const i=r.Object.getOwnPropertyDescriptor(e,t);return r.Object.defineProperty(e,t,o?n:{set(e){hp((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>cp(e,t,i||{},!0)}function dp(e,t,n){try{if(!(t in e))return()=>{};const o=e[t],r=n(o);return"function"==typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:o}})),e[t]=r,()=>{e[t]=o}}catch(e){return()=>{}}}function up(e,t,n,o,r){if(!e)return!1;const i=function(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}(e);if(!i)return!1;const s=sp(t,n);if(!r){const e=o&&i.matches(o);return s(i)&&!e}const a=ip(i,s);let l=-1;return!(a<0)&&(o&&(l=ip(i,sp(null,o))),a>-1&&l<0||a<l)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(lp=new Proxy(lp,{get:(e,t,n)=>("map"===t&&console.error(ap),Reflect.get(e,t,n))})),/[1-9][0-9]{12}/.test(Date.now().toString());const pp={};function mp(e){const t=pp[e];if(t)return t;const n=window.document;let o=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const r=t.contentWindow;r&&r[e]&&(o=r[e]),n.head.removeChild(t)}catch(e){}return pp[e]=o.bind(window)}function gp(...e){return mp("requestAnimationFrame")(...e)}function hp(...e){return mp("setTimeout")(...e)}var fp=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(fp||{});let _p;function vp(e){_p=e}const yp=e=>{if(!_p)return e;return(...t)=>{try{return e(...t)}catch(e){if(_p&&!0===_p(e))return()=>{};throw e}}};for(var wp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bp="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Ep=0;Ep<64;Ep++)bp[wp.charCodeAt(Ep)]=Ep;const Tp=new Map;const Sp=(e,t,n)=>{if(!e||!Cp(e,t)&&"object"!=typeof e)return;const o=function(e,t){let n=Tp.get(e);return n||(n=new Map,Tp.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let r=o.indexOf(e);return-1===r&&(r=o.length,o.push(e)),r};function xp(e,t,n){if(e instanceof Array)return e.map((e=>xp(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),o=n.length,r="";for(t=0;t<o;t+=3)r+=wp[n[t]>>2],r+=wp[(3&n[t])<<4|n[t+1]>>4],r+=wp[(15&n[t+1])<<2|n[t+2]>>6],r+=wp[63&n[t+2]];return o%3==2?r=r.substring(0,r.length-1)+"=":o%3==1&&(r=r.substring(0,r.length-2)+"=="),r}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[xp(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[xp(e.data,t,n),e.width,e.height]}}if(Cp(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:Sp(e,t,n)}}return e}const $p=(e,t,n)=>e.map((e=>xp(e,t,n))),Cp=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function kp(e,t,n,o,r){const i=[];try{const s=dp(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(i,...s){if(!up(this,t,n,o,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(i);if("__context"in this||(this.__context=e),r&&["webgl","webgl2"].includes(e))if(s[0]&&"object"==typeof s[0]){const e=s[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else s.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[i,...s])}}));i.push(s)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach((e=>e()))}}function Lp(e,t,n,o,r,i,s,a){const l=[],c=Object.getOwnPropertyNames(e);for(const s of c)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(s))try{if("function"!=typeof e[s])continue;const c=dp(e,s,(function(e){return function(...l){const c=e.apply(this,l);if(Sp(c,a,this),"tagName"in this.canvas&&!up(this.canvas,o,r,i,!0)){const e=$p(l,a,this),o={type:t,property:s,args:e};n(this.canvas,o)}return c}}));l.push(c)}catch(o){const r=cp(e,s,{set(e){n(this.canvas,{type:t,property:s,args:[e],setter:!0})}});l.push(r)}return l}class Ip{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:o,blockSelector:r,unblockSelector:i,maxCanvasSize:s,recordCanvas:a,dataURLOptions:l,errorHandler:c}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,c&&vp(c),e.enableManualSnapshot||yp((()=>{a&&"all"===t&&this.initCanvasMutationObserver(n,o,r,i),a&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,o,r,i,s,{dataURLOptions:l})}))()}initCanvasFPSObserver(e,t,n,o,r,i,s){const a=kp(t,n,o,r,!0),l=this.takeSnapshot(!1,e,t,n,o,r,i,s.dataURLOptions);this.resetObservers=()=>{a(),cancelAnimationFrame(l)}}initCanvasMutationObserver(e,t,n,o){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const r=kp(e,t,n,o,!1),i=function(e,t,n,o,r){const i=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of s)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const s=dp(t.CanvasRenderingContext2D.prototype,a,(function(i){return function(...s){return up(this.canvas,n,o,r,!0)||hp((()=>{const n=$p(s,t,this);e(this.canvas,{type:fp["2D"],property:a,args:n})}),0),i.apply(this,s)}}));i.push(s)}catch(n){const o=cp(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:fp["2D"],property:a,args:[t],setter:!0})}});i.push(o)}return()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,o),s=function(e,t,n,o,r,i){const s=[];return s.push(...Lp(t.WebGLRenderingContext.prototype,fp.WebGL,e,n,o,r,0,t)),void 0!==t.WebGL2RenderingContext&&s.push(...Lp(t.WebGL2RenderingContext.prototype,fp.WebGL2,e,n,o,r,0,t)),()=>{s.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,o,this.mirror);this.resetObservers=()=>{r(),i(),s()}}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.win,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.resetObservers=()=>{cancelAnimationFrame(n)}}takeSnapshot(e,t,n,o,r,i,s,a,l){const c=new Map,d=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());d.onmessage=e=>{const t=e.data,{id:n}=t;if(c.set(n,!1),!("base64"in t))return;const{base64:o,type:r,width:i,height:s}=t;this.mutationCb({id:n,type:fp["2D"],commands:[{property:"clearRect",args:[0,0,i,s]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:o}],type:r}]},0,0,i,s]}]})};const u=1e3/t;let p,m=0;const g=t=>{m&&t-m<u||(m=t,(e=>{if(e)return[e];const t=[];return n.document.querySelectorAll("canvas").forEach((e=>{up(e,o,r,i,!0)||t.push(e)})),t})(l).forEach((t=>{const n=this.mirror.getId(t);if(!c.get(n)&&t.width&&t.height){if(c.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===Kr([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{d.postMessage({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:a,maxCanvasSize:s},[e])})).catch((e=>{yp((()=>{throw e}))()}))}}))),p=gp(g)};return p=gp(g),p}startPendingCanvasMutationFlusher(){gp((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,gp(e)};gp(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),gp((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const o=n.map((e=>{const{type:t,...n}=e;return n})),{type:r}=n[0];this.mutationCb({id:t,type:r,commands:o}),this.pendingCanvasMutations.delete(e)}}const Ap={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},Rp="ReplayCanvas",Mp=1280,Np=(e={})=>{const[t,n]=e.maxCanvasSize||[],o={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Mp):Mp,n?Math.min(n,Mp):Mp]};let r;const i=new Promise((e=>r=e));return{name:Rp,setupOnce(){},getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=o;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const o=new Ip({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return r(o),o},...Ap[e||"medium"]||Ap.medium}},async snapshot(e){(await i).snapshot(e)}}};Qi(Rp,Np);const Op=Pn,Dp="#ffffff",Pp="inherit",Up="rgba(108, 95, 199, 1)",Bp={fontFamily:"system-ui, 'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:Dp,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",borderRadius:"25px",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:Up,submitBorder:Up,submitOutlineFocus:"#29232f",submitForeground:Dp,submitForegroundHover:Dp,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:Pp,inputForeground:Pp,inputBorder:"var(--border)",inputOutlineFocus:Up,formBorderRadius:"20px",formContentBorderRadius:"6px"},Wp=Bp,zp={...Bp,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"},Fp="widget",Hp="api";async function jp({feedback:{message:e,email:t,name:n,source:o,url:r}},{includeReplay:i=!0}={}){const s=_i(),a=s&&s.getTransport(),l=s&&s.getDsn();if(!s||!a||!l)return;const c={contexts:{feedback:{contact_email:t,name:n,message:e,url:r,source:o}},type:"feedback"};return fi((async e=>{e.clearBreadcrumbs(),[Hp,Fp].includes(String(o))&&e.setLevel("info");const t=await async function({client:e,scope:t,event:n}){const o={};e.emit&&e.emit("preprocessEvent",n,o);const r=await li(e.getOptions(),n,o,t,e,Oi());return null===r?(e.recordDroppedEvent("event_processor","feedback",n),null):(r.platform=r.platform||"javascript",r)}({scope:e,client:s,event:c});if(!t)return;s.emit&&s.emit("beforeSendFeedback",t,{includeReplay:Boolean(i)});const n=qi(t,l,s.getOptions()._metadata,s.getOptions().tunnel);let r;try{r=await a.send(n)}catch(e){const t=new Error("Unable to send Feedback");try{t.cause=e}catch(e){}throw t}if(r){if("number"==typeof r.statusCode&&(r.statusCode<200||r.statusCode>=300))throw new Error("Unable to send Feedback");return r}}))}const Gp="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function qp(e,t){return{...e,...t,themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function Vp(e){return`\n  --background: ${e.background};\n  --background-hover: ${e.backgroundHover};\n  --foreground: ${e.foreground};\n  --error: ${e.error};\n  --success: ${e.success};\n  --border: ${e.border};\n  --border-radius: ${e.borderRadius};\n  --box-shadow: ${e.boxShadow};\n\n  --submit-background: ${e.submitBackground};\n  --submit-background-hover: ${e.submitBackgroundHover};\n  --submit-border: ${e.submitBorder};\n  --submit-outline-focus: ${e.submitOutlineFocus};\n  --submit-foreground: ${e.submitForeground};\n  --submit-foreground-hover: ${e.submitForegroundHover};\n\n  --cancel-background: ${e.cancelBackground};\n  --cancel-background-hover: ${e.cancelBackgroundHover};\n  --cancel-border: ${e.cancelBorder};\n  --cancel-outline-focus: ${e.cancelOutlineFocus};\n  --cancel-foreground: ${e.cancelForeground};\n  --cancel-foreground-hover: ${e.cancelForegroundHover};\n\n  --input-background: ${e.inputBackground};\n  --input-foreground: ${e.inputForeground};\n  --input-border: ${e.inputBorder};\n  --input-outline-focus: ${e.inputOutlineFocus};\n\n  --form-border-radius: ${e.formBorderRadius};\n  --form-content-border-radius: ${e.formContentBorderRadius};\n  `}function Yp({id:e,colorScheme:t,themeDark:n,themeLight:o}){try{const r=Op.document,i=r.createElement("div");i.id=e;const s=i.attachShadow({mode:"open"});return s.appendChild(function(e,t,n){const o=e.createElement("style");return o.textContent=`\n:host {\n  --bottom: 1rem;\n  --right: 1rem;\n  --top: auto;\n  --left: auto;\n  --z-index: 100000;\n  --font-family: ${n.light.fontFamily};\n  --font-size: ${n.light.fontSize};\n\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${Vp("dark"===t?n.dark:n.light)}\n}\n\n${"system"===t?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${Vp(n.dark)}\n  }\n}`:""}\n}`,o}(r,t,{dark:n,light:o})),s.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.dialog {\n  line-height: 25px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n\n  border: var(--border);\n  border-radius: var(--form-border-radius);\n  background-color: var(--background);\n  color: var(--foreground);\n\n  width: 320px;\n  max-width: 100%;\n  max-height: calc(100% - 2rem);\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow);\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 20px;\n  font-weight: 600;\n  padding: 24px 24px 0 24px;\n  margin: 0;\n  margin-bottom: 16px;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n\n.error {\n  color: var(--error);\n  margin-bottom: 16px;\n}\n\n.form {\n  display: grid;\n  overflow: auto;\n  flex-direction: column;\n  gap: 16px;\n  padding: 0 24px 24px;\n}\n\n.form__error-container {\n  color: var(--error);\n}\n\n.form__error-container--hidden {\n  display: none;\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: grid;\n  gap: 4px;\n  align-items: center;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  line-height: inherit;\n  background-color: var(--input-background);\n  box-sizing: border-box;\n  border: var(--input-border);\n  border-radius: var(--form-content-border-radius);\n  color: var(--input-foreground);\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 500;\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  color: var(--input-foreground);\n  opacity: 0.65;\n}\n\n.form__input:focus-visible {\n  outline: 1px auto var(--input-outline-focus);\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--cancel-border);\n  border-radius: var(--form-content-border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 6px 16px;\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  background-color: var(--submit-background);\n  border-color: var(--submit-border);\n  color: var(--submit-foreground);\n}\n.btn--primary:hover {\n  background-color: var(--submit-background-hover);\n  color: var(--submit-foreground-hover);\n}\n.btn--primary:focus-visible {\n  outline: 1px auto var(--submit-outline-focus);\n}\n\n.btn--default {\n  background-color: var(--cancel-background);\n  color: var(--cancel-foreground);\n  font-weight: 500;\n}\n.btn--default:hover {\n  background-color: var(--cancel-background-hover);\n  color: var(--cancel-foreground-hover);\n}\n.btn--default:focus-visible {\n  outline: 1px auto var(--cancel-outline-focus);\n}\n\n.success-message {\n  background-color: var(--background);\n  border: var(--border);\n  border-radius: var(--border-radius);\n  box-shadow: var(--box-shadow);\n  font-weight: 600;\n  color: var(--success);\n  padding: 12px 24px;\n  line-height: 25px;\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success-icon path {\n  fill: var(--success);\n}\n",t}(r)),{shadow:s,host:i}}catch(e){throw Kn.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function Kp(e,t,n){if(!e)return;e.hideError();try{const e=await function({name:e,email:t,message:n,source:o=Hp,url:r=jn()},i={}){if(!n)throw new Error("Unable to submit feedback with empty message");return jp({feedback:{name:e,email:t,message:n,url:r,source:o}},i)}({...t,source:Fp},n);return e}catch(t){Gp&&Kn.error(t),e&&e.showError("There was a problem submitting feedback, please wait and try again.")}}function Zp(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}const Xp=20,Qp="http://www.w3.org/2000/svg";function Jp(e,t,...n){const o=Op.document.createElement(e);t&&Object.entries(t).forEach((([e,t])=>{"className"===e&&"string"==typeof t?o.setAttribute("class",t):"boolean"==typeof t&&t?o.setAttribute(e,""):"string"==typeof t?o.setAttribute(e,t):e.startsWith("on")&&"function"==typeof t&&o.addEventListener(e.substring(2).toLowerCase(),t)}));for(const e of n)em(o,e);return o}function em(e,t){const n=Op.document;if(null!=t)if(Array.isArray(t))for(const n of t)em(e,n);else!1===t||("string"==typeof t?e.appendChild(n.createTextNode(t)):t instanceof Node?e.appendChild(t):e.appendChild(n.createTextNode(String(t))))}function tm({buttonLabel:e,onClick:t}){const n=Jp("button",{type:"button",className:"widget__actor","aria-label":e,"aria-hidden":"false"},function(){const e=e=>Op.document.createElementNS(Qp,e),t=Zp(e("svg"),{class:"feedback-icon",width:`${Xp}`,height:`${Xp}`,viewBox:`0 0 ${Xp} ${Xp}`,fill:"none"}),n=Zp(e("g"),{clipPath:"url(#clip0_57_80)"}),o=Zp(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(o);const r=e("defs"),i=Zp(e("clipPath"),{id:"clip0_57_80"}),s=Zp(e("rect"),{width:`${Xp}`,height:`${Xp}`,fill:"white"});return i.appendChild(s),r.appendChild(i),t.appendChild(r).appendChild(i).appendChild(s),{get el(){return t}}}().el,e?Jp("span",{className:"widget__actor__text"},e):null);return n.addEventListener("click",(function(e){t&&t(e)})),{get el(){return n},show:()=>{n.classList.remove("widget__actor--hidden"),n.setAttribute("aria-hidden","false")},hide:()=>{n.classList.add("widget__actor--hidden"),n.setAttribute("aria-hidden","true")}}}function nm(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function om({nameLabel:e,namePlaceholder:t,emailLabel:n,emailPlaceholder:o,messageLabel:r,messagePlaceholder:i,isRequiredLabel:s,cancelButtonLabel:a,submitButtonLabel:l,showName:c,showEmail:d,isNameRequired:u,isEmailRequired:p,defaultName:m,defaultEmail:g,onCancel:h,onSubmit:f}){const{el:_}=function({label:e}){return{el:Jp("button",{type:"submit",className:"btn btn--primary","aria-label":e},e)}}({label:l});const v=Jp("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});const y=Jp("input",{id:"name",type:c?"text":"hidden","aria-hidden":c?"false":"true",name:"name",required:u,className:"form__input",placeholder:t,value:m}),w=Jp("input",{id:"email",type:d?"text":"hidden","aria-hidden":d?"false":"true",name:"email",required:p,className:"form__input",placeholder:o,value:g}),b=Jp("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:i}),E=Jp("button",{type:"button",className:"btn btn--default","aria-label":a,onClick:e=>{h&&h(e)}},a),T=Jp("form",{className:"form",onSubmit:function(e){if(e.preventDefault(),e.target instanceof HTMLFormElement)try{if(f){const t=new FormData(e.target),n={name:nm(t,"name"),email:nm(t,"email"),message:nm(t,"message")};f(n)}}catch(e){}}},[v,c&&Jp("label",{htmlFor:"name",className:"form__label"},[Jp("span",{className:"form__label__text"},e,u&&Jp("span",{className:"form__label__text--required"},` ${s}`)),y]),!c&&y,d&&Jp("label",{htmlFor:"email",className:"form__label"},[Jp("span",{className:"form__label__text"},n,p&&Jp("span",{className:"form__label__text--required"},` ${s}`)),w]),!d&&w,Jp("label",{htmlFor:"message",className:"form__label"},[Jp("span",{className:"form__label__text"},r,Jp("span",{className:"form__label__text--required"},` ${s}`)),b]),Jp("div",{className:"btn-group"},[_,E])]);return{get el(){return T},showError:function(e){v.textContent=e,v.classList.remove("form__error-container--hidden"),v.setAttribute("aria-hidden","false")},hideError:function(){v.textContent="",v.classList.add("form__error-container--hidden"),v.setAttribute("aria-hidden","true")}}}const rm="http://www.w3.org/2000/svg";function im({formTitle:e,showBranding:t,showName:n,showEmail:o,isNameRequired:r,isEmailRequired:i,colorScheme:s,defaultName:a,defaultEmail:l,onClosed:c,onCancel:d,onSubmit:u,...p}){let m=null;function g(){m&&(m.open=!1)}const{el:h,showError:f,hideError:_}=om({showEmail:o,showName:n,isEmailRequired:i,isNameRequired:r,defaultName:a,defaultEmail:l,onSubmit:u,onCancel:d,...p});return m=Jp("dialog",{className:"dialog",open:!0,onClick:function(){g(),c&&c()}},Jp("div",{className:"dialog__content",onClick:e=>{e.stopPropagation()}},Jp("h2",{className:"dialog__header"},e,t&&Jp("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},function({colorScheme:e}){const t=e=>Op.document.createElementNS(rm,e),n=Zp(t("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),o=Zp(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(o);const r=t("defs"),i=t("style");return i.textContent=`\n    path {\n      fill: ${"dark"===e?"#fff":"#362d59"};\n    }`,"system"===e&&(i.textContent+="\n    @media (prefers-color-scheme: dark) {\n      path: {\n        fill: '#fff';\n      }\n    }\n    "),r.append(i),n.append(r),{get el(){return n}}}({colorScheme:s}).el)),h)),{get el(){return m},showError:f,hideError:_,open:function(){m&&(m.open=!0)},close:g,checkIsOpen:function(){return m&&!0===m.open||!1}}}const sm=16,am=17,lm="http://www.w3.org/2000/svg";function cm({message:e,onRemove:t}){function n(){o&&(o.remove(),t&&t())}const o=Jp("div",{className:"success-message",onClick:n},function(){const e=e=>Op.document.createElementNS(lm,e),t=Zp(e("svg"),{class:"success-icon",width:`${sm}`,height:`${am}`,viewBox:`0 0 ${sm} ${am}`,fill:"none"}),n=Zp(e("g"),{clipPath:"url(#clip0_57_156)"}),o=Zp(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),r=Zp(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(r,o);const i=e("defs"),s=Zp(e("clipPath"),{id:"clip0_57_156"}),a=Zp(e("rect"),{width:`${sm}`,height:`${sm}`,fill:"white",transform:"translate(0 0.5)"});return s.appendChild(a),i.appendChild(s),t.appendChild(i).appendChild(s).appendChild(a),{get el(){return t}}}().el,e);return{el:o,remove:n}}function dm({shadow:e,options:{shouldCreateActor:t=!0,...n},attachTo:o}){let r,i,s=!1;async function a(t){if(!i)return;const o=[];if(n.isNameRequired&&!t.name&&o.push(n.nameLabel),n.isEmailRequired&&!t.email&&o.push(n.emailLabel),t.message||o.push(n.messageLabel),o.length>0)return void i.showError(`Please enter in the following required fields: ${o.join(", ")}`);await Kp(i,t)?(m(),function(){if(e)try{const t=cm({message:n.successMessageText,onRemove:()=>{o&&clearTimeout(o),c()}});if(!t.el)throw new Error("Unable to show success message");e.appendChild(t.el);const o=setTimeout((()=>{t&&t.remove()}),5e3)}catch(e){Kn.error(e)}}(),n.onSubmitSuccess&&n.onSubmitSuccess()):n.onSubmitError&&n.onSubmitError()}function l(){const e=_i(),t=e&&e.getIntegrationByName&&e.getIntegrationByName("Replay");t&&t.flush().catch((e=>{Gp&&Kn.error(e)}))}function c(){r&&r.show()}function d(){r&&r.hide()}function u(){try{if(i)return i.open(),s=!0,n.onFormOpen&&n.onFormOpen(),void l();const t=n.useSentryUser,o=vi(),r=o&&o.getUser();if(i=im({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,isRequiredLabel:n.isRequiredLabel,defaultName:t&&r&&r[t.name]||"",defaultEmail:t&&r&&r[t.email]||"",onClosed:()=>{c(),s=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{p(),c()},onSubmit:a}),!i.el)throw new Error("Unable to open Feedback dialog");e.appendChild(i.el),d(),n.onFormOpen&&n.onFormOpen(),l()}catch(e){Kn.error(e)}}function p(){i&&(i.close(),s=!1,n.onFormClose&&n.onFormClose())}function m(){if(i){p();const e=i.el;e&&e.remove(),i=void 0}}function g(){s||u(),d()}return o?o.addEventListener("click",g):t&&(r=tm({buttonLabel:n.buttonLabel,onClick:g}),r.el&&e.appendChild(r.el)),{get actor(){return r},get dialog(){return i},showActor:c,hideActor:d,removeActor:function(){r&&r.el&&r.el.remove()},openDialog:u,closeDialog:p,removeDialog:m}}const um=Op.document;class pm{static __initStatic(){this.id="Feedback"}constructor({autoInject:e=!0,id:t="sentry-feedback",isEmailRequired:n=!1,isNameRequired:o=!1,showBranding:r=!0,showEmail:i=!0,showName:s=!0,useSentryUser:a={email:"email",name:"username"},themeDark:l,themeLight:c,colorScheme:d="system",buttonLabel:u="Report a Bug",cancelButtonLabel:p="Cancel",submitButtonLabel:m="Send Bug Report",formTitle:g="Report a Bug",emailPlaceholder:h="your.email@example.org",emailLabel:f="Email",messagePlaceholder:_="What's the bug? What did you expect?",messageLabel:v="Description",namePlaceholder:y="Your Name",nameLabel:w="Name",isRequiredLabel:b="(required)",successMessageText:E="Thank you for your report!",onFormClose:T,onFormOpen:S,onSubmitError:x,onSubmitSuccess:$}={}){this.name=pm.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={autoInject:e,showBranding:r,id:t,isEmailRequired:n,isNameRequired:o,showEmail:i,showName:s,useSentryUser:a,colorScheme:d,themeDark:{...zp,...l},themeLight:{...Wp,...c},buttonLabel:u,cancelButtonLabel:p,submitButtonLabel:m,formTitle:g,emailLabel:f,emailPlaceholder:h,messageLabel:v,messagePlaceholder:_,nameLabel:w,namePlaceholder:y,isRequiredLabel:b,successMessageText:E,onFormClose:T,onFormOpen:S,onSubmitError:x,onSubmitSuccess:$}}setupOnce(){if(ar())try{this._cleanupWidgetIfExists();const{autoInject:e}=this.options;if(!e)return;this._createWidget(this.options)}catch(e){Gp&&Kn.error(e)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(e,t){try{const n=qp(this.options,t||{});return this._ensureShadowHost(n,(({shadow:t})=>{const o="string"==typeof e?um.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!o)return Gp&&Kn.error("[Feedback] Unable to attach to target element"),null;const r=dm({shadow:t,options:n,attachTo:o});return this._widgets.add(r),this._widget||(this._widget=r),r}))}catch(e){return Gp&&Kn.error(e),null}}createWidget(e){try{return this._createWidget(qp(this.options,e||{}))}catch(e){return Gp&&Kn.error(e),null}}removeWidget(e){if(!e)return!1;try{if(this._widgets.has(e))return e.removeActor(),e.removeDialog(),this._widgets.delete(e),this._widget===e&&(this._widget=null),!0}catch(e){Gp&&Kn.error(e)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const e=um.querySelector(`#${this.options.id}`);e&&e.remove()}_createWidget(e){return this._ensureShadowHost(e,(({shadow:t})=>{const n=dm({shadow:t,options:e});return!this._hasInsertedActorStyles&&n.actor&&(t.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.widget__actor {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  line-height: 16px;\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 16px;\n  text-decoration: none;\n  z-index: 9000;\n\n  color: var(--foreground);\n  background-color: var(--background);\n  border: var(--border);\n  box-shadow: var(--box-shadow);\n  opacity: 1;\n  transition: opacity 0.1s ease-in-out;\n}\n\n.widget__actor:hover {\n  background-color: var(--background-hover);\n}\n\n.widget__actor svg {\n  width: 16px;\n  height: 16px;\n}\n\n.widget__actor--hidden {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.widget__actor__text {\n}\n\n@media (max-width: 600px) {\n  .widget__actor__text {\n    display: none;\n  }\n}\n\n.feedback-icon path {\n  fill: var(--foreground);\n}\n",t}(um)),this._hasInsertedActorStyles=!0),this._widgets.add(n),this._widget||(this._widget=n),n}))}_ensureShadowHost(e,t){let n=!1;if(!this._shadow||!this._host){const{id:t,colorScheme:o,themeLight:r,themeDark:i}=e,{shadow:s,host:a}=Yp({id:t,colorScheme:o,themeLight:r,themeDark:i});this._shadow=s,this._host=a,n=!0}this._host.dataset.sentryFeedbackColorscheme=e.colorScheme;const o=t({shadow:this._shadow,host:this._host});return n&&um.body.appendChild(this._host),o}}pm.__initStatic();const mm="CaptureConsole",gm=(e={})=>{const t=e.levels||qn;return{name:mm,setupOnce(){},setup(e){"console"in Pn&&bo((({args:n,level:o})=>{_i()===e&&t.includes(o)&&function(e,t){const n={level:Ir(t),extra:{arguments:e}};fi((o=>{if(o.addEventProcessor((e=>(e.logger="console",Co(e,{handled:!1,type:"console"}),e))),"assert"===t&&!1===e[0]){const t=`Assertion failed: ${In(e.slice(1)," ")||"console.assert"}`;return o.setExtra("arguments",e.slice(1)),void mi(t,n)}const r=e.find((e=>e instanceof Error));if("error"===t&&r)return void pi(r,n);mi(In(e," "),n)}))}(n,o)}))}}};Qi(mm,gm);const hm="Debug",fm=(e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:hm,setupOnce(){},setup(e){e.on&&e.on("beforeSendEvent",((e,n)=>{t.debugger,Yn((()=>{t.stringify?(console.log(JSON.stringify(e,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(e),n&&Object.keys(n).length&&console.log(n))}))}))}}};Qi(hm,fm);const _m="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,vm="Dedupe";function ym(e,t){let n=Em(e),o=Em(t);if(!n&&!o)return!0;if(n&&!o||!n&&o)return!1;if(o.length!==n.length)return!1;for(let e=0;e<o.length;e++){const t=o[e],r=n[e];if(t.filename!==r.filename||t.lineno!==r.lineno||t.colno!==r.colno||t.function!==r.function)return!1}return!0}function wm(e,t){let n=e.fingerprint,o=t.fingerprint;if(!n&&!o)return!0;if(n&&!o||!n&&o)return!1;try{return!(n.join("")!==o.join(""))}catch(e){return!1}}function bm(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Em(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}Qi(vm,(()=>{let e;return{name:vm,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,o=t.message;if(!n&&!o)return!1;if(n&&!o||!n&&o)return!1;if(n!==o)return!1;if(!wm(e,t))return!1;if(!ym(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=bm(t),o=bm(e);if(!n||!o)return!1;if(n.type!==o.type||n.value!==o.value)return!1;if(!wm(e,t))return!1;if(!ym(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return _m&&Kn.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}}));const Tm="ExtraErrorData";function Sm(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}Qi(Tm,((e={})=>{const t=e.depth||3,n=e.captureErrorCause||!1;return{name:Tm,setupOnce(){},processEvent:(e,o)=>function(e,t={},n,o){if(!t.originalException||!hn(t.originalException))return e;const r=t.originalException.name||t.originalException.constructor.name,i=function(e,t){try{const n=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],o={};for(const t of Object.keys(e)){if(-1!==n.indexOf(t))continue;const r=e[t];o[t]=hn(r)?r.toString():r}if(t&&void 0!==e.cause&&(o.cause=hn(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];o[e]=hn(n)?n.toString():n}}return o}catch(e){_m&&Kn.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,o);if(i){const t={...e.contexts},o=lr(i,n);return En(o)&&(no(o,"__sentry_skip_normalization__",!0),t[r]=o),{...e,contexts:t}}return e}(e,o,t,n)}}));var xm={exports:{}};
/*!
      localForage -- Offline Storage, Improved
      Version 1.10.0
      https://localforage.github.io/localForage
      (c) 2013-2017 Mozilla, Apache License 2.0
  */!function(e,t){e.exports=function e(t,n,o){function r(s,a){if(!n[s]){if(!t[s]){if(!a&&Sm)return Sm(s);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){var n=t[s][1][e];return r(n||e)}),c,c.exports,e,t,n,o)}return n[s].exports}for(var i=Sm,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,n){(function(e){var n,o,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var i=0,s=new r(d),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){d(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(d,0)};else{var l=new e.MessageChannel;l.port1.onmessage=d,n=function(){l.port2.postMessage(0)}}var c=[];function d(){var e,t;o=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}o=!1}function u(e){1!==c.push(e)||o||n()}t.exports=u}).call(this,void 0!==gt?gt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var o=e(1);function r(){}var i={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==r&&m(this,e)}function d(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function u(e,t,n){o((function(){var o;try{o=t(n)}catch(t){return i.reject(e,t)}o===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,o)}))}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function m(e,t){var n=!1;function o(t){n||(n=!0,i.reject(e,t))}function r(t){n||(n=!0,i.resolve(e,t))}function s(){t(r,o)}var a=g(s);"error"===a.status&&o(a.value)}function g(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function h(e){return e instanceof this?e:i.resolve(new this(r),e)}function f(e){var t=new this(r);return i.reject(t,e)}function _(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,o=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,l=-1,c=new this(r);++l<n;)d(e[l],l);return c;function d(e,r){function l(e){s[r]=e,++a!==n||o||(o=!0,i.resolve(c,s))}t.resolve(e).then(l,(function(e){o||(o=!0,i.reject(c,e))}))}}function v(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,o=!1;if(!n)return this.resolve([]);for(var s=-1,a=new this(r);++s<n;)l(e[s]);return a;function l(e){t.resolve(e).then((function(e){o||(o=!0,i.resolve(a,e))}),(function(e){o||(o=!0,i.reject(a,e))}))}}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var n=new this.constructor(r);return this.state!==l?u(n,this.state===a?e:t,this.outcome):this.queue.push(new d(n,e,t)),n},d.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},d.prototype.otherCallFulfilled=function(e){u(this.promise,this.onFulfilled,e)},d.prototype.callRejected=function(e){i.reject(this.promise,e)},d.prototype.otherCallRejected=function(e){u(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=g(p,t);if("error"===n.status)return i.reject(e,n.value);var o=n.value;if(o)m(e,o);else{e.state=a,e.outcome=t;for(var r=-1,s=e.queue.length;++r<s;)e.queue[r].callFulfilled(t)}return e},i.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,o=e.queue.length;++n<o;)e.queue[n].callRejected(t);return e},c.resolve=h,c.reject=f,c.all=_,c.race=v},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==gt?gt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var s=i();function a(){try{if(!s||!s.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function l(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(r){if("TypeError"!==r.name)throw r;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),o=0;o<e.length;o+=1)n.append(e[o]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var c=Promise;function d(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function u(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function p(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function m(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",h=void 0,f={},_=Object.prototype.toString,v="readonly",y="readwrite";function w(e){for(var t=e.length,n=new ArrayBuffer(t),o=new Uint8Array(n),r=0;r<t;r++)o[r]=e.charCodeAt(r);return n}function b(e){return new c((function(t){var n=e.transaction(g,y),o=l([""]);n.objectStore(g).put(o,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function E(e){return"boolean"==typeof h?c.resolve(h):b(e).then((function(e){return h=e}))}function T(e){var t=f[e.name],n={};n.promise=new c((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function S(e){var t=f[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function x(e,t){var n=f[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function $(e,t){return new c((function(n,o){if(f[e.name]=f[e.name]||D(),e.db){if(!t)return n(e.db);T(e),e.db.close()}var r=[e.name];t&&r.push(e.version);var i=s.open.apply(s,r);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(g)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),o(i.error)},i.onsuccess=function(){var t=i.result;t.onversionchange=function(e){e.target.close()},n(t),S(e)}}))}function C(e){return $(e,!1)}function k(e){return $(e,!0)}function L(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,r=e.version>e.db.version;if(o&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),r||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function I(e){return new c((function(t,n){var o=new FileReader;o.onerror=n,o.onloadend=function(n){var o=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:o,type:e.type})},o.readAsBinaryString(e)}))}function A(e){return l([w(atob(e.data))],{type:e.type})}function R(e){return e&&e.__local_forage_encoded_blob}function M(e){var t=this,n=t._initReady().then((function(){var e=f[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return u(n,e,e),n}function N(e){T(e);for(var t=f[e.name],n=t.forages,o=0;o<n.length;o++){var r=n[o];r._dbInfo.db&&(r._dbInfo.db.close(),r._dbInfo.db=null)}return e.db=null,C(e).then((function(t){return e.db=t,L(e)?k(e):t})).then((function(o){e.db=t.db=o;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=o})).catch((function(t){throw x(e,t),t}))}function O(e,t,n,o){void 0===o&&(o=1);try{var r=e.db.transaction(e.storeName,t);n(null,r)}catch(r){if(o>0&&(!e.db||"InvalidStateError"===r.name||"NotFoundError"===r.name))return c.resolve().then((function(){if(!e.db||"NotFoundError"===r.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),k(e)})).then((function(){return N(e).then((function(){O(e,t,n,o-1)}))})).catch(n);n(r)}}function D(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function P(e){var t=this,n={db:null};if(e)for(var o in e)n[o]=e[o];var r=f[n.name];r||(r=D(),f[n.name]=r),r.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=M);var i=[];function s(){return c.resolve()}for(var a=0;a<r.forages.length;a++){var l=r.forages[a];l!==t&&i.push(l._initReady().catch(s))}var d=r.forages.slice(0);return c.all(i).then((function(){return n.db=r.db,C(n)})).then((function(e){return n.db=e,L(n,t._defaultConfig.version)?k(n):e})).then((function(e){n.db=r.db=e,t._dbInfo=n;for(var o=0;o<d.length;o++){var i=d[o];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))}function U(e,t){var n=this;e=p(e);var o=new c((function(t,o){n.ready().then((function(){O(n._dbInfo,v,(function(r,i){if(r)return o(r);try{var s=i.objectStore(n._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),R(e)&&(e=A(e)),t(e)},s.onerror=function(){o(s.error)}}catch(e){o(e)}}))})).catch(o)}));return d(o,t),o}function B(e,t){var n=this,o=new c((function(t,o){n.ready().then((function(){O(n._dbInfo,v,(function(r,i){if(r)return o(r);try{var s=i.objectStore(n._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var n=s.result;if(n){var o=n.value;R(o)&&(o=A(o));var r=e(o,n.key,a++);void 0!==r?t(r):n.continue()}else t()},s.onerror=function(){o(s.error)}}catch(e){o(e)}}))})).catch(o)}));return d(o,t),o}function W(e,t,n){var o=this;e=p(e);var r=new c((function(n,r){var i;o.ready().then((function(){return i=o._dbInfo,"[object Blob]"===_.call(t)?E(i.db).then((function(e){return e?t:I(t)})):t})).then((function(t){O(o._dbInfo,y,(function(i,s){if(i)return r(i);try{var a=s.objectStore(o._dbInfo.storeName);null===t&&(t=void 0);var l=a.put(t,e);s.oncomplete=function(){void 0===t&&(t=null),n(t)},s.onabort=s.onerror=function(){var e=l.error?l.error:l.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return d(r,n),r}function z(e,t){var n=this;e=p(e);var o=new c((function(t,o){n.ready().then((function(){O(n._dbInfo,y,(function(r,i){if(r)return o(r);try{var s=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){o(s.error)},i.onabort=function(){var e=s.error?s.error:s.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return d(o,t),o}function F(e){var t=this,n=new c((function(e,n){t.ready().then((function(){O(t._dbInfo,y,(function(o,r){if(o)return n(o);try{var i=r.objectStore(t._dbInfo.storeName).clear();r.oncomplete=function(){e()},r.onabort=r.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return d(n,e),n}function H(e){var t=this,n=new c((function(e,n){t.ready().then((function(){O(t._dbInfo,v,(function(o,r){if(o)return n(o);try{var i=r.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return d(n,e),n}function j(e,t){var n=this,o=new c((function(t,o){e<0?t(null):n.ready().then((function(){O(n._dbInfo,v,(function(r,i){if(r)return o(r);try{var s=i.objectStore(n._dbInfo.storeName),a=!1,l=s.openKeyCursor();l.onsuccess=function(){var n=l.result;n?0===e||a?t(n.key):(a=!0,n.advance(e)):t(null)},l.onerror=function(){o(l.error)}}catch(e){o(e)}}))})).catch(o)}));return d(o,t),o}function G(e){var t=this,n=new c((function(e,n){t.ready().then((function(){O(t._dbInfo,v,(function(o,r){if(o)return n(o);try{var i=r.objectStore(t._dbInfo.storeName).openKeyCursor(),s=[];i.onsuccess=function(){var t=i.result;t?(s.push(t.key),t.continue()):e(s)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return d(n,e),n}function q(e,t){t=m.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var o,r=this;if(e.name){var i=e.name===n.name&&r._dbInfo.db?c.resolve(r._dbInfo.db):C(e).then((function(t){var n=f[e.name],o=n.forages;n.db=t;for(var r=0;r<o.length;r++)o[r]._dbInfo.db=t;return t}));o=e.storeName?i.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;T(e);var o=f[e.name],r=o.forages;t.close();for(var i=0;i<r.length;i++){var a=r[i];a._dbInfo.db=null,a._dbInfo.version=n}var l=new c((function(t,o){var r=s.open(e.name,n);r.onerror=function(e){r.result.close(),o(e)},r.onupgradeneeded=function(){r.result.deleteObjectStore(e.storeName)},r.onsuccess=function(){var e=r.result;e.close(),t(e)}}));return l.then((function(e){o.db=e;for(var t=0;t<r.length;t++){var n=r[t];n._dbInfo.db=e,S(n._dbInfo)}})).catch((function(t){throw(x(e,t)||c.resolve()).catch((function(){})),t}))}})):i.then((function(t){T(e);var n=f[e.name],o=n.forages;t.close();for(var r=0;r<o.length;r++)o[r]._dbInfo.db=null;var i=new c((function(t,n){var o=s.deleteDatabase(e.name);o.onerror=function(){var e=o.result;e&&e.close(),n(o.error)},o.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},o.onsuccess=function(){var e=o.result;e&&e.close(),t(e)}}));return i.then((function(e){n.db=e;for(var t=0;t<o.length;t++)S(o[t]._dbInfo)})).catch((function(t){throw(x(e,t)||c.resolve()).catch((function(){})),t}))}))}else o=c.reject("Invalid arguments");return d(o,t),o}var V={_driver:"asyncStorage",_initStorage:P,_support:a(),iterate:B,getItem:U,setItem:W,removeItem:z,clear:F,length:H,key:j,keys:G,dropInstance:q};function Y(){return"function"==typeof openDatabase}var K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Z="~~local_forage_type~",X=/^~~local_forage_type~([^~]+)~/,Q="__lfsc__:",J=Q.length,ee="arbf",te="blob",ne="si08",oe="ui08",re="uic8",ie="si16",se="si32",ae="ur16",le="ui32",ce="fl32",de="fl64",ue=J+ee.length,pe=Object.prototype.toString;function me(e){var t,n,o,r,i,s=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),d=new Uint8Array(c);for(t=0;t<a;t+=4)n=K.indexOf(e[t]),o=K.indexOf(e[t+1]),r=K.indexOf(e[t+2]),i=K.indexOf(e[t+3]),d[l++]=n<<2|o>>4,d[l++]=(15&o)<<4|r>>2,d[l++]=(3&r)<<6|63&i;return c}function ge(e){var t,n=new Uint8Array(e),o="";for(t=0;t<n.length;t+=3)o+=K[n[t]>>2],o+=K[(3&n[t])<<4|n[t+1]>>4],o+=K[(15&n[t+1])<<2|n[t+2]>>6],o+=K[63&n[t+2]];return n.length%3==2?o=o.substring(0,o.length-1)+"=":n.length%3==1&&(o=o.substring(0,o.length-2)+"=="),o}function he(e,t){var n="";if(e&&(n=pe.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===pe.call(e.buffer))){var o,r=Q;e instanceof ArrayBuffer?(o=e,r+=ee):(o=e.buffer,"[object Int8Array]"===n?r+=ne:"[object Uint8Array]"===n?r+=oe:"[object Uint8ClampedArray]"===n?r+=re:"[object Int16Array]"===n?r+=ie:"[object Uint16Array]"===n?r+=ae:"[object Int32Array]"===n?r+=se:"[object Uint32Array]"===n?r+=le:"[object Float32Array]"===n?r+=ce:"[object Float64Array]"===n?r+=de:t(new Error("Failed to get type for BinaryArray"))),t(r+ge(o))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=Z+e.type+"~"+ge(this.result);t(Q+te+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function fe(e){if(e.substring(0,J)!==Q)return JSON.parse(e);var t,n=e.substring(ue),o=e.substring(J,ue);if(o===te&&X.test(n)){var r=n.match(X);t=r[1],n=n.substring(r[0].length)}var i=me(n);switch(o){case ee:return i;case te:return l([i],{type:t});case ne:return new Int8Array(i);case oe:return new Uint8Array(i);case re:return new Uint8ClampedArray(i);case ie:return new Int16Array(i);case ae:return new Uint16Array(i);case se:return new Int32Array(i);case le:return new Uint32Array(i);case ce:return new Float32Array(i);case de:return new Float64Array(i);default:throw new Error("Unkown type: "+o)}}var _e={serialize:he,deserialize:fe,stringToBuffer:me,bufferToString:ge};function ve(e,t,n,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,o)}function ye(e){var t=this,n={db:null};if(e)for(var o in e)n[o]="string"!=typeof e[o]?e[o].toString():e[o];var r=new c((function(e,o){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return o(e)}n.db.transaction((function(r){ve(r,n,(function(){t._dbInfo=n,e()}),(function(e,t){o(t)}))}),o)}));return n.serializer=_e,r}function we(e,t,n,o,r,i){e.executeSql(n,o,r,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?i(e,s):ve(e,t,(function(){e.executeSql(n,o,r,i)}),i)}),i):i(e,s)}),i)}function be(e,t){var n=this;e=p(e);var o=new c((function(t,o){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){we(n,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var o=n.rows.length?n.rows.item(0).value:null;o&&(o=r.serializer.deserialize(o)),t(o)}),(function(e,t){o(t)}))}))})).catch(o)}));return d(o,t),o}function Ee(e,t){var n=this,o=new c((function(t,o){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){we(n,r,"SELECT * FROM "+r.storeName,[],(function(n,o){for(var i=o.rows,s=i.length,a=0;a<s;a++){var l=i.item(a),c=l.value;if(c&&(c=r.serializer.deserialize(c)),void 0!==(c=e(c,l.key,a+1)))return void t(c)}t()}),(function(e,t){o(t)}))}))})).catch(o)}));return d(o,t),o}function Te(e,t,n,o){var r=this;e=p(e);var i=new c((function(i,s){r.ready().then((function(){void 0===t&&(t=null);var a=t,l=r._dbInfo;l.serializer.serialize(t,(function(t,c){c?s(c):l.db.transaction((function(n){we(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(a)}),(function(e,t){s(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(o>0)return void i(Te.apply(r,[e,a,n,o-1]));s(t)}}))}))})).catch(s)}));return d(i,n),i}function Se(e,t,n){return Te.apply(this,[e,t,n,1])}function xe(e,t){var n=this;e=p(e);var o=new c((function(t,o){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){we(n,r,"DELETE FROM "+r.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){o(t)}))}))})).catch(o)}));return d(o,t),o}function $e(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var o=t._dbInfo;o.db.transaction((function(t){we(t,o,"DELETE FROM "+o.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return d(n,e),n}function Ce(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var o=t._dbInfo;o.db.transaction((function(t){we(t,o,"SELECT COUNT(key) as c FROM "+o.storeName,[],(function(t,n){var o=n.rows.item(0).c;e(o)}),(function(e,t){n(t)}))}))})).catch(n)}));return d(n,e),n}function ke(e,t){var n=this,o=new c((function(t,o){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){we(n,r,"SELECT key FROM "+r.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var o=n.rows.length?n.rows.item(0).key:null;t(o)}),(function(e,t){o(t)}))}))})).catch(o)}));return d(o,t),o}function Le(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var o=t._dbInfo;o.db.transaction((function(t){we(t,o,"SELECT key FROM "+o.storeName,[],(function(t,n){for(var o=[],r=0;r<n.rows.length;r++)o.push(n.rows.item(r).key);e(o)}),(function(e,t){n(t)}))}))})).catch(n)}));return d(n,e),n}function Ie(e){return new c((function(t,n){e.transaction((function(o){o.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,o){for(var r=[],i=0;i<o.rows.length;i++)r.push(o.rows.item(i).name);t({db:e,storeNames:r})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Ae(e,t){t=m.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var o,r=this;return o=e.name?new c((function(t){var o;o=e.name===n.name?r._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:o,storeNames:[e.storeName]}):t(Ie(o))})).then((function(e){return new c((function(t,n){e.db.transaction((function(o){function r(e){return new c((function(t,n){o.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],s=0,a=e.storeNames.length;s<a;s++)i.push(r(e.storeNames[s]));c.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):c.reject("Invalid arguments"),d(o,t),o}var Re={_driver:"webSQLStorage",_initStorage:ye,_support:Y(),iterate:Ee,getItem:be,setItem:Se,removeItem:xe,clear:$e,length:Ce,key:ke,keys:Le,dropInstance:Ae};function Me(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Ne(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Oe(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function De(){return!Oe()||localStorage.length>0}function Pe(e){var t=this,n={};if(e)for(var o in e)n[o]=e[o];return n.keyPrefix=Ne(e,t._defaultConfig),De()?(t._dbInfo=n,n.serializer=_e,c.resolve()):c.reject()}function Ue(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var o=localStorage.key(n);0===o.indexOf(e)&&localStorage.removeItem(o)}}));return d(n,e),n}function Be(e,t){var n=this;e=p(e);var o=n.ready().then((function(){var t=n._dbInfo,o=localStorage.getItem(t.keyPrefix+e);return o&&(o=t.serializer.deserialize(o)),o}));return d(o,t),o}function We(e,t){var n=this,o=n.ready().then((function(){for(var t=n._dbInfo,o=t.keyPrefix,r=o.length,i=localStorage.length,s=1,a=0;a<i;a++){var l=localStorage.key(a);if(0===l.indexOf(o)){var c=localStorage.getItem(l);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,l.substring(r),s++)))return c}}}));return d(o,t),o}function ze(e,t){var n=this,o=n.ready().then((function(){var t,o=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(o.keyPrefix.length)),t}));return d(o,t),o}function Fe(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,o=[],r=0;r<n;r++){var i=localStorage.key(r);0===i.indexOf(e.keyPrefix)&&o.push(i.substring(e.keyPrefix.length))}return o}));return d(n,e),n}function He(e){var t=this.keys().then((function(e){return e.length}));return d(t,e),t}function je(e,t){var n=this;e=p(e);var o=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return d(o,t),o}function Ge(e,t,n){var o=this;e=p(e);var r=o.ready().then((function(){void 0===t&&(t=null);var n=t;return new c((function(r,i){var s=o._dbInfo;s.serializer.serialize(t,(function(t,o){if(o)i(o);else try{localStorage.setItem(s.keyPrefix+e,t),r(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}}))}))}));return d(r,n),r}function qe(e,t){if(t=m.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var o,r=this;return o=e.name?new c((function(t){e.storeName?t(Ne(e,r._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):c.reject("Invalid arguments"),d(o,t),o}var Ve={_driver:"localStorageWrapper",_initStorage:Pe,_support:Me(),iterate:We,getItem:Be,setItem:Ge,removeItem:je,clear:Ue,length:He,key:ze,keys:Fe,dropInstance:qe},Ye=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ke=function(e,t){for(var n=e.length,o=0;o<n;){if(Ye(e[o],t))return!0;o++}return!1},Ze=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Xe={},Qe={},Je={INDEXEDDB:V,WEBSQL:Re,LOCALSTORAGE:Ve},et=[Je.INDEXEDDB._driver,Je.WEBSQL._driver,Je.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),ot={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function rt(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function it(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ze(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var st=function(){function e(t){for(var n in r(this,e),Je)if(Je.hasOwnProperty(n)){var o=Je[n],i=o._driver;this[n]=i,Xe[i]||this.defineDriver(o)}this._defaultConfig=it({},ot),this._config=it({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":o(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var o=new c((function(t,n){try{var o=e._driver,r=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(r);for(var i=nt.concat("_initStorage"),s=0,a=i.length;s<a;s++){var l=i[s];if((!Ke(tt,l)||e[l])&&"function"!=typeof e[l])return void n(r)}var u=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=c.reject(t);return d(n,arguments[arguments.length-1]),n}},n=0,o=tt.length;n<o;n++){var r=tt[n];e[r]||(e[r]=t(r))}};u();var p=function(n){Xe[o]&&console.info("Redefining LocalForage driver: "+o),Xe[o]=e,Qe[o]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(p,n):p(!!e._support):p(!0)}catch(e){n(e)}}));return u(o,t,n),o},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var o=Xe[e]?c.resolve(Xe[e]):c.reject(new Error("Driver not found."));return u(o,t,n),o},e.prototype.getSerializer=function(e){var t=c.resolve(_e);return u(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return u(n,e,e),n},e.prototype.setDriver=function(e,t,n){var o=this;Ze(e)||(e=[e]);var r=this._getSupportedDrivers(e);function i(){o._config.driver=o.driver()}function s(e){return o._extend(e),i(),o._ready=o._initStorage(o._config),o._ready}function a(e){return function(){var t=0;function n(){for(;t<e.length;){var r=e[t];return t++,o._dbInfo=null,o._ready=null,o.getDriver(r).then(s).catch(n)}i();var a=new Error("No available storage method found.");return o._driverSet=c.reject(a),o._driverSet}return n()}}var l=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=l.then((function(){var e=r[0];return o._dbInfo=null,o._ready=null,o.getDriver(e).then((function(e){o._driver=e._driver,i(),o._wrapLibraryMethodsWithReady(),o._initDriver=a(r)}))})).catch((function(){i();var e=new Error("No available storage method found.");return o._driverSet=c.reject(e),o._driverSet})),u(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Qe[e]},e.prototype._extend=function(e){it(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,o=e.length;n<o;n++){var r=e[n];this.supports(r)&&t.push(r)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)rt(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),at=new st;t.exports=at},{3:3}]},{},[4])(4)}(xm);const $m=Pn;class Cm{static __initStatic(){this.id="Offline"}constructor(e={}){this.name=Cm.id,this.maxStoredEvents=e.maxStoredEvents||30,this.offlineEventStore=xm.exports.createInstance({name:"sentry/offlineEventStore"})}setupOnce(e,t){this.hub=t(),"addEventListener"in $m&&$m.addEventListener("online",(()=>{this._sendEvents().catch((()=>{_m&&Kn.warn("could not send cached events")}))}));const n=e=>this.hub&&this.hub.getIntegration(Cm)&&"navigator"in $m&&"onLine"in $m.navigator&&!$m.navigator.onLine?(_m&&Kn.log("Event dropped due to being a offline - caching instead"),this._cacheEvent(e).then((e=>this._enforceMaxEvents())).catch((e=>{_m&&Kn.warn("could not cache event while offline")})),null):e;n.id=this.name,e(n),"navigator"in $m&&"onLine"in $m.navigator&&$m.navigator.onLine&&this._sendEvents().catch((()=>{_m&&Kn.warn("could not send cached events")}))}async _cacheEvent(e){return this.offlineEventStore.setItem(To(),lr(e))}async _enforceMaxEvents(){const e=[];return this.offlineEventStore.iterate(((t,n,o)=>{e.push({cacheKey:n,event:t})})).then((()=>this._purgeEvents(e.sort(((e,t)=>(t.event.timestamp||0)-(e.event.timestamp||0))).slice(this.maxStoredEvents<e.length?this.maxStoredEvents:e.length).map((e=>e.cacheKey))))).catch((e=>{_m&&Kn.warn("could not enforce max events")}))}async _purgeEvent(e){return this.offlineEventStore.removeItem(e)}async _purgeEvents(e){return Promise.all(e.map((e=>this._purgeEvent(e)))).then()}async _sendEvents(){return this.offlineEventStore.iterate(((e,t,n)=>{this.hub?(this.hub.captureEvent(e),this._purgeEvent(t).catch((e=>{_m&&Kn.warn("could not purge event from cache")}))):_m&&Kn.warn("no hub found - could not send cached event")}))}}Cm.__initStatic();const km=Pn,Lm="ReportingObserver",Im=new WeakMap,Am=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if(Im.has(_i()))for(const t of e)fi((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let o="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;o=[e.crashId||"",e.reason||""].join(" ").trim()||o}else{o=t.body.message||o}}mi(`${n}: ${o}`)}))}return{name:Lm,setupOnce(){if(!("ReportingObserver"in Uo))return;new km.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){Im.set(e,!0)}}};Qi(Lm,Am);const Rm="RewriteFrames",Mm=(e={})=>{const t=e.root,n=e.prefix||"app:///",o=e.iteratee||(e=>{if(!e.filename)return e;const o=/^[a-zA-Z]:\\/.test(e.filename)||e.filename.includes("\\")&&!e.filename.includes("/"),r=/^\//.test(e.filename);if(o||r){const r=o?e.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):e.filename,i=t?function(e,t){e=pr(e).slice(1),t=pr(t).slice(1);const n=mr(e.split("/")),o=mr(t.split("/")),r=Math.min(n.length,o.length);let i=r;for(let e=0;e<r;e++)if(n[e]!==o[e]){i=e;break}let s=[];for(let e=i;e<n.length;e++)s.push("..");return s=s.concat(o.slice(i)),s.join("/")}(t,r):gr(r);e.filename=`${n}${i}`}return e});return{name:Rm,setupOnce(){},processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>o(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}};Qi(Rm,Mm);const Nm="SessionTiming",Om=()=>{const e=Date.now();return{name:Nm,setupOnce(){},processEvent(t){const n=Date.now();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}};Qi(Nm,Om);const Dm="Transaction";function Pm(e){return e.module||e.function?`${e.module||"?"}/${e.function||"?"}`:"<unknown>"}Qi(Dm,(()=>({name:Dm,setupOnce(){},processEvent(e){const t=function(e){const t=e.exception&&e.exception.values&&e.exception.values[0];return t&&t.stacktrace&&t.stacktrace.frames||[]}(e);for(let n=t.length-1;n>=0;n--){const o=t[n];if(!0===o.in_app){e.transaction=Pm(o);break}}return e}})));const Um="HttpClient",Bm=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:Um,setupOnce(){},setup(e){!function(e,t){if(!Wo())return;zo((n=>{if(_i()!==e)return;const{response:o,args:r}=n,[i,s]=r;o&&function(e,t,n,o){if(Fm(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,o);let r,i,s,a;jm()&&([{headers:r,cookies:s},{headers:i,cookies:a}]=[{cookieHeader:"Cookie",obj:e},{cookieHeader:"Set-Cookie",obj:n}].map((({cookieHeader:e,obj:t})=>{const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let o;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(o=zm(t))}catch(t){_m&&Kn.log(`Could not extract cookies from header ${e}`)}return{headers:n,cookies:o}})));gi(Hm({url:e.url,method:e.method,status:n.status,requestHeaders:r,responseHeaders:i,requestCookies:s,responseCookies:a}))}}(t,i,o,s)}))}(e,t),function(e,t){if(!("XMLHttpRequest"in Pn))return;nr((n=>{if(_i()!==e)return;const o=n.xhr,r=o[tr];if(!r)return;const{method:i,request_headers:s}=r;try{!function(e,t,n,o){if(Fm(e,t.status,t.responseURL)){let e,r,i;if(jm()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(r=zm(e))}catch(e){_m&&Kn.log("Could not extract cookies from response headers")}try{i=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,o]=t.split(": ");return e[n]=o,e}),{})}(t)}catch(e){_m&&Kn.log("Could not extract headers from response")}e=o}gi(Hm({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:i,responseCookies:r}))}}(t,o,i,s)}catch(e){_m&&Kn.warn("Error while extracting response event form XHR response",e)}}))}(e,t)}}};function Wm(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function zm(e){return e.split("; ").reduce(((e,t)=>{const[n,o]=t.split("=");return e[n]=o,e}),{})}function Fm(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(o=e.failedRequestTargets,r=n,o.some((e=>"string"==typeof e?r.includes(e):e.test(r))))&&!ds(n,_i());var o,r}function Hm(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:Wm(e.responseHeaders)}}};return Co(n,{type:"http.client",handled:!1}),n}function jm(){const e=_i();return!!e&&Boolean(e.getOptions().sendDefaultPii)}Qi(Um,Bm);const Gm=Pn,qm="ContextLines",Vm=(e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:qm,setupOnce(){},processEvent:e=>function(e,t){const n=Gm.document,o=Gm.location&&br(Gm.location.href);if(!n||!o)return e;const r=e.exception&&e.exception.values;if(!r||!r.length)return e;const i=n.documentElement.innerHTML;if(!i)return e;const s=["<!DOCTYPE html>","<html>",...i.split("\n"),"</html>"];return r.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>function(e,t,n,o){if(e.filename!==n||!e.lineno||!t.length)return e;return function(e,t,n=5){if(void 0===t.lineno)return;const o=e.length,r=Math.max(Math.min(o-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,r-n),r).map((e=>Ln(e,0))),t.context_line=Ln(e[Math.min(o-1,r)],t.colno||0),t.post_context=e.slice(Math.min(r+1,o),r+1+n).map((e=>Ln(e,0)))}(t,e,o),e}(e,s,o,t))))})),e}(e,t)}};Qi(qm,Vm);const Ym=1e6,Km=String(0),Zm="main";let Xm="",Qm="",Jm="",eg=pa.navigator&&pa.navigator.userAgent||"",tg="";const ng=pa.navigator&&pa.navigator.language||pa.navigator&&pa.navigator.languages&&pa.navigator.languages[0]||"";const og=pa.navigator&&pa.navigator.userAgentData;var rg;function ig(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const o={samples:[],stacks:[],frames:[],thread_metadata:{[Km]:{name:Zm}}};if(!e.samples.length)return o;const r=e.samples[0].timestamp,i="number"==typeof performance.timeOrigin?performance.timeOrigin:Nr||0,s=i-(Nr||i);for(let i=0;i<e.samples.length;i++){const a=e.samples[i];if(void 0===a.stackId){void 0===t&&(t=n,o.stacks[t]=[],n++),o.samples[i]={elapsed_since_start_ns:((a.timestamp+s-r)*Ym).toFixed(0),stack_id:t,thread_id:Km};continue}let l=e.stacks[a.stackId];const c=[];for(;l;){c.push(l.frameId);const t=e.frames[l.frameId];void 0===o.frames[l.frameId]&&(o.frames[l.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),l=void 0===l.parentId?void 0:e.stacks[l.parentId]}const d={elapsed_since_start_ns:((a.timestamp+s-r)*Ym).toFixed(0),stack_id:n,thread_id:Km};o.stacks[n]=c,o.samples[i]=d,n++}return o}(e):e}function sg(e,t,n,o){if("transaction"!==o.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const r=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&fa&&Kn.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(o),i=ig(n),s=t||("number"==typeof o.start_timestamp?1e3*o.start_timestamp:Date.now()),a="number"==typeof o.timestamp?1e3*o.timestamp:Date.now();return{event_id:e,timestamp:new Date(s).toISOString(),platform:"javascript",version:"1",release:o.release||"",environment:o.environment||Xr,runtime:{name:"javascript",version:pa.navigator.userAgent},os:{name:Xm,version:Qm,build_number:eg},device:{locale:ng,model:tg,manufacturer:eg,architecture:Jm,is_emulator:!1},debug_meta:{images:cg(n.resources)},profile:i,transactions:[{name:o.transaction||"",id:o.event_id||To(),trace_id:r,active_thread_id:Km,relative_start_ns:"0",relative_end_ns:(1e6*(a-s)).toFixed(0)}]}}function ag(e){return"pageload"===e.op}"object"==typeof(rg=og)&&null!==rg&&"getHighEntropyValues"in rg&&og.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(Xm=e.platform||"",Jm=e.architecture||"",tg=e.model||"",Qm=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];eg=`${t.brand} ${t.version}`}})).catch((e=>{}));const lg=new WeakMap;function cg(e){const t=Pn._sentryDebugIds;if(!t)return[];const n=_i(),o=n&&n.getOptions(),r=o&&o.stackParser;if(!r)return[];let i;const s=lg.get(r);s?i=s:(i=new Map,lg.set(r,i));const a=Object.keys(t).reduce(((e,n)=>{let o;const s=i.get(n);s?o=s:(o=r(n),i.set(n,o));for(let r=o.length-1;r>=0;r--){const i=o[r],s=i&&i.filename;if(i&&s){e[s]=t[n];break}}return e}),{}),l=[];for(const t of e)t&&a[t]&&l.push({type:"sourcemap",code_file:t,debug_id:a[t]});return l}let dg=!1;const ug=3e4;function pg(e){if(dg)return fa&&Kn.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return fa&&Kn.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=_i(),n=t&&t.getOptions();if(!n)return fa&&Kn.log("[Profiling] Profiling disabled, no options found."),!1;const o=n.profilesSampleRate;if(!("number"!=typeof(r=o)&&"boolean"!=typeof r||"number"==typeof r&&isNaN(r)?(fa&&Kn.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(r)} of type ${JSON.stringify(typeof r)}.`),0):!0===r||!1===r||!(r<0||r>1)||(fa&&Kn.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${r}.`),0)))return fa&&Kn.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var r;if(!o)return fa&&Kn.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===o||Math.random()<o)||(fa&&Kn.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(o)})`),!1)}function mg(e,t,n,o){return function(e){return e.samples.length<2?(fa&&Kn.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(fa&&Kn.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?sg(e,t,n,o):null}const gg=new Map;function hg(e){const t=gg.get(e);return t&&gg.delete(e),t}function fg(e){let t;ag(e)&&(t=1e3*Mr());const n=function(){const e=pa.Profiler;if("function"!=typeof e)return void(fa&&Kn.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(ug/10);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){fa&&(Kn.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),Kn.log("[Profiling] Disabling profiling for current user session.")),dg=!0}}();if(!n)return e;fa&&Kn.log(`[Profiling] started profiling transaction: ${si(e).description}`);const o=To();async function r(){return e&&n?n.stop().then((t=>(i&&(pa.clearTimeout(i),i=void 0),fa&&Kn.log(`[Profiling] stopped profiling of transaction: ${si(e).description}`),t?(function(e,t){if(gg.set(e,t),gg.size>30){const e=gg.keys().next().value;gg.delete(e)}}(o,t),null):(fa&&Kn.log(`[Profiling] profiler returned null profile for: ${si(e).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((e=>(fa&&Kn.log("[Profiling] error while stopping profiler:",e),null))):null}let i=pa.setTimeout((()=>{fa&&Kn.log("[Profiling] max profile duration elapsed, stopping profiling for:",si(e).description),r()}),ug);const s=e.end.bind(e);return e.end=function(){return e?(r().then((()=>{e.setContext("profile",{profile_id:o,start_timestamp:t}),s()}),(()=>{s()})),e):s()},e}const _g="BrowserProfiling",vg=()=>({name:_g,setupOnce(){},setup(e){const t=vi().getTransaction();t&&ag(t)&&pg(t)&&fg(t),"function"==typeof e.on?(e.on("startTransaction",(e=>{pg(e)&&fg(e)})),e.on("beforeEnvelope",(e=>{if(!gg.size)return;const t=function(e){const t=[];return Pr(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const o=e[n];o&&o.contexts&&o.contexts.profile&&o.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,o=t&&t.profile&&t.profile.profile_id,r=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof o){fa&&Kn.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!o){fa&&Kn.log("[Profiling] cannot find profile for a transaction without a profile context");continue}t&&t.profile&&delete t.profile;const i=hg(o);if(!i){fa&&Kn.log(`[Profiling] Could not retrieve profile for transaction: ${o}`);continue}const s=mg(o,r,i,e);s&&n.push(s)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))):Kn.warn("[Profiling] Client does not support hooks, profiling will be disabled")}});Qi(_g,vg);let yg={};function wg(){}pa.Sentry&&pa.Sentry.Integrations&&(yg=pa.Sentry.Integrations);const bg=e=>e;function Eg(e){return e()}function Tg(){return Object.create(null)}function Sg(e){e.forEach(Eg)}function xg(e){return"function"==typeof e}function $g(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function Cg(e,...t){if(null==e){for(const e of t)e(void 0);return wg}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function kg(e,t,n){e.$$.on_destroy.push(Cg(t,n))}function Lg(e,t,n,o){if(e){const r=Ig(e,t,n,o);return e[0](r)}}function Ig(e,t,n,o){return e[1]&&o?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](o(t))):n.ctx}function Ag(e,t,n,o){if(e[2]&&o){const r=e[2](o(n));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],n=Math.max(t.dirty.length,r.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|r[o];return e}return t.dirty|r}return t.dirty}function Rg(e,t,n,o,r,i){if(r){const s=Ig(t,n,o,i);e.p(s,r)}}function Mg(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function Ng(e){return null==e?"":e}function Og(e,t,n){return e.set(n),t}function Dg(e){return e&&xg(e.destroy)?e.destroy:wg}function Pg(e){const t="string"==typeof e&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const Ug="undefined"!=typeof window;let Bg=Ug?()=>window.performance.now():()=>Date.now(),Wg=Ug?e=>requestAnimationFrame(e):wg;const zg=new Set;function Fg(e){zg.forEach((t=>{t.c(e)||(zg.delete(t),t.f())})),0!==zg.size&&Wg(Fg)}function Hg(e){let t;return 0===zg.size&&Wg(Fg),{promise:new Promise((n=>{zg.add(t={c:e,f:n})})),abort(){zg.delete(t)}}}function jg(e,t){e.appendChild(t)}function Gg(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function qg(e){const t=Zg("style");return t.textContent="/* empty */",function(e,t){jg(e.head||e,t),t.sheet}(Gg(e),t),t.sheet}function Vg(e,t,n){e.insertBefore(t,n||null)}function Yg(e){e.parentNode&&e.parentNode.removeChild(e)}function Kg(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function Zg(e){return document.createElement(e)}function Xg(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Qg(e){return document.createTextNode(e)}function Jg(){return Qg(" ")}function eh(){return Qg("")}function th(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function nh(e){return function(t){return t.preventDefault(),e.call(this,t)}}function oh(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function rh(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ih(e,t){t=""+t,e.data!==t&&(e.data=t)}function sh(e,t){e.value=null==t?"":t}function ah(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function lh(e,t,n){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}let ch;function dh(){if(void 0===ch){ch=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){ch=!0}}return ch}function uh(e,t,n){e.classList.toggle(t,!!n)}function ph(e,t,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:o})}class mh{is_svg=!1;e=void 0;n=void 0;t=void 0;a=void 0;constructor(e=!1){this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=Xg(t.nodeName):this.e=Zg(11===t.nodeType?"TEMPLATE":t.nodeName),this.t="TEMPLATE"!==t.tagName?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)Vg(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Yg)}}function gh(e,t){return new e(t)}const hh=new Map;let fh,_h=0;function vh(e,t,n,o,r,i,s,a=0){const l=16.666/o;let c="{\n";for(let e=0;e<=1;e+=l){const o=t+(n-t)*i(e);c+=100*e+`%{${s(o,1-o)}}\n`}const d=c+`100% {${s(n,1-n)}}\n}`,u=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(d)}_${a}`,p=Gg(e),{stylesheet:m,rules:g}=hh.get(p)||function(e,t){const n={stylesheet:qg(t),rules:{}};return hh.set(e,n),n}(p,e);g[u]||(g[u]=!0,m.insertRule(`@keyframes ${u} ${d}`,m.cssRules.length));const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${u} ${o}ms linear ${r}ms 1 both`,_h+=1,u}function yh(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),r=n.length-o.length;r&&(e.style.animation=o.join(", "),_h-=r,_h||Wg((()=>{_h||(hh.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&Yg(t)})),hh.clear())})))}function wh(e){fh=e}function bh(){if(!fh)throw new Error("Function called outside component initialization");return fh}function Eh(e){bh().$$.on_mount.push(e)}function Th(e){bh().$$.on_destroy.push(e)}function Sh(){const e=bh();return(t,n,{cancelable:o=!1}={})=>{const r=e.$$.callbacks[t];if(r){const i=ph(t,n,{cancelable:o});return r.slice().forEach((t=>{t.call(e,i)})),!i.defaultPrevented}return!0}}function xh(e,t){return bh().$$.context.set(e,t),t}function $h(e){return bh().$$.context.get(e)}function Ch(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const kh=[],Lh=[];let Ih=[];const Ah=[],Rh=Promise.resolve();let Mh=!1;function Nh(){Mh||(Mh=!0,Rh.then(Wh))}function Oh(e){Ih.push(e)}function Dh(e){Ah.push(e)}const Ph=new Set;let Uh,Bh=0;function Wh(){if(0!==Bh)return;const e=fh;do{try{for(;Bh<kh.length;){const e=kh[Bh];Bh++,wh(e),zh(e.$$)}}catch(e){throw kh.length=0,Bh=0,e}for(wh(null),kh.length=0,Bh=0;Lh.length;)Lh.pop()();for(let e=0;e<Ih.length;e+=1){const t=Ih[e];Ph.has(t)||(Ph.add(t),t())}Ih.length=0}while(kh.length);for(;Ah.length;)Ah.pop()();Mh=!1,Ph.clear(),wh(e)}function zh(e){if(null!==e.fragment){e.update(),Sg(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Oh)}}function Fh(){return Uh||(Uh=Promise.resolve(),Uh.then((()=>{Uh=null}))),Uh}function Hh(e,t,n){e.dispatchEvent(ph(`${t?"intro":"outro"}${n}`))}const jh=new Set;let Gh;function qh(){Gh={r:0,c:[],p:Gh}}function Vh(){Gh.r||Sg(Gh.c),Gh=Gh.p}function Yh(e,t){e&&e.i&&(jh.delete(e),e.i(t))}function Kh(e,t,n,o){if(e&&e.o){if(jh.has(e))return;jh.add(e),Gh.c.push((()=>{jh.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}const Zh={duration:0};function Xh(e,t,n){const o={direction:"in"};let r,i,s=t(e,n,o),a=!1,l=0;function c(){r&&yh(e,r)}function d(){const{delay:t=0,duration:n=300,easing:o=bg,tick:d=wg,css:u}=s||Zh;u&&(r=vh(e,0,1,n,t,o,u,l++)),d(0,1);const p=Bg()+t,m=p+n;i&&i.abort(),a=!0,Oh((()=>Hh(e,!0,"start"))),i=Hg((t=>{if(a){if(t>=m)return d(1,0),Hh(e,!0,"end"),c(),a=!1;if(t>=p){const e=o((t-p)/n);d(e,1-e)}}return a}))}let u=!1;return{start(){u||(u=!0,yh(e),xg(s)?(s=s(o),Fh().then(d)):d())},invalidate(){u=!1},end(){a&&(c(),a=!1)}}}function Qh(e,t,n){const o={direction:"out"};let r,i=t(e,n,o),s=!0;const a=Gh;let l;function c(){const{delay:t=0,duration:n=300,easing:o=bg,tick:c=wg,css:d}=i||Zh;d&&(r=vh(e,1,0,n,t,o,d));const u=Bg()+t,p=u+n;Oh((()=>Hh(e,!1,"start"))),"inert"in e&&(l=e.inert,e.inert=!0),Hg((t=>{if(s){if(t>=p)return c(0,1),Hh(e,!1,"end"),--a.r||Sg(a.c),!1;if(t>=u){const e=o((t-u)/n);c(1-e,e)}}return s}))}return a.r+=1,xg(i)?Fh().then((()=>{i=i(o),c()})):c(),{end(t){t&&"inert"in e&&(e.inert=l),t&&i.tick&&i.tick(1,0),s&&(r&&yh(e,r),s=!1)}}}function Jh(e,t,n,o){let r,i=t(e,n,{direction:"both"}),s=o?0:1,a=null,l=null,c=null;function d(){c&&yh(e,c)}function u(e,t){const n=e.b-s;return t*=Math.abs(n),{a:s,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function p(t){const{delay:n=0,duration:o=300,easing:p=bg,tick:m=wg,css:g}=i||Zh,h={start:Bg()+n,b:t};t||(h.group=Gh,Gh.r+=1),"inert"in e&&(t?void 0!==r&&(e.inert=r):(r=e.inert,e.inert=!0)),a||l?l=h:(g&&(d(),c=vh(e,s,t,o,n,p,g)),t&&m(0,1),a=u(h,o),Oh((()=>Hh(e,t,"start"))),Hg((t=>{if(l&&t>l.start&&(a=u(l,o),l=null,Hh(e,a.b,"start"),g&&(d(),c=vh(e,s,a.b,a.duration,0,p,i.css))),a)if(t>=a.end)m(s=a.b,1-s),Hh(e,a.b,"end"),l||(a.b?d():--a.group.r||Sg(a.group.c)),a=null;else if(t>=a.start){const e=t-a.start;s=a.a+a.d*p(e/a.duration),m(s,1-s)}return!(!a&&!l)})))}return{run(e){xg(i)?Fh().then((()=>{i=i({direction:e?"in":"out"}),p(e)})):p(e)},end(){d(),a=l=null}}}function ef(e){return void 0!==e?.length?e:Array.from(e)}function tf(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function nf(e){e&&e.c()}function of(e,t,n){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),Oh((()=>{const t=e.$$.on_mount.map(Eg).filter(xg);e.$$.on_destroy?e.$$.on_destroy.push(...t):Sg(t),e.$$.on_mount=[]})),r.forEach(Oh)}function rf(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];Ih.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),Ih=t}(n.after_update),Sg(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function sf(e,t,n,o,r,i,s=null,a=[-1]){const l=fh;wh(e);const c=e.$$={fragment:null,ctx:[],props:i,update:wg,not_equal:r,bound:Tg(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Tg(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};s&&s(c.root);let d=!1;if(c.ctx=n?n(e,t.props||{},((t,n,...o)=>{const i=o.length?o[0]:n;return c.ctx&&r(c.ctx[t],c.ctx[t]=i)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](i),d&&function(e,t){-1===e.$$.dirty[0]&&(kh.push(e),Nh(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],c.update(),d=!0,Sg(c.before_update),c.fragment=!!o&&o(c.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);c.fragment&&c.fragment.l(e),e.forEach(Yg)}else c.fragment&&c.fragment.c();t.intro&&Yh(e.$$.fragment),of(e,t.target,t.anchor),Wh()}wh(l)}class af{$$=void 0;$$set=void 0;$destroy(){rf(this,1),this.$destroy=wg}$on(e,t){if(!xg(t))return wg;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const lf=[];function cf(e,t=wg){let n;const o=new Set;function r(t){if($g(e,t)&&(e=t,n)){const t=!lf.length;for(const t of o)t[1](),lf.push(t,e);if(t){for(let e=0;e<lf.length;e+=2)lf[e][0](lf[e+1]);lf.length=0}}}function i(t){r(t(e))}return{set:r,update:i,subscribe:function(s,a=wg){const l=[s,a];return o.add(l),1===o.size&&(n=t(r,i)||wg),s(e),()=>{o.delete(l),0===o.size&&n&&(n(),n=null)}}}}const df=function(){const{subscribe:e,set:t,update:n}=cf({});return chrome.storage.sync.get(null,(e=>{t(e),chrome.storage.local.get(["isLoggedIn","isProUser","translatorServiceType","writeServiceType","apiServiceType","docTranslatorServiceType","browserInstanceId","featureSet","hasTermbaseService"],(e=>{n((t=>({...t,...e})))}))})),chrome.storage.onChanged.addListener((e=>{const t=["a_t","r_t","i_t","accountId"];let o={};for(const[n,r]of Object.entries(e))!1===t.includes(n)&&(o[n]=r.newValue);if(pn()){const e="background-color: #324054;padding: 3px; font-size:12px;color:#e1e8c3; font-weight:600";console.log(`%c${(new Date).toISOString()} UPDATE USER SETTINGS`,e,o)}return n((e=>({...e,...o}))),!0})),{subscribe:e,set:e=>chrome.storage.sync.set(e)}}(),uf=function(){const{subscribe:e,update:t}=cf({});return chrome.runtime.onMessage.addListener((function(e,n){switch(e.action){case"newWebsiteState":e.payload&&t((t=>({...t,[n.tab.id]:{...t[n.tab.id],...e.payload,error:e.payload.error?e.payload.error:void 0}})));break;case"resetWebsiteState":e.payload&&t((t=>({...t,[n.tab.id]:{...e.payload}})))}return!0})),{subscribe:e,fetchCurrentWebsiteSettings:()=>{chrome.tabs&&chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlGetWebsiteData"},(function(n){t((t=>({...t,[e[0].id]:{...t[e[0].id],...n}})))}))}))}}}();!function(e,t,n){const o=!Array.isArray(e),r=o?[e]:e;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return s=(e,n)=>{let s=!1;const a=[];let l=0,c=wg;const d=()=>{if(l)return;c();const r=t(o?a[0]:a,e,n);i?e(r):c=xg(r)?r:wg},u=r.map(((e,t)=>Cg(e,(e=>{a[t]=e,l&=~(1<<t),s&&d()}),(()=>{l|=1<<t}))));return s=!0,d(),function(){Sg(u),c(),s=!1}},{subscribe:cf(n,s).subscribe};var s}(uf,(async(e,t)=>{if(!chrome.tabs)return;t(e[(await chrome.tabs.query({active:!0,currentWindow:!0}))[0].id])}));const pf=function(){const{subscribe:e,set:n}=cf([]);return t({action:"dlGetExperiments",payload:{forceFetch:!1}}).then((e=>n(e))),chrome.runtime.onMessage.addListener((function(e){if("dlExperimentsUpdated"===e.action)e.payload&&n(e.payload.experiments);return!0})),{subscribe:e}}(),mf=e=>!![/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/].some((t=>t.test(e))),gf={dsn:"https://f7c23f019d154c319e91e8de004727dc@errortracking.deepl.com/12",release:"deepl-browser-extension@1.31.0",environment:un(),tracesSampleRate:mn()?.1:1,sampleRate:mn()?.1:1,ignoreErrors:[/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/],beforeSend(e){const t=e.message||e.exception&&e.exception.values&&e.exception.values[0].value||"";return mf(t)?null:(pn()&&console.error(e),e)}};function hf(e,t){t.captureException(e)}const ff="PROTOCOL_ERROR",_f="NETWORK_ERROR",vf="FULL_PAGE_SERVER_ERROR",yf="-32003",wf="429",bf="403",Ef="1045601",Tf="1042902",Sf={ENTRY_NOT_FOUND:"ENTRY_NOT_FOUND",SERVER_ERROR:"SERVER_ERROR"},xf="TRANSLATED_INPUT_NOT_SET",$f="HTML_NODE_CHAR_LENGTH_TOO_LONG",Cf="TRANSLATOR_FREE_ACCOUNT_LIMIT_EXCEEDED",kf="TRANSLATOR_ANONYMOUS_LIMIT_EXCEEDED",Lf="TRANSLATOR_FREE_ANON_WITH_WRITE_PRO",If="WRITE_ANON_OR_FREE_LIMIT_EXCEEDED",Af="WRITE_WITH_PRO_TRANSLATOR_LIMIT_EXCEEDED";class Rf extends Error{constructor(e,t){super(t),this.name=Cf,this.limit=e,this.message=t}}class Mf extends Error{constructor(e,t){super(t),this.name=kf,this.limit=e,this.message=t}}class Nf extends Error{constructor(e,t){super(t),this.name=If,this.limit=e,this.message=t}}class Of extends Error{constructor(e,t){super(t),this.name=Af,this.limit=e,this.message=t}}function Df(e){let t;return{c(){t=Zg("div"),rh(t,"class","dl-zendesk-icon svelte-1tytp0d")},m(e,n){Vg(e,t,n)},p:wg,i:wg,o:wg,d(e){e&&Yg(t)}}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");function Pf(e,t,n){let o,r,i,s;kg(e,df,(e=>n(1,o=e))),xh("text_direction",jt());const a=()=>{const e=window.location.pathname,t=kE(e);let n=!1;if(s!==t&&(n=!0,s=t),t){const e=LE();if(!e)return;const o=IE(e)||AE(e,t);o&&o.processRefreshUI(n)}},l=async e=>{if("dlChangeActiveTabStatus"===e.action)if(e.payload.isActive)c();else{if(!document.hidden)return;d()}return!0},c=()=>{r&&clearInterval(r),r=setInterval(a,800)},d=()=>{clearInterval(r)};Eh((()=>{const e=o.zendeskSuccessfulTranslations>=we;n(0,i=o?.featureSet?.customizations?.includes("zendesk")),e&&!i&&Og(df,o.isZendeskEnabled=!1,o),u()}));const u=()=>{c(),chrome.runtime.onMessage.addListener(l)};return Th((()=>{r&&d(),chrome.runtime.onMessage.removeListener(l),ME()})),e.$$.update=()=>{2&e.$$.dirty&&!o?.featureSet?.customizations?.includes("zendesk")&&o.zendeskSuccessfulTranslations>=we&&(Og(df,o.isZendeskEnabled=!1,o),NE()),3&e.$$.dirty&&!1===i&&o?.featureSet?.customizations?.includes("zendesk")&&(n(0,i=!0),Og(df,o.isZendeskEnabled=!0,o),c()),2&e.$$.dirty&&(o.isZendeskEnabled?c():NE())},[i,o]}class Uf extends af{constructor(e){super(),sf(this,e,Pf,Df,$g,{})}}class Bf{static HTML_TAG_NAME="deepl-zendesk-controller";static createElement=(e=document)=>{const t=e.createElement(Bf.HTML_TAG_NAME),n=new Bf(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.showOnboarding=n.showOnboarding,t.getActiveTermbases=n.getActiveTermbases,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=()=>{this.domElement.mainComponent=new Uf({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM,controller:this}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()};showOnboarding=()=>{this.domElement.mainComponent.showOnboarding()};getActiveTermbases=()=>this.domElement.mainComponent.getActiveTermbases()}function Wf(e){const t=e-1;return t*t*t+1}function zf(e,{delay:t=0,duration:n=400,easing:o=bg}={}){const r=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:o,css:e=>"opacity: "+e*r}}function Ff(e,{delay:t=0,duration:n=400,easing:o=Wf,x:r=0,y:i=0,opacity:s=0}={}){const a=getComputedStyle(e),l=+a.opacity,c="none"===a.transform?"":a.transform,d=l*(1-s),[u,p]=Pg(r),[m,g]=Pg(i);return{delay:t,duration:n,easing:o,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*u}${p}, ${(1-e)*m}${g});\n\t\t\topacity: ${l-d*t}`}}function Hf(e,{delay:t=0,duration:n=400,easing:o=Wf,axis:r="y"}={}){const i=getComputedStyle(e),s=+i.opacity,a="y"===r?"height":"width",l=parseFloat(i[a]),c="y"===r?["top","bottom"]:["left","right"],d=c.map((e=>`${e[0].toUpperCase()}${e.slice(1)}`)),u=parseFloat(i[`padding${d[0]}`]),p=parseFloat(i[`padding${d[1]}`]),m=parseFloat(i[`margin${d[0]}`]),g=parseFloat(i[`margin${d[1]}`]),h=parseFloat(i[`border${d[0]}Width`]),f=parseFloat(i[`border${d[1]}Width`]);return{delay:t,duration:n,easing:o,css:e=>`overflow: hidden;opacity: ${Math.min(20*e,1)*s};${a}: ${e*l}px;padding-${c[0]}: ${e*u}px;padding-${c[1]}: ${e*p}px;margin-${c[0]}: ${e*m}px;margin-${c[1]}: ${e*g}px;border-${c[0]}-width: ${e*h}px;border-${c[1]}-width: ${e*f}px;`}}function jf(e,t){if(!e||!t)return!1;const n=/[\n\r\s]+/gm,o=e.replace(n,""),r=t.replace(n,"");return o.includes(r)}function Gf(e,t,n){let o={block:"end",position:e.length};return t.forEach((t=>{const r=e.indexOf(`<${t}>`,n);r>-1&&r<o.position&&(o={block:t,position:r})})),[o.block,o.position]}function qf(e,t=[]){const n=[];let o=0,r=!1;for(;!r;){const[i,s]=Gf(e,t,o);if("end"===i&&(r=!0),o<s&&n.push({block:"main",text:e.substring(o,s)}),r)break;const a=e.indexOf(`</${i}>`,s);-1===a?(n.push({block:i,text:e.substring(s+`<${i}>`.length)}),r=!0):(n.push({block:i,text:e.substring(s+`<${i}>`.length,a)}),o=a+`</${i}>`.length)}return n}function Vf(e){return e.match(/[^\s.,:;'"]+|[.,:;'"]|\s+/g)||[]}function Yf(e,t){const n=Vf(e),o=Vf(t),r=function(e,t,n){const o=n||((e,t)=>e===t),r=(()=>{let n=0;for(;o(e[n],t[n])&&n<e.length;)++n;return n})();if(r===e.length&&e.length===t.length)return[r];const i=(()=>{let n=e.length-1,i=t.length-1;for(;o(e[n],t[i])&&n>r&&i>r;)--n,--i;return e.length-n-1})(),s=e.length-r-i+1,a=t.length-r-i+1,l=s+a,c=new Map,d=new Map;c.set(1,0),d.set(1,null);for(let n=0;n<=l;++n)for(let l=-n;l<=n;l+=2){let u,p,m;for(l==-n||l!=n&&c.get(l-1)<c.get(l+1)?(u=c.get(l+1),m=[d.get(l+1),void 0,void 0]):(u=c.get(l-1)+1,m=[d.get(l-1),void 0,void 0]),p=u-l;u<s&&p<a&&o(e[u+r],t[p+r]);)++u,++p;if(u>=s&&p>=a){m[1]=s+i-1,m[2]=a+i-1;let e=-1,t=-1;const n=[];for(;m;)n.push([m[1],m[2]]),m=m[0];let o=[],l=null;for(;n.length;){const r=n.pop(),i=r[0],s=r[1],a=i-e,c=s-t,d=Math.min(a,c);a>d&&(l?l[0]+=a-d:(l=[a-d,0],o.push(l))),c>d&&(l?l[1]+=c-d:(l=[0,c-d],o.push(l))),d>0&&(o.push(d),l=null),e=i,t=s}return o[0]=o[0]-1+r,o}c.set(l,u),m[1]=u,m[2]=p,d.set(l,m)}throw new Error("[diff]","should not happen?")}(n,o),i=[];let s=0,a=0,l=0;for(;s<r.length;){const e=r[s];let t=0;for(let o=a+e-1;o>=a;o-=1)t+=n[o]?.match(/^\s/)?2:1;a+=e,l+=e;let c=0,d=0;if(a<n.length&&l<o.length&&n[a]?.match(/^\s/)&&o[l]?.match(/^\s/)&&(c-=1,d-=1,t+=1),i.push(t),s+=1,s<r.length){const[e,t]=r[s];for(let t=a+e-1;t>=a;t-=1)c+=n[t]?.match(/^\s/)?2:1;for(let e=l+t-1;e>=l;e-=1)d+=o[e]?.match(/^\s/)?2:1;i.push([Math.max(c,0),Math.max(d,0)]),s+=1,a+=e,l+=t}}return[i,n,o,r]}function Kf(e,t){let n=0;const o=function(e,t){const n=Yf(t,e),o=[];let r=0,i=0,s=0,a=0;return n[3].forEach((e=>{if(Array.isArray(e)&&"number"==typeof e[0]&&"number"==typeof e[1]){if(0!==e[1]){const t=n[2].slice(i,i+e[1]).join(""),l=n[1].slice(r,r+e[0]).join(""),c={original:l,replace:t};c.changeLength=t.length,c.changeOffset=s,c.originalLength=l.length,c.originalOffset=a,s+=t.length,a+=l.length,o.push(c)}r+=e[0],i+=e[1]}else{let t=0;n[2].slice(i,i+e).forEach((e=>t+=e.length)),s+=t;let o=0;n[1].slice(r,r+e).forEach((e=>o+=e.length)),a+=o,r+=e,i+=e}})),o}(e,t),r=[];for(let t of o){t.changeOffset>n&&r.push({isHighlighted:!1,text:e.substring(n,t.changeOffset)});const o=t.changeOffset+t.changeLength;r.push({isHighlighted:!0,text:e.substring(t.changeOffset,o)}),n=o}return n<e.length&&r.push({isHighlighted:!1,text:e.substring(n,e.length)}),r}const Zf=e=>{let t="";for(const n of e.childNodes)n.nodeType===Node.TEXT_NODE?t+=n.textContent:n.nodeType===Node.ELEMENT_NODE&&"none"!==n.style.display&&(t+=Zf(n));return t};function Xf(e){return"IFRAME"===e.nodeName.toUpperCase()?e_(e):e.ownerDocument===document?window:e.ownerDocument}function Qf(e){return e.ownerDocument===document?document:e.ownerDocument}function Jf(e){return"IFRAME"!==e.nodeName.toUpperCase()?e:e_(e).body}function e_(e){return e.contentDocument||e.contentWindow.document}function t_(e){if("IFRAME"===e.nodeName.toUpperCase())return window;if(e.ownerDocument!==document){const t=e?.ownerDocument?.defaultView?.frameElement?.contentWindow;if(t)return t}return window}function n_(e){return"IFRAME"===e.nodeName.toUpperCase()?e_(e):e.ownerDocument===document?document:e.ownerDocument}function o_(e){return new Promise(((t,n)=>{requestAnimationFrame((()=>{const n=Qf(e).createRange();n.selectNodeContents(Jf(e));const o=Xf(e).getSelection();o.removeAllRanges(),o.addRange(n),t(o)}))}))}const r_=async(e,t)=>{await ln(10);const n=new ClipboardEvent("paste");n.clipboardData.setData("text/html",t.html),n.clipboardData.setData("text/plain",t.text),e.dispatchEvent(n),await ln(10)},i_=async(e,t)=>{await ln(10);const n=new ClipboardEvent("paste",{dataType:"text/html",data:t.html});e.dispatchEvent(n),await ln(10)},s_=async(e,t)=>{await ln(10);const n=new ClipboardEvent("paste",{dataType:"text/plain",data:t.text});e.dispatchEvent(n),await ln(10)},a_=async(e,t)=>{await ln(10),document.execCommand("insertText",!1,t.text),await ln(10)},l_=async(e,t)=>{await ln(10),document.execCommand("insertHTML",!1,t.html),await ln(10)},c_=async(e,t)=>{const n=t_(e);await ln(10);const o=new DataTransfer;o.setData("text/html",t.html),o.setData("text/plain",t.text),e.dispatchEvent(new n.ClipboardEvent("paste",{clipboardData:o,bubbles:!0,cancelable:!0})),o.clearData(),await ln(10)},d_=async(e,t)=>{const n=n_(e),o=t_(e),r=n.createEvent("TextEvent");r.initTextEvent("textInput",!0,!0,o,t.text),e.dispatchEvent(r),await ln(10)},u_=async(e,t)=>{const n=n_(e);e.value&&e.select(),n.execCommand("insertHTML",!1,t.html),await ln(20),(e.value||""===e.value)&&(e.value=t.text)},p_=async(e,n,o)=>{const r=pt();o||e.focus();const i=Jf(e).innerText,s=Jf(e).value,a=[...r?[{method:r_,isSuccessful:()=>m_(i,e.innerText,n.text)},{method:i_,isSuccessful:()=>m_(i,e.innerText,n.text)},{method:s_,isSuccessful:()=>m_(i,e.innerText,n.text)},{method:a_,isSuccessful:()=>m_(i,e.innerText,n.text)},{method:l_,isSuccessful:()=>m_(i,e.innerText,n.text)||m_(s,e.value,n.text)}]:[],{method:c_,isSuccessful:()=>m_(i,Jf(e).innerText,n.text)},{method:d_,isSuccessful:()=>m_(i,Jf(e).innerText,n.text)},{method:u_,isSuccessful:()=>m_(i,Jf(e).innerText,n.text)||m_(s,Jf(e).value,n.text)}];for(const t of a)if(r&&pn()&&console.log(`trying paste event: ${t.method.name}`),await t.method(e,n),t.isSuccessful())return void(r&&pn()&&console.log("attempt was successful: ",t.method.name));throw await ln(1e3),t({action:"dlTranslatedInputTextNotSet",payload:window.location.hostname}),new Error({error:xf})},m_=(e,t,n)=>{let o=!0;return(e&&!t||!jf(e,n)&&e===t||!jf(t,n))&&(o=!1),o},g_=(e,t)=>{const n=new(t_(t).KeyboardEvent)(e,{bubbles:!0,cancelable:!0,keyCode:8,which:8,location:0,key:"Backspace"});return t.dispatchEvent(n)},h_=(e,t)=>{const n=new MouseEvent(e,{bubbles:!0,cancelable:!1});return t.dispatchEvent(n)},f_=e=>{const t=t_(e),n=Qf(e);if(g_("keydown",e)){const o=new t.InputEvent("beforeinput",{bubbles:!0,cancelable:!0,inputType:"deleteContent"});e.dispatchEvent(o)&&n.execCommand("delete",!1)}g_("keyup",e)};function __(e,{isShadow:t=!1,exceptions:n=[]}={}){const o=o=>{const r=t?o.composedPath()[0]:o.target;!e||e.contains(r)||o.defaultPrevented||function(e,t){for(let n of t)if(e.closest(n))return!0;return!1}(r,n)||e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",o,!0),{destroy(){document.removeEventListener("click",o,!0)}}}function v_(e){document.addEventListener("deepl-reset-event",e)}function y_(e){let t,n;const o=e[12].default,r=Lg(o,e,e[11],null);return{c(){t=Zg("div"),r&&r.c()},m(e,o){Vg(e,t,o),r&&r.m(t,null),n=!0},p(e,t){r&&r.p&&(!n||2048&t)&&Rg(r,o,e,e[11],n?Ag(o,e[11],t,null):Mg(e[11]),null)},i(e){n||(Yh(r,e),n=!0)},o(e){Kh(r,e),n=!1},d(e){e&&Yg(t),r&&r.d(e)}}}function w_(e){let t,n,o;const r=e[12].default,i=Lg(r,e,e[11],null);return{c(){t=Zg("div"),i&&i.c(),rh(t,"data-tooltip",e[0]),rh(t,"style",n=`z-index: ${e[2]}; ${e[6]}`),rh(t,"class","svelte-1a71ske"),uh(t,"multiline",e[1]),uh(t,"isFlexItem",e[4]),uh(t,"isRTL",e[7]),uh(t,"showProShield",e[5])},m(e,n){Vg(e,t,n),i&&i.m(t,null),o=!0},p(e,s){i&&i.p&&(!o||2048&s)&&Rg(i,r,e,e[11],o?Ag(r,e[11],s,null):Mg(e[11]),null),(!o||1&s)&&rh(t,"data-tooltip",e[0]),(!o||68&s&&n!==(n=`z-index: ${e[2]}; ${e[6]}`))&&rh(t,"style",n),(!o||2&s)&&uh(t,"multiline",e[1]),(!o||16&s)&&uh(t,"isFlexItem",e[4]),(!o||128&s)&&uh(t,"isRTL",e[7]),(!o||32&s)&&uh(t,"showProShield",e[5])},i(e){o||(Yh(i,e),o=!0)},o(e){Kh(i,e),o=!1},d(e){e&&Yg(t),i&&i.d(e)}}}function b_(e){let t,n,o,r;const i=[w_,y_],s=[];function a(e,t){return e[3]?0:1}return t=a(e),n=s[t]=i[t](e),{c(){n.c(),o=eh()},m(e,n){s[t].m(e,n),Vg(e,o,n),r=!0},p(e,[r]){let l=t;t=a(e),t===l?s[t].p(e,r):(qh(),Kh(s[l],1,1,(()=>{s[l]=null})),Vh(),n=s[t],n?n.p(e,r):(n=s[t]=i[t](e),n.c()),Yh(n,1),n.m(o.parentNode,o))},i(e){r||(Yh(n),r=!0)},o(e){Kh(n),r=!1},d(e){e&&Yg(o),s[t].d(e)}}}function E_(e,t,n){let o,r,{$$slots:i={},$$scope:s}=t;const{deepl_inline_ui:a}=D;let{tooltip:l=!1}=t,{multiline:c=!1}=t,{zIndex:d=a.z_index}=t,{isEnabled:u=!0}=t,{isFlexItem:p=!1}=t,{width:m=null}=t,{parentIsRTL:g=!1}=t,{ignoreTextDirection:h=!1}=t,{showProShield:f=!1}=t;return e.$$set=e=>{"tooltip"in e&&n(0,l=e.tooltip),"multiline"in e&&n(1,c=e.multiline),"zIndex"in e&&n(2,d=e.zIndex),"isEnabled"in e&&n(3,u=e.isEnabled),"isFlexItem"in e&&n(4,p=e.isFlexItem),"width"in e&&n(8,m=e.width),"parentIsRTL"in e&&n(9,g=e.parentIsRTL),"ignoreTextDirection"in e&&n(10,h=e.ignoreTextDirection),"showProShield"in e&&n(5,f=e.showProShield),"$$scope"in e&&n(11,s=e.$$scope)},e.$$.update=()=>{1536&e.$$.dirty&&n(7,o=g||!h&&"rtl"===jt()),256&e.$$.dirty&&n(6,r=m?`width: ${m}px`:"")},[l,c,d,u,p,f,r,o,m,g,h,s,i]}class T_ extends af{constructor(e){super(),sf(this,e,E_,b_,$g,{tooltip:0,multiline:1,zIndex:2,isEnabled:3,isFlexItem:4,width:8,parentIsRTL:9,ignoreTextDirection:10,showProShield:5})}}const S_=(e,t)=>{const n=new ResizeObserver((()=>{const n={clientHeight:e.clientHeight,clientWidth:e.clientWidth,offsetHeight:e.offsetHeight,offsetWidth:e.offsetWidth};t(n)}));return n.observe(e),()=>{n.disconnect()}};function x_(e,t,n){const o=e.slice();return o[46]=t[n],o[48]=n,o}function $_(e){let t,n,o,r=ef(e[3]),i=[];for(let t=0;t<r.length;t+=1)i[t]=L_(x_(e,r,t));return{c(){t=Zg("ul");for(let e=0;e<i.length;e+=1)i[e].c();rh(t,"id","dropdown_list"),rh(t,"role","listbox"),rh(t,"aria-labelledby","dropdown_option"),rh(t,"tabindex","-1"),rh(t,"style",n="up"===e[12]?"bottom: 30px":`height: ${e[16].height}; top: ${e[16].top};`),rh(t,"data-qa",e[6]),rh(t,"class","svelte-1tk603q"),uh(t,"alternate-dropdown-list","sm"===e[8]),uh(t,"align-right",e[9])},m(n,o){Vg(n,t,o);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null);e[37](t)},p(e,o){if(4726795&o[0]){let n;for(r=ef(e[3]),n=0;n<r.length;n+=1){const s=x_(e,r,n);i[n]?i[n].p(s,o):(i[n]=L_(s),i[n].c(),i[n].m(t,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=r.length}69632&o[0]&&n!==(n="up"===e[12]?"bottom: 30px":`height: ${e[16].height}; top: ${e[16].top};`)&&rh(t,"style",n),64&o[0]&&rh(t,"data-qa",e[6]),256&o[0]&&uh(t,"alternate-dropdown-list","sm"===e[8]),512&o[0]&&uh(t,"align-right",e[9])},i(e){o||Oh((()=>{o=Xh(t,Ff,{y:-5,duration:500}),o.start()}))},o:wg,d(n){n&&Yg(t),Kg(i,n),e[37](null)}}}function C_(e){let t,n=e[46].label+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p(e,o){8&o[0]&&n!==(n=e[46].label+"")&&ih(t,n)},d(e){e&&Yg(t)}}}function k_(e){let t,n,o=ft(e[46].label)+"";return{c(){t=new mh(!1),n=eh(),t.a=n},m(e,r){t.m(o,e,r),Vg(e,n,r)},p(e,n){8&n[0]&&o!==(o=ft(e[46].label)+"")&&t.p(o)},d(e){e&&(Yg(n),t.d())}}}function L_(e){let t,n,o,r,i,s,a;function l(e,t){return e[13]?k_:C_}let c=l(e),d=c(e);function u(){return e[36](e[46])}return{c(){t=Zg("li"),d.c(),n=Jg(),rh(t,"role","option"),rh(t,"data-option-value",o=e[46].value),rh(t,"data-option-regionalvariant",r=e[46].regionalVariant),rh(t,"aria-selected",i=e[0]===e[46]),rh(t,"class","svelte-1tk603q"),uh(t,"selected",e[0]===e[46]),uh(t,"keyboardSelected",e[48]===e[19])},m(o,r){Vg(o,t,r),d.m(t,null),jg(t,n),s||(a=[th(t,"click",u),th(t,"mousedown",oh(nh(e[33])))],s=!0)},p(s,a){c===(c=l(e=s))&&d?d.p(e,a):(d.d(1),d=c(e),d&&(d.c(),d.m(t,n))),8&a[0]&&o!==(o=e[46].value)&&rh(t,"data-option-value",o),8&a[0]&&r!==(r=e[46].regionalVariant)&&rh(t,"data-option-regionalvariant",r),9&a[0]&&i!==(i=e[0]===e[46])&&rh(t,"aria-selected",i),9&a[0]&&uh(t,"selected",e[0]===e[46]),524288&a[0]&&uh(t,"keyboardSelected",e[48]===e[19])},d(e){e&&Yg(t),d.d(),s=!1,Sg(a)}}}function I_(e){let t,n,o,r,i,s,a,l=e[1]&&$_(e);return{c(){t=Zg("div"),n=Zg("button"),o=Qg(e[17]),r=Jg(),l&&l.c(),rh(n,"aria-haspopup","listbox"),rh(n,"id","dropdown_button"),rh(n,"aria-labelledby","dropdown_option dropdown_button"),rh(n,"aria-expanded",e[1]),rh(n,"data-qa",e[5]),rh(n,"data-testid",e[5]),rh(n,"class","svelte-1tk603q"),uh(n,"dropdown-label","original"===e[7]),uh(n,"dropdown-label-alternate","alternate"===e[7]),uh(n,"dropdown-label-zendesk","zendesk"===e[7]),uh(n,"dropdown-label-input-selection-result","input-selection-result"===e[7]),uh(n,"dropdown-label-full-width",e[10]),uh(n,"dropdown-label-borderless",e[11]),uh(n,"dropup","up"===e[12]),uh(n,"extra-padding",e[14]),rh(t,"class",i=Ng(`dropdown__wrapper ${e[4]}`)+" svelte-1tk603q"),rh(t,"style",e[21]),uh(t,"disabled",e[2])},m(i,c){Vg(i,t,c),jg(t,n),jg(n,o),e[35](n),jg(t,r),l&&l.m(t,null),e[39](t),s||(a=[th(n,"click",e[23]),th(n,"mousedown",oh(nh(e[34]))),th(n,"keydown",e[24]),Dg(__.call(null,t,{isShadow:!0})),th(t,"click_outside",e[38])],s=!0)},p(e,r){131072&r[0]&&ih(o,e[17]),2&r[0]&&rh(n,"aria-expanded",e[1]),32&r[0]&&rh(n,"data-qa",e[5]),32&r[0]&&rh(n,"data-testid",e[5]),128&r[0]&&uh(n,"dropdown-label","original"===e[7]),128&r[0]&&uh(n,"dropdown-label-alternate","alternate"===e[7]),128&r[0]&&uh(n,"dropdown-label-zendesk","zendesk"===e[7]),128&r[0]&&uh(n,"dropdown-label-input-selection-result","input-selection-result"===e[7]),1024&r[0]&&uh(n,"dropdown-label-full-width",e[10]),2048&r[0]&&uh(n,"dropdown-label-borderless",e[11]),4096&r[0]&&uh(n,"dropup","up"===e[12]),16384&r[0]&&uh(n,"extra-padding",e[14]),e[1]?l?(l.p(e,r),2&r[0]&&Yh(l,1)):(l=$_(e),l.c(),Yh(l,1),l.m(t,null)):l&&(l.d(1),l=null),16&r[0]&&i!==(i=Ng(`dropdown__wrapper ${e[4]}`)+" svelte-1tk603q")&&rh(t,"class",i),2097152&r[0]&&rh(t,"style",e[21]),20&r[0]&&uh(t,"disabled",e[2])},i(e){Yh(l)},o:wg,d(n){n&&Yg(t),e[35](null),l&&l.d(),e[39](null),s=!1,Sg(a)}}}function A_(e,t,n){let{isOpen:o=!1}=t,{disabled:r=!1}=t,{items:i=[]}=t,{placeholder:s=""}=t,{customClass:a=""}=t,{selectedOption:l}=t,{defaultOption:c}=t,{dataQaButton:d="dl-dropdown-button"}=t,{dataQaList:u="dl-dropdown-list"}=t,{variant:p="original"}=t,{fontSize:m="default"}=t,{alignRight:g=!0}=t,{extraText:h=""}=t,{isFullWidth:f=!1}=t,{isBorderless:_=!1}=t,{direction:v="down"}=t,{allowLabelHtml:y=!1}=t,{showSortCode:w=!1}=t,{extraPadding:b=!1}=t,{dropdownMaxHeight:E=300}=t,{autoHeight:T=!1}=t;const S=$h("deepl_settings");let x,$,C,k,L,I=0,A={},R={},M={},N=-1,O="visibility: hidden; opacity:0; height:0;";const D=Sh();function P(){A.spaceAbove=Math.abs(x.getBoundingClientRect().top),A.spaceBelow=Math.abs(window.innerHeight-x.getBoundingClientRect().bottom)}c&&(l=c),Eh((()=>{setTimeout((()=>{n(21,O="")}),100),k=S_(C,(({clientWidth:e})=>{n(31,I=e)}))})),Th((()=>{k&&k()}));return e.$$set=e=>{"isOpen"in e&&n(1,o=e.isOpen),"disabled"in e&&n(2,r=e.disabled),"items"in e&&n(3,i=e.items),"placeholder"in e&&n(25,s=e.placeholder),"customClass"in e&&n(4,a=e.customClass),"selectedOption"in e&&n(0,l=e.selectedOption),"defaultOption"in e&&n(26,c=e.defaultOption),"dataQaButton"in e&&n(5,d=e.dataQaButton),"dataQaList"in e&&n(6,u=e.dataQaList),"variant"in e&&n(7,p=e.variant),"fontSize"in e&&n(8,m=e.fontSize),"alignRight"in e&&n(9,g=e.alignRight),"extraText"in e&&n(27,h=e.extraText),"isFullWidth"in e&&n(10,f=e.isFullWidth),"isBorderless"in e&&n(11,_=e.isBorderless),"direction"in e&&n(12,v=e.direction),"allowLabelHtml"in e&&n(13,y=e.allowLabelHtml),"showSortCode"in e&&n(28,w=e.showSortCode),"extraPadding"in e&&n(14,b=e.extraPadding),"dropdownMaxHeight"in e&&n(29,E=e.dropdownMaxHeight),"autoHeight"in e&&n(30,T=e.autoHeight)},e.$$.update=()=>{1&e.$$.dirty[0]|3&e.$$.dirty[1]&&(l&&(M?.value===l?.value&&M?.regionalVariant===l?.regionalVariant||(n(32,M=l),D("valueselected",{selectedOption:l}))),I&&P()),436207617&e.$$.dirty[0]&&n(17,$=l?`${w?l.value:l.selectedOptionLabel}${h?` ${h}`:""}`:`${s}${h?` ${h}`:""}`)},[l,o,r,i,a,d,u,p,m,g,f,_,v,y,b,x,R,$,C,N,L,O,S,function(){"down"===v&&function(){if(T)return;if(P(),n(16,R.top="auto",R),n(16,R.height=`${E}px`,R),A.spaceBelow>A.spaceAbove)A.spaceBelow<=E&&n(16,R.height=Math.ceil(.8*A.spaceBelow)+"px",R);else{let e=E;A.spaceAbove<=E&&(e=Math.ceil(.8*A.spaceAbove)),n(16,R.height=`${e}px`,R),n(16,R.top="-"+(e+2)+"px",R)}}(),n(1,o=!o),function(){let e=x.getRootNode().querySelector("ul li[aria-selected=true]");setTimeout((()=>{e?.scrollIntoView({block:"nearest"})}),0)}()},function(e){if(!o)return;if("ArrowUp"===e.key&&N>0)n(19,N-=1);else if("ArrowDown"===e.key&&N<i.length-1)n(19,N+=1);else if("Enter"===e.key&&-1!==N){const t=i[N];n(1,o=!1),n(0,l=t),n(19,N=-1),S.set({regionalVariant:t.regionalVariant||""}),e.preventDefault(),e.stopPropagation()}else{if("Escape"!==e.key)return;n(1,o=!1),n(19,N=-1)}const t=i[N];var r=L.querySelector(`[data-option-value="${t.value}"]`).offsetTop-L.offsetTop;L.scrollTo({top:r,behavior:"smooth"})},s,c,h,w,E,T,I,M,function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(e){Lh[e?"unshift":"push"]((()=>{x=e,n(15,x)}))},e=>{n(1,o=!1),n(0,l=e),n(19,N=-1),S.set({regionalVariant:e.regionalVariant||""})},function(e){Lh[e?"unshift":"push"]((()=>{L=e,n(20,L)}))},()=>{n(1,o=!1)},function(e){Lh[e?"unshift":"push"]((()=>{C=e,n(18,C)}))}]}class R_ extends af{constructor(e){super(),sf(this,e,A_,I_,$g,{isOpen:1,disabled:2,items:3,placeholder:25,customClass:4,selectedOption:0,defaultOption:26,dataQaButton:5,dataQaList:6,variant:7,fontSize:8,alignRight:9,extraText:27,isFullWidth:10,isBorderless:11,direction:12,allowLabelHtml:13,showSortCode:28,extraPadding:14,dropdownMaxHeight:29,autoHeight:30},null,[-1,-1])}}function M_(e){let t,n,o,r,i;return n=new R_({props:{items:e[1],selectedOption:e[2],alignRight:!1,dataQaButton:"deepl-formality-selection-button",dataQaList:"deepl-formality-selection-list",variant:"zendesk",isFullWidth:e[0],direction:"up"}}),n.$on("valueselected",e[3]),{c(){t=Zg("div"),nf(n.$$.fragment)},m(s,a){Vg(s,t,a),of(n,t,null),o=!0,r||(i=th(t,"mousedown",oh(nh(e[5]))),r=!0)},p(e,[t]){const o={};2&t&&(o.items=e[1]),4&t&&(o.selectedOption=e[2]),1&t&&(o.isFullWidth=e[0]),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n),r=!1,i()}}}function N_(e,t,n){let o,r;const i=Sh();let{value:s}=t,{isFullWidth:a=!1}=t;return e.$$set=e=>{"value"in e&&n(4,s=e.value),"isFullWidth"in e&&n(0,a=e.isFullWidth)},e.$$.update=()=>{18&e.$$.dirty&&n(2,r=s?o.find((e=>e.value===s)):o.find((e=>"auto"===e.value)))},n(1,o=[{value:"auto",label:chrome.i18n.getMessage("ui_formality_automatic"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_automatic")},{value:"formal",label:chrome.i18n.getMessage("ui_formality_formal"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_formal")},{value:"informal",label:chrome.i18n.getMessage("ui_formality_informal"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_informal")}]),[a,o,r,function(e){e.detail.selectedOption.value!==s&&i("selection",e.detail)},s,function(t){Ch.call(this,e,t)}]}class O_ extends af{constructor(e){super(),sf(this,e,N_,M_,$g,{value:4,isFullWidth:0})}}const D_="ACCESS_DENIED",P_="INVALID_REQUEST",U_="INVALID_GRANT",B_="INVALID_NONCE",W_={RATE_LIMITED:"ITA_RATE_LIMITED",RATE_LIMITED_RESTRICTED:"ITA_RATE_LIMITED_RESTRICTED",WRITE_LANGUAGE_NOT_SUPPORTED:"ITA_WRITE_LANGUAGE_NOT_SUPPORTED",TRANSLATE_LANGUAGE_NOT_SUPPORTED:"ITA_TRANSLATE_LANGUAGE_NOT_SUPPORTED",WRITE_GENERIC_ERROR:"ITA_WRITE_GENERIC_ERROR",TRANSLATE_GENERIC_ERROR:"ITA_TRANSLATE_GENERIC_ERROR"},z_="PROTOCOL_ERROR",F_="NETWORK_ERROR",H_="FULL_PAGE_SERVER_ERROR",j_="-32003",G_="429",q_="403",V_="401",Y_="1045601",K_="1042902";function Z_(){return!!chrome&&!!chrome.tabs}const X_=cf(!1);function Q_(e){let t,n,o;return{c(){t=Zg("button"),t.innerHTML='<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 13L13 1M1 1L13 13" stroke="#DA5E5C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',rh(t,"class","dl-close-icon svelte-nsrzuc")},m(r,i){Vg(r,t,i),n||(o=th(t,"click",(function(){xg(e[0])&&e[0].apply(this,arguments)})),n=!0)},p(t,n){e=t},d(e){e&&Yg(t),n=!1,o()}}}function J_(e){let t,n,o,r,i,s;const a=e[2].default,l=Lg(a,e,e[1],null);let c=e[0]&&Q_(e);return{c(){t=Zg("div"),n=Zg("div"),n.innerHTML='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 12L10 10M10 10L12 8M10 10L8 8M10 10L12 12M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z" stroke="#DA5E5C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',o=Jg(),r=Zg("div"),l&&l.c(),i=Jg(),c&&c.c(),rh(n,"class","icon-container svelte-nsrzuc"),rh(r,"class","message svelte-nsrzuc"),rh(t,"class","error-msg svelte-nsrzuc")},m(e,a){Vg(e,t,a),jg(t,n),jg(t,o),jg(t,r),l&&l.m(r,null),jg(t,i),c&&c.m(t,null),s=!0},p(e,[n]){l&&l.p&&(!s||2&n)&&Rg(l,a,e,e[1],s?Ag(a,e[1],n,null):Mg(e[1]),null),e[0]?c?c.p(e,n):(c=Q_(e),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i(e){s||(Yh(l,e),s=!0)},o(e){Kh(l,e),s=!1},d(e){e&&Yg(t),l&&l.d(e),c&&c.d()}}}function ev(e,t,n){let{$$slots:o={},$$scope:r}=t,{close:i}=t;return e.$$set=e=>{"close"in e&&n(0,i=e.close),"$$scope"in e&&n(1,r=e.$$scope)},[i,r,o]}class tv extends af{constructor(e){super(),sf(this,e,ev,J_,$g,{close:0})}}function nv(e){let t,n,o;return{c(){t=Zg("button"),t.innerHTML='<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 13L13 1M1 1L13 13" stroke="#ECBA82" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',rh(t,"class","dl-close-icon svelte-kyufep")},m(r,i){Vg(r,t,i),n||(o=th(t,"click",(function(){xg(e[0])&&e[0].apply(this,arguments)})),n=!0)},p(t,n){e=t},d(e){e&&Yg(t),n=!1,o()}}}function ov(e){let t,n,o,r,i,s;const a=e[2].default,l=Lg(a,e,e[1],null);let c=e[0]&&nv(e);return{c(){t=Zg("div"),n=Zg("div"),n.innerHTML='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 6V10M10 14H10.01M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z" stroke="#ECBA82" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',o=Jg(),r=Zg("div"),l&&l.c(),i=Jg(),c&&c.c(),rh(n,"class","icon-container svelte-kyufep"),rh(r,"class","message svelte-kyufep"),rh(t,"class","warn-msg svelte-kyufep")},m(e,a){Vg(e,t,a),jg(t,n),jg(t,o),jg(t,r),l&&l.m(r,null),jg(t,i),c&&c.m(t,null),s=!0},p(e,[n]){l&&l.p&&(!s||2&n)&&Rg(l,a,e,e[1],s?Ag(a,e[1],n,null):Mg(e[1]),null),e[0]?c?c.p(e,n):(c=nv(e),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i(e){s||(Yh(l,e),s=!0)},o(e){Kh(l,e),s=!1},d(e){e&&Yg(t),l&&l.d(e),c&&c.d()}}}function rv(e,t,n){let{$$slots:o={},$$scope:r}=t,{close:i}=t;return e.$$set=e=>{"close"in e&&n(0,i=e.close),"$$scope"in e&&n(1,r=e.$$scope)},[i,r,o]}class iv extends af{constructor(e){super(),sf(this,e,rv,ov,$g,{close:0})}}function sv(e){let t;return{c(){t=Zg("span"),t.textContent=`${chrome.i18n.getMessage("error_message_generic_error")}`,rh(t,"data-qa","error-message-generic")},m(e,n){Vg(e,t,n)},p:wg,i:wg,o:wg,d(e){e&&Yg(t)}}}class av extends af{constructor(e){super(),sf(this,e,null,sv,$g,{})}}function lv(e){let t;return{c(){t=Zg("span"),t.textContent=`${chrome.i18n.getMessage("error_message_generic_write_error")}`,rh(t,"data-qa","error-message-generic")},m(e,n){Vg(e,t,n)},p:wg,i:wg,o:wg,d(e){e&&Yg(t)}}}class cv extends af{constructor(e){super(),sf(this,e,null,lv,$g,{})}}function dv(e){let t;return{c(){t=Zg("span"),t.textContent=`${chrome.i18n.getMessage("error_message_internet_connection")}`},m(e,n){Vg(e,t,n)},p:wg,i:wg,o:wg,d(e){e&&Yg(t)}}}class uv extends af{constructor(e){super(),sf(this,e,null,dv,$g,{})}}function pv(e){let t;return{c(){t=Zg("span"),t.textContent=`${chrome.i18n.getMessage("full_page_translation_error_service_not_available")}`},m(e,n){Vg(e,t,n)},p:wg,i:wg,o:wg,d(e){e&&Yg(t)}}}class mv extends af{constructor(e){super(),sf(this,e,null,pv,$g,{})}}const gv="DOCS_GOOGLE_COM_FEEDBACK_FORM",hv="NEW_FEEDBACK_FORM",fv="DEEPL_COM_PRO",_v="DEEPL_COM_PRO_WRITE",vv="DEEPL_COM_TRANSLATOR",yv="DEEPL_COM_HOMEPAGE",wv="DEEPL_COM_WRITE",bv="SHORTCUT_SETTINGS",Ev="CHROME_WRITE_A_REVIEW",Tv="EDGE_WRITE_A_REVIEW",Sv="GMAIL_FEEDBACK_SURVEY",xv="GSLIDES_FEEDBACK_SURVEY",$v="FIREFOX_WRITE_A_REVIEW",Cv="DEEPL_SUPPORT",kv="FIREFOX_FEEDBACK_SURVEY",Lv="CUSTOMER_SEGMENTATION_SURVEY_FREE",Iv="CUSTOMER_SEGMENTATION_SURVEY_PRO",Av="ARABIC_SURVEY",Rv="ADDINS_ADS";function Mv(e){let t,n,o,r,i,s;return{c(){t=Zg("div"),n=Zg("div"),n.textContent=`${chrome.i18n.getMessage("warning_message_different_subscription_needed")}`,o=Jg(),r=Zg("div"),r.textContent=`${chrome.i18n.getMessage("link_get_pro_license")}`,rh(r,"class","link svelte-1mpkjv7"),rh(t,"class","container svelte-1mpkjv7")},m(a,l){Vg(a,t,l),jg(t,n),jg(t,o),jg(t,r),i||(s=th(r,"click",e[0]),i=!0)},p:wg,i:wg,o:wg,d(e){e&&Yg(t),i=!1,s()}}}function Nv(e){return[function(){t({action:"dlExternalURLRedirect",payload:{destination:fv,utmContent:"warning_user_unauthorised"}})}]}class Ov extends af{constructor(e){super(),sf(this,e,Nv,Mv,$g,{})}}function Dv(e){let t,n,o,r,i,s;return{c(){t=Zg("div"),n=Zg("div"),n.textContent=`${chrome.i18n.getMessage("warning_message_free_usage_limit_reached")}`,o=Jg(),r=Zg("div"),r.textContent=`${chrome.i18n.getMessage("link_try_deepl")}`,rh(r,"class","link svelte-1mpkjv7"),rh(t,"class","container svelte-1mpkjv7")},m(a,l){Vg(a,t,l),jg(t,n),jg(t,o),jg(t,r),i||(s=th(r,"click",e[0]),i=!0)},p:wg,i:wg,o:wg,d(e){e&&Yg(t),i=!1,s()}}}function Pv(e){return[function(){t({action:"dlExternalURLRedirect",payload:{destination:fv,utmContent:"warning_user_blocked"}})}]}class Uv extends af{constructor(e){super(),sf(this,e,Pv,Dv,$g,{})}}function Bv(e){let t;return{c(){t=Zg("span"),t.textContent=`${chrome.i18n.getMessage("error_message_please_login")}`},m(e,n){Vg(e,t,n)},p:wg,i:wg,o:wg,d(e){e&&Yg(t)}}}class Wv extends af{constructor(e){super(),sf(this,e,null,Bv,$g,{})}}function zv(e,t,n){const o=e.slice();return o[1]=t[n],o}function Fv(e){let t,n=e[1].text+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function Hv(e){let t,n,o;return{c(){t=Zg("span"),t.textContent=`${e[1].text} `,rh(t,"class","link svelte-1mpkjv7")},m(r,i){Vg(r,t,i),n||(o=th(t,"click",e[0]),n=!0)},p:wg,d(e){e&&Yg(t),n=!1,o()}}}function jv(e){let t;let n=function(e,t){return"deeplSupportLink"===e[1].block?Hv:Fv}(e),o=n(e);return{c(){o.c(),t=eh()},m(e,n){o.m(e,n),Vg(e,t,n)},p(e,t){o.p(e,t)},d(e){e&&Yg(t),o.d(e)}}}function Gv(e){let t,n=ef(qf(chrome.i18n.getMessage("warning_message_account_limit_reached"),["deeplSupportLink"])),o=[];for(let t=0;t<n.length;t+=1)o[t]=jv(zv(e,n,t));return{c(){t=Zg("div");for(let e=0;e<o.length;e+=1)o[e].c();rh(t,"class","container svelte-1mpkjv7")},m(e,n){Vg(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,[r]){if(1&r){let i;for(n=ef(qf(chrome.i18n.getMessage("warning_message_account_limit_reached"),["deeplSupportLink"])),i=0;i<n.length;i+=1){const s=zv(e,n,i);o[i]?o[i].p(s,r):(o[i]=jv(s),o[i].c(),o[i].m(t,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},i:wg,o:wg,d(e){e&&Yg(t),Kg(o,e)}}}function qv(e){return[function(){t({action:"dlExternalURLRedirect",payload:{destination:Cv}})}]}class Vv extends af{constructor(e){super(),sf(this,e,qv,Gv,$g,{})}}function Yv(e){let t;return{c(){t=Zg("span"),t.textContent=`${chrome.i18n.getMessage("error_message_technical_issue")}`},m(e,n){Vg(e,t,n)},p:wg,i:wg,o:wg,d(e){e&&Yg(t)}}}class Kv extends af{constructor(e){super(),sf(this,e,null,Yv,$g,{})}}function Zv(e){let t;return{c(){t=Zg("span"),t.textContent=`${chrome.i18n.getMessage("error_message_session_expired")}`},m(e,n){Vg(e,t,n)},p:wg,i:wg,o:wg,d(e){e&&Yg(t)}}}class Xv extends af{constructor(e){super(),sf(this,e,null,Zv,$g,{})}}function Qv(e){let t;return{c(){t=Zg("span"),t.textContent=`${chrome.i18n.getMessage("full_page_translation_error_exceeds_char_limit")}`},m(e,n){Vg(e,t,n)},p:wg,i:wg,o:wg,d(e){e&&Yg(t)}}}class Jv extends af{constructor(e){super(),sf(this,e,null,Qv,$g,{})}}function ey(e,t,n){const o=e.slice();return o[5]=t[n],o}function ty(e){let t,n=e[5].text+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p(e,o){4&o&&n!==(n=e[5].text+"")&&ih(t,n)},d(e){e&&Yg(t)}}}function ny(e){let t,n,o=e[5].text+"";return{c(){t=Zg("strong"),n=Qg(o)},m(e,o){Vg(e,t,o),jg(t,n)},p(e,t){4&t&&o!==(o=e[5].text+"")&&ih(n,o)},d(e){e&&Yg(t)}}}function oy(e){let t;function n(e,t){return"strong"===e[5].block?ny:ty}let o=n(e),r=o(e);return{c(){r.c(),t=eh()},m(e,n){r.m(e,n),Vg(e,t,n)},p(e,i){o===(o=n(e))&&r?r.p(e,i):(r.d(1),r=o(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){e&&Yg(t),r.d(e)}}}function ry(e){let t,n,o,r;return{c(){t=Xg("svg"),n=Xg("path"),rh(n,"d","M4 12L12 4M4 4L12 12"),rh(n,"stroke","white"),rh(n,"stroke-width","1.5"),rh(n,"stroke-linecap","round"),rh(n,"stroke-linejoin","round"),rh(t,"width","16"),rh(t,"height","16"),rh(t,"viewBox","0 0 16 16"),rh(t,"fill","none"),rh(t,"xmlns","http://www.w3.org/2000/svg"),rh(t,"class","svelte-1mvy8b2")},m(i,s){Vg(i,t,s),jg(t,n),o||(r=th(t,"click",(function(){xg(e[1])&&e[1].apply(this,arguments)})),o=!0)},p(t,n){e=t},d(e){e&&Yg(t),o=!1,r()}}}function iy(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g=ef(qf(chrome.i18n.getMessage("notification_anonymous_user_limit_exceeded_description",e[2]),["strong"])),h=[];for(let t=0;t<g.length;t+=1)h[t]=oy(ey(e,g,t));let f=e[1]&&ry(e);return{c(){t=Zg("div"),n=Zg("div"),o=Zg("h1"),o.textContent=`${chrome.i18n.getMessage("notification_anonymous_user_limit_exceeded_headline")}`,r=Jg(),i=Zg("p");for(let e=0;e<h.length;e+=1)h[e].c();s=Jg(),a=Zg("div"),l=Zg("button"),l.textContent=`${chrome.i18n.getMessage("notification_anonymous_user_limit_exceeded_login_button")}`,c=Jg(),d=Zg("button"),d.textContent=`${chrome.i18n.getMessage("notification_anonymous_user_limit_exceeded_signup_button")}`,u=Jg(),f&&f.c(),rh(o,"class","svelte-1mvy8b2"),rh(i,"class","description svelte-1mvy8b2"),rh(n,"class","messages svelte-1mvy8b2"),uh(n,"small",e[0].small),rh(l,"class","log-in svelte-1mvy8b2"),rh(d,"class","sign-up svelte-1mvy8b2"),rh(a,"class","actions svelte-1mvy8b2"),uh(a,"small",e[0].small),rh(t,"class","container svelte-1mvy8b2"),rh(t,"data-testid","error-message-anonymous-limit-exceeded"),uh(t,"small",e[0].small)},m(g,_){Vg(g,t,_),jg(t,n),jg(n,o),jg(n,r),jg(n,i);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(i,null);jg(t,s),jg(t,a),jg(a,l),jg(a,c),jg(a,d),jg(t,u),f&&f.m(t,null),p||(m=[th(l,"click",e[3]),th(d,"click",e[4])],p=!0)},p(e,[o]){if(4&o){let t;for(g=ef(qf(chrome.i18n.getMessage("notification_anonymous_user_limit_exceeded_description",e[2]),["strong"])),t=0;t<g.length;t+=1){const n=ey(e,g,t);h[t]?h[t].p(n,o):(h[t]=oy(n),h[t].c(),h[t].m(i,null))}for(;t<h.length;t+=1)h[t].d(1);h.length=g.length}1&o&&uh(n,"small",e[0].small),1&o&&uh(a,"small",e[0].small),e[1]?f?f.p(e,o):(f=ry(e),f.c(),f.m(t,null)):f&&(f.d(1),f=null),1&o&&uh(t,"small",e[0].small)},i:wg,o:wg,d(e){e&&Yg(t),Kg(h,e),f&&f.d(),p=!1,Sg(m)}}}function sy(e,n,o){let{config:r}=n,{close:i}=n,s="";return Eh((()=>{t({action:"dlGetUsersCharacterLimit"}).then((e=>o(2,s=e.toString()))),t({action:"dlTrackUpgradeNotificationIsDisplayed",payload:{type:Ue}})})),Th((()=>{t({action:"dlTrackUpgradeNotificationClosed",payload:{type:Ue}})})),e.$$set=e=>{"config"in e&&o(0,r=e.config),"close"in e&&o(1,i=e.close)},[r,i,s,function(){t({action:"dlRequestLogin"}).then((()=>{})).catch((e=>{console.log(e)})),t({action:"dlTrackUpgradeNotificationAction",payload:{type:Ue,cta:He}})},function(){t({action:"dlExternalURLRedirect",payload:{destination:fv,utmContent:"notification_anonymous_user_limit_exceeded"}}),t({action:"dlTrackUpgradeNotificationAction",payload:{type:Ue,cta:je}})}]}class ay extends af{constructor(e){super(),sf(this,e,sy,iy,$g,{config:0,close:1})}}function ly(e,t,n){const o=e.slice();return o[4]=t[n],o}function cy(e){let t,n=e[4].text+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p(e,o){4&o&&n!==(n=e[4].text+"")&&ih(t,n)},d(e){e&&Yg(t)}}}function dy(e){let t,n,o=e[4].text+"";return{c(){t=Zg("strong"),n=Qg(o)},m(e,o){Vg(e,t,o),jg(t,n)},p(e,t){4&t&&o!==(o=e[4].text+"")&&ih(n,o)},d(e){e&&Yg(t)}}}function uy(e){let t;function n(e,t){return"strong"===e[4].block?dy:cy}let o=n(e),r=o(e);return{c(){r.c(),t=eh()},m(e,n){r.m(e,n),Vg(e,t,n)},p(e,i){o===(o=n(e))&&r?r.p(e,i):(r.d(1),r=o(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){e&&Yg(t),r.d(e)}}}function py(e){let t,n,o,r;return{c(){t=Xg("svg"),n=Xg("path"),rh(n,"d","M4 12L12 4M4 4L12 12"),rh(n,"stroke","white"),rh(n,"stroke-width","1.5"),rh(n,"stroke-linecap","round"),rh(n,"stroke-linejoin","round"),rh(t,"width","16"),rh(t,"height","16"),rh(t,"viewBox","0 0 16 16"),rh(t,"fill","none"),rh(t,"xmlns","http://www.w3.org/2000/svg"),rh(t,"class","svelte-1i5r4eu")},m(i,s){Vg(i,t,s),jg(t,n),o||(r=th(t,"click",(function(){xg(e[1])&&e[1].apply(this,arguments)})),o=!0)},p(t,n){e=t},d(e){e&&Yg(t),o=!1,r()}}}function my(e){let t,n,o,r,i,s,a,l,c,d,u,p=ef(qf(chrome.i18n.getMessage("notification_free_account_limit_exceeded_description",e[2]),["strong"])),m=[];for(let t=0;t<p.length;t+=1)m[t]=uy(ly(e,p,t));let g=e[1]&&py(e);return{c(){t=Zg("div"),n=Zg("div"),o=Zg("h1"),o.textContent=`${chrome.i18n.getMessage("notification_free_account_limit_exceeded_headline")}`,r=Jg(),i=Zg("p");for(let e=0;e<m.length;e+=1)m[e].c();s=Jg(),a=Zg("div"),l=Zg("button"),l.textContent=`${chrome.i18n.getMessage("notification_free_account_limit_exceeded_signup_button")}`,c=Jg(),g&&g.c(),rh(o,"class","svelte-1i5r4eu"),rh(i,"class","description svelte-1i5r4eu"),rh(n,"class","messages svelte-1i5r4eu"),uh(n,"small",e[0].small),rh(l,"class","sign-up svelte-1i5r4eu"),rh(a,"class","actions svelte-1i5r4eu"),uh(a,"small",e[0].small),rh(t,"class","container svelte-1i5r4eu"),rh(t,"data-testid","error-message-limit-exceeded-free-account"),uh(t,"small",e[0].small)},m(p,h){Vg(p,t,h),jg(t,n),jg(n,o),jg(n,r),jg(n,i);for(let e=0;e<m.length;e+=1)m[e]&&m[e].m(i,null);jg(t,s),jg(t,a),jg(a,l),jg(t,c),g&&g.m(t,null),d||(u=th(l,"click",e[3]),d=!0)},p(e,[o]){if(4&o){let t;for(p=ef(qf(chrome.i18n.getMessage("notification_free_account_limit_exceeded_description",e[2]),["strong"])),t=0;t<p.length;t+=1){const n=ly(e,p,t);m[t]?m[t].p(n,o):(m[t]=uy(n),m[t].c(),m[t].m(i,null))}for(;t<m.length;t+=1)m[t].d(1);m.length=p.length}1&o&&uh(n,"small",e[0].small),1&o&&uh(a,"small",e[0].small),e[1]?g?g.p(e,o):(g=py(e),g.c(),g.m(t,null)):g&&(g.d(1),g=null),1&o&&uh(t,"small",e[0].small)},i:wg,o:wg,d(e){e&&Yg(t),Kg(m,e),g&&g.d(),d=!1,u()}}}function gy(e,n,o){let{config:r}=n,{close:i}=n,s="";return Eh((()=>{t({action:"dlGetUsersCharacterLimit"}).then((e=>o(2,s=e.toString()))),t({action:"dlTrackUpgradeNotificationIsDisplayed",payload:{type:Be}})})),Th((()=>{t({action:"dlTrackUpgradeNotificationClosed",payload:{type:Be}})})),e.$$set=e=>{"config"in e&&o(0,r=e.config),"close"in e&&o(1,i=e.close)},[r,i,s,function(){t({action:"dlExternalURLRedirect",payload:{destination:fv,utmContent:"notification_free_account_limit_exceeded"}}),t({action:"dlTrackUpgradeNotificationAction",payload:{type:Be,cta:Fe}})}]}class hy extends af{constructor(e){super(),sf(this,e,gy,my,$g,{config:0,close:1})}}function fy(e){let t,n,o,r;return{c(){t=Xg("svg"),n=Xg("path"),rh(n,"d","M4 12L12 4M4 4L12 12"),rh(n,"stroke","white"),rh(n,"stroke-width","1.5"),rh(n,"stroke-linecap","round"),rh(n,"stroke-linejoin","round"),rh(t,"width","16"),rh(t,"height","16"),rh(t,"viewBox","0 0 16 16"),rh(t,"fill","none"),rh(t,"xmlns","http://www.w3.org/2000/svg"),rh(t,"class","svelte-1uko7yn")},m(i,s){Vg(i,t,s),jg(t,n),o||(r=th(t,"click",(function(){xg(e[1])&&e[1].apply(this,arguments)})),o=!0)},p(t,n){e=t},d(e){e&&Yg(t),o=!1,r()}}}function _y(e){let t,n,o,r,i,s,a,l,c,d,u,p=chrome.i18n.getMessage("limit_popup_translator_subscribe_to_paid_body")+"",m=e[1]&&fy(e);return{c(){t=Zg("div"),n=Zg("div"),o=Zg("h1"),o.textContent=`${chrome.i18n.getMessage("limit_popup_translator_free_title")}`,r=Jg(),i=Zg("p"),s=Jg(),a=Zg("div"),l=Zg("button"),l.textContent=`${chrome.i18n.getMessage("limit_popup_upgrade_translator_cta")}`,c=Jg(),m&&m.c(),rh(o,"class","svelte-1uko7yn"),rh(i,"class","description svelte-1uko7yn"),rh(n,"class","messages small svelte-1uko7yn"),uh(n,"small",e[0].small),rh(l,"class","sign-up svelte-1uko7yn"),rh(a,"class","actions svelte-1uko7yn"),uh(a,"small",e[0].small),rh(t,"class","container svelte-1uko7yn"),rh(t,"data-testid","error-message-limit-exceeded-translator-free-write-pro"),uh(t,"small",e[0].small)},m(g,h){Vg(g,t,h),jg(t,n),jg(n,o),jg(n,r),jg(n,i),i.innerHTML=p,jg(t,s),jg(t,a),jg(a,l),jg(t,c),m&&m.m(t,null),d||(u=th(l,"click",e[2]),d=!0)},p(e,[o]){1&o&&uh(n,"small",e[0].small),1&o&&uh(a,"small",e[0].small),e[1]?m?m.p(e,o):(m=fy(e),m.c(),m.m(t,null)):m&&(m.d(1),m=null),1&o&&uh(t,"small",e[0].small)},i:wg,o:wg,d(e){e&&Yg(t),m&&m.d(),d=!1,u()}}}function vy(e,n,o){let{config:r}=n,{close:i}=n;return Eh((()=>{t({action:"dlTrackUpgradeNotificationIsDisplayed",payload:{type:Be}})})),Th((()=>{t({action:"dlTrackUpgradeNotificationClosed",payload:{type:Be}})})),e.$$set=e=>{"config"in e&&o(0,r=e.config),"close"in e&&o(1,i=e.close)},[r,i,function(){t({action:"dlExternalURLRedirect",payload:{destination:fv,utmContent:"notification_translator_limit_exceeded_with_write_pro"}}),t({action:"dlTrackUpgradeNotificationAction",payload:{type:Be,cta:Fe}})}]}class yy extends af{constructor(e){super(),sf(this,e,vy,_y,$g,{config:0,close:1})}}function wy(e){let t,n,o;return{c(){t=Zg("button"),t.textContent=`${chrome.i18n.getMessage("notification_anonymous_user_limit_exceeded_login_button")}`,rh(t,"class","log-in svelte-1tmoo4x")},m(r,i){Vg(r,t,i),n||(o=th(t,"click",e[4]),n=!0)},p:wg,d(e){e&&Yg(t),n=!1,o()}}}function by(e){let t,n,o,r;return{c(){t=Xg("svg"),n=Xg("path"),rh(n,"d","M4 12L12 4M4 4L12 12"),rh(n,"stroke","white"),rh(n,"stroke-width","1.5"),rh(n,"stroke-linecap","round"),rh(n,"stroke-linejoin","round"),rh(t,"width","16"),rh(t,"height","16"),rh(t,"viewBox","0 0 16 16"),rh(t,"fill","none"),rh(t,"xmlns","http://www.w3.org/2000/svg"),rh(t,"class","svelte-1tmoo4x")},m(i,s){Vg(i,t,s),jg(t,n),o||(r=th(t,"click",(function(){xg(e[1])&&e[1].apply(this,arguments)})),o=!0)},p(t,n){e=t},d(e){e&&Yg(t),o=!1,r()}}}function Ey(e){let t,n,o,r,i,s,a,l,c,d,u,p,m=chrome.i18n.getMessage("limit_popup_write_anon_free_body")+"",g=!e[2]&&wy(e),h=e[1]&&by(e);return{c(){t=Zg("div"),n=Zg("div"),o=Zg("h1"),o.textContent=`${chrome.i18n.getMessage("limit_popup_write_title")}`,r=Jg(),i=Zg("p"),s=Jg(),a=Zg("div"),g&&g.c(),l=Jg(),c=Zg("button"),c.textContent=`${chrome.i18n.getMessage("limit_popup_try_for_free_cta")}`,d=Jg(),h&&h.c(),rh(o,"class","svelte-1tmoo4x"),rh(i,"class","description svelte-1tmoo4x"),rh(n,"class","messages svelte-1tmoo4x"),uh(n,"small",e[0].small),rh(c,"class","sign-up svelte-1tmoo4x"),rh(a,"class","actions svelte-1tmoo4x"),uh(a,"small",e[0].small),rh(t,"class","container svelte-1tmoo4x"),rh(t,"data-testid","error-message-limit-exceeded-translator-free-write-anon-or-free"),uh(t,"small",e[0].small)},m(f,_){Vg(f,t,_),jg(t,n),jg(n,o),jg(n,r),jg(n,i),i.innerHTML=m,jg(t,s),jg(t,a),g&&g.m(a,null),jg(a,l),jg(a,c),jg(t,d),h&&h.m(t,null),u||(p=th(c,"click",e[3]),u=!0)},p(e,[o]){1&o&&uh(n,"small",e[0].small),e[2]?g&&(g.d(1),g=null):g?g.p(e,o):(g=wy(e),g.c(),g.m(a,l)),1&o&&uh(a,"small",e[0].small),e[1]?h?h.p(e,o):(h=by(e),h.c(),h.m(t,null)):h&&(h.d(1),h=null),1&o&&uh(t,"small",e[0].small)},i:wg,o:wg,d(e){e&&Yg(t),g&&g.d(),h&&h.d(),u=!1,p()}}}function Ty(e,n,o){let r,i;kg(e,df,(e=>o(5,i=e)));let{config:s}=n,{close:a}=n;return Eh((()=>{t({action:"dlTrackUpgradeNotificationIsDisplayed",payload:{type:r?ze:We}})})),Th((()=>{t({action:"dlTrackUpgradeNotificationClosed",payload:{type:r?ze:We}})})),e.$$set=e=>{"config"in e&&o(0,s=e.config),"close"in e&&o(1,a=e.close)},e.$$.update=()=>{32&e.$$.dirty&&o(2,r=it(i))},[s,a,r,function(){let e="notification_free_account_limit_exceeded_write";if(s&&s.nicheIntegration)switch(s.nicheIntegration){case re.gmail:e="gmail_customization_write";break;case re.gslides:e="gslides_customization_write"}t({action:"dlExternalURLRedirect",payload:{destination:_v,utmContent:e}}),t({action:"dlTrackUpgradeNotificationAction",payload:{type:r?ze:We,cta:Fe}})},function(){t({action:"dlRequestLogin"}).then((()=>{})).catch((e=>{console.log(e)})),t({action:"dlTrackUpgradeNotificationAction",payload:{type:r?ze:We,cta:He}})},i]}class Sy extends af{constructor(e){super(),sf(this,e,Ty,Ey,$g,{config:0,close:1})}}function xy(e){let t,n,o,r;return{c(){t=Xg("svg"),n=Xg("path"),rh(n,"d","M4 12L12 4M4 4L12 12"),rh(n,"stroke","white"),rh(n,"stroke-width","1.5"),rh(n,"stroke-linecap","round"),rh(n,"stroke-linejoin","round"),rh(t,"width","16"),rh(t,"height","16"),rh(t,"viewBox","0 0 16 16"),rh(t,"fill","none"),rh(t,"xmlns","http://www.w3.org/2000/svg"),rh(t,"class","svelte-1i5r4eu")},m(i,s){Vg(i,t,s),jg(t,n),o||(r=th(t,"click",(function(){xg(e[1])&&e[1].apply(this,arguments)})),o=!0)},p(t,n){e=t},d(e){e&&Yg(t),o=!1,r()}}}function $y(e){let t,n,o,r,i,s,a,l,c,d,u,p=chrome.i18n.getMessage("limit_popup_write_anon_free_body")+"",m=e[1]&&xy(e);return{c(){t=Zg("div"),n=Zg("div"),o=Zg("h1"),o.textContent=`${chrome.i18n.getMessage("limit_popup_write_title")}`,r=Jg(),i=Zg("p"),s=Jg(),a=Zg("div"),l=Zg("button"),l.textContent=`${chrome.i18n.getMessage("limit_popup_upgrade_write_cta")}`,c=Jg(),m&&m.c(),rh(o,"class","svelte-1i5r4eu"),rh(i,"class","description svelte-1i5r4eu"),rh(n,"class","messages svelte-1i5r4eu"),uh(n,"small",e[0].small),rh(l,"class","sign-up svelte-1i5r4eu"),rh(a,"class","actions svelte-1i5r4eu"),uh(a,"small",e[0].small),rh(t,"class","container svelte-1i5r4eu"),rh(t,"data-testid","error-message-limit-exceeded-translator-pro-write-anon-or-free"),uh(t,"small",e[0].small)},m(g,h){Vg(g,t,h),jg(t,n),jg(n,o),jg(n,r),jg(n,i),i.innerHTML=p,jg(t,s),jg(t,a),jg(a,l),jg(t,c),m&&m.m(t,null),d||(u=th(l,"click",e[2]),d=!0)},p(e,[o]){1&o&&uh(n,"small",e[0].small),1&o&&uh(a,"small",e[0].small),e[1]?m?m.p(e,o):(m=xy(e),m.c(),m.m(t,null)):m&&(m.d(1),m=null),1&o&&uh(t,"small",e[0].small)},i:wg,o:wg,d(e){e&&Yg(t),m&&m.d(),d=!1,u()}}}function Cy(e,n,o){let r,i;kg(e,df,(e=>o(3,i=e)));let{config:s}=n,{close:a}=n;return Eh((()=>{t({action:"dlTrackUpgradeNotificationIsDisplayed",payload:{type:r?ze:We}})})),Th((()=>{t({action:"dlTrackUpgradeNotificationClosed",payload:{type:r?ze:We}})})),e.$$set=e=>{"config"in e&&o(0,s=e.config),"close"in e&&o(1,a=e.close)},e.$$.update=()=>{8&e.$$.dirty&&(r=it(i))},[s,a,function(){let e="notification_write_limit_exceeded_with_translator_pro";if(s&&s.nicheIntegration)switch(s.nicheIntegration){case re.gmail:e="gmail_customization_write";break;case re.gslides:e="gslides_customization_write"}t({action:"dlExternalURLRedirect",payload:{destination:_v,utmContent:e}}),t({action:"dlTrackUpgradeNotificationAction",payload:{type:r?ze:We,cta:Fe}})},i]}class ky extends af{constructor(e){super(),sf(this,e,Cy,$y,$g,{config:0,close:1})}}function Ly(e){let t;return{c(){t=Zg("span"),t.textContent=`${chrome.i18n.getMessage("write_language_not_supported")}`,rh(t,"data-qa","error-message-write-language-not-supported")},m(e,n){Vg(e,t,n)},p:wg,i:wg,o:wg,d(e){e&&Yg(t)}}}class Iy extends af{constructor(e){super(),sf(this,e,null,Ly,$g,{})}}function Ay(e){let t;return{c(){t=Zg("span"),t.textContent=`${chrome.i18n.getMessage("translate_language_not_supported")}`,rh(t,"data-qa","error-message-translate-language-not-supported")},m(e,n){Vg(e,t,n)},p:wg,i:wg,o:wg,d(e){e&&Yg(t)}}}class Ry extends af{constructor(e){super(),sf(this,e,null,Ay,$g,{})}}function My(e){let t,n,o;var r=e[2];function i(e,t){return{props:{config:e[1],close:e[0]}}}return r&&(t=gh(r,i(e))),{c(){t&&nf(t.$$.fragment),n=eh()},m(e,r){t&&of(t,e,r),Vg(e,n,r),o=!0},p(e,o){if(4&o&&r!==(r=e[2])){if(t){qh();const e=t;Kh(e.$$.fragment,1,0,(()=>{rf(e,1)})),Vh()}r?(t=gh(r,i(e)),nf(t.$$.fragment),Yh(t.$$.fragment,1),of(t,n.parentNode,n)):t=null}else if(r){const n={};2&o&&(n.config=e[1]),1&o&&(n.close=e[0]),t.$set(n)}},i(e){o||(t&&Yh(t.$$.fragment,e),o=!0)},o(e){t&&Kh(t.$$.fragment,e),o=!1},d(e){e&&Yg(n),t&&rf(t,e)}}}function Ny(e){let t,n;return t=new iv({props:{close:e[0],config:e[1],$$slots:{default:[Dy]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.close=e[0]),2&n&&(o.config=e[1]),262&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function Oy(e){let t,n;return t=new tv({props:{close:e[0],config:e[1],$$slots:{default:[Py]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.close=e[0]),2&n&&(o.config=e[1]),262&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function Dy(e){let t,n,o;var r=e[2];function i(e,t){return{props:{config:e[1]}}}return r&&(t=gh(r,i(e))),{c(){t&&nf(t.$$.fragment),n=eh()},m(e,r){t&&of(t,e,r),Vg(e,n,r),o=!0},p(e,o){if(4&o&&r!==(r=e[2])){if(t){qh();const e=t;Kh(e.$$.fragment,1,0,(()=>{rf(e,1)})),Vh()}r?(t=gh(r,i(e)),nf(t.$$.fragment),Yh(t.$$.fragment,1),of(t,n.parentNode,n)):t=null}else if(r){const n={};2&o&&(n.config=e[1]),t.$set(n)}},i(e){o||(t&&Yh(t.$$.fragment,e),o=!0)},o(e){t&&Kh(t.$$.fragment,e),o=!1},d(e){e&&Yg(n),t&&rf(t,e)}}}function Py(e){let t,n,o;var r=e[2];function i(e,t){return{props:{config:e[1]}}}return r&&(t=gh(r,i(e))),{c(){t&&nf(t.$$.fragment),n=eh()},m(e,r){t&&of(t,e,r),Vg(e,n,r),o=!0},p(e,o){if(4&o&&r!==(r=e[2])){if(t){qh();const e=t;Kh(e.$$.fragment,1,0,(()=>{rf(e,1)})),Vh()}r?(t=gh(r,i(e)),nf(t.$$.fragment),Yh(t.$$.fragment,1),of(t,n.parentNode,n)):t=null}else if(r){const n={};2&o&&(n.config=e[1]),t.$set(n)}},i(e){o||(t&&Yh(t.$$.fragment,e),o=!0)},o(e){t&&Kh(t.$$.fragment,e),o=!1},d(e){e&&Yg(n),t&&rf(t,e)}}}function Uy(e){let t,n,o,r;const i=[Oy,Ny,My],s=[];function a(e,t){return e[3]===e[4].SERIOUS||e[3]===e[4].UNKNOWN?0:e[3]===e[4].WARNING?1:e[3]===e[4].CUSTOM?2:-1}return~(t=a(e))&&(n=s[t]=i[t](e)),{c(){n&&n.c(),o=eh()},m(e,n){~t&&s[t].m(e,n),Vg(e,o,n),r=!0},p(e,[r]){let l=t;t=a(e),t===l?~t&&s[t].p(e,r):(n&&(qh(),Kh(s[l],1,1,(()=>{s[l]=null})),Vh()),~t?(n=s[t],n?n.p(e,r):(n=s[t]=i[t](e),n.c()),Yh(n,1),n.m(o.parentNode,o)):n=null)},i(e){r||(Yh(n),r=!0)},o(e){Kh(n),r=!1},d(e){e&&Yg(o),~t&&s[t].d(e)}}}function By(e,t,n){let r,i,{error:s}=t,{close:a}=t,{config:l={}}=t;const c={UNKNOWN:1,WARNING:2,SERIOUS:3,CUSTOM:4},d={[ff]:av,[_f]:uv,[vf]:mv,[bf]:Wv,[D_]:Xv,[U_]:Xv,[P_]:Xv,[B_]:Xv,[wf]:Uv,[Tf]:Uv,[$f]:Jv,[yf]:Ov,[Ef]:Vv,[xf]:Kv,[Cf]:hy,[kf]:ay,[Lf]:yy,[If]:Sy,[Af]:ky,[z_]:av,[F_]:uv,[H_]:mv,[q_]:Ov,[G_]:Uv,[K_]:Uv,[j_]:Ov,[Y_]:Vv,[V_]:Wv,[W_.RATE_LIMITED]:Vv,[W_.RATE_LIMITED_RESTRICTED]:Vv,[W_.WRITE_LANGUAGE_NOT_SUPPORTED]:Iy,[W_.TRANSLATE_LANGUAGE_NOT_SUPPORTED]:Ry,[W_.TRANSLATE_GENERIC_ERROR]:av,[W_.WRITE_GENERIC_ERROR]:cv};return Eh((()=>{Z_()?o({action:"dlErrorVisibility",payload:{state:!0}}):X_.set(!0)})),Th((()=>{Z_()?o({action:"dlErrorVisibility",payload:{state:!1}}):X_.set(!1)})),e.$$set=e=>{"error"in e&&n(5,s=e.error),"close"in e&&n(0,a=e.close),"config"in e&&n(1,l=e.config)},e.$$.update=()=>{32&e.$$.dirty&&n(3,r=function(e){switch(e){case ff:case _f:case vf:case bf:case z_:case F_:case H_:case q_:case D_:case U_:case P_:case B_:case xf:case W_.TRANSLATE_GENERIC_ERROR:case W_.WRITE_GENERIC_ERROR:return c.SERIOUS;case wf:case Tf:case G_:case K_:case $f:case yf:case Ef:case j_:case Y_:case W_.RATE_LIMITED:case W_.RATE_LIMITED_RESTRICTED:case W_.WRITE_LANGUAGE_NOT_SUPPORTED:case W_.TRANSLATE_LANGUAGE_NOT_SUPPORTED:return c.WARNING;case Cf:case kf:case If:case Af:case Lf:return c.CUSTOM;default:return c.UNKNOWN}}(s?s.error:"")),32&e.$$.dirty&&n(2,i=s&&d[s.error]||av)},[a,l,i,r,c,s]}class Wy extends af{constructor(e){super(),sf(this,e,By,Uy,$g,{error:5,close:0,config:1})}}function zy(e){let t,n,o,r,i,s,a,l,c;return r=new Wy({props:{error:e[3]}}),{c(){t=Zg("div"),n=Zg("button"),o=Jg(),nf(r.$$.fragment),rh(n,"class","close-button svelte-6y44uj"),rh(t,"class","dl-zendesk-error-message svelte-6y44uj"),rh(t,"dir",jt())},m(i,s){Vg(i,t,s),jg(t,n),jg(t,o),of(r,t,null),a=!0,l||(c=[th(n,"click",e[8]),Dg(__.call(null,t,{isShadow:!0})),th(t,"click_outside",e[8])],l=!0)},p(e,t){const n={};8&t[0]&&(n.error=e[3]),r.$set(n)},i(e){a||(Yh(r.$$.fragment,e),Oh((()=>{a&&(s&&s.end(1),i=Xh(t,Ff,{y:-5,duration:300}),i.start())})),a=!0)},o(e){Kh(r.$$.fragment,e),i&&i.invalidate(),s=Qh(t,Ff,{y:-5,duration:300}),a=!1},d(e){e&&Yg(t),rf(r),e&&s&&s.end(),l=!1,Sg(c)}}}function Fy(e){let t,n;return t=new O_({props:{value:e[6].zendeskFormality}}),t.$on("selection",e[9]),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};64&n[0]&&(o.value=e[6].zendeskFormality),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function Hy(e){let t,n,o;return{c(){t=Zg("button"),t.innerHTML='<span class="svelte-6y44uj"></span>',rh(t,"class","dl-zendesk-input-icon svelte-6y44uj"),uh(t,"is-active",e[1]),uh(t,"is-loading",e[2]),uh(t,"is-language-mismatching",e[0])},m(r,i){Vg(r,t,i),n||(o=th(t,"click",e[7]),n=!0)},p(e,n){2&n[0]&&uh(t,"is-active",e[1]),4&n[0]&&uh(t,"is-loading",e[2]),1&n[0]&&uh(t,"is-language-mismatching",e[0])},d(e){e&&Yg(t),n=!1,o()}}}function jy(e){let t,n,o,r,i,s=e[3]&&zy(e),a=e[4]&&Fy(e);return r=new T_({props:{tooltip:e[5],zIndex:"0",$$slots:{default:[Hy]},$$scope:{ctx:e}}}),{c(){s&&s.c(),t=Jg(),n=Zg("div"),a&&a.c(),o=Jg(),nf(r.$$.fragment),rh(n,"class","dl-icons-holder svelte-6y44uj"),rh(n,"dir",jt()),uh(n,"has-formality",e[4])},m(e,l){s&&s.m(e,l),Vg(e,t,l),Vg(e,n,l),a&&a.m(n,null),jg(n,o),of(r,n,null),i=!0},p(e,l){e[3]?s?(s.p(e,l),8&l[0]&&Yh(s,1)):(s=zy(e),s.c(),Yh(s,1),s.m(t.parentNode,t)):s&&(qh(),Kh(s,1,1,(()=>{s=null})),Vh()),e[4]?a?(a.p(e,l),16&l[0]&&Yh(a,1)):(a=Fy(e),a.c(),Yh(a,1),a.m(n,o)):a&&(qh(),Kh(a,1,1,(()=>{a=null})),Vh());const c={};32&l[0]&&(c.tooltip=e[5]),7&l[0]|4&l[1]&&(c.$$scope={dirty:l,ctx:e}),r.$set(c),(!i||16&l[0])&&uh(n,"has-formality",e[4])},i(e){i||(Yh(s),Yh(a),Yh(r.$$.fragment,e),i=!0)},o(e){Kh(s),Kh(a),Kh(r.$$.fragment,e),i=!1},d(e){e&&(Yg(t),Yg(n)),s&&s.d(e),a&&a.d(),rf(r)}}}function Gy(e,n,o){let i,s,a;kg(e,df,(e=>o(6,a=e))),xh("text_direction",jt());let l,c,d,u,{controller:p}=n,{editable:m}=n,g=!1,h=!1,f=!1,_=!1,v="",y="",w=!1;const b=()=>{o(1,g=!0)},E=()=>{o(1,g=!1)};async function T(e,n,o){if("dlTriggerTranslationShortcut"===e.action){if(document.activeElement!==m)return;try{t({action:"dlTrackUseOfShortcut",payload:{shortcutType:W,location:B.inputTranslationTriggerIcon}})}catch(e){console.error(e)}await S(),o()}return!0}const S=async()=>{if(_)return;const e=pt(),t=()=>{if(e){const e=window.getSelection().toString();navigator.clipboard.writeText(e).then((()=>{x(e)})).catch((e=>{console.error("Unable to copy text to clipboard",e)}))}else{const e=new ClipboardEvent("copy",{bubbles:!0,clipboardData:new DataTransfer});h=!0,m.dispatchEvent(e)}},n=window.getSelection();let o;o=e?n&&n.anchorNode&&"#text"==n.anchorNode.nodeName&&"Range"==n.type&&m.contains(n.anchorNode):n&&n.baseNode&&"#text"==n.baseNode.nodeName&&"Range"==n.type&&m.contains(n.baseNode),0!==m.innerText.trim().length&&(o?t():(await o_(m),setTimeout(t,300)))},x=async e=>{h=!1,o(2,_=!0),o(0,w=!1);const t=p.getTicketLanguageInformation()?.language,n=p.getInputWorkingArea();n.innerHTML=ft(e);const[r,s]=await FU({element:n,targetLang:t,content:e,...i&&["formal","informal"].includes(a.zendeskFormality)&&{formality:a.zendeskFormality}});s?(console.error({e:s}),o(3,d=s),eB({eventType:_e,controller:p,error:s.error||s.message})):r&&k(r,e),o(2,_=!1)},$=async e=>{if(!h)return;h=!1,o(2,_=!0),o(0,w=!1);const t=p.getTicketLanguageInformation()?.language,n=e.clipboardData.getData("text/html"),r=p.getInputWorkingArea(),[s,l]=await FU({element:r,targetLang:t,content:n,...i&&["formal","informal"].includes(a.zendeskFormality)&&{formality:a.zendeskFormality}});l?(console.error({e:l}),o(3,d=l),eB({eventType:_e,controller:p,error:l.error||l.message})):s&&k(s,n),o(2,_=!1)},C=()=>{if(!f)return;f=!1;window.getSelection().collapse(null)},k=(e,t)=>{const n=ft(e);if(pt())document.execCommand("insertText",!1,n),f=!0;else{const e=new DataTransfer;e.setData("text/html",n);const t=new ClipboardEvent("paste",{bubbles:!0,clipboardData:e});f=!0,m.dispatchEvent(t)}eB({eventType:fe,controller:p,sourceTextLength:t.length,targetTextLength:n.length})},L=()=>{const e=m.innerText;e!==y&&(y=e,u&&(clearTimeout(u),u=void 0),u=setTimeout(I,400))},I=async()=>{const e=p.getTicketLanguageInformation();if(!e||!e.isSupported||!e.isDetected)return;const t=m.innerText;if(t.trim()){console.log("There has content: ",`${t.trim()}`);let n=await Ut(t),r=e.language;n=Wt(n),r=Wt(r);let i=!1;n&&r&&n!==r&&(i=!0),w!==i&&o(0,w=i)}else console.log("There is no content"),o(0,w=!1),A()},A=()=>{l&&l.resetTooltip()};return Eh((()=>{chrome.runtime.onMessage.addListener(T),t({action:"dlCheckCommandShortcuts"}).then((e=>{o(14,v=e?e.filter((e=>e.name==W))[0].shortcut:"")})),m.addEventListener("focus",b),m.addEventListener("blur",E),m.addEventListener("copy",$),m.addEventListener("paste",C),m.addEventListener("keydown",L),l=eT(p),document.activeElement===m&&b()})),Th((()=>{chrome.runtime.onMessage.removeListener(T),m&&(m.removeEventListener("focus",b),m.removeEventListener("blur",E),m.removeEventListener("copy",$),m.removeEventListener("paste",C),m.removeEventListener("keydown",L),l&&(l.cleanupDOM(),l.remove()))})),e.$$set=e=>{"controller"in e&&o(10,p=e.controller),"editable"in e&&o(11,m=e.editable)},e.$$.update=()=>{32768&e.$$.dirty[0]&&o(4,i=Ht(c)),49152&e.$$.dirty[0]&&o(5,s=r.find((e=>e.langCode===c))?chrome.i18n.getMessage("ui_zendesk_input_tooltip")+(v?` (${v})`:""):""),1&e.$$.dirty[0]&&l&&l.setIsLanguageMismatching(w)},[w,g,_,d,i,s,a,S,()=>{o(3,d=void 0)},e=>{const t=e.detail.selectedOption.value;Og(df,a.zendeskFormality=t,a)},p,m,e=>{o(15,c=e)},()=>{const e=window.getSelection();return e&&e.baseNode&&"#text"==e.baseNode.nodeName&&"Range"==e.type&&m.contains(e.baseNode)},v,c]}class qy extends af{constructor(e){super(),sf(this,e,Gy,jy,$g,{controller:10,editable:11,updateTargetLanguage:12,getInputHasSelection:13},null,[-1,-1])}get updateTargetLanguage(){return this.$$.ctx[12]}get getInputHasSelection(){return this.$$.ctx[13]}}class Vy{static HTML_TAG_NAME="deepl-zendesk-input-icon";static createElement=(e=document)=>{const t=e.createElement(Vy.HTML_TAG_NAME),n=new Vy(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.getInputHasSelection=n.getInputHasSelection,t.updateTargetLanguage=n.updateTargetLanguage,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=({controller:e,editable:t})=>{this.domElement.mainComponent=new qy({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM,controller:e,editable:t}})};getInputHasSelection=()=>this.domElement.mainComponent.getInputHasSelection();updateTargetLanguage=e=>{this.domElement.mainComponent?.updateTargetLanguage(e)};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function Yy(e,t,n){const o=e.slice();return o[16]=t[n],o[18]=n,o}function Ky(e){let t,n,o=!e[0]&&Xy(e),r=ef(e[3]),i=[];for(let t=0;t<r.length;t+=1)i[t]=ew(Yy(e,r,t));return{c(){t=Zg("div"),o&&o.c(),n=Jg();for(let e=0;e<i.length;e+=1)i[e].c();rh(t,"class","dl-zendesk-translation-placeholder svelte-1xx4hw"),rh(t,"dir",jt()),uh(t,"loading-skeleton",e[0])},m(e,r){Vg(e,t,r),o&&o.m(t,null),jg(t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null)},p(e,s){if(e[0]?o&&(o.d(1),o=null):o?o.p(e,s):(o=Xy(e),o.c(),o.m(t,n)),8&s){let n;for(r=ef(e[3]),n=0;n<r.length;n+=1){const o=Yy(e,r,n);i[n]?i[n].p(o,s):(i[n]=ew(o),i[n].c(),i[n].m(t,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=r.length}1&s&&uh(t,"loading-skeleton",e[0])},i:wg,o:wg,d(e){e&&Yg(t),o&&o.d(),Kg(i,e)}}}function Zy(e){let t,n,o;return n=new Wy({props:{error:e[2],close:e[6]}}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","dl-zendesk-translation-placeholder has-error svelte-1xx4hw")},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p(e,t){const o={};4&t&&(o.error=e[2]),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function Xy(e){let t,n,o;return{c(){t=Zg("button"),rh(t,"class","close-button svelte-1xx4hw")},m(r,i){Vg(r,t,i),n||(o=th(t,"click",e[5]),n=!0)},p:wg,d(e){e&&Yg(t),n=!1,o()}}}function Qy(e){let t,n=ft(e[16])+"";return{c(){t=Zg("span"),rh(t,"class","svelte-1xx4hw")},m(e,o){Vg(e,t,o),t.innerHTML=n},p(e,o){8&o&&n!==(n=ft(e[16])+"")&&(t.innerHTML=n)},d(e){e&&Yg(t)}}}function Jy(e){let t;return{c(){t=Zg("br")},m(e,n){Vg(e,t,n)},d(e){e&&Yg(t)}}}function ew(e){let t,n,o=e[16]&&Qy(e),r=e[18]<e[3].length-1&&Jy();return{c(){o&&o.c(),t=Jg(),r&&r.c(),n=eh()},m(e,i){o&&o.m(e,i),Vg(e,t,i),r&&r.m(e,i),Vg(e,n,i)},p(e,i){e[16]?o?o.p(e,i):(o=Qy(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),e[18]<e[3].length-1?r||(r=Jy(),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(e){e&&(Yg(t),Yg(n)),o&&o.d(e),r&&r.d(e)}}}function tw(e){let t,n,o,r,i,s,a,l,c;const d=[Zy,Ky],u=[];function p(e,t){return e[2]?0:e[1]||e[0]?1:-1}return~(r=p(e))&&(i=u[r]=d[r](e)),{c(){t=Zg("div"),n=Zg("button"),n.textContent=`${chrome.i18n.getMessage("ui_zendesk_message_translate")}`,o=Jg(),i&&i.c(),s=eh(),rh(n,"class","dl-zendesk-translate-this-ticket svelte-1xx4hw"),rh(t,"dir",jt())},m(i,d){Vg(i,t,d),jg(t,n),Vg(i,o,d),~r&&u[r].m(i,d),Vg(i,s,d),a=!0,l||(c=th(n,"click",e[4]),l=!0)},p(e,[t]){let n=r;r=p(e),r===n?~r&&u[r].p(e,t):(i&&(qh(),Kh(u[n],1,1,(()=>{u[n]=null})),Vh()),~r?(i=u[r],i?i.p(e,t):(i=u[r]=d[r](e),i.c()),Yh(i,1),i.m(s.parentNode,s)):i=null)},i(e){a||(Yh(i),a=!0)},o(e){Kh(i),a=!1},d(e){e&&(Yg(t),Yg(o),Yg(s)),~r&&u[r].d(e),l=!1,c()}}}function nw(e,t,n){let o,r;kg(e,df,(e=>n(14,r=e))),xh("text_direction",jt());let i,{controller:s}=t,{message:a}=t,l=!1,c=!1,d=!1,u="",p=!1;const m=async({trigger:e})=>{n(1,d=!1),n(0,l=!0),n(2,i=void 0);let t=HE(a).innerText;n(11,u=t);const[o,c]=await HU({targetLang:r.selectedTargetLanguage,sourceLang:s.getTicketLanguageInformation()?.language,text:t,trigger:e});if(c)n(11,u=""),n(1,d=!1),n(2,i=c),p=!0,eB({eventType:_e,controller:s,error:c.error||c.message});else if(o){n(11,u=o),n(1,d=!0),eB({eventType:he,controller:s,sourceTextLength:t.length,targetTextLength:u.length})}else n(1,d=!0);n(0,l=!1)};return e.$$set=e=>{"controller"in e&&n(7,s=e.controller),"message"in e&&n(8,a=e.message)},e.$$.update=()=>{2048&e.$$.dirty&&n(3,o=u.split("\n"))},[l,d,i,o,()=>{l||m({trigger:_})},()=>{n(1,d=!1),n(0,l=!1),n(11,u=""),s.getIsAutoTranslatedEnabled()&&(c=!0)},()=>{n(2,i=void 0)},s,a,()=>{!s.getIsAutoTranslatedEnabled()||d||l||c||p||m({trigger:f})},()=>{!d||l||c||m({trigger:_})},u]}class ow extends af{constructor(e){super(),sf(this,e,nw,tw,$g,{controller:7,message:8,processRefreshUI:9,triggerTranslateAgain:10})}get processRefreshUI(){return this.$$.ctx[9]}get triggerTranslateAgain(){return this.$$.ctx[10]}}class rw{static HTML_TAG_NAME="deepl-zendesk-message-controller";static createElement=(e=document)=>{const t=e.createElement(rw.HTML_TAG_NAME),n=new rw(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.processRefreshUI=n.processRefreshUI,t.triggerTranslateAgain=n.triggerTranslateAgain,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=({controller:e,message:t})=>{this.domElement.mainComponent=new ow({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM,controller:e,message:t}})};processRefreshUI=()=>{this.domElement.mainComponent.processRefreshUI()};triggerTranslateAgain=()=>{this.domElement.mainComponent.triggerTranslateAgain()};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function iw(e){let t,n,o,r,i,s,a,l,c,d=chrome.i18n.getMessage("ui_zendesk_input_language_mismatch")+"";return{c(){t=Zg("div"),n=Zg("button"),o=Jg(),r=Qg(d),rh(n,"class","dismiss-tooltip svelte-p7jbvt"),rh(t,"class","dl-zendesk-submit-button-tooltip svelte-p7jbvt"),ah(t,"max-width",(e[1].width||0)+"px"),ah(t,"bottom",e[0].height+12+"px"),rh(t,"dir",jt())},m(i,s){Vg(i,t,s),jg(t,n),jg(t,o),jg(t,r),a=!0,l||(c=th(n,"click",e[4]),l=!0)},p(e,n){(!a||2&n)&&ah(t,"max-width",(e[1].width||0)+"px"),(!a||1&n)&&ah(t,"bottom",e[0].height+12+"px")},i(e){a||(Oh((()=>{a&&(s&&s.end(1),i=Xh(t,Ff,{y:-5,duration:500}),i.start())})),a=!0)},o(e){i&&i.invalidate(),s=Qh(t,Ff,{y:-5,duration:500}),a=!1},d(e){e&&Yg(t),e&&s&&s.end(),l=!1,c()}}}function sw(e){let t,n,o=e[2]&&!e[3]&&iw(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,[n]){e[2]&&!e[3]?o?(o.p(e,n),12&n&&Yh(o,1)):(o=iw(e),o.c(),Yh(o,1),o.m(t.parentNode,t)):o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh())},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function aw(e,t,n){xh("text_direction",jt());let{coords:o}=t,{containerCoords:r}=t,i=!1,s=!1;return e.$$set=e=>{"coords"in e&&n(0,o=e.coords),"containerCoords"in e&&n(1,r=e.containerCoords)},[o,r,i,s,()=>{n(3,s=!0)},e=>{n(2,i=e)},()=>{console.log("Resetting tooltip..."),n(2,i=!1),n(3,s=!1)}]}class lw extends af{constructor(e){super(),sf(this,e,aw,sw,$g,{coords:0,containerCoords:1,setIsLanguageMismatching:5,resetTooltip:6})}get setIsLanguageMismatching(){return this.$$.ctx[5]}get resetTooltip(){return this.$$.ctx[6]}}class cw{static HTML_TAG_NAME="deepl-zendesk-submit-button-tooltip";static createElement=(e=document)=>{const t=e.createElement(cw.HTML_TAG_NAME),n=new cw(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.setIsLanguageMismatching=n.setIsLanguageMismatching,t.resetTooltip=n.resetTooltip,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=({coords:e,containerCoords:t})=>{this.domElement.mainComponent=new lw({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM,coords:e,containerCoords:t}})};setIsLanguageMismatching=e=>{this.domElement.mainComponent?.setIsLanguageMismatching(e)};resetTooltip=()=>{this.domElement.mainComponent?.resetTooltip()};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function dw(e){let t,n,o;return{c(){t=Zg("div"),n=Jg(),o=Zg("div"),rh(t,"class","dl-zendesk-icon svelte-i3vxpb"),rh(o,"class","dl-zendesk-working-area svelte-i3vxpb")},m(e,r){Vg(e,t,r),Vg(e,n,r),Vg(e,o,r)},p:wg,i:wg,o:wg,d(e){e&&(Yg(t),Yg(n),Yg(o))}}}function uw(e,t,n){let o;kg(e,df,(e=>n(17,o=e))),xh("text_direction",jt());let i,{pane:s}=t,{ticketId:a}=t,{controller:l}=t,c={language:"",isDetected:!1,isSupported:!1,hasAttemptedLanguageDetection:!1},d=!1;const u={inputIconLanguageUpdate:void 0,topIconLanguageUpdate:void 0,toolbarLanguageUpdate:void 0,toolbarAutoTranslateStatus:void 0,ticketTypeDetection:void 0},p=(e,t)=>{u[e]=t},m=()=>{for(const e of Object.keys(u))if(u[e]){u[e]()&&(u[e]=void 0)}},g=async()=>{if(!i||!s)return;let e;try{e=await nT(s)}catch(e){pn()&&console.error({e:e})}e&&(e=Wt(e),n(13,c.hasAttemptedLanguageDetection=!0,c),n(13,c.language=e,c),n(13,c.isDetected=!0,c),n(13,c.isSupported=!!r.find((t=>t.langCode===e)),c),eB({eventType:ue,controller:l}),tT(s))};return Eh((()=>{eB({eventType:de,controller:l}),p("ticketTypeDetection",(()=>{const e=BE(s);return!!e&&(i=e,g(),!0)}))})),e.$$set=e=>{"pane"in e&&n(0,s=e.pane),"ticketId"in e&&n(1,a=e.ticketId),"controller"in e&&n(2,l=e.controller)},e.$$.update=()=>{8193&e.$$.dirty&&p("toolbarLanguageUpdate",(()=>jE(s,{language:c.language,isDetected:c.isDetected,isSupported:c.isSupported}))),8193&e.$$.dirty&&(p("inputIconLanguageUpdate",(()=>VE(s,c.language))),p("topIconLanguageUpdate",(()=>qE(s)))),16385&e.$$.dirty&&p("toolbarAutoTranslateStatus",(()=>{GE(s,{isEnabled:d})}))},[s,a,l,()=>s,()=>a,()=>c,()=>d,e=>{n(13,c.language=e.language,c),n(13,c.isDetected=e.isDetected,c),n(13,c.isSupported=e.isSupported,c)},e=>{n(14,d=e)},()=>i,e=>{i=e},async(e=!1)=>{if(e&&n(13,c={language:"",isDetected:!1,isSupported:!1,hasAttemptedLanguageDetection:!1}),c.hasAttemptedLanguageDetection||await g(),RE(l,o.isZendeskEnabled),c.isSupported&&o.isZendeskEnabled){YE(l);for(const e of WE(s)){const t=KE(e);t&&t.processRefreshUI()}}QE(s),m()},()=>{JE(s)},c,d]}class pw extends af{constructor(e){super(),sf(this,e,uw,dw,$g,{pane:0,ticketId:1,controller:2,getPane:3,getTicketId:4,getTicketLanguageInformation:5,getIsAutoTranslatedEnabled:6,setLanguageInformation:7,setIsAutoTranslateEnabled:8,getTicketType:9,setTicketType:10,processRefreshUI:11,getInputHasSelection:12})}get getPane(){return this.$$.ctx[3]}get getTicketId(){return this.$$.ctx[4]}get getTicketLanguageInformation(){return this.$$.ctx[5]}get getIsAutoTranslatedEnabled(){return this.$$.ctx[6]}get setLanguageInformation(){return this.$$.ctx[7]}get setIsAutoTranslateEnabled(){return this.$$.ctx[8]}get getTicketType(){return this.$$.ctx[9]}get setTicketType(){return this.$$.ctx[10]}get processRefreshUI(){return this.$$.ctx[11]}get getInputHasSelection(){return this.$$.ctx[12]}}class mw{static HTML_TAG_NAME="deepl-zendesk-ticket-controller";static createElement=(e=document)=>{const t=e.createElement(mw.HTML_TAG_NAME),n=new mw(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.getTicketId=n.getTicketId,t.getPane=n.getPane,t.getTicketLanguageInformation=n.getTicketLanguageInformation,t.getIsAutoTranslatedEnabled=n.getIsAutoTranslatedEnabled,t.setIsAutoTranslateEnabled=n.setIsAutoTranslateEnabled,t.getInputWorkingArea=n.getInputWorkingArea,t.setLanguageInformation=n.setLanguageInformation,t.getTicketType=n.getTicketType,t.setTicketType=n.setTicketType,t.processRefreshUI=n.processRefreshUI,t.getInputHasSelection=n.getInputHasSelection,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=({ticketId:e,pane:t})=>{this.domElement.mainComponent=new pw({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM,controller:this.domElement,ticketId:e,pane:t}})};getTicketId=()=>this.domElement.mainComponent?.getTicketId();getPane=()=>this.domElement.mainComponent?.getPane();getTicketLanguageInformation=()=>this.domElement.mainComponent?.getTicketLanguageInformation();getIsAutoTranslatedEnabled=()=>this.domElement.mainComponent?.getIsAutoTranslatedEnabled();setIsAutoTranslateEnabled=e=>{this.domElement.mainComponent?.setIsAutoTranslateEnabled(e)};getInputWorkingArea=()=>this.domElement.shadowContainer.querySelector(".dl-zendesk-working-area");setLanguageInformation=e=>{this.domElement.mainComponent?.setLanguageInformation(e)};getTicketType=()=>this.domElement.mainComponent?.getTicketType();setTicketType=e=>{this.domElement.mainComponent?.setTicketType(e)};processRefreshUI=(e=!1)=>{this.domElement.mainComponent.processRefreshUI(e)};getInputHasSelection=()=>this.domElement.mainComponent?.getInputHasSelection();cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function gw(e){let t,n,o,r,i;return n=new R_({props:{items:e[3],selectedOption:e[2],alignRight:!1,dataQaButton:"deepl-language-selection-button",dataQaList:"deepl-language-selection-list",variant:"zendesk",isFullWidth:e[1],extraText:e[0]?chrome.i18n.getMessage("ui_zendesk_language_detected"):""}}),n.$on("valueselected",e[4]),{c(){t=Zg("div"),nf(n.$$.fragment)},m(s,a){Vg(s,t,a),of(n,t,null),o=!0,r||(i=th(t,"mousedown",oh(nh(e[7]))),r=!0)},p(e,[t]){const o={};8&t&&(o.items=e[3]),4&t&&(o.selectedOption=e[2]),2&t&&(o.isFullWidth=e[1]),1&t&&(o.extraText=e[0]?chrome.i18n.getMessage("ui_zendesk_language_detected"):""),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n),r=!1,i()}}}function hw(e,t,n){let o,r;const i=Sh(),s=Bt();let{value:a}=t,{isDetected:l=!1}=t,{isSupported:c=!0}=t,{isFullWidth:d=!1}=t;const u={label:chrome.i18n.getMessage("writing_config_tab_language_selector_empty"),selectedOptionLabel:chrome.i18n.getMessage("writing_config_tab_language_selector_empty"),value:"NOT_SUPPORTED"};return e.$$set=e=>{"value"in e&&n(5,a=e.value),"isDetected"in e&&n(0,l=e.isDetected),"isSupported"in e&&n(6,c=e.isSupported),"isFullWidth"in e&&n(1,d=e.isFullWidth)},e.$$.update=()=>{64&e.$$.dirty&&n(3,o=[...c?[]:[u],...s]),96&e.$$.dirty&&n(2,r=c?a?s.find((e=>e.value===a)):void 0:u)},[l,d,r,o,function(e){e.detail.selectedOption.value!==a&&i("selection",e.detail)},a,c,function(t){Ch.call(this,e,t)}]}class fw extends af{constructor(e){super(),sf(this,e,hw,gw,$g,{value:5,isDetected:0,isSupported:6,isFullWidth:1})}}function _w(e){let t,n,o,r;function i(e,t){return e[1]?ww:yw}let s=i(e),a=s(e);return{c(){t=Zg("button"),a.c(),rh(t,"class","translate-all svelte-147seig"),t.disabled=n=!e[0].isSupported},m(n,i){Vg(n,t,i),a.m(t,null),o||(r=th(t,"click",e[6]),o=!0)},p(e,o){s===(s=i(e))&&a?a.p(e,o):(a.d(1),a=s(e),a&&(a.c(),a.m(t,null))),1&o&&n!==(n=!e[0].isSupported)&&(t.disabled=n)},i:wg,o:wg,d(e){e&&Yg(t),a.d(),o=!1,r()}}}function vw(e){let t,n;return t=new T_({props:{tooltip:chrome.i18n.getMessage(e[1]?"ui_zendesk_autotranslate_stop":"ui_zendesk_autotranslate_start"),$$slots:{default:[bw]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.tooltip=chrome.i18n.getMessage(e[1]?"ui_zendesk_autotranslate_stop":"ui_zendesk_autotranslate_start")),131073&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function yw(e){let t,n=chrome.i18n.getMessage("ui_zendesk_autotranslate_start")+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function ww(e){let t,n=chrome.i18n.getMessage("ui_zendesk_autotranslate_stop")+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function bw(e){let t,n,o,r;return{c(){t=Zg("button"),rh(t,"class","translate-all btn-icon svelte-147seig"),t.disabled=n=!e[0].isSupported},m(n,i){Vg(n,t,i),o||(r=th(t,"click",e[6]),o=!0)},p(e,o){1&o&&n!==(n=!e[0].isSupported)&&(t.disabled=n)},d(e){e&&Yg(t),o=!1,r()}}}function Ew(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f;c=new fw({props:{value:e[0].language,isDetected:e[0].isDetected,isSupported:e[0].isSupported,isFullWidth:"lg"!==e[4]}}),c.$on("selection",e[5]);const _=[vw,_w],v=[];function y(e,t){return"sm"===e[4]?0:1}return p=y(e),m=v[p]=_[p](e),{c(){t=Zg("div"),n=Zg("div"),o=Zg("button"),r=Jg(),i=Zg("div"),s=Zg("div"),s.textContent=`${chrome.i18n.getMessage("ui_zendesk_senders_language")}`,a=Jg(),l=Zg("div"),nf(c.$$.fragment),d=Jg(),u=Zg("div"),m.c(),rh(o,"class","senders-language-toggle svelte-147seig"),rh(s,"class","label svelte-147seig"),rh(l,"class","dropdown-container svelte-147seig"),rh(i,"class","container svelte-147seig"),uh(i,"show",e[3]),rh(n,"class","senders-language svelte-147seig"),rh(u,"class","translate-all-container"),rh(t,"class","dl-zendesk-toolbar svelte-147seig"),rh(t,"dir",jt()),uh(t,"toolbar-sm","sm"===e[4]),uh(t,"toolbar-md","md"===e[4]),uh(t,"toolbar-lg","lg"===e[4])},m(m,_){Vg(m,t,_),jg(t,n),jg(n,o),jg(n,r),jg(n,i),jg(i,s),jg(i,a),jg(i,l),of(c,l,null),jg(t,d),jg(t,u),v[p].m(u,null),e[13](t),g=!0,h||(f=[th(o,"click",e[7]),Dg(__.call(null,n,{isShadow:!0})),th(n,"click_outside",e[12])],h=!0)},p(e,[n]){const o={};1&n&&(o.value=e[0].language),1&n&&(o.isDetected=e[0].isDetected),1&n&&(o.isSupported=e[0].isSupported),16&n&&(o.isFullWidth="lg"!==e[4]),c.$set(o),(!g||8&n)&&uh(i,"show",e[3]);let r=p;p=y(e),p===r?v[p].p(e,n):(qh(),Kh(v[r],1,1,(()=>{v[r]=null})),Vh(),m=v[p],m?m.p(e,n):(m=v[p]=_[p](e),m.c()),Yh(m,1),m.m(u,null)),(!g||16&n)&&uh(t,"toolbar-sm","sm"===e[4]),(!g||16&n)&&uh(t,"toolbar-md","md"===e[4]),(!g||16&n)&&uh(t,"toolbar-lg","lg"===e[4])},i(e){g||(Yh(c.$$.fragment,e),Yh(m),g=!0)},o(e){Kh(c.$$.fragment,e),Kh(m),g=!1},d(n){n&&Yg(t),rf(c),v[p].d(),e[13](null),h=!1,Sg(f)}}}function Tw(e,t,n){let o;xh("text_direction",jt());const r=[{key:"sm",max:300},{key:"md",min:301,max:650},{key:"lg",min:651,isDefault:!0}];let{controller:i}=t;const s={language:"",isDetected:!1,isSupported:!1};let a,l,c,d=!1,u=!1;Eh((()=>{c=S_(a,(e=>{n(11,l=e.clientWidth)}))})),Th((()=>{c&&c()}));return e.$$set=e=>{"controller"in e&&n(8,i=e.controller)},e.$$.update=()=>{2048&e.$$.dirty&&n(4,o=(e=>{const t=r.find((e=>e.isDefault));for(const t of r)if(!(t.min&&t.min>e||t.max&&t.max<e))return t.key;return t.key})(l))},[s,d,a,u,o,e=>{const t=e.detail.selectedOption.value;i.setLanguageInformation({language:t,isDetected:!1,isSupported:!0}),eB({eventType:pe,controller:i,metaDataOverride:{ticketLanguage:t,isTicketLanguageAutodetected:!1}})},()=>{const e=!d;i.setIsAutoTranslateEnabled(e),eB({eventType:e?me:ge,controller:i,metaDataOverride:{isAutoTranslateEnabled:e}})},()=>{n(3,u=!u)},i,({language:e,isDetected:t,isSupported:o})=>{n(0,s.language=e,s),n(0,s.isDetected=t,s),n(0,s.isSupported=o,s)},e=>{n(1,d=e)},l,()=>n(3,u=!1),function(e){Lh[e?"unshift":"push"]((()=>{a=e,n(2,a)}))}]}class Sw extends af{constructor(e){super(),sf(this,e,Tw,Ew,$g,{controller:8,updateLanguageInformation:9,updateAutoTranslateStatus:10})}get updateLanguageInformation(){return this.$$.ctx[9]}get updateAutoTranslateStatus(){return this.$$.ctx[10]}}class xw{static HTML_TAG_NAME="deepl-zendesk-toolbar";static createElement=(e=document)=>{const t=e.createElement(xw.HTML_TAG_NAME),n=new xw(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.updateLanguageInformation=n.updateLanguageInformation,t.updateAutoTranslateStatus=n.updateAutoTranslateStatus,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=({controller:e})=>{this.domElement.mainComponent=new Sw({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM,controller:e}})};updateLanguageInformation=e=>{this.domElement.mainComponent.updateLanguageInformation(e)};updateAutoTranslateStatus=e=>{this.domElement.mainComponent.updateAutoTranslateStatus(e)};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function $w(e){let t,n,o,r,i;return n=new Wy({props:{error:e[1],close:e[2]}}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","container svelte-1wstx56"),rh(t,"dir",jt())},m(e,o){Vg(e,t,o),of(n,t,null),i=!0},p(e,t){const o={};2&t&&(o.error=e[1]),4&t&&(o.close=e[2]),n.$set(o)},i(e){i||(Yh(n.$$.fragment,e),Oh((()=>{i&&(r&&r.end(1),o=Xh(t,Ff,{x:100,duration:1e3}),o.start())})),i=!0)},o(e){Kh(n.$$.fragment,e),o&&o.invalidate(),r=Qh(t,Ff,{x:100,duration:1e3}),i=!1},d(e){e&&Yg(t),rf(n),e&&r&&r.end()}}}function Cw(e){let t,n,o=e[3]&&!1===e[0]&&$w(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,[n]){e[3]&&!1===e[0]?o?(o.p(e,n),9&n&&Yh(o,1)):(o=$w(e),o.c(),Yh(o,1),o.m(t.parentNode,t)):o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh())},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function kw(e,t,n){let o;kg(e,X_,(e=>n(4,o=e))),xh("text_direction",jt());let{error:r}=t,{close:i}=t,{errorAlreadyShown:s}=t,a=!1;return Eh((()=>{setTimeout((()=>{n(3,a=!0),n(0,s=o)}),100)})),e.$$set=e=>{"error"in e&&n(1,r=e.error),"close"in e&&n(2,i=e.close),"errorAlreadyShown"in e&&n(0,s=e.errorAlreadyShown)},[s,r,i,a]}class Lw extends af{constructor(e){super(),sf(this,e,kw,Cw,$g,{error:1,close:2,errorAlreadyShown:0})}}class Iw{static HTML_TAG_NAME="deepl-alert";static createElement=(e=document)=>{const t=e.createElement(Iw.HTML_TAG_NAME),n=new Iw(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent=void 0;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=e=>{const t="rtl"===jt()?"left":"right";this.domElement.shadowContainer.style.cssText=`position: fixed; top: 20px; ${t}: 20px; z-index: ${D.deepl_inline_ui.z_index}`,this.domElement.mainComponent=new Lw({target:this.domElement.shadowContainer,props:{error:e,close:this.cleanupDOM}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy(),this.domElement.remove()}}function Aw(e){try{const t=Iw.createElement();document.documentElement.appendChild(t),t.createDOM(e),v_((()=>t.cleanupDOM))}catch(e){pn()&&console.log(e)}}const Rw=function(){let e={isDarkMode:lt()};const{subscribe:t,update:n}=cf(e);return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(()=>{n((e=>({...e,isDarkMode:lt()})))})),{subscribe:t,update:e=>{if(pn()&&!{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.31.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.31.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.31.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365"},APP_VERSION:"1.31.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,REVIEW_UI_WITH_ITA:!1,BATCH_TRANSLATE_HTML_REQUEST:!0}}.DISABLE_DEBUG_LOGS){const t="background-color: #403f3e;padding: 3px; font-size:12px;color:#c8e0c1; font-weight:600";console.log(`%c${(new Date).toISOString()} UPDATE WEBSITE STATE`,t,e)}n((t=>(e?.error?Aw(e.error):X_.set(!1),{...t,...e,error:e.error?e.error:void 0})))}}}();e.websiteData=void 0;const Mw=Rw.subscribe((n=>{e.websiteData={...n},n&&Object.keys(n).length>0&&t({action:"newWebsiteState",payload:{...n}})}));function Nw(e){let t,n,o,r,i;const s=e[7].default,a=Lg(s,e,e[6],null);return{c(){t=Zg("button"),a&&a.c(),rh(t,"type","button"),rh(t,"class",n=Ng(e[0])+" svelte-1wkb4xl"),t.disabled=e[1],rh(t,"id",e[5]),rh(t,"data-qa",e[4]),uh(t,"disabled",e[1]),uh(t,"font-size-sm","sm"===e[2]),uh(t,"padding-x-md","md"===e[3]),uh(t,"padding-x-none","none"===e[3])},m(n,s){Vg(n,t,s),a&&a.m(t,null),o=!0,r||(i=[th(t,"click",e[8]),th(t,"mousedown",oh(nh(e[9])))],r=!0)},p(e,[r]){a&&a.p&&(!o||64&r)&&Rg(a,s,e,e[6],o?Ag(s,e[6],r,null):Mg(e[6]),null),(!o||1&r&&n!==(n=Ng(e[0])+" svelte-1wkb4xl"))&&rh(t,"class",n),(!o||2&r)&&(t.disabled=e[1]),(!o||32&r)&&rh(t,"id",e[5]),(!o||16&r)&&rh(t,"data-qa",e[4]),(!o||3&r)&&uh(t,"disabled",e[1]),(!o||5&r)&&uh(t,"font-size-sm","sm"===e[2]),(!o||9&r)&&uh(t,"padding-x-md","md"===e[3]),(!o||9&r)&&uh(t,"padding-x-none","none"===e[3])},i(e){o||(Yh(a,e),o=!0)},o(e){Kh(a,e),o=!1},d(e){e&&Yg(t),a&&a.d(e),r=!1,Sg(i)}}}function Ow(e,t,n){let{$$slots:o={},$$scope:r}=t,{className:i="button-primary"}=t,{disabled:s=!1}=t,{fontSize:a="default"}=t,{paddingX:l}=t,{dataQa:c="dl-button"}=t,{id:d=""}=t;return e.$$set=e=>{"className"in e&&n(0,i=e.className),"disabled"in e&&n(1,s=e.disabled),"fontSize"in e&&n(2,a=e.fontSize),"paddingX"in e&&n(3,l=e.paddingX),"dataQa"in e&&n(4,c=e.dataQa),"id"in e&&n(5,d=e.id),"$$scope"in e&&n(6,r=e.$$scope)},[i,s,a,l,c,d,r,o,function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)}]}class Dw extends af{constructor(e){super(),sf(this,e,Ow,Nw,$g,{className:0,disabled:1,fontSize:2,paddingX:3,dataQa:4,id:5})}}const Pw=e=>({}),Uw=e=>({}),Bw=e=>({}),Ww=e=>({});function zw(e){let t;const n=e[8]["variant-1"],o=Lg(n,e,e[10],Uw);return{c(){o&&o.c()},m(e,n){o&&o.m(e,n),t=!0},p(e,r){o&&o.p&&(!t||1024&r)&&Rg(o,n,e,e[10],t?Ag(n,e[10],r,Pw):Mg(e[10]),Uw)},i(e){t||(Yh(o,e),t=!0)},o(e){Kh(o,e),t=!1},d(e){o&&o.d(e)}}}function Fw(e){let t;const n=e[8]["variant-2"],o=Lg(n,e,e[10],Ww);return{c(){o&&o.c()},m(e,n){o&&o.m(e,n),t=!0},p(e,r){o&&o.p&&(!t||1024&r)&&Rg(o,n,e,e[10],t?Ag(n,e[10],r,Bw):Mg(e[10]),Ww)},i(e){t||(Yh(o,e),t=!0)},o(e){Kh(o,e),t=!1},d(e){o&&o.d(e)}}}function Hw(e){let t,n,o,r,i,s,a,l=`${e[0]} - variant ${e[2]}`,c=e[3]&&jw(e);return{c(){t=Zg("div"),n=Zg("span"),o=Qg(l),r=Jg(),c&&c.c(),rh(n,"class","badge svelte-1rhm4y7"),rh(t,"class","meta-container svelte-1rhm4y7")},m(l,d){Vg(l,t,d),jg(t,n),jg(n,o),jg(t,r),c&&c.m(t,null),i=!0,s||(a=th(t,"click",e[9]),s=!0)},p(e,n){(!i||5&n)&&l!==(l=`${e[0]} - variant ${e[2]}`)&&ih(o,l),e[3]?c?(c.p(e,n),8&n&&Yh(c,1)):(c=jw(e),c.c(),Yh(c,1),c.m(t,null)):c&&(qh(),Kh(c,1,1,(()=>{c=null})),Vh())},i(e){i||(Yh(c),i=!0)},o(e){Kh(c),i=!1},d(e){e&&Yg(t),c&&c.d(),s=!1,a()}}}function jw(e){let t,n,o,r,i,s,a,l,c,d=`variant: ${e[2]} `,u=`breakout: ${e[1].breakout}`;return i=new Dw({props:{$$slots:{default:[Gw]},$$scope:{ctx:e}}}),i.$on("click",e[5]),{c(){t=Zg("div"),n=Zg("p"),o=Qg(d),r=Jg(),nf(i.$$.fragment),s=Jg(),a=Zg("p"),l=Qg(u),rh(t,"class","meta-data svelte-1rhm4y7")},m(e,d){Vg(e,t,d),jg(t,n),jg(n,o),jg(n,r),of(i,n,null),jg(t,s),jg(t,a),jg(a,l),c=!0},p(e,t){(!c||4&t)&&d!==(d=`variant: ${e[2]} `)&&ih(o,d);const n={};1024&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n),(!c||2&t)&&u!==(u=`breakout: ${e[1].breakout}`)&&ih(l,u)},i(e){c||(Yh(i.$$.fragment,e),c=!0)},o(e){Kh(i.$$.fragment,e),c=!1},d(e){e&&Yg(t),rf(i)}}}function Gw(e){let t;return{c(){t=Qg("switch")},m(e,n){Vg(e,t,n)},d(e){e&&Yg(t)}}}function qw(e){let t,n,o,r,i;const s=[Fw,zw],a=[];function l(e,t){return 2===e[2]?0:1}t=l(e),n=a[t]=s[t](e);let c=e[4].showExperiments&&e[1]&&Hw(e);return{c(){n.c(),o=Jg(),c&&c.c(),r=eh()},m(e,n){a[t].m(e,n),Vg(e,o,n),c&&c.m(e,n),Vg(e,r,n),i=!0},p(e,[i]){let d=t;t=l(e),t===d?a[t].p(e,i):(qh(),Kh(a[d],1,1,(()=>{a[d]=null})),Vh(),n=a[t],n?n.p(e,i):(n=a[t]=s[t](e),n.c()),Yh(n,1),n.m(o.parentNode,o)),e[4].showExperiments&&e[1]?c?(c.p(e,i),18&i&&Yh(c,1)):(c=Hw(e),c.c(),Yh(c,1),c.m(r.parentNode,r)):c&&(qh(),Kh(c,1,1,(()=>{c=null})),Vh())},i(e){i||(Yh(n),Yh(c),i=!0)},o(e){Kh(n),Kh(c),i=!1},d(e){e&&(Yg(o),Yg(r)),a[t].d(e),c&&c.d(e)}}}function Vw(e,t,n){let o,r;kg(e,pf,(e=>n(7,o=e))),kg(e,df,(e=>n(4,r=e)));let i,s,{$$slots:a={},$$scope:l}=t,{experimentName:c}=t,d=1,u=!1;return e.$$set=e=>{"experimentName"in e&&n(0,c=e.experimentName),"$$scope"in e&&n(10,l=e.$$scope)},e.$$.update=()=>{195&e.$$.dirty&&(n(6,s=((e,t)=>{if((t||e)&&0!==e.length)return t||[...e]})(o,s)),s&&s.length>0&&(n(1,i=s.filter((e=>e.name===c))[0]),i&&n(2,d=i.variant)))},[c,i,d,u,r,function(){n(2,d=1===d?2:1)},s,o,a,()=>n(3,u=!u),l]}class Yw extends af{constructor(e){super(),sf(this,e,Vw,qw,$g,{experimentName:0})}}function Kw(e,t,n){const o=e.slice();return o[25]=t[n],o}function Zw(e,t,n){const o=e.slice();return o[25]=t[n],o}function Xw(e,t,n){const o=e.slice();return o[25]=t[n],o}function Qw(e){let t,n,o,r,i;return n=new R_({props:{disabled:e[0],items:e[14],defaultOption:e[18],placeholder:e[16],dataQaButton:"deepl-language-selection-button",dataQaList:"deepl-language-selection-list",customClass:e[3],variant:e[5],fontSize:e[6],alignRight:e[7],isBorderless:e[8],showSortCode:e[9],extraPadding:e[10],dropdownMaxHeight:e[11],autoHeight:e[12]}}),n.$on("valueselected",e[17]),{c(){t=Zg("div"),nf(n.$$.fragment)},m(s,a){Vg(s,t,a),of(n,t,null),o=!0,r||(i=th(t,"mousedown",oh(nh(e[23]))),r=!0)},p(e,t){const o={};1&t[0]&&(o.disabled=e[0]),16384&t[0]&&(o.items=e[14]),8&t[0]&&(o.customClass=e[3]),32&t[0]&&(o.variant=e[5]),64&t[0]&&(o.fontSize=e[6]),128&t[0]&&(o.alignRight=e[7]),256&t[0]&&(o.isBorderless=e[8]),512&t[0]&&(o.showSortCode=e[9]),1024&t[0]&&(o.extraPadding=e[10]),2048&t[0]&&(o.dropdownMaxHeight=e[11]),4096&t[0]&&(o.autoHeight=e[12]),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n),r=!1,i()}}}function Jw(e){let t,n,o,r,i,s,a=e[2]&&tb(),l=ef(e[14]),c=[];for(let t=0;t<l.length;t+=1)c[t]=nb(Kw(e,l,t));return{c(){t=Zg("div"),n=Zg("select"),a&&a.c(),o=eh();for(let e=0;e<c.length;e+=1)c[e].c();rh(n,"data-qa","deepl-language-selection"),rh(n,"aria-label","Select Language"),rh(n,"class","svelte-1ww98o"),rh(t,"class",r=Ng("alternate"===e[5]?"language-selector-alternate":"language-selector")+" svelte-1ww98o")},m(r,l){Vg(r,t,l),jg(t,n),a&&a.m(n,null),jg(n,o);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(n,null);lh(n,e[1]),i||(s=th(n,"change",nh(e[24])),i=!0)},p(e,i){if(e[2]?a?a.p(e,i):(a=tb(),a.c(),a.m(n,o)):a&&(a.d(1),a=null),16384&i[0]){let t;for(l=ef(e[14]),t=0;t<l.length;t+=1){const o=Kw(e,l,t);c[t]?c[t].p(o,i):(c[t]=nb(o),c[t].c(),c[t].m(n,null))}for(;t<c.length;t+=1)c[t].d(1);c.length=l.length}16386&i[0]&&lh(n,e[1]),32&i[0]&&r!==(r=Ng("alternate"===e[5]?"language-selector-alternate":"language-selector")+" svelte-1ww98o")&&rh(t,"class",r)},i:wg,o:wg,d(e){e&&Yg(t),a&&a.d(),Kg(c,e),i=!1,s()}}}function eb(e){let t,n,o,r,i=ef(e[14]),s=[];for(let t=0;t<i.length;t+=1)s[t]=ob(Zw(e,i,t));return{c(){t=Zg("div"),n=Zg("select");for(let e=0;e<s.length;e+=1)s[e].c();n.disabled=!0,rh(n,"data-qa","deepl-language-selection-readonly"),rh(n,"aria-label","Select Language - dropdown disabled"),rh(n,"class","svelte-1ww98o"),rh(t,"class","language-selector read-only svelte-1ww98o")},m(i,a){Vg(i,t,a),jg(t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(n,null);lh(n,e[1]),o||(r=th(n,"change",nh(ub)),o=!0)},p(e,t){if(16384&t[0]){let o;for(i=ef(e[14]),o=0;o<i.length;o+=1){const r=Zw(e,i,o);s[o]?s[o].p(r,t):(s[o]=ob(r),s[o].c(),s[o].m(n,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=i.length}16386&t[0]&&lh(n,e[1])},i:wg,o:wg,d(e){e&&Yg(t),Kg(s,e),o=!1,r()}}}function tb(e){let t,n,o,r=chrome.i18n.getMessage("supported_languages_undefined")+"";return{c(){t=Zg("option"),n=Qg(r),o=Jg(),t.__value=void 0,sh(t,t.__value),rh(t,"data-option-regionalvariant",void 0)},m(e,r){Vg(e,t,r),jg(t,n),jg(t,o)},p:wg,d(e){e&&Yg(t)}}}function nb(e){let t,n,o,r,i,s=e[25].label+"";return{c(){t=Zg("option"),n=Qg(s),o=Jg(),t.__value=r=e[25].value,sh(t,t.__value),rh(t,"data-option-regionalvariant",i=e[25].regionalVariant)},m(e,r){Vg(e,t,r),jg(t,n),jg(t,o)},p(e,o){16384&o[0]&&s!==(s=e[25].label+"")&&ih(n,s),16384&o[0]&&r!==(r=e[25].value)&&(t.__value=r,sh(t,t.__value)),16384&o[0]&&i!==(i=e[25].regionalVariant)&&rh(t,"data-option-regionalvariant",i)},d(e){e&&Yg(t)}}}function ob(e){let t,n,o,r,i,s=e[25].label+"";return{c(){t=Zg("option"),n=Qg(s),o=Jg(),t.__value=r=e[25].value,sh(t,t.__value),rh(t,"data-option-regionalvariant",i=e[25].regionalVariant)},m(e,r){Vg(e,t,r),jg(t,n),jg(t,o)},p(e,o){16384&o[0]&&s!==(s=e[25].label+"")&&ih(n,s),16384&o[0]&&r!==(r=e[25].value)&&(t.__value=r,sh(t,t.__value)),16384&o[0]&&i!==(i=e[25].regionalVariant)&&rh(t,"data-option-regionalvariant",i)},d(e){e&&Yg(t)}}}function rb(e){let t,n,o,r,i;const s=[eb,Jw,Qw],a=[];function l(e,t){return e[13]?0:(null==n&&(n=!!Z_()),n?1:2)}return o=l(e),r=a[o]=s[o](e),{c(){t=Zg("div"),r.c(),rh(t,"slot","variant-1")},m(e,n){Vg(e,t,n),a[o].m(t,null),i=!0},p(e,n){let i=o;o=l(e),o===i?a[o].p(e,n):(qh(),Kh(a[i],1,1,(()=>{a[i]=null})),Vh(),r=a[o],r?r.p(e,n):(r=a[o]=s[o](e),r.c()),Yh(r,1),r.m(t,null))},i(e){i||(Yh(r),i=!0)},o(e){Kh(r),i=!1},d(e){e&&Yg(t),a[o].d()}}}function ib(e){let t,n,o,r,i;return n=new R_({props:{disabled:e[0],items:e[14],defaultOption:e[18],placeholder:e[16],dataQaButton:"deepl-language-selection-button",dataQaList:"deepl-language-selection-list",customClass:e[3],variant:e[5],fontSize:e[6],alignRight:e[7],isBorderless:e[8],showSortCode:e[9],extraPadding:e[10],dropdownMaxHeight:e[11],autoHeight:e[12]}}),n.$on("valueselected",e[17]),{c(){t=Zg("div"),nf(n.$$.fragment)},m(s,a){Vg(s,t,a),of(n,t,null),o=!0,r||(i=th(t,"mousedown",oh(nh(e[22]))),r=!0)},p(e,t){const o={};1&t[0]&&(o.disabled=e[0]),16384&t[0]&&(o.items=e[14]),8&t[0]&&(o.customClass=e[3]),32&t[0]&&(o.variant=e[5]),64&t[0]&&(o.fontSize=e[6]),128&t[0]&&(o.alignRight=e[7]),256&t[0]&&(o.isBorderless=e[8]),512&t[0]&&(o.showSortCode=e[9]),1024&t[0]&&(o.extraPadding=e[10]),2048&t[0]&&(o.dropdownMaxHeight=e[11]),4096&t[0]&&(o.autoHeight=e[12]),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n),r=!1,i()}}}function sb(e){let t,n,o,r,i=ef(e[14]),s=[];for(let t=0;t<i.length;t+=1)s[t]=ab(Xw(e,i,t));return{c(){t=Zg("div"),n=Zg("select");for(let e=0;e<s.length;e+=1)s[e].c();n.disabled=!0,rh(n,"data-qa","deepl-language-selection-readonly"),rh(n,"aria-label","Select Language - dropdown disabled"),rh(n,"class","svelte-1ww98o"),rh(t,"class","language-selector read-only svelte-1ww98o")},m(i,a){Vg(i,t,a),jg(t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(n,null);lh(n,e[1]),o||(r=th(n,"change",nh(db)),o=!0)},p(e,t){if(16384&t[0]){let o;for(i=ef(e[14]),o=0;o<i.length;o+=1){const r=Xw(e,i,o);s[o]?s[o].p(r,t):(s[o]=ab(r),s[o].c(),s[o].m(n,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=i.length}16386&t[0]&&lh(n,e[1])},i:wg,o:wg,d(e){e&&Yg(t),Kg(s,e),o=!1,r()}}}function ab(e){let t,n,o,r,i,s=e[25].label+"";return{c(){t=Zg("option"),n=Qg(s),o=Jg(),t.__value=r=e[25].value,sh(t,t.__value),rh(t,"data-option-regionalvariant",i=e[25].regionalVariant)},m(e,r){Vg(e,t,r),jg(t,n),jg(t,o)},p(e,o){16384&o[0]&&s!==(s=e[25].label+"")&&ih(n,s),16384&o[0]&&r!==(r=e[25].value)&&(t.__value=r,sh(t,t.__value)),16384&o[0]&&i!==(i=e[25].regionalVariant)&&rh(t,"data-option-regionalvariant",i)},d(e){e&&Yg(t)}}}function lb(e){let t,n,o,r;const i=[sb,ib],s=[];function a(e,t){return e[13]?0:1}return n=a(e),o=s[n]=i[n](e),{c(){t=Zg("div"),o.c(),rh(t,"slot","variant-2")},m(e,o){Vg(e,t,o),s[n].m(t,null),r=!0},p(e,r){let l=n;n=a(e),n===l?s[n].p(e,r):(qh(),Kh(s[l],1,1,(()=>{s[l]=null})),Vh(),o=s[n],o?o.p(e,r):(o=s[n]=i[n](e),o.c()),Yh(o,1),o.m(t,null))},i(e){r||(Yh(o),r=!0)},o(e){Kh(o),r=!1},d(e){e&&Yg(t),s[n].d()}}}function cb(e){let t,n;return t=new Yw({props:{experimentName:"TG-2954",$$slots:{"variant-2":[lb],"variant-1":[rb]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};32751&n[0]|2&n[1]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}const db=()=>{},ub=()=>{};function pb(e,t,n){let o,i=wg,s=()=>(i(),i=Cg(p,(e=>n(21,o=e))),p);e.$$.on_destroy.push((()=>i()));const a=Sh();let{value:l}=t,{showChooseLanguageOption:c=!1}=t,{customClass:u=""}=t,{websiteSettings:p}=t;s();let m,{disabled:g=!1}=t,{variant:h="original"}=t,{fontSize:f="default"}=t,{alignRight:_=!1}=t,{isBorderless:v=!1}=t,{showSortCode:y=!1}=t,{extraPadding:w=!1}=t,{showRegionalVariants:b=!0}=t,{dropdownMaxHeight:E=300}=t,{onlyShowWriteEnabledLanguages:T=!1}=t,{autoHeight:S}=t,{readOnly:x=!1}=t,$=c?chrome.i18n.getMessage("supported_languages_undefined"):void 0;m=b?Bt():r.filter((e=>!["PT-BR","EN-US","ZH-HANT"].includes(e.langCode))).map((e=>"EN-GB"===e.langCode?{...e,langCode:"EN"}:"PT-PT"===e.langCode?{...e,langCode:"PT"}:e)).map((e=>({value:e.langCode,label:chrome.i18n.getMessage(`supported_languages_${e.langCode}`),selectedOptionLabel:chrome.i18n.getMessage(`supported_languages_${e.langCode}`)}))).sort(((e,t)=>e.label.localeCompare(t.label,chrome.i18n.getUILanguage()))),T&&(m=m.filter((e=>Ft(e.value))));let C=l?m.find((e=>e.value===l)):void 0;return e.$$set=e=>{"value"in e&&n(1,l=e.value),"showChooseLanguageOption"in e&&n(2,c=e.showChooseLanguageOption),"customClass"in e&&n(3,u=e.customClass),"websiteSettings"in e&&s(n(4,p=e.websiteSettings)),"disabled"in e&&n(0,g=e.disabled),"variant"in e&&n(5,h=e.variant),"fontSize"in e&&n(6,f=e.fontSize),"alignRight"in e&&n(7,_=e.alignRight),"isBorderless"in e&&n(8,v=e.isBorderless),"showSortCode"in e&&n(9,y=e.showSortCode),"extraPadding"in e&&n(10,w=e.extraPadding),"showRegionalVariants"in e&&n(19,b=e.showRegionalVariants),"dropdownMaxHeight"in e&&n(11,E=e.dropdownMaxHeight),"onlyShowWriteEnabledLanguages"in e&&n(20,T=e.onlyShowWriteEnabledLanguages),"autoHeight"in e&&n(12,S=e.autoHeight),"readOnly"in e&&n(13,x=e.readOnly)},e.$$.update=()=>{2097152&e.$$.dirty[0]&&(o&&o.translationState===d.ongoingTranslation?n(0,g=!0):o&&[d.none,d.isTranslationComplete].includes(o.translationState)&&n(0,g=!1))},[g,l,c,u,p,h,f,_,v,y,w,E,S,x,m,a,$,function(e){g||a("selection",e.detail)},C,b,T,o,function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},e=>{if(g)return;const t=e.target.options[e.target.selectedIndex].getAttribute("data-option-regionalVariant")||void 0;a("selection",{selectedOption:{value:e.target.value,regionalVariant:t}})}]}class mb extends af{constructor(e){super(),sf(this,e,pb,cb,$g,{value:1,showChooseLanguageOption:2,customClass:3,websiteSettings:4,disabled:0,variant:5,fontSize:6,alignRight:7,isBorderless:8,showSortCode:9,extraPadding:10,showRegionalVariants:19,dropdownMaxHeight:11,onlyShowWriteEnabledLanguages:20,autoHeight:12,readOnly:13},null,[-1,-1])}}function gb(e){let t,n,o,r;return{c(){t=Xg("svg"),n=Xg("path"),rh(n,"d","M1 7L5 11L15 1"),rh(n,"stroke",o=e[0]?e[3]:e[4]),rh(n,"stroke-width","2"),rh(n,"stroke-linecap","round"),rh(n,"stroke-linejoin","round"),rh(n,"class","svelte-mrm8jk"),rh(t,"width",e[2]),rh(t,"height",e[1]),rh(t,"class","checkmark svelte-mrm8jk"),rh(t,"viewBox","0 0 16 12"),rh(t,"fill","none"),rh(t,"xmlns","http://www.w3.org/2000/svg"),rh(t,"style",r=`padding: ${e[6]};`),uh(t,"enableHover",e[5])},m(e,o){Vg(e,t,o),jg(t,n)},p(e,[i]){25&i&&o!==(o=e[0]?e[3]:e[4])&&rh(n,"stroke",o),4&i&&rh(t,"width",e[2]),2&i&&rh(t,"height",e[1]),64&i&&r!==(r=`padding: ${e[6]};`)&&rh(t,"style",r),32&i&&uh(t,"enableHover",e[5])},i:wg,o:wg,d(e){e&&Yg(t)}}}function hb(e,t,n){let{disabled:o=!1}=t,{height:r="16px"}=t,{width:i="16px"}=t,{disabledColor:s="#727A83"}=t,{enabledColor:a="#007E5E"}=t,{enableHover:l=!1}=t,{padding:c}=t;return e.$$set=e=>{"disabled"in e&&n(0,o=e.disabled),"height"in e&&n(1,r=e.height),"width"in e&&n(2,i=e.width),"disabledColor"in e&&n(3,s=e.disabledColor),"enabledColor"in e&&n(4,a=e.enabledColor),"enableHover"in e&&n(5,l=e.enableHover),"padding"in e&&n(6,c=e.padding)},[o,r,i,s,a,l,c]}class fb extends af{constructor(e){super(),sf(this,e,hb,gb,$g,{disabled:0,height:1,width:2,disabledColor:3,enabledColor:4,enableHover:5,padding:6})}}function _b(e,t,n){const o=e.slice();return o[19]=t[n],o[21]=n,o}function vb(e,t,n){const o=e.slice();return o[22]=t[n],o}function yb(e,t,n){const o=e.slice();return o[25]=t[n],o}function wb(e){let t,n,o,r,i,s,a,l,c,d,u=e[5].name+"",p=ef(e[5].termDictionaries),m=[];for(let t=0;t<p.length;t+=1)m[t]=bb(yb(e,p,t));let g=e[5].hasAdditionalPairs&&Eb(e);return{c(){t=Zg("div"),n=Zg("div"),o=Zg("div"),r=Qg(u),i=Jg();for(let e=0;e<m.length;e+=1)m[e].c();s=Jg(),g&&g.c(),a=Jg(),l=Zg("div"),l.textContent="Remove",rh(o,"class","title"),rh(l,"class","remove-button svelte-1ium3jp"),rh(n,"class","glossary-menu-active-glossary-display svelte-1ium3jp"),rh(t,"class","glossary-menu-active-glossary-display-container svelte-1ium3jp")},m(u,p){Vg(u,t,p),jg(t,n),jg(n,o),jg(o,r),jg(n,i);for(let e=0;e<m.length;e+=1)m[e]&&m[e].m(n,null);jg(n,s),g&&g.m(n,null),jg(n,a),jg(n,l),c||(d=th(l,"click",e[9]),c=!0)},p(e,t){if(32&t&&u!==(u=e[5].name+"")&&ih(r,u),2080&t){let o;for(p=ef(e[5].termDictionaries),o=0;o<p.length;o+=1){const r=yb(e,p,o);m[o]?m[o].p(r,t):(m[o]=bb(r),m[o].c(),m[o].m(n,s))}for(;o<m.length;o+=1)m[o].d(1);m.length=p.length}e[5].hasAdditionalPairs?g?g.p(e,t):(g=Eb(e),g.c(),g.m(n,a)):g&&(g.d(1),g=null)},d(e){e&&Yg(t),Kg(m,e),g&&g.d(),c=!1,d()}}}function bb(e){let t,n=e[11](e[25].languagePair)+"";return{c(){t=Zg("div"),rh(t,"class","lang-pair svelte-1ium3jp")},m(e,o){Vg(e,t,o),t.innerHTML=n},p(e,o){32&o&&n!==(n=e[11](e[25].languagePair)+"")&&(t.innerHTML=n)},d(e){e&&Yg(t)}}}function Eb(e){let t,n,o;return{c(){t=Zg("div"),t.textContent=`${chrome.i18n.getMessage("glossary_settings_show_more_lang_pairs")}...`,rh(t,"class","show-more svelte-1ium3jp")},m(r,i){Vg(r,t,i),n||(o=th(t,"click",e[13]),n=!0)},p:wg,d(e){e&&Yg(t),n=!1,o()}}}function Tb(e){let t;function n(e,t){return e[0]?e[3]||0!==e[1].length?Sb:xb:$b}let o=n(e),r=o(e);return{c(){r.c(),t=eh()},m(e,n){r.m(e,n),Vg(e,t,n)},p(e,i){o===(o=n(e))&&r?r.p(e,i):(r.d(1),r=o(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){e&&Yg(t),r.d(e)}}}function Sb(e){let t,n=ef(e[6]),o=[];for(let t=0;t<n.length;t+=1)o[t]=Ib(_b(e,n,t));return{c(){t=Zg("div");for(let e=0;e<o.length;e+=1)o[e].c();rh(t,"class","glossary-list svelte-1ium3jp")},m(e,n){Vg(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,r){if(3270&r){let i;for(n=ef(e[6]),i=0;i<n.length;i+=1){const s=_b(e,n,i);o[i]?o[i].p(s,r):(o[i]=Ib(s),o[i].c(),o[i].m(t,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){e&&Yg(t),Kg(o,e)}}}function xb(e){let t,n,o,r,i;return{c(){t=Zg("div"),n=Zg("div"),o=Zg("div"),o.innerHTML='<div class="icon svelte-1ium3jp"></div>',r=Jg(),i=Zg("div"),i.textContent=`${chrome.i18n.getMessage("zendesk_no_glossaries_found")}`,rh(o,"class","icon-container svelte-1ium3jp"),rh(i,"class","content svelte-1ium3jp"),rh(n,"class","container svelte-1ium3jp"),rh(t,"class","glossary-not-found svelte-1ium3jp")},m(e,s){Vg(e,t,s),jg(t,n),jg(n,o),jg(n,r),jg(n,i)},p:wg,d(e){e&&Yg(t)}}}function $b(e){let t,n,o,r,i;return{c(){t=Zg("div"),n=Zg("div"),o=Zg("div"),o.innerHTML='<div class="icon svelte-1ium3jp"></div>',r=Jg(),i=Zg("div"),i.textContent=`${chrome.i18n.getMessage("zendesk_not_pro_user_body")}`,rh(o,"class","icon-container svelte-1ium3jp"),rh(i,"class","content svelte-1ium3jp"),rh(n,"class","container svelte-1ium3jp"),rh(t,"class","glossary-not-found svelte-1ium3jp")},m(e,s){Vg(e,t,s),jg(t,n),jg(n,o),jg(n,r),jg(n,i)},p:wg,d(e){e&&Yg(t)}}}function Cb(e){let t,n,o=e[11](e[22].languagePair)+"";return{c(){t=Zg("div"),n=Qg(o),rh(t,"class","lang-pair svelte-1ium3jp")},m(e,o){Vg(e,t,o),jg(t,n)},p(e,t){64&t&&o!==(o=e[11](e[22].languagePair)+"")&&ih(n,o)},d(e){e&&Yg(t)}}}function kb(e){let t,n,o;function r(){return e[14](e[19])}return{c(){t=Zg("div"),t.textContent=`${chrome.i18n.getMessage("glossary_settings_show_more_lang_pairs")}...`,rh(t,"class","show-more svelte-1ium3jp")},m(e,i){Vg(e,t,i),n||(o=th(t,"click",r),n=!0)},p(t,n){e=t},d(e){e&&Yg(t),n=!1,o()}}}function Lb(e){let t;return{c(){t=Zg("div"),rh(t,"class","divider svelte-1ium3jp")},m(e,n){Vg(e,t,n)},d(e){e&&Yg(t)}}}function Ib(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h=e[19].name+"",f=ef(e[19].termDictionaries),_=[];for(let t=0;t<f.length;t+=1)_[t]=Cb(vb(e,f,t));let v=e[19].hasAdditionalPairs&&kb(e);function y(){return e[15](e[19])}let w=e[21]<e[1].length-1&&Lb();return{c(){t=Zg("div"),n=Zg("div"),o=Zg("div"),r=Qg(h),i=Jg();for(let e=0;e<_.length;e+=1)_[e].c();s=Jg(),v&&v.c(),a=Jg(),l=Zg("div"),c=Zg("input"),u=Jg(),w&&w.c(),p=eh(),rh(o,"class","name"),rh(n,"class","info svelte-1ium3jp"),rh(c,"type","radio"),c.checked=d=e[2]?.zendeskActiveTermbase?.id===e[19].id,rh(c,"class","svelte-1ium3jp"),rh(l,"class","radio-container svelte-1ium3jp"),rh(t,"class","glossary-item svelte-1ium3jp")},m(e,d){Vg(e,t,d),jg(t,n),jg(n,o),jg(o,r),jg(n,i);for(let e=0;e<_.length;e+=1)_[e]&&_[e].m(n,null);jg(n,s),v&&v.m(n,null),jg(t,a),jg(t,l),jg(l,c),Vg(e,u,d),w&&w.m(e,d),Vg(e,p,d),m||(g=th(c,"click",y),m=!0)},p(t,o){if(e=t,64&o&&h!==(h=e[19].name+"")&&ih(r,h),2112&o){let t;for(f=ef(e[19].termDictionaries),t=0;t<f.length;t+=1){const r=vb(e,f,t);_[t]?_[t].p(r,o):(_[t]=Cb(r),_[t].c(),_[t].m(n,s))}for(;t<_.length;t+=1)_[t].d(1);_.length=f.length}e[19].hasAdditionalPairs?v?v.p(e,o):(v=kb(e),v.c(),v.m(n,null)):v&&(v.d(1),v=null),68&o&&d!==(d=e[2]?.zendeskActiveTermbase?.id===e[19].id)&&(c.checked=d),e[21]<e[1].length-1?w||(w=Lb(),w.c(),w.m(p.parentNode,p)):w&&(w.d(1),w=null)},d(e){e&&(Yg(t),Yg(u),Yg(p)),Kg(_,e),v&&v.d(),w&&w.d(e),m=!1,g()}}}function Ab(e){let t,n,o,r,i,s,a,l,c,d,u,p=e[5]&&wb(e),m=e[4]&&Tb(e);return{c(){t=Zg("div"),n=Zg("div"),o=Zg("div"),r=Zg("div"),r.textContent="Glossary",i=Jg(),s=Zg("div"),a=Jg(),p&&p.c(),l=Jg(),m&&m.c(),c=eh(),rh(r,"class","glossary-menu-text"),rh(s,"class","glossary-menu-toggle svelte-1ium3jp"),uh(s,"isGlossaryListExpanded",e[4]),rh(o,"class","glossary-menu-toggle-container svelte-1ium3jp"),rh(n,"class","glossary-menu"),rh(t,"class","glossary-menu-container svelte-1ium3jp"),uh(t,"isGlossaryListExpanded",e[4])},m(g,h){Vg(g,t,h),jg(t,n),jg(n,o),jg(o,r),jg(o,i),jg(o,s),jg(n,a),p&&p.m(n,null),Vg(g,l,h),m&&m.m(g,h),Vg(g,c,h),d||(u=th(o,"click",e[8]),d=!0)},p(e,[o]){16&o&&uh(s,"isGlossaryListExpanded",e[4]),e[5]?p?p.p(e,o):(p=wb(e),p.c(),p.m(n,null)):p&&(p.d(1),p=null),16&o&&uh(t,"isGlossaryListExpanded",e[4]),e[4]?m?m.p(e,o):(m=Tb(e),m.c(),m.m(c.parentNode,c)):m&&(m.d(1),m=null)},i:wg,o:wg,d(e){e&&(Yg(t),Yg(l),Yg(c)),p&&p.d(),m&&m.d(e),d=!1,u()}}}function Rb(e,n,o){let r;kg(e,df,(e=>o(2,r=e)));let{userHasZendeskPermissions:i}=n,s=[],a=!0,l=!1,c=[],d=null,u=[];const p=e=>{o(12,c=[...c,e])},m=e=>{const n=s.find((t=>t.id===e));n&&(Og(df,r.zendeskActiveTermbase=n,r),t({action:"dlTrackGlossaryEnabled",payload:{nicheIntegration:re.zendesk}}))},g=async()=>{o(3,a=!0);try{const[e]=await jU();o(1,s=e)}catch(e){pn()&&console.error(e)}finally{(()=>{if(!r.zendeskActiveTermbase)return;if(!s||0===s.length)return void Og(df,r.zendeskActiveTermbase=null,r);const e=s.map((e=>e.id));if(r.zendeskActiveTermbase&&e.includes(r.zendeskActiveTermbase.id)){const e=s.find((e=>e.id===r.zendeskActiveTermbase.id));Og(df,r.zendeskActiveTermbase=e,r)}else Og(df,r.zendeskActiveTermbase=null,r)})(),o(3,a=!1)}},h=async e=>{if("dlChangeActiveTabStatus"===e.action)e.payload.isActive&&g();return!0};Eh((()=>{g(),chrome.runtime.onMessage.addListener(h)})),Th((()=>{chrome.runtime.onMessage.removeListener(h)}));return e.$$set=e=>{"userHasZendeskPermissions"in e&&o(0,i=e.userHasZendeskPermissions)},e.$$.update=()=>{4098&e.$$.dirty&&o(6,u=s.map((e=>c.includes(e.id)||e.termDictionaries.length<=3?e:{...e,termDictionaries:e.termDictionaries.slice(0,3),hasAdditionalPairs:!0}))),4&e.$$.dirty&&(r.zendeskActiveTermbase||o(5,d=null)),4100&e.$$.dirty&&r.zendeskActiveTermbase&&(c.includes(r.zendeskActiveTermbase.id)||r.zendeskActiveTermbase.termDictionaries.length<=3?o(5,d=r.zendeskActiveTermbase):o(5,d={...r.zendeskActiveTermbase,termDictionaries:r.zendeskActiveTermbase.termDictionaries.slice(0,3),hasAdditionalPairs:!0}))},[i,s,r,a,l,d,u,p,()=>{o(4,l=!l),l&&(i||t({action:"dlTrackZendeskGlossaryOpened",payload:{glossaryConfigOpenedWithoutGlossaryPermissions:!0}}),i&&!a&&0==s.length&&t({action:"dlTrackZendeskGlossaryOpened",payload:{glossaryConfigOpenedWithNoGlossariesFound:!0}}))},()=>{Og(df,r.zendeskActiveTermbase=null,r),t({action:"dlTrackGlossaryDisabled",payload:{nicheIntegration:re.zendesk}})},m,e=>{if(!e||!e.includes(">"))return chrome.i18n.getMessage("supported_languages_undefined");const[t,n]=e.split(">");return`${chrome.i18n.getMessage(`supported_languages_${t.toUpperCase()}`)} â ${chrome.i18n.getMessage(`supported_languages_${n.toUpperCase()}`)}`},c,()=>{p(d.id)},e=>{p(e.id)},e=>m(e.id)]}class Mb extends af{constructor(e){super(),sf(this,e,Rb,Ab,$g,{userHasZendeskPermissions:0})}}function Nb(e){let t,n,o,r,i,s;const a=e[1].default,l=Lg(a,e,e[0],null);return{c(){t=Zg("div"),n=Zg("div"),o=Xg("svg"),r=Xg("path"),i=Jg(),l&&l.c(),rh(r,"d","M12 8V12M12 16H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"),rh(r,"stroke","#D6A300"),rh(r,"stroke-width","1.5"),rh(r,"stroke-linecap","round"),rh(r,"stroke-linejoin","round"),rh(o,"width","24"),rh(o,"height","24"),rh(o,"viewBox","0 0 24 24"),rh(o,"fill","none"),rh(o,"xmlns","http://www.w3.org/2000/svg"),rh(n,"class","content svelte-hf4zwi"),rh(t,"class","container svelte-hf4zwi")},m(e,a){Vg(e,t,a),jg(t,n),jg(n,o),jg(o,r),jg(n,i),l&&l.m(n,null),s=!0},p(e,[t]){l&&l.p&&(!s||1&t)&&Rg(l,a,e,e[0],s?Ag(a,e[0],t,null):Mg(e[0]),null)},i(e){s||(Yh(l,e),s=!0)},o(e){Kh(l,e),s=!1},d(e){e&&Yg(t),l&&l.d(e)}}}function Ob(e,t,n){let{$$slots:o={},$$scope:r}=t;return e.$$set=e=>{"$$scope"in e&&n(0,r=e.$$scope)},[r,o]}class Db extends af{constructor(e){super(),sf(this,e,Ob,Nb,$g,{})}}function Pb(e){let t,n,o,r,i,s=chrome.i18n.getMessage("zendesk_translations_left_info",[`${e[1]}/${we}`])+"";return{c(){t=Zg("div"),n=Zg("div"),o=Qg(e[0]),r=Jg(),i=Zg("div"),rh(n,"class","info-text svelte-62gn63"),rh(i,"class","translation-info svelte-62gn63"),rh(t,"class","container svelte-62gn63")},m(e,a){Vg(e,t,a),jg(t,n),jg(n,o),jg(t,r),jg(t,i),i.innerHTML=s},p(e,[t]){1&t&&ih(o,e[0]),2&t&&s!==(s=chrome.i18n.getMessage("zendesk_translations_left_info",[`${e[1]}/${we}`])+"")&&(i.innerHTML=s)},i:wg,o:wg,d(e){e&&Yg(t)}}}function Ub(e,t,n){let{infoText:o}=t,{translationCount:r}=t;return e.$$set=e=>{"infoText"in e&&n(0,o=e.infoText),"translationCount"in e&&n(1,r=e.translationCount)},[o,r]}class Bb extends af{constructor(e){super(),sf(this,e,Ub,Pb,$g,{infoText:0,translationCount:1})}}function Wb(e){let t,n,o,r,i=chrome.i18n.getMessage("zendesk_popup_char_limit_label",[e[2]])+"",s=chrome.i18n.getMessage("zendesk_popup_char_limit_content")+"";return{c(){t=Zg("div"),n=Qg(i),o=Jg(),r=Qg(s),rh(t,"class","translation-count svelte-6kl6z0")},m(e,i){Vg(e,t,i),jg(t,n),Vg(e,o,i),Vg(e,r,i)},p(e,t){4&t&&i!==(i=chrome.i18n.getMessage("zendesk_popup_char_limit_label",[e[2]])+"")&&ih(n,i)},i:wg,o:wg,d(e){e&&(Yg(t),Yg(o),Yg(r))}}}function zb(e){let t,n;return t=new Db({props:{$$slots:{default:[jb]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};12&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function Fb(e){let t,n;return t=new Db({props:{$$slots:{default:[Gb]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};12&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function Hb(e){let t,n,o,r,i,s;const a=[Yb,Vb,qb],l=[];function c(e,o){return 2&o&&(t=null),2&o&&(n=null),null==t&&(t=!!nt(e[1],be.TRANSLATOR)),t?0:(null==n&&(n=!!st(e[1],be.TRANSLATOR)),n?1:2)}return o=c(e,-1),r=l[o]=a[o](e),{c(){r.c(),i=eh()},m(e,t){l[o].m(e,t),Vg(e,i,t),s=!0},p(e,t){let n=o;o=c(e,t),o===n?l[o].p(e,t):(qh(),Kh(l[n],1,1,(()=>{l[n]=null})),Vh(),r=l[o],r?r.p(e,t):(r=l[o]=a[o](e),r.c()),Yh(r,1),r.m(i.parentNode,i))},i(e){s||(Yh(r),s=!0)},o(e){Kh(r),s=!1},d(e){e&&Yg(i),l[o].d(e)}}}function jb(e){let t,n;return t=new Bb({props:{infoText:chrome.i18n.getMessage("zendesk_limit_not_reached_free_account_infobox"),translationCount:e[2]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.translationCount=e[2]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function Gb(e){let t,n;return t=new Bb({props:{infoText:chrome.i18n.getMessage("zendesk_limit_not_reached_pro_user_infobox"),translationCount:e[2]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.translationCount=e[2]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function qb(e){let t,n,o,r;return{c(){t=Zg("div"),n=Zg("div"),o=Jg(),r=Zg("div"),r.textContent=`${chrome.i18n.getMessage("zendesk_limit_reached_infobox")}`,rh(n,"class","icon svelte-6kl6z0"),rh(r,"class","text svelte-6kl6z0"),rh(t,"class","upgrade-infobox svelte-6kl6z0")},m(e,i){Vg(e,t,i),jg(t,n),jg(t,o),jg(t,r)},p:wg,i:wg,o:wg,d(e){e&&Yg(t)}}}function Vb(e){let t,n;return t=new Db({props:{$$slots:{default:[Kb]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};12&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function Yb(e){let t,n;return t=new Db({props:{$$slots:{default:[Zb]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};12&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function Kb(e){let t,n;return t=new Bb({props:{infoText:chrome.i18n.getMessage("zendesk_limit_reached_free_account_infobox"),translationCount:e[2]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.translationCount=e[2]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function Zb(e){let t,n;return t=new Bb({props:{infoText:chrome.i18n.getMessage("zendesk_limit_reached_pro_user_infobox"),translationCount:e[2]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.translationCount=e[2]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function Xb(e){let t,n,o,r,i,s;const a=[Hb,Fb,zb,Wb],l=[];function c(e,o){return 2&o&&(t=null),2&o&&(n=null),e[0]?0:(null==t&&(t=!!nt(e[1],be.TRANSLATOR)),t?1:(null==n&&(n=!!st(e[1],be.TRANSLATOR)),n?2:3))}return o=c(e,-1),r=l[o]=a[o](e),{c(){r.c(),i=eh()},m(e,t){l[o].m(e,t),Vg(e,i,t),s=!0},p(e,[t]){let n=o;o=c(e,t),o===n?l[o].p(e,t):(qh(),Kh(l[n],1,1,(()=>{l[n]=null})),Vh(),r=l[o],r?r.p(e,t):(r=l[o]=a[o](e),r.c()),Yh(r,1),r.m(i.parentNode,i))},i(e){s||(Yh(r),s=!0)},o(e){Kh(r),s=!1},d(e){e&&Yg(i),l[o].d(e)}}}function Qb(e,t,n){let{limitReached:o}=t,{settings:r}=t,{remainingTranslations:i}=t;return e.$$set=e=>{"limitReached"in e&&n(0,o=e.limitReached),"settings"in e&&n(1,r=e.settings),"remainingTranslations"in e&&n(2,i=e.remainingTranslations)},[o,r,i]}class Jb extends af{constructor(e){super(),sf(this,e,Qb,Xb,$g,{limitReached:0,settings:1,remainingTranslations:2})}}function eE(e,t,n){const o=e.slice();return o[17]=t[n],o}function tE(e){let t,n,o,r,i,s;const a=[iE,rE,oE,nE],l=[];function c(e,t){return"onboarding"===e[4]?0:"user_has_reached_limit"===e[4]?1:"language_not_supported"===e[4]?2:3}n=c(e),o=l[n]=a[n](e);let d=!e[1]&&"onboarding"!==e[4]&&aE(e),u=(!e[2].isZendeskEnabled||"default"===e[4]||"onboarding"===e[4])&&!e[5]&&_E(e);return{c(){t=Zg("div"),o.c(),r=Jg(),d&&d.c(),i=Jg(),u&&u.c(),rh(t,"class","dl-zendesk-modal svelte-csh6q0"),uh(t,"onboarding","onboarding"===e[4])},m(e,o){Vg(e,t,o),l[n].m(t,null),jg(t,r),d&&d.m(t,null),jg(t,i),u&&u.m(t,null),s=!0},p(e,p){let m=n;n=c(e),n===m?l[n].p(e,p):(qh(),Kh(l[m],1,1,(()=>{l[m]=null})),Vh(),o=l[n],o?o.p(e,p):(o=l[n]=a[n](e),o.c()),Yh(o,1),o.m(t,r)),e[1]||"onboarding"===e[4]?d&&(d.d(1),d=null):d?d.p(e,p):(d=aE(e),d.c(),d.m(t,i)),e[2].isZendeskEnabled&&"default"!==e[4]&&"onboarding"!==e[4]||e[5]?u&&(u.d(1),u=null):u?u.p(e,p):(u=_E(e),u.c(),u.m(t,null)),(!s||16&p)&&uh(t,"onboarding","onboarding"===e[4])},i(e){s||(Yh(o),s=!0)},o(e){Kh(o),s=!1},d(e){e&&Yg(t),l[n].d(),d&&d.d(),u&&u.d()}}}function nE(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f,_,v,y=chrome.i18n.getMessage("ui_zendesk_modal_deepl_translate_into")+"",w=chrome.i18n.getMessage("ui_zendesk_modal_ok")+"";n=new Mb({props:{userHasZendeskPermissions:e[1]}});let b=!e[1]&&sE(e);return d=new mb({props:{value:e[2].selectedTargetLanguage,websiteSettings:Rw,disabled:!e[2].isZendeskEnabled,customClass:"dropdown__zendesk-top-icon",fontSize:"md",dropdownMaxHeight:150}}),d.$on("selection",e[13]),{c(){t=Zg("div"),nf(n.$$.fragment),o=Jg(),b&&b.c(),r=Jg(),i=Zg("div"),s=Qg(y),a=Jg(),l=Zg("div"),c=Zg("div"),nf(d.$$.fragment),u=Jg(),p=Zg("div"),m=Zg("button"),g=Qg(w),rh(t,"class","modal-section glossary svelte-csh6q0"),rh(c,"class","dropdown svelte-csh6q0"),rh(m,"class","btn-primary svelte-csh6q0"),m.disabled=h=!e[2].isZendeskEnabled,rh(p,"class","right svelte-csh6q0"),rh(l,"class","dropdown-container svelte-csh6q0"),rh(i,"class","modal-section language-selector svelte-csh6q0")},m(h,y){Vg(h,t,y),of(n,t,null),Vg(h,o,y),b&&b.m(h,y),Vg(h,r,y),Vg(h,i,y),jg(i,s),jg(i,a),jg(i,l),jg(l,c),of(d,c,null),jg(l,u),jg(l,p),jg(p,m),jg(m,g),f=!0,_||(v=th(m,"click",e[14]),_=!0)},p(e,t){const o={};2&t&&(o.userHasZendeskPermissions=e[1]),n.$set(o),e[1]?b&&(qh(),Kh(b,1,1,(()=>{b=null})),Vh()):b?(b.p(e,t),2&t&&Yh(b,1)):(b=sE(e),b.c(),Yh(b,1),b.m(r.parentNode,r));const i={};4&t&&(i.value=e[2].selectedTargetLanguage),4&t&&(i.disabled=!e[2].isZendeskEnabled),d.$set(i),(!f||4&t&&h!==(h=!e[2].isZendeskEnabled))&&(m.disabled=h)},i(e){f||(Yh(n.$$.fragment,e),Yh(b),Yh(d.$$.fragment,e),f=!0)},o(e){Kh(n.$$.fragment,e),Kh(b),Kh(d.$$.fragment,e),f=!1},d(e){e&&(Yg(t),Yg(o),Yg(r),Yg(i)),rf(n),b&&b.d(e),rf(d),_=!1,v()}}}function oE(e){let t,n,o;return{c(){t=Zg("div"),t.textContent=`${chrome.i18n.getMessage("ui_zendesk_modal_language_not_supported_line_1")}`,n=Jg(),o=Zg("div"),o.textContent=`${chrome.i18n.getMessage("ui_zendesk_modal_language_not_supported_line_2")}`,rh(t,"class","modal-section language-not-supported svelte-csh6q0"),rh(o,"class","modal-section secondary-text svelte-csh6q0")},m(e,r){Vg(e,t,r),Vg(e,n,r),Vg(e,o,r)},p:wg,i:wg,o:wg,d(e){e&&(Yg(t),Yg(n),Yg(o))}}}function rE(e){let t,n,o;return n=new Jb({props:{limitReached:!0,remainingTranslations:e[6],settings:e[2]}}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","modal-section reached-limit svelte-csh6q0")},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p(e,t){const o={};64&t&&(o.remainingTranslations=e[6]),4&t&&(o.settings=e[2]),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function iE(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w=chrome.i18n.getMessage("zendesk_onboarding_content_one",[we])+"",b=chrome.i18n.getMessage("zendesk_onboarding_content_two")+"",E=chrome.i18n.getMessage("zendesk_onboarding_content_three")+"";return s=new fb({props:{width:"16px",height:"16px",padding:"3px 0 0 0"}}),u=new fb({props:{width:"16px",height:"16px",padding:"3px 0 0 0"}}),f=new fb({props:{width:"16px",height:"16px",padding:"3px 0 0 0"}}),{c(){t=Zg("div"),n=Zg("div"),n.textContent=`${chrome.i18n.getMessage("ui_zendesk_modal_welcome")}`,o=Jg(),r=Zg("div"),i=Zg("div"),nf(s.$$.fragment),a=Jg(),l=Zg("div"),c=Jg(),d=Zg("div"),nf(u.$$.fragment),p=Jg(),m=Zg("div"),g=Jg(),h=Zg("div"),nf(f.$$.fragment),_=Jg(),v=Zg("div"),rh(n,"class","welcome svelte-csh6q0"),rh(l,"class","copy-text svelte-csh6q0"),rh(i,"class","copy svelte-csh6q0"),rh(m,"class","copy-text svelte-csh6q0"),rh(d,"class","copy svelte-csh6q0"),rh(v,"class","copy-text svelte-csh6q0"),rh(h,"class","copy svelte-csh6q0"),rh(r,"class","body svelte-csh6q0"),rh(t,"class","modal-section onboarding svelte-csh6q0")},m(e,T){Vg(e,t,T),jg(t,n),jg(t,o),jg(t,r),jg(r,i),of(s,i,null),jg(i,a),jg(i,l),l.innerHTML=w,jg(r,c),jg(r,d),of(u,d,null),jg(d,p),jg(d,m),m.innerHTML=b,jg(r,g),jg(r,h),of(f,h,null),jg(h,_),jg(h,v),v.innerHTML=E,y=!0},p:wg,i(e){y||(Yh(s.$$.fragment,e),Yh(u.$$.fragment,e),Yh(f.$$.fragment,e),y=!0)},o(e){Kh(s.$$.fragment,e),Kh(u.$$.fragment,e),Kh(f.$$.fragment,e),y=!1},d(e){e&&Yg(t),rf(s),rf(u),rf(f)}}}function sE(e){let t,n,o;return n=new Jb({props:{limitReached:!1,remainingTranslations:e[6],settings:e[2]}}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","modal-section svelte-csh6q0")},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p(e,t){const o={};64&t&&(o.remainingTranslations=e[6]),4&t&&(o.settings=e[2]),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function aE(e){let t,n,o,r,i,s,a,l,c,d,u;function p(e,t){return 36&t&&(n=null),36&t&&(o=null),36&t&&(r=null),null==n&&(n=!(!nt(e[2],be.TRANSLATOR)||e[5])),n?uE:(null==o&&(o=!(!nt(e[2],be.TRANSLATOR)||!e[5])),o?dE:(null==r&&(r=!(!st(e[2],be.TRANSLATOR)||e[5])),r?cE:e[5]?lE:void 0))}let m=p(e,-1),g=m&&m(e);function h(e,t){return 4&t&&(a=null),null==a&&(a=!!nt(e[2],be.TRANSLATOR)),a?mE:pE}let f=h(e,-1),_=f(e),v=ef(qf(chrome.i18n.getMessage("zendesk_try_pro_log_in_link"),["loginLink"])),y=[];for(let t=0;t<v.length;t+=1)y[t]=fE(eE(e,v,t));return{c(){t=Zg("div"),g&&g.c(),i=Jg(),s=Zg("button"),_.c(),l=Jg(),c=Zg("div");for(let e=0;e<y.length;e+=1)y[e].c();rh(s,"class","upgrade-button svelte-csh6q0"),rh(c,"class","login-text svelte-csh6q0"),rh(t,"class","modal-section upgrade-button-container svelte-csh6q0")},m(n,o){Vg(n,t,o),g&&g.m(t,null),jg(t,i),jg(t,s),_.m(s,null),jg(t,l),jg(t,c);for(let e=0;e<y.length;e+=1)y[e]&&y[e].m(c,null);d||(u=th(s,"click",e[10]),d=!0)},p(e,n){if(m===(m=p(e,n))&&g?g.p(e,n):(g&&g.d(1),g=m&&m(e),g&&(g.c(),g.m(t,i))),f===(f=h(e,n))&&_?_.p(e,n):(_.d(1),_=f(e),_&&(_.c(),_.m(s,null))),512&n){let t;for(v=ef(qf(chrome.i18n.getMessage("zendesk_try_pro_log_in_link"),["loginLink"])),t=0;t<v.length;t+=1){const o=eE(e,v,t);y[t]?y[t].p(o,n):(y[t]=fE(o),y[t].c(),y[t].m(c,null))}for(;t<y.length;t+=1)y[t].d(1);y.length=v.length}},d(e){e&&Yg(t),g&&g.d(),_.d(),Kg(y,e),d=!1,u()}}}function lE(e){let t,n=chrome.i18n.getMessage("zendesk_limit_reached_content")+"";return{c(){t=Zg("span"),rh(t,"class","svelte-csh6q0")},m(e,o){Vg(e,t,o),t.innerHTML=n},p:wg,d(e){e&&Yg(t)}}}function cE(e){let t,n=chrome.i18n.getMessage("zendesk_limit_not_reached_free_account_content")+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function dE(e){let t,n,o=chrome.i18n.getMessage("zendesk_limit_reached_pro_user_content")+"";return{c(){t=new mh(!1),n=eh(),t.a=n},m(e,r){t.m(o,e,r),Vg(e,n,r)},p:wg,d(e){e&&(Yg(n),t.d())}}}function uE(e){let t,n=chrome.i18n.getMessage("zendesk_limit_not_reached_pro_user_content")+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function pE(e){let t,n=chrome.i18n.getMessage("zendesk_try_pro_advanced_button")+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function mE(e){let t,n=chrome.i18n.getMessage("zendesk_upgrade_cta")+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function gE(e){let t,n,o=e[17].text+"";return{c(){t=new mh(!1),n=eh(),t.a=n},m(e,r){t.m(o,e,r),Vg(e,n,r)},p:wg,d(e){e&&(Yg(n),t.d())}}}function hE(e){let t,n,o,r=e[17].text+"";return{c(){t=Zg("span"),rh(t,"class","upgrade-link svelte-csh6q0")},m(i,s){Vg(i,t,s),t.innerHTML=r,n||(o=th(t,"click",e[9]),n=!0)},p:wg,d(e){e&&Yg(t),n=!1,o()}}}function fE(e){let t;let n=function(e,t){return"loginLink"===e[17].block?hE:gE}(e),o=n(e);return{c(){o.c(),t=eh()},m(e,n){o.m(e,n),Vg(e,t,n)},p(e,t){o.p(e,t)},d(e){e&&Yg(t),o.d(e)}}}function _E(e){let t,n,o,r,i,s,a;return{c(){t=Zg("div"),n=Zg("div"),n.textContent=`${chrome.i18n.getMessage("zendesk_popup_on_off_label")}`,o=Jg(),r=Zg("div"),i=Zg("span"),i.innerHTML='<span class="svelte-csh6q0"></span>',rh(n,"class","text svelte-csh6q0"),rh(i,"class","on-off-switch svelte-csh6q0"),uh(i,"on",e[2].isZendeskEnabled),rh(r,"class","switch"),rh(t,"class","modal-section switch-container svelte-csh6q0")},m(l,c){Vg(l,t,c),jg(t,n),jg(t,o),jg(t,r),jg(r,i),s||(a=th(i,"click",e[8]),s=!0)},p(e,t){4&t&&uh(i,"on",e[2].isZendeskEnabled)},d(e){e&&Yg(t),s=!1,a()}}}function vE(e){let t,n,o,r,i,s,a=e[3]&&tE(e);return{c(){t=Zg("div"),n=Zg("button"),o=Jg(),a&&a.c(),rh(n,"class","dl-zendesk-top-icon svelte-csh6q0"),rh(t,"dir",jt())},m(l,c){Vg(l,t,c),jg(t,n),jg(t,o),a&&a.m(t,null),r=!0,i||(s=[th(n,"click",e[12]),Dg(__.call(null,t,{isShadow:!0})),th(t,"click_outside",e[7])],i=!0)},p(e,[n]){e[3]?a?(a.p(e,n),8&n&&Yh(a,1)):(a=tE(e),a.c(),Yh(a,1),a.m(t,null)):a&&(qh(),Kh(a,1,1,(()=>{a=null})),Vh())},i(e){r||(Yh(a),r=!0)},o(e){Kh(a),r=!1},d(e){e&&Yg(t),a&&a.d(),i=!1,Sg(s)}}}function yE(e,n,o){let r;kg(e,df,(e=>o(2,r=e))),xh("text_direction",jt());let i,{controller:s}=n,a=!1,l="default",c=!1,d=!1;const u=()=>{c?o(4,l="user_has_reached_limit"):r.isZendeskOnboarded?(o(3,a=!1),o(4,l="default")):(o(4,l="onboarding"),Og(df,r.isZendeskOnboarded=!0,r),t({action:"dlTrackOnboardingModalShown",payload:{nicheIntegration:re.zendesk}}),o(3,a=!0))},p=()=>{"onboarding"===l&&(Og(df,r.isZendeskOnboarded=!0,r),o(4,l="default")),"welcome"===l&&o(4,l="default"),o(3,a=!1)};Eh((()=>{u(),r.isZendeskEnabled&&r.zendeskActiveTermbase&&(async()=>{if(!r.zendeskActiveTermbase)return;let e=[];try{const[t]=await jU();e=t}catch(e){pn()&&console.error(e)}if(!e||0===e.length)return void Og(df,r.zendeskActiveTermbase=null,r);const t=e.map((e=>e.id));if(r.zendeskActiveTermbase&&t.includes(r.zendeskActiveTermbase.id)){const t=e.find((e=>e.id===r.zendeskActiveTermbase.id));Og(df,r.zendeskActiveTermbase=t,r)}else Og(df,r.zendeskActiveTermbase=null,r)})()}));return e.$$set=e=>{"controller"in e&&o(0,s=e.controller)},e.$$.update=()=>{4&e.$$.dirty&&o(1,d=r?.featureSet?.customizations?.includes("zendesk")),4&e.$$.dirty&&o(6,i=we-r.zendeskSuccessfulTranslations),6&e.$$.dirty&&(r.zendeskSuccessfulTranslations>=we&&!d?(o(5,c=!0),u()):(o(5,c=!1),u())),2&e.$$.dirty&&d&&(o(5,c=!1),o(4,l="default"))},[s,d,r,a,l,c,i,p,()=>{Og(df,r.isZendeskEnabled=!r.isZendeskEnabled,r)},()=>{t({action:"dlRequestLogin"})},function(){t({action:"dlTrackUILocationClicked",payload:B.zendeskTryProLink}),t({action:"dlExternalURLRedirect",payload:{destination:fv,utmContent:"zendesk_customization"}})},u,()=>{a?p():o(3,a=!0)},e=>{Og(df,r.selectedTargetLanguage=e.detail.selectedOption.value,r),XE(s)},()=>{r.isZendeskEnabled&&p()}]}class wE extends af{constructor(e){super(),sf(this,e,yE,vE,$g,{controller:0,updateIconSettings:11})}get updateIconSettings(){return this.$$.ctx[11]}}class bE{static HTML_TAG_NAME="deepl-zendesk-top-icon";static createElement=(e=document)=>{const t=e.createElement(bE.HTML_TAG_NAME),n=new bE(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.triggerUpdateIconSettings=n.triggerUpdateIconSettings,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=({controller:e})=>{this.domElement.mainComponent=new wE({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM,controller:e}})};triggerUpdateIconSettings=()=>{this.domElement.mainComponent.updateIconSettings()};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}const EE=[...ll].filter((e=>!["BrowserApiErrors","TryCatch","Breadcrumbs","GlobalHandlers"].includes(e.name))),TE=()=>{const e=new xa({...gf,transport:Ca,stackParser:Oa,integrations:EE}),t=new $i;return t.setClient(e),t.setContext("appContext",{location:"content"}),(e=>{chrome.storage.sync.get(["installationId","session","isLoggedIn","translatorServiceType","writeServiceType"],(function(t){e.setTag("internal_session_id",t?.session?.id),e.setTag("is_translator_pro",nt(t,be.TRANSLATOR)),e.setTag("is_write_pro",nt(t,be.WRITE)),e.setTag("is_logged_in",t.isLoggedIn)})),chrome.storage.local.get("browserInstanceId",(function(t){e.setTag("browser_instance_id",t.browserInstanceId)})),chrome.storage.onChanged.addListener((t=>(t?.session?.newValue&&e.setTag("internal_session_id",t.session.newValue.id),t?.installationId&&e.setUser({id:t.installationId}),t?.browser_instance_id&&e.setTag("browser_instance_id",df.browserInstanceId.newValue),!0!==t.isLoggedIn?.newValue&&!1!==t.isLoggedIn?.newValue||e.setTag("is_logged_in",t.isLoggedIn.newValue),t.translatorServiceType&&chrome.storage.sync.get(["isLoggedIn"],e.setTag("is_translator_pro",nt({...df,translatorServiceType:t.translatorServiceType.newValue},be.TRANSLATOR))),t.writeServiceType&&chrome.storage.sync.get(["isLoggedIn"],e.setTag("is_write_pro",nt({...df,writeServiceType:t.writeServiceType.newValue},be.WRITE))),!0)))})(t),{client:e,scope:t}},{scope:SE}=TE(),xE=()=>{const e=window.location.hostname.split(".");if(e.length<2)return!1;return"zendesk.com"===`${e[e.length-2]}.${e[e.length-1]}`},$E=()=>document.querySelector("deepl-zendesk-controller"),CE=()=>Bf.createElement(),kE=e=>{const t=e.match(/^\/agent\/tickets\/(\d+)$/);if(t)return t[1]},LE=()=>{const e=document.querySelector("#main_panes");if(e)return Array.from(e.children).find((e=>"hidden"!==window.getComputedStyle(e).visibility&&"none"!==window.getComputedStyle(e).display))},IE=e=>e.querySelector("deepl-zendesk-ticket-controller"),AE=(e,t)=>{const n=mw.createElement();return e.appendChild(n),n.createDOM({pane:e,ticketId:t}),n},RE=(e,t)=>{try{const n=e.getPane();if(n.querySelector("deepl-zendesk-top-icon")||DE(n,e),!t)return;e.getTicketLanguageInformation().isSupported?(n.querySelector("deepl-zendesk-toolbar")||PE(n,e),n.querySelector("deepl-zendesk-input-icon")||UE(n,e)):n.querySelector("deepl-zendesk-toolbar")||PE(n,e)}catch(e){pn()&&console.error(e),hf(e,SE)}},ME=()=>{OE(["deepl-zendesk-ticket-controller","deepl-zendesk-top-icon","deepl-zendesk-toolbar","deepl-zendesk-input-icon","deepl-zendesk-message-controller","deepl-zendesk-submit-button-tooltip","deepl-zendesk-onboarding-modal"])},NE=()=>{OE(["deepl-zendesk-toolbar","deepl-zendesk-input-icon","deepl-zendesk-message-controller","deepl-zendesk-onboarding-modal"]);const e=Array.from(document.getElementsByTagName("deepl-zendesk-ticket-controller"));for(const t of e)t.setIsAutoTranslateEnabled(!1)},OE=e=>{try{for(const t of e)if(t){const e=Array.from(document.getElementsByTagName(t));for(const t of e)t.cleanupDOM(),t.remove()}}catch(e){pn()&&console.error(e),hf(e,SE)}},DE=(e,t)=>{const n=bE.createElement(),o=e.querySelector('[data-test-id="omni-header-filter-trigger"],[data-test-id="omni-header-ticket-actions-trigger"]');if(!o)return;const r=o.parentElement;return r?(r.prepend(n),n.createDOM({controller:t}),n):void 0},PE=(e,t)=>{const n=xw.createElement(),o=e.querySelector('[data-test-id="ticket-call-controls-action-bar"]');if(o)return o.after(n),n.createDOM({controller:t}),n.updateLanguageInformation(t.getTicketLanguageInformation()),n},UE=(e,t)=>{const n=Vy.createElement(),o=e.querySelector('div[data-test-id="omnichannel-composer-toolbar"] ul'),r=e.querySelector('div[data-test-id="ticket-rich-text-editor"] [contenteditable="true"]');if(r&&o&&o)return o.append(n),n.createDOM({controller:t,editable:r}),n},BE=e=>{const t=e.querySelector('div[data-test-id="omnichannel-composer-toolbar"] ul[data-test-id="ticket-editor-app-icon-view"][data-cy="ticket-editor-app-icon-view"]'),n=e.querySelector('div[data-test-id="omnichannel-composer-toolbar"] ul');return t?ve:n?ye:void 0},WE=e=>Array.from(e.querySelectorAll('article[data-test-id="omni-log-comment-item"]')),zE=e=>{const t=WE(e);if(!(t.length<1))return t.sort(((e,t)=>{const n=e?.querySelector('time[data-test-id="timestamp-relative"]')?.getAttribute("datetime"),o=t?.querySelector('time[data-test-id="timestamp-relative"]')?.getAttribute("datetime");return n===o?0:new Date(n)<Date(o)?-1:1})),t[0]},FE=(e,t)=>{const n=WE(e);if(n.length<1)return;n.sort(((e,t)=>{const n=e?.querySelector('time[data-test-id="timestamp-relative"]')?.getAttribute("datetime"),o=t?.querySelector('time[data-test-id="timestamp-relative"]')?.getAttribute("datetime");return n===o?0:new Date(n)<Date(o)?-1:1}));const o=[];for(let e=0;e<t;e++)n[e]&&o.push(n[e]);return o},HE=e=>e.querySelector('[data-test-id="omni-log-item-message"]'),jE=(e,t)=>{const n=e.querySelector("deepl-zendesk-toolbar");return!!n&&(n.updateLanguageInformation(t),!0)},GE=(e,{isEnabled:t})=>{const n=e.querySelector("deepl-zendesk-toolbar");return!!n&&(n.updateAutoTranslateStatus(t),!0)},qE=e=>{const t=e.querySelector("deepl-zendesk-top-icon");return!!t&&(t.triggerUpdateIconSettings(),!0)},VE=(e,t)=>{const n=e.querySelector("deepl-zendesk-input-icon");return!!n&&(n.updateTargetLanguage(t),!0)},YE=e=>{try{const t=e.getPane(),n=WE(t);for(const t of n)KE(t)||ZE(t,e)}catch(e){pn()&&console.error(e),hf(e,SE)}},KE=e=>e.querySelector("deepl-zendesk-message-controller"),ZE=(e,t)=>{const n=rw.createElement(),o=HE(e);if(!o||!o.parentNode||!o.parentNode.parentNode)return;return o.parentNode.parentNode.after(n),n.createDOM({controller:t,message:e}),n},XE=e=>{const t=Array.from(e.getPane().querySelectorAll("deepl-zendesk-message-controller"));for(const e of t)e.triggerTranslateAgain()},QE=e=>{const t=Array.from(e.querySelectorAll("iframe"));for(const e of t)e.contentWindow.postMessage("dl-zendesk-welcome-screen","*")},JE=e=>{const t=e.querySelector("deepl-zendesk-input-icon");return!!t&&t.getInputHasSelection()},eT=e=>{const t=e.getPane().querySelector('[data-test-id="submit_button-button"]'),n=t.closest('[data-garden-id="buttons.button_group_view"]'),o=t.getBoundingClientRect(),r=n.getBoundingClientRect(),i=cw.createElement();return i.createDOM({controller:e,coords:o,containerCoords:r}),n.prepend(i),i},tT=e=>{const t=e.querySelector('[data-test-id="conversation-translator-language-detection-prompt"]');t&&t.remove()},nT=async e=>{const t={},n=oT(e);if(!n||0===n.length)return null;await Promise.all(n.map((async e=>{const n=await Ut(e);n in t?t[n]+=e.length:t[n]=e.length})));const o=Object.entries(t).sort(((e,t)=>t[1]-e[1]));if(!o||!o.length)return null;const[r]=o[0];return r},oT=e=>{let t=[];return e.hasChildNodes()&&e.childNodes.forEach((e=>{if(e.nodeType===Node.ELEMENT_NODE)t.push(...oT(e));else if(e.nodeType===Node.TEXT_NODE){const n=e.textContent.trim();n&&t.push(n)}})),t},rT=()=>{const e=new URL(window.location.href);return"https:"===e.protocol&&"mail.google.com"===e.hostname},iT=e=>e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&["text","search"].includes(e.type),sT=e=>e.selectionStart<e.selectionEnd,aT=async(e,t,n)=>{if(!iT(e))return n||(e=>{h_("mousedown",e);const t=window.getSelection();t.removeAllRanges();const n=new Range;n.setStart(e,0),n.collapse(!1),t.addRange(n),h_("mouseup",e)})(e),await p_(e,t,!0);if(sT(e)||((e,{start:t,end:n})=>{e.selectionStart=t,e.selectionEnd=n})(e,{start:0,end:e.value.length}),!document.execCommand("insertText",!1,t.text)){const n=e.value.substring(0,e.selectionStart)+t.text+e.value.substring(e.selectionEnd);e.value=n}};function lT(e,t){if(!t)return!1;const n=t.getBoundingClientRect();if(iT(e))return function(e,t){const n=function(e){const t=document.createElement("div");document.body.appendChild(t);var n=window.getComputedStyle(e);t.style.whiteSpace="pre-wrap",t.style.wordWrap="break-word",t.style.position="fixed",t.style.overflow="hidden",["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"].forEach((function(e){t.style[e]=n[e]}));const o=e.getBoundingClientRect();return t.style.top=Math.round(o.top)+"px",t.style.left=Math.round(o.left)+"px",t.innerText=e.value,t}(e);let o=!1;try{o=cT(n,t)}catch(e){}return n.remove(),o}(e,n);{const t=Xf(e).getSelection(),o=function(e){return"IFRAME"===e.nodeName.toUpperCase()?e.getBoundingClientRect():{top:0,left:0}}(e);if(t.rangeCount)return cT(Jf(e),n,o)}return!1}function cT(e,t,n={top:0,left:0}){const o=Xf(e).getSelection();for(const s of e.childNodes)if("#text"===s.nodeName.toLowerCase()){const e=o.getRangeAt(0).cloneRange();e.setStart(s,0),e.setEnd(s,s.textContent.length);const a=e.getClientRects();if(!a.length)continue;for(const e of a){const o={left:e.left+n.left,right:e.right+n.left,top:e.top+n.top,bottom:e.bottom+n.top};if(i=t,(r=o).left<=i.right&&r.right>=i.left&&r.top<=i.bottom&&r.bottom>=i.top)return!0}}else if(e.childNodes.length&&cT(s,t,n))return!0;var r,i;return!1}function dT(e,t){const n=t.filter((t=>new RegExp(t).exec(e)));return n&&n.length>0}function uT(e,t){return dT(e,M)||dT(t,N)}function pT(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}function mT(e,t){if(e&&t&&"string"==typeof e&&Array.isArray(t)){if(0===t.length)return e;for(const n of t)e.substr(0,n.length)===n&&(e=e.substr(n.length));return e}}function gT(e){try{return new URL(e),!0}catch(e){return!1}}const hT=e=>{const t={"&":".","<":".",">":".",'"':".","'":".","#":".",";":".","%":".","\\":".","/":"."};return e.replace(/[&<>"'#;%\\/]/g,(function(e){return t[e]}))};function fT(e){const t=e||window.getSelection().getRangeAt(0),n=t.getBoundingClientRect(),o=document.body.parentNode.getBoundingClientRect(),{top:r,left:i,right:s,bottom:a,height:l,width:c}=n,d={x:i-o.left,y:a-o.top,selectedTop:r,selectedBottom:a,selectedRight:o.width-s,selectedLeft:i+window.pageXOffset,selectedWidth:c,height:l};if(t.collapsed){const e=t.commonAncestorContainer;d.x=e.getBoundingClientRect().left,d.y=e.getBoundingClientRect().top+e.offsetHeight}return d}const _T=(e,t)=>{let n={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return n.left>=n.right||n.top>=n.bottom?null:n},vT=e=>{const t=window.getComputedStyle(e),n=t.getPropertyValue("overflow-y"),o=t.getPropertyValue("overflow-x"),r=["hidden","scroll","auto"];return r.includes(n)||r.includes(o)};function yT(e){const t=(e=>{let t=e.getBoundingClientRect(),n={left:t.left,right:t.right,bottom:t.bottom,top:t.top};const o={top:0,left:0,right:0,bottom:0,width:0,height:0},r={top:0,left:0,right:window.innerWidth,bottom:window.innerHeight};for(let t=e.parentElement;null!==t&&t!==e.ownerDocument.body;t=t.parentElement){let e=t.getBoundingClientRect();const r=_T(n,e);if(r)n=r;else if(vT(t))return o}return n=_T(n,r),n?{top:n.top,bottom:n.bottom,left:n.left,right:n.right,width:n.right-n.left,height:n.bottom-n.top}:o})(e),n=e.selectionStart,o=e.selectionEnd,r=document.createElement("div");r.id="mirror",document.body.appendChild(r);const i=window.getComputedStyle(e);r.style.fontFamily=i.fontFamily,r.style.fontSize=i.fontSize,r.style.padding=i.padding,r.style.border=i.border,r.style.lineHeight=i.lineHeight,r.style.whiteSpace="pre-wrap",r.style.wordWrap="break-word",r.style.visibility="hidden",r.style.top=`${t.top+window.scrollY}px`,r.style.bottom=`${t.bottom+window.scrollY}px`,r.style.left=`${t.left}px`,r.style.height=i.height,r.style.width=`${t.width}px`,r.style.position="absolute";const s=hT(e.value.substring(0,n)),a=hT(e.value.substring(n,o)),l=hT(e.value.substring(o)),c=ft(s+'<span id="marker-start" style="position: absolute;">|</span>'+a+'<span id="marker-end" style="position: absolute;">|</span>'+l);r.innerHTML=c;const d=document.getElementById("marker-start"),u=document.getElementById("marker-end"),p=d.getBoundingClientRect(),m=u.getBoundingClientRect(),g=document.body.parentNode.getBoundingClientRect(),h=e.getBoundingClientRect(),f={x:p.left-g.left,y:h.top>0?m.bottom-g.top:m.bottom-g.top+h.top,selectedTop:p.top,selectedBottom:m.bottom,selectedRight:g.width-m.right,selectedLeft:p.left+window.pageXOffset,selectedWidth:m.right-p.right,height:m.bottom-p.top};return document.body.removeChild(r),f}function wT(e){let t=e.childNodes[0];for(let n of Array.from(e.childNodes))if(t.getBoundingClientRect||(t=n),n.getBoundingClientRect&&(n.getBoundingClientRect().right>t.getBoundingClientRect().right&&(t=n),n.hasChildNodes())){const e=wT(n);if(e?.getBoundingClientRect){const o=n.getBoundingClientRect(),r=e.getBoundingClientRect();o.right<r.right&&(t=e)}}return t}const bT=e=>{const t=[],n=[];return ST({domElements:t,strings:n,element:e}),{domElements:t,strings:n}};function ET(e){for(const t of e.childNodes)if("#text"!=t.nodeName&&"#comment"!=t.nodeName){if("block"==window.getComputedStyle(t).display)return!0;if(ET(t))return!0}return!1}const TT=({strings:e,domElements:t})=>{for(const n in t)Array.isArray(e[n])?t[n].innerHTML=ft(e[n].join("")):t[n].innerHTML=ft(e[n])},ST=({domElements:e,strings:t,element:n})=>{if("#text"!=n.nodeName&&"#comment"!=n.nodeName)if(function(e){if(xT(e)||CT(e))return!1;for(const t of e.childNodes)if("#text"==t.nodeName&&""!=t.wholeText.trim()||"font"==t.nodeName)return!0;for(const t of e.childNodes)if(!xT(t)&&(!$T(t)||CT(t)||"inline"!=window.getComputedStyle(t).display||ET(e)))return!1;if(void 0===e.innerText||""==e.innerText.trim())return!1;if(1===e.childNodes.length){const t=e.childNodes[0];return xT(t)}return!0}(n))e.push(n),t.push(ft(n.innerHTML));else for(const o of n.childNodes)ST({domElements:e,strings:t,element:o})};const xT=e=>"#text"==e.nodeName||"#comment"==e.nodeName,$T=e=>ce.includes(e.nodeName.toLowerCase()),CT=e=>le.includes(e.nodeName.toLowerCase());function kT(e){const t=[];for(;null!=e.parentNode;){let n=0,o=0;for(const t of e.parentNode.childNodes)t.nodeName===e.nodeName&&(t===e&&(o=n),n++);e.hasAttribute("id")&&""!=e.id?t.unshift(e.nodeName.toLowerCase()+"#"+e.id):n>1?t.unshift(e.nodeName.toLowerCase()+":nth-child("+(o+1)+")"):t.unshift(e.nodeName.toLowerCase()),e=e.parentNode}return t.slice(1)}function LT(e){let t;return{c(){t=Zg("div"),rh(t,"class","loader svelte-c65fyl"),uh(t,"small",e[0])},m(e,n){Vg(e,t,n)},p(e,[n]){1&n&&uh(t,"small",e[0])},i:wg,o:wg,d(e){e&&Yg(t)}}}function IT(e,t,n){let{small:o=!1}=t;return e.$$set=e=>{"small"in e&&n(0,o=e.small)},[o]}class AT extends af{constructor(e){super(),sf(this,e,IT,LT,$g,{small:0})}}const RT={developer_tools:"DEVELOPER_TOOLS",settings_page:"SETTINGS_PAGE",settings_writing:"SETTINGS_WRITING",settings_reading:"SETTINGS_READING",settings_customizations:"SETTINGS_CUSTOMIZATIONS",settings_glossary:"SETTINGS_GLOSSARY",onboarding:"ONBOARDING",onboarding_after_successful_login:"ONBOARDING_AFTER_SUCCESSFUL_LOGIN",interactive_onboarding:"INTERACTIVE_ONBOARDING",firefox_first_run:"FIREFOX_FIRST_RUN",privacy_policy:"PRIVACY_POLICY",create_account:"CREATE_ACCOUNT"};function MT(e){let t,n,o,r,i,s;return{c(){t=Zg("div"),n=Zg("span"),n.textContent=`${chrome.i18n.getMessage("inline_translation_link_more_settings")}`,o=Jg(),r=Zg("span"),rh(r,"class","icon icon-external-link svelte-1yv621f"),rh(t,"class","settings-link svelte-1yv621f")},m(a,l){Vg(a,t,l),jg(t,n),jg(t,o),jg(t,r),i||(s=th(t,"click",oh(nh(e[0]))),i=!0)},p:wg,i:wg,o:wg,d(e){e&&Yg(t),i=!1,s()}}}function NT(e,n,o){let{page:r=RT.settings_page}=n;return e.$$set=e=>{"page"in e&&o(1,r=e.page)},[function(){t({action:"dlOpenInternalPage",payload:{destination:r}})},r]}class OT extends af{constructor(e){super(),sf(this,e,NT,MT,$g,{page:1})}}function DT(e){let t,n,o;return{c(){t=Zg("button"),rh(t,"type","button"),rh(t,"class","close-icon svelte-nskp1z")},m(r,i){Vg(r,t,i),n||(o=th(t,"click",e[0]),n=!0)},p:wg,i:wg,o:wg,d(e){e&&Yg(t),n=!1,o()}}}function PT(e){return[function(t){Ch.call(this,e,t)}]}class UT extends af{constructor(e){super(),sf(this,e,PT,DT,$g,{})}}function BT(e){let t,n,o,r,i,s,a,l,c,d,u,p,m;return r=new UT({}),r.$on("click",e[2]),c=new mb({props:{value:e[0].selectedTargetLanguage}}),c.$on("selection",e[3]),p=new OT({}),{c(){t=Zg("div"),n=Zg("div"),o=Zg("div"),nf(r.$$.fragment),i=Jg(),s=Zg("div"),a=Zg("p"),a.textContent=`${chrome.i18n.getMessage("whatsapp_web_settings_languageswitch_label")}`,l=Jg(),nf(c.$$.fragment),d=Jg(),u=Zg("div"),nf(p.$$.fragment),rh(o,"class","close-icon-container svelte-8cr9h0"),rh(n,"class","header"),rh(a,"class","label-language-switch svelte-8cr9h0"),rh(s,"class","body svelte-8cr9h0"),rh(u,"class","footer svelte-8cr9h0"),rh(t,"class","container svelte-8cr9h0")},m(e,g){Vg(e,t,g),jg(t,n),jg(n,o),of(r,o,null),jg(t,i),jg(t,s),jg(s,a),jg(s,l),of(c,s,null),jg(t,d),jg(t,u),of(p,u,null),m=!0},p(e,[t]){const n={};1&t&&(n.value=e[0].selectedTargetLanguage),c.$set(n)},i(e){m||(Yh(r.$$.fragment,e),Yh(c.$$.fragment,e),Yh(p.$$.fragment,e),m=!0)},o(e){Kh(r.$$.fragment,e),Kh(c.$$.fragment,e),Kh(p.$$.fragment,e),m=!1},d(e){e&&Yg(t),rf(r),rf(c),rf(p)}}}function WT(e,t,n){let o;const r=$h("deepl_settings");kg(e,r,(e=>n(0,o=e)));const i=Sh();return[o,r,function(){i("close")},e=>r.set({selectedTargetLanguage:e.detail.selectedOption.value,isTargetLanguageConfirmed:!0,regionalVariant:e.detail.selectedOption.regionalVariant||""})]}class zT extends af{constructor(e){super(),sf(this,e,WT,BT,$g,{})}}function FT(e){return/\bdark\b/gm.test(e)}const HT=function(){let e={isDarkMode:FT(document.body.className)};const{subscribe:t,update:n}=cf(e);let o=new MutationObserver((e=>{e.forEach((e=>{"attributes"===e.type&&"class"===e.attributeName&&n((e=>({...e,isDarkMode:FT(document.body.className)})))}))}));return o.observe(document.body,{attributes:!0}),setTimeout((()=>{v_((()=>{o.disconnect()}))})),{subscribe:t}}();function jT(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g;const h=[qT,GT],f=[];function _(e,t){return e[2]?0:1}return n=_(e),o=f[n]=h[n](e),{c(){t=Zg("div"),o.c(),r=Jg(),i=Zg("div"),i.textContent=`${chrome.i18n.getMessage("whatsapp_web_show_alternatives_link")}`,s=Jg(),a=Zg("button"),l=Xg("svg"),c=Xg("path"),rh(i,"class","show-alternatives svelte-3k7vbu"),uh(i,"dark",e[6]),rh(c,"d","M3 9L9 3M3 3L9 9"),rh(c,"stroke",d=e[3]&&e[3].isDarkMode?"#F2F4F7":"#037171"),rh(c,"stroke-width","1.5"),rh(c,"stroke-linecap","round"),rh(c,"stroke-linejoin","round"),rh(l,"width","12"),rh(l,"height","12"),rh(l,"viewBox","0 0 12 12"),rh(l,"fill","none"),rh(l,"xmlns","http://www.w3.org/2000/svg"),rh(a,"class","svelte-3k7vbu"),rh(t,"class","container svelte-3k7vbu"),rh(t,"dir",jt()),uh(t,"dark",e[6])},m(o,d){Vg(o,t,d),f[n].m(t,null),jg(t,r),jg(t,i),jg(t,s),jg(t,a),jg(a,l),jg(l,c),p=!0,m||(g=[th(i,"click",e[7]),th(a,"click",(function(){xg(e[1])&&e[1].apply(this,arguments)}))],m=!0)},p(s,a){let l=n;n=_(e=s),n===l?f[n].p(e,a):(qh(),Kh(f[l],1,1,(()=>{f[l]=null})),Vh(),o=f[n],o?o.p(e,a):(o=f[n]=h[n](e),o.c()),Yh(o,1),o.m(t,r)),(!p||64&a)&&uh(i,"dark",e[6]),(!p||8&a&&d!==(d=e[3]&&e[3].isDarkMode?"#F2F4F7":"#037171"))&&rh(c,"stroke",d),(!p||64&a)&&uh(t,"dark",e[6])},i(e){p||(Yh(o),u||Oh((()=>{u=Xh(t,Ff,{y:-10,duration:200}),u.start()})),p=!0)},o(e){Kh(o),p=!1},d(e){e&&Yg(t),f[n].d(),m=!1,Sg(g)}}}function GT(e){let t,n,o,r;return{c(){t=Zg("div"),n=Zg("span"),o=Qg(e[0]),rh(n,"class","translatedText svelte-3k7vbu"),rh(t,"dir",r=jt(e[5]))},m(e,r){Vg(e,t,r),jg(t,n),jg(n,o)},p(e,n){1&n&&ih(o,e[0]),32&n&&r!==(r=jt(e[5]))&&rh(t,"dir",r)},i:wg,o:wg,d(e){e&&Yg(t)}}}function qT(e){let t,n;return t=new Wy({props:{error:e[2]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.error=e[2]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function VT(e){let t,n,o=e[4]&&jT(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,[n]){e[4]?o?(o.p(e,n),16&n&&Yh(o,1)):(o=jT(e),o.c(),Yh(o,1),o.m(t.parentNode,t)):o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh())},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function YT(e,n,o){let r,i,s;kg(e,df,(e=>o(9,i=e))),kg(e,HT,(e=>o(3,s=e))),xh("text_direction",jt());let a,l,{translatedText:c}=n,{sourceText:d}=n,{onClose:u}=n,{error:p}=n,m=!1;return setTimeout((()=>o(4,m=!0)),50),e.$$set=e=>{"translatedText"in e&&o(0,c=e.translatedText),"sourceText"in e&&o(8,d=e.sourceText),"onClose"in e&&o(1,u=e.onClose),"error"in e&&o(2,p=e.error)},e.$$.update=()=>{8&e.$$.dirty&&o(6,r=s&&s.isDarkMode),256&e.$$.dirty&&Ut(d).then((e=>{a=e})),512&e.$$.dirty&&o(5,l=i.selectedTargetLanguage)},[c,u,p,s,m,l,r,function(){t({action:"dlExternalURLRedirect",payload:{destination:vv,sourceLang:a,targetLang:l,textToShare:d}})},d,i]}class KT extends af{constructor(e){super(),sf(this,e,YT,VT,$g,{translatedText:0,sourceText:8,onClose:1,error:2})}}class ZT{static HTML_TAG_NAME="deepl-whatsapp-translated-message";static createElement=(e=document)=>{const t=e.createElement(ZT.HTML_TAG_NAME),n=new ZT(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=(e,t,n,o)=>{this.domElement.mainComponent=new KT({target:this.domElement.shadowContainer,props:{translatedText:e,onClose:n,sourceText:t,error:o}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function XT(e){let t,n,o,r,i,s,a,l;const c=[JT,QT],d=[];function u(e,t){return e[5]?0:1}n=u(e),o=d[n]=c[n](e);let p=e[7]&&oS(e);return{c(){t=Zg("div"),o.c(),r=Jg(),p&&p.c(),rh(t,"class","container svelte-tz0fan"),rh(t,"style",i=`\n    top: ${e[6]}px; \n    left: ${e[12]}px; \n    z-index: ${e[14]}; \n    opacity: ${e[11]};`),rh(t,"dir",jt()),uh(t,"isTranslated",e[4]),uh(t,"isHidden",e[1]),uh(t,"messageHasReactionIcon",e[8]),uh(t,"isExpanded",e[2]),uh(t,"isParentRTL",e[0])},m(o,i){Vg(o,t,i),d[n].m(t,null),jg(t,r),p&&p.m(t,null),e[26](t),s=!0,a||(l=[th(t,"mouseleave",e[27]),Dg(__.call(null,t,{isShadow:!0})),th(t,"click_outside",e[16]),th(t,"mousedown",oh(nh(e[21])))],a=!0)},p(e,a){let l=n;n=u(e),n===l?d[n].p(e,a):(qh(),Kh(d[l],1,1,(()=>{d[l]=null})),Vh(),o=d[n],o?o.p(e,a):(o=d[n]=c[n](e),o.c()),Yh(o,1),o.m(t,r)),e[7]?p?(p.p(e,a),128&a&&Yh(p,1)):(p=oS(e),p.c(),Yh(p,1),p.m(t,null)):p&&(qh(),Kh(p,1,1,(()=>{p=null})),Vh()),(!s||6208&a&&i!==(i=`\n    top: ${e[6]}px; \n    left: ${e[12]}px; \n    z-index: ${e[14]}; \n    opacity: ${e[11]};`))&&rh(t,"style",i),(!s||16&a)&&uh(t,"isTranslated",e[4]),(!s||2&a)&&uh(t,"isHidden",e[1]),(!s||256&a)&&uh(t,"messageHasReactionIcon",e[8]),(!s||4&a)&&uh(t,"isExpanded",e[2]),(!s||1&a)&&uh(t,"isParentRTL",e[0])},i(e){s||(Yh(o),Yh(p),s=!0)},o(e){Kh(o),Kh(p),s=!1},d(o){o&&Yg(t),d[n].d(),p&&p.d(),e[26](null),a=!1,Sg(l)}}}function QT(e){let t,n,o,r;t=new T_({props:{tooltip:chrome.i18n.getMessage("whatsapp_web_tooltip_translate_button"),multiline:!0,zIndex:"0",parentIsRTL:e[0],ignoreTextDirection:!0,$$slots:{default:[eS]},$$scope:{ctx:e}}});let i=e[2]&&tS(e);return{c(){nf(t.$$.fragment),n=Jg(),i&&i.c(),o=eh()},m(e,s){of(t,e,s),Vg(e,n,s),i&&i.m(e,s),Vg(e,o,s),r=!0},p(e,n){const r={};1&n&&(r.parentIsRTL=e[0]),1073741828&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r),e[2]?i?(i.p(e,n),4&n&&Yh(i,1)):(i=tS(e),i.c(),Yh(i,1),i.m(o.parentNode,o)):i&&(qh(),Kh(i,1,1,(()=>{i=null})),Vh())},i(e){r||(Yh(t.$$.fragment,e),Yh(i),r=!0)},o(e){Kh(t.$$.fragment,e),Kh(i),r=!1},d(e){e&&(Yg(n),Yg(o)),rf(t,e),i&&i.d(e)}}}function JT(e){let t,n;return t=new AT({props:{small:!0}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p:wg,i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function eS(e){let t,n,o;return{c(){t=Zg("div"),t.innerHTML='<svg width="15" height="15" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-tz0fan"><g clip-path="url(#clip0)"><path d="M1.85295 4.86015V12.4035C1.85295 12.7953 2.05334 13.1545 2.38029 13.3504L8.70832 17.1167C8.72427 17.1262 8.7404 17.1353 8.75668 17.1439L11.8727 19L11.8621 17.3672L11.8685 16.4605L11.8717 16.4747V16.1699C11.8717 15.9893 11.9613 15.8272 12.0993 15.7262L12.3015 15.6059L12.3991 15.5494L12.394 15.5508L16.091 13.3504C16.418 13.1545 16.6184 12.7953 16.6184 12.4035V4.86015C16.6184 4.46829 16.418 4.10909 16.091 3.91316L9.76299 0.146947C9.43604 -0.0489825 9.03527 -0.0489825 8.70832 0.146947L2.38029 3.92404C2.05334 4.11997 1.85295 4.47918 1.85295 4.86015Z" fill="#0F2B46"></path><path d="M6.68257 5.19787C7.10444 4.77336 7.77943 4.77336 8.2013 5.19787C8.50446 5.49621 8.60497 5.92588 8.50281 6.3113L11.4143 8.05411C11.4193 8.04902 11.4243 8.04396 11.4294 8.03894C11.8513 7.61442 12.5263 7.61442 12.9481 8.03894C13.4017 8.48522 13.4017 9.2254 12.9481 9.67168C12.5263 10.0962 11.8513 10.0962 11.4294 9.67168C11.111 9.35838 11.0162 8.90024 11.1448 8.50062L11.1341 8.50683L8.24372 6.78659C8.23005 6.80156 8.21591 6.81624 8.2013 6.83062C7.77943 7.25514 7.10444 7.25514 6.68257 6.83062C6.22906 6.38434 6.22906 5.64416 6.68257 5.19787Z" fill="white"></path><path d="M8.50819 11.5811L11.3455 9.88917L10.8182 9.58439L8.2574 11.1016C8.23971 11.0816 8.2212 11.062 8.20187 11.043C7.78 10.6185 7.10501 10.6185 6.68314 11.043C6.22963 11.4893 6.22963 12.2295 6.68314 12.6757C7.10501 13.1003 7.78 13.1003 8.20187 12.6757C8.50012 12.3822 8.60222 11.9616 8.50819 11.5811Z" fill="white"></path></g><defs><clipPath id="clip0"><rect width="18.5294" height="19" fill="white" transform="matrix(-1 0 0 1 18.5294 0)"></rect></clipPath></defs></svg>',rh(t,"class","translateTrigger svelte-tz0fan")},m(r,i){Vg(r,t,i),n||(o=[th(t,"mouseover",e[23]),th(t,"click",e[15])],n=!0)},p:wg,d(e){e&&Yg(t),n=!1,Sg(o)}}}function tS(e){let t,n;return t=new T_({props:{tooltip:chrome.i18n.getMessage("whatsapp_web_tooltip_settings_button"),multiline:!0,zIndex:"0",$$slots:{default:[nS]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};1073741952&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function nS(e){let t,n,o,r;return{c(){t=Zg("div"),t.innerHTML='<svg width="15" height="15" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-tz0fan"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.11001 16.2439H10.71L11.025 14.0488C11.565 13.8732 12.015 13.6098 12.465 13.2585L14.58 14.0488L16.38 10.9756L14.625 9.57073C14.67 9.30732 14.67 9.0439 14.67 8.78049C14.67 8.51707 14.67 8.25366 14.625 7.99024L16.38 6.58537L14.58 3.5122L12.465 4.30244C12.015 3.99512 11.52 3.73171 11.025 3.5122L10.665 1.31707H7.06501L6.70501 3.5122C6.16501 3.68781 5.71501 3.95122 5.26501 4.30244L3.15001 3.5122L1.35001 6.58537L3.10501 7.99024C3.06001 8.25366 3.06001 8.51707 3.06001 8.78049C3.06001 9.0439 3.06001 9.30732 3.10501 9.57073L1.35001 10.9756L3.15001 14.0488L5.31001 13.2585C5.76001 13.5659 6.25501 13.8293 6.75001 14.0488L7.11001 16.2439ZM9.94501 15.3659H7.83001L7.51501 13.3463L7.24501 13.2585C6.66001 13.0829 6.12001 12.7756 5.67001 12.3805L5.44501 12.2049L3.55501 12.9073L2.52001 11.1512L4.09501 9.87805L4.05001 9.61463C4.00501 9.30732 3.96001 9 3.96001 8.73659C3.96001 8.47317 4.00501 8.16585 4.05001 7.85854L4.09501 7.63902L2.52001 6.36585L3.55501 4.60976L5.44501 5.3122L5.67001 5.09268C6.12001 4.69756 6.66001 4.43415 7.24501 4.21463L7.51501 4.12683L7.83001 2.19512H9.94501L10.26 4.21463L10.53 4.30244C11.115 4.47805 11.655 4.78537 12.105 5.18049L12.285 5.3561L14.175 4.65366L15.21 6.40976L13.635 7.68293L13.68 7.94634C13.725 8.25366 13.77 8.56098 13.77 8.82439C13.77 9.08781 13.725 9.39512 13.68 9.70244L13.635 9.96585L15.21 11.239L14.175 12.9951L12.285 12.2927L12.105 12.4683C11.655 12.8634 11.115 13.1268 10.53 13.3463L10.26 13.4341L9.94501 15.3659ZM6.03018 8.78047C6.03018 10.3171 7.29018 11.5463 8.86518 11.5463C10.4402 11.5463 11.7002 10.3171 11.7002 8.78047C11.7002 7.24388 10.4402 6.01461 8.86518 6.01461C7.29018 6.01461 6.03018 7.24388 6.03018 8.78047ZM6.93018 8.78047C6.93018 7.72681 7.78518 6.89266 8.86518 6.89266C9.94518 6.89266 10.8002 7.72681 10.8002 8.78047C10.8002 9.83413 9.94518 10.6683 8.86518 10.6683C7.78518 10.6683 6.93018 9.83413 6.93018 8.78047Z" fill="#0F2B46"></path></svg>',rh(t,"class","settingsTrigger svelte-tz0fan")},m(n,i){Vg(n,t,i),o||(r=[th(t,"click",e[24]),th(t,"mousedown",oh(nh(e[22])))],o=!0)},p:wg,i(e){n||Oh((()=>{n=Xh(t,Ff,{x:-8,duration:600}),n.start()}))},o:wg,d(e){e&&Yg(t),o=!1,Sg(r)}}}function oS(e){let t,n,o,r,i;return n=new zT({}),n.$on("close",e[25]),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","settingsContainer svelte-tz0fan"),uh(t,"isTop",!e[9]),uh(t,"isLeft",!e[10])},m(e,o){Vg(e,t,o),of(n,t,null),i=!0},p(e,n){(!i||512&n)&&uh(t,"isTop",!e[9]),(!i||1024&n)&&uh(t,"isLeft",!e[10])},i(e){i||(Yh(n.$$.fragment,e),Oh((()=>{i&&(r&&r.end(1),o=Xh(t,Ff,{y:-10,duration:600}),o.start())})),i=!0)},o(e){Kh(n.$$.fragment,e),o&&o.invalidate(),r=Qh(t,Ff,{y:-10,duration:600}),i=!1},d(e){e&&Yg(t),rf(n),e&&r&&r.end()}}}function rS(e){let t,n,o=e[13]&&e[13].isWhatsAppWebEnabled&&XT(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,[n]){e[13]&&e[13].isWhatsAppWebEnabled?o?(o.p(e,n),8192&n&&Yh(o,1)):(o=XT(e),o.c(),Yh(o,1),o.m(t.parentNode,t)):o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh())},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function iS(e,n,o){let r;kg(e,df,(e=>o(13,r=e))),xh("deepl_settings",df),xh("deepl_website_settings",Rw),xh("text_direction",jt());let{textElement:i}=n,{messageContainer:s}=n,a=!1;const l=265,c=150,d=220;let u,p,m,g,h=!1,f=!0,_=0,v=0,y=!1,w=!1,b=!1,E=D.deepl_inline_ui.z_index,T=!0,S=!0,x=0;function $(){const e=u.parentNode.getBoundingClientRect(),t=wT(s);o(6,v=s.getBoundingClientRect().height/2),o(19,_=t.getBoundingClientRect().right-e.left);setTimeout((()=>{const t=s.querySelector('[data-icon="react"]');t&&(o(19,_=t.getBoundingClientRect().right-e.left),o(20,m=!0)),o(11,x=1),a&&o(19,_=_+-42)}),c);const n=s.querySelector('[data-a8n="reaction-bubble"]'),r=s.querySelector('[data-testid="reaction-bubble"]');o(8,b=!(!n&&!r)),window.innerHeight-e.bottom<d+v?o(9,T=!1):o(9,T=!0),s.getBoundingClientRect().right-t.getBoundingClientRect().right<l?o(10,S=!1):o(10,S=!0)}s.addEventListener("mouseover",(()=>{o(1,f=!1)}),!1),s.addEventListener("mouseout",(()=>{y||o(1,f=!0)}),!1);return e.$$set=e=>{"textElement"in e&&o(18,i=e.textElement),"messageContainer"in e&&o(17,s=e.messageContainer)},e.$$.update=()=>{1310722&e.$$.dirty&&(o(0,a=Gt(i.parentNode)),f||m||$()),524293&e.$$.dirty&&(console.log("isParentRTL",a),console.log("shdfL",w),o(12,g=a&&w?_-20:_))},[a,f,w,u,p,h,v,y,b,T,S,x,g,r,E,async function(){if(p)return;o(5,h=!0),o(7,y=!1);let e,n,r="";try{r=await Ut(i.innerText)}catch(e){console.log(e)}try{n=await t({action:"dlRequestWhatsAppMessageTranslation",payload:{message:i.innerText,messageLang:r,domainName:window.location.hostname}})}catch(t){e=t,console.error(e)}o(4,p=e?"":n[0].text),o(5,h=!1);const a=ZT.createElement();a.createDOM(p,i.innerText,(()=>{o(17,s.dataset.dlIsTranslated="false",s),setTimeout((()=>o(4,p="")),600),a.cleanupDOM(),a.remove()}),e),i.appendChild(a),o(17,s.dataset.dlIsTranslated="true",s)},function(){o(7,y=!1)},s,i,_,m,function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},()=>o(2,w=!0),()=>o(7,y=!y),()=>o(7,y=!1),function(e){Lh[e?"unshift":"push"]((()=>{u=e,o(3,u)}))},()=>{y||o(2,w=!1)}]}class sS extends af{constructor(e){super(),sf(this,e,iS,rS,$g,{textElement:18,messageContainer:17})}}class aS{static HTML_TAG_NAME="deepl-whatsapp-message-in-translator";static createElement=(e=document)=>{const t=e.createElement(aS.HTML_TAG_NAME),n=new aS(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=(e,t)=>{this.domElement.mainComponent=new sS({target:this.domElement.shadowContainer,props:{textElement:e,messageContainer:t}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function lS(){const e=document.querySelector("deepl-whatsapp-messages-in-translator");if(e){const t=document.body.querySelector("[data-testid=conversation-panel-messages]"),n=document.querySelector("footer").getBoundingClientRect(),o=t.getBoundingClientRect();return e.style.left=o.right-58+"px",void(e.style.top=n.top-55+"px")}}function cS(){let e=new MutationObserver((()=>{!function(){const e=document.body.querySelectorAll(".message-in");for(let t of e)if("true"!==t.dataset.dlHasMessageTranslator&&"true"!==t.dataset.dlIsTranslated){t.dataset.dlHasMessageTranslator="true";const e=t.querySelector(".selectable-text.copyable-text");if(e&&e.innerText&&!gT(e.innerText)){const n=aS.createElement();n.createDOM(e,t),n.style.position="absolute",n.style.top="0px",t.appendChild(n)}}}()}));e.observe(document.body,{attributes:!0,childList:!0,subtree:!0}),window.addEventListener("resize",lS),v_((()=>{window.removeEventListener("resize",lS),e.disconnect()}))}class dS{constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowContainer.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=()=>{throw new Error("createDOM must be defined in the child component")};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()};bindChildFunctions=(e=[])=>{["createDOM","cleanupDOM",...e].forEach((e=>{this.domElement[e]=this[e]}))}}const uS="rgb(0, 0, 0)",pS="rgb(21, 32, 43)";function mS(e){return e===uS||e===pS}const gS=function(){let e={isDarkMode:mS(document.body.style.backgroundColor)};const{subscribe:t,update:n}=cf(e);let o=new MutationObserver((e=>{e.forEach((e=>{"attributes"===e.type&&"style"===e.attributeName&&n((e=>({...e,isDarkMode:mS(document.body.style.backgroundColor)})))}))}));return o.observe(document.body,{attributes:!0}),setTimeout((()=>{v_((()=>{o.disconnect()}))})),{subscribe:t}}();function hS(e){let t,n,o=function(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f;const _=[_S,fS],v=[];function y(e,t){return e[2]?0:1}return o=y(e),r=v[o]=_[o](e),{c(){t=Zg("div"),n=Zg("div"),r.c(),i=Jg(),s=Zg("div"),s.textContent=`${chrome.i18n.getMessage("twitter_web_alternatives_link")}`,l=Jg(),c=Zg("button"),d=Xg("svg"),u=Xg("path"),rh(s,"class","show-alternatives svelte-t50unb"),uh(s,"dark",e[4]),rh(n,"dir",a=jt(e[3].selectedTargetLanguage)),rh(u,"d","M3 9L9 3M3 3L9 9"),rh(u,"stroke",p=e[4]?"white":"#037171"),rh(u,"stroke-width","1.5"),rh(u,"stroke-linecap","round"),rh(u,"stroke-linejoin","round"),rh(d,"width","12"),rh(d,"height","12"),rh(d,"viewBox","0 0 12 12"),rh(d,"fill","none"),rh(d,"xmlns","http://www.w3.org/2000/svg"),rh(c,"class","svelte-t50unb"),rh(t,"class","container svelte-t50unb"),rh(t,"dir",jt()),uh(t,"dark",e[4])},m(r,a){Vg(r,t,a),jg(t,n),v[o].m(n,null),jg(n,i),jg(n,s),jg(t,l),jg(t,c),jg(c,d),jg(d,u),g=!0,h||(f=[th(s,"click",e[5]),th(c,"click",(function(){xg(e[1])&&e[1].apply(this,arguments)}))],h=!0)},p(l,c){let d=o;o=y(e=l),o===d?v[o].p(e,c):(qh(),Kh(v[d],1,1,(()=>{v[d]=null})),Vh(),r=v[o],r?r.p(e,c):(r=v[o]=_[o](e),r.c()),Yh(r,1),r.m(n,i)),(!g||16&c)&&uh(s,"dark",e[4]),(!g||8&c&&a!==(a=jt(e[3].selectedTargetLanguage)))&&rh(n,"dir",a),(!g||16&c&&p!==(p=e[4]?"white":"#037171"))&&rh(u,"stroke",p),(!g||16&c)&&uh(t,"dark",e[4])},i(e){g||(Yh(r),m||Oh((()=>{m=Xh(t,Ff,{y:-10,duration:200}),m.start()})),g=!0)},o(e){Kh(r),g=!1},d(e){e&&Yg(t),v[o].d(),h=!1,Sg(f)}}}(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,t){o.p(e,t)},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function fS(e){let t,n;return{c(){t=Zg("span"),n=Qg(e[0]),rh(t,"class","translatedText svelte-t50unb")},m(e,o){Vg(e,t,o),jg(t,n)},p(e,t){1&t&&ih(n,e[0])},i:wg,o:wg,d(e){e&&Yg(t)}}}function _S(e){let t,n;return t=new Wy({props:{error:e[2]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.error=e[2]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function vS(e){let t,n,o=e[3]&&e[3].isTwitterEnabled&&hS(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,[n]){e[3]&&e[3].isTwitterEnabled?o?(o.p(e,n),8&n&&Yh(o,1)):(o=hS(e),o.c(),Yh(o,1),o.m(t.parentNode,t)):o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh())},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function yS(e,n,o){let r,i,s;kg(e,df,(e=>o(3,i=e))),kg(e,gS,(e=>o(7,s=e))),xh("text_direction",jt());let a,l,{translatedText:c}=n,{sourceText:d}=n,{onClose:u}=n,{error:p}=n;return e.$$set=e=>{"translatedText"in e&&o(0,c=e.translatedText),"sourceText"in e&&o(6,d=e.sourceText),"onClose"in e&&o(1,u=e.onClose),"error"in e&&o(2,p=e.error)},e.$$.update=()=>{128&e.$$.dirty&&o(4,r=s&&s.isDarkMode),64&e.$$.dirty&&Ut(d).then((e=>{a=e})),8&e.$$.dirty&&(l=i.selectedTargetLanguage)},[c,u,p,i,r,function(){t({action:"dlExternalURLRedirect",payload:{destination:vv,sourceLang:a,targetLang:l,textToShare:d}})},d,s]}class wS extends af{constructor(e){super(),sf(this,e,yS,vS,$g,{translatedText:0,sourceText:6,onClose:1,error:2})}}class bS extends dS{static HTML_TAG_NAME="deepl-twitter-translated-tweet";constructor(e){super(e),this.bindChildFunctions()}static createElement=(e=document)=>{const t=e.createElement(bS.HTML_TAG_NAME);return new bS(t),t};createDOM=(e,t,n,o)=>{this.domElement.mainComponent=new wS({target:this.domElement.shadowContainer,props:{translatedText:e,onClose:n,sourceText:t,error:o}})}}function ES(e){let t,n,o,r;const i=[SS,TS],s=[];function a(e,t){return e[2]?0:e[3]?1:-1}return~(n=a(e))&&(o=s[n]=i[n](e)),{c(){t=Zg("div"),o&&o.c(),rh(t,"dir",jt())},m(e,o){Vg(e,t,o),~n&&s[n].m(t,null),r=!0},p(e,r){let l=n;n=a(e),n===l?~n&&s[n].p(e,r):(o&&(qh(),Kh(s[l],1,1,(()=>{s[l]=null})),Vh()),~n?(o=s[n],o?o.p(e,r):(o=s[n]=i[n](e),o.c()),Yh(o,1),o.m(t,null)):o=null)},i(e){r||(Yh(o),r=!0)},o(e){Kh(o),r=!1},d(e){e&&Yg(t),~n&&s[n].d()}}}function TS(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g;return{c(){t=Zg("button"),n=Zg("div"),n.textContent=`${chrome.i18n.getMessage("twitter_web_translate_tweet_link")}`,o=Jg(),r=Xg("svg"),i=Xg("g"),s=Xg("path"),a=Xg("path"),l=Xg("path"),c=Xg("defs"),d=Xg("clipPath"),u=Xg("rect"),rh(n,"class","copy svelte-qovtib"),rh(s,"d","M1.85295 4.86015V12.4035C1.85295 12.7953 2.05334 13.1545 2.38029 13.3504L8.70832 17.1167C8.72427 17.1262 8.7404 17.1353 8.75668 17.1439L11.8727 19L11.8621 17.3672L11.8685 16.4605L11.8717 16.4747V16.1699C11.8717 15.9893 11.9613 15.8272 12.0993 15.7262L12.3015 15.6059L12.3991 15.5494L12.394 15.5508L16.091 13.3504C16.418 13.1545 16.6184 12.7953 16.6184 12.4035V4.86015C16.6184 4.46829 16.418 4.10909 16.091 3.91316L9.76299 0.146947C9.43604 -0.0489825 9.03527 -0.0489825 8.70832 0.146947L2.38029 3.92404C2.05334 4.11997 1.85295 4.47918 1.85295 4.86015Z"),rh(s,"class","deepl-icon svelte-qovtib"),rh(a,"d","M6.68257 5.19787C7.10444 4.77336 7.77943 4.77336 8.2013 5.19787C8.50446 5.49621 8.60497 5.92588 8.50281 6.3113L11.4143 8.05411C11.4193 8.04902 11.4243 8.04396 11.4294 8.03894C11.8513 7.61442 12.5263 7.61442 12.9481 8.03894C13.4017 8.48522 13.4017 9.2254 12.9481 9.67168C12.5263 10.0962 11.8513 10.0962 11.4294 9.67168C11.111 9.35838 11.0162 8.90024 11.1448 8.50062L11.1341 8.50683L8.24372 6.78659C8.23005 6.80156 8.21591 6.81624 8.2013 6.83062C7.77943 7.25514 7.10444 7.25514 6.68257 6.83062C6.22906 6.38434 6.22906 5.64416 6.68257 5.19787Z"),rh(a,"fill","white"),rh(l,"d","M8.50819 11.5811L11.3455 9.88917L10.8182 9.58439L8.2574 11.1016C8.23971 11.0816 8.2212 11.062 8.20187 11.043C7.78 10.6185 7.10501 10.6185 6.68314 11.043C6.22963 11.4893 6.22963 12.2295 6.68314 12.6757C7.10501 13.1003 7.78 13.1003 8.20187 12.6757C8.50012 12.3822 8.60222 11.9616 8.50819 11.5811Z"),rh(l,"fill","white"),rh(i,"clip-path","url(#clip0)"),rh(u,"width","18.5294"),rh(u,"height","19"),rh(u,"fill","white"),rh(u,"transform","matrix(-1 0 0 1 18.5294 0)"),rh(d,"id","clip0"),rh(r,"width","15"),rh(r,"height","15"),rh(r,"viewBox","0 0 19 19"),rh(r,"fill","none"),rh(r,"xmlns","http://www.w3.org/2000/svg"),rh(r,"class","svelte-qovtib"),rh(t,"class","tweetLink svelte-qovtib"),t.disabled=p=!!e[1],uh(t,"dark",e[4])},m(p,h){Vg(p,t,h),jg(t,n),jg(t,o),jg(t,r),jg(r,i),jg(i,s),jg(i,a),jg(i,l),jg(r,c),jg(c,d),jg(d,u),m||(g=[th(t,"keydown",e[5]),th(t,"click",e[5])],m=!0)},p(e,n){2&n&&p!==(p=!!e[1])&&(t.disabled=p),16&n&&uh(t,"dark",e[4])},i:wg,o:wg,d(e){e&&Yg(t),m=!1,Sg(g)}}}function SS(e){let t,n;return t=new AT({props:{small:!0}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p:wg,i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function xS(e){let t,n,o=e[0]&&e[0].isTwitterEnabled&&ES(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,[n]){e[0]&&e[0].isTwitterEnabled?o?(o.p(e,n),1&n&&Yh(o,1)):(o=ES(e),o.c(),Yh(o,1),o.m(t.parentNode,t)):o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh())},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function $S(e,n,o){let r,i,s;kg(e,df,(e=>o(0,i=e))),kg(e,gS,(e=>o(7,s=e))),xh("deepl_settings",df),xh("deepl_website_settings",Rw),xh("text_direction",jt());let a,l,{tweetTextNode:c}=n,d=!1;return e.$$set=e=>{"tweetTextNode"in e&&o(6,c=e.tweetTextNode)},e.$$.update=()=>{if(128&e.$$.dirty&&o(4,r=s&&s.isDarkMode),1&e.$$.dirty){i.blacklistDomainsForReading.includes(window.location.hostname)?o(3,l=!1):i.selectedTargetLanguage&&async function(){const e=c.innerText;if(e.length<20)return!1;const t=await Ut(e);return Pt(chrome.i18n.getUILanguage())!==t&&Pt(i.selectedTargetLanguage)!==t}().then((e=>o(3,l=e))).catch((()=>o(3,l=!1)))}},[i,a,d,l,r,async function(){if(a)return;o(2,d=!0);let e,n,r="";try{r=await Ut(c.innerText),r=Wt(r)}catch(e){console.log(e)}try{n=await t({action:"dlRequestTwitterTweetTranslation",payload:{message:c.innerText,messageLang:r,domainName:window.location.hostname}})}catch(t){e=t,console.error(e)}o(1,a=e?"":ft(n)),o(2,d=!1);const i=bS.createElement();i.createDOM(a,c.innerText,(()=>{o(1,a=""),i.cleanupDOM()}),e),c.appendChild(i)},c,s]}class CS extends af{constructor(e){super(),sf(this,e,$S,xS,$g,{tweetTextNode:6})}}class kS extends dS{static HTML_TAG_NAME="deepl-twitter-tweet-link";static createElement=(e=document)=>{const t=e.createElement(kS.HTML_TAG_NAME);return new kS(t),t};constructor(e){super(e),this.bindChildFunctions()}createDOM=e=>{this.domElement.mainComponent=new CS({target:this.domElement.shadowContainer,props:{tweetTextNode:e}})}}function LS(){console.log("customizing for twitter");let e=new MutationObserver((()=>{!function(){const e=document.body.querySelectorAll("[data-testid='tweetText']");for(let t of e)if("true"!==t.dataset.dlHasMessageTranslator&&(t.dataset.dlHasMessageTranslator="true",t&&t.innerText)){const e=kS.createElement();return e.createDOM(t),void t.appendChild(e)}}()}));e.observe(document.body,{attributes:!0,childList:!0,subtree:!0}),v_((()=>e.disconnect()))}function IS(e){let t,n;return{c(){t=Zg("span"),n=Qg(e[0]),rh(t,"class","translatedText svelte-jkt5fr")},m(e,o){Vg(e,t,o),jg(t,n)},p(e,t){1&t&&ih(n,e[0])},i:wg,o:wg,d(e){e&&Yg(t)}}}function AS(e){let t,n;return t=new Wy({props:{error:e[2]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.error=e[2]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function RS(e){let t,n,o=function(e){let t,n,o,r,i,s,a,l,c,d,u,p;const m=[AS,IS],g=[];function h(e,t){return e[2]?0:1}return o=h(e),r=g[o]=m[o](e),{c(){t=Zg("div"),n=Zg("div"),r.c(),i=Jg(),s=Zg("div"),s.textContent=`${chrome.i18n.getMessage("ui_inline_translation_see_alternatives_v2")}`,a=Jg(),l=Zg("button"),l.innerHTML='<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 9L9 3M3 3L9 9" stroke="#363F4A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',rh(s,"class","show-alternatives svelte-jkt5fr"),rh(l,"class","svelte-jkt5fr"),rh(t,"class","container svelte-jkt5fr"),rh(t,"dir",jt())},m(r,c){Vg(r,t,c),jg(t,n),g[o].m(n,null),jg(n,i),jg(n,s),jg(t,a),jg(t,l),d=!0,u||(p=[th(s,"click",e[3]),th(l,"click",(function(){xg(e[1])&&e[1].apply(this,arguments)}))],u=!0)},p(t,s){let a=o;o=h(e=t),o===a?g[o].p(e,s):(qh(),Kh(g[a],1,1,(()=>{g[a]=null})),Vh(),r=g[o],r?r.p(e,s):(r=g[o]=m[o](e),r.c()),Yh(r,1),r.m(n,i))},i(e){d||(Yh(r),c||Oh((()=>{c=Xh(t,Ff,{y:-10,duration:200}),c.start()})),d=!0)},o(e){Kh(r),d=!1},d(e){e&&Yg(t),g[o].d(),u=!1,Sg(p)}}}(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,[t]){o.p(e,t)},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function MS(e,n,o){let r;kg(e,df,(e=>o(5,r=e))),xh("text_direction",jt());let i,s,{translatedText:a}=n,{sourceText:l}=n,{onClose:c}=n,{error:d}=n;return e.$$set=e=>{"translatedText"in e&&o(0,a=e.translatedText),"sourceText"in e&&o(4,l=e.sourceText),"onClose"in e&&o(1,c=e.onClose),"error"in e&&o(2,d=e.error)},e.$$.update=()=>{16&e.$$.dirty&&Ut(l).then((e=>{i=e})),32&e.$$.dirty&&(s=r.selectedTargetLanguage)},[a,c,d,function(){t({action:"dlExternalURLRedirect",payload:{destination:vv,sourceLang:i,targetLang:s,textToShare:l}});try{t({action:"dlTrackUiAction",payload:{uiAction:F,nicheIntegration:re.linkedIn}})}catch(e){console.error(e)}},l,r]}class NS extends af{constructor(e){super(),sf(this,e,MS,RS,$g,{translatedText:0,sourceText:4,onClose:1,error:2})}}class OS{static HTML_TAG_NAME="deepl-linkedin-translated-post";static createElement=(e=document)=>{const t=e.createElement(OS.HTML_TAG_NAME),n=new OS(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent=null;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=(e,t,n,o)=>{this.domElement.mainComponent=new NS({target:this.domElement.shadowContainer,props:{translatedText:e,onClose:n,sourceText:t,error:o}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function DS(e){let t,n,o={ctx:e,current:null,token:null,hasCatch:!1,pending:zS,then:US,catch:PS,value:11,blocks:[,,,]};return function(e,t){const n=t.token={};function o(e,o,r,i){if(t.token!==n)return;t.resolved=i;let s=t.ctx;void 0!==r&&(s=s.slice(),s[r]=i);const a=e&&(t.current=e)(s);let l=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==o&&e&&(qh(),Kh(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),Vh())})):t.block.d(1),a.c(),Yh(a,1),a.m(t.mount(),t.anchor),l=!0),t.block=a,t.blocks&&(t.blocks[o]=a),l&&Wh()}if(!(r=e)||"object"!=typeof r&&"function"!=typeof r||"function"!=typeof r.then){if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved=e}else{const n=bh();if(e.then((e=>{wh(n),o(t.then,1,t.value,e),wh(null)}),(e=>{if(wh(n),o(t.catch,2,t.error,e),wh(null),!t.hasCatch)throw e})),t.current!==t.pending)return o(t.pending,0),!0}var r}(e[3](),o),{c(){t=eh(),o.block.c()},m(e,r){Vg(e,t,r),o.block.m(e,o.anchor=r),o.mount=()=>t.parentNode,o.anchor=t,n=!0},p(t,n){!function(e,t,n){const o=t.slice(),{resolved:r}=e;e.current===e.then&&(o[e.value]=r),e.current===e.catch&&(o[e.error]=r),e.block.p(o,n)}(o,e=t,n)},i(e){n||(Yh(o.block),n=!0)},o(e){for(let e=0;e<3;e+=1){Kh(o.blocks[e])}n=!1},d(e){e&&Yg(t),o.block.d(e),o.token=null,o=null}}}function PS(e){return{c:wg,m:wg,p:wg,i:wg,o:wg,d:wg}}function US(e){let t,n,o=e[11]&&function(e){let t,n,o,r;const i=[WS,BS],s=[];function a(e,t){return e[0]?0:1}return n=a(e),o=s[n]=i[n](e),{c(){t=Zg("div"),o.c(),rh(t,"class","linkedin-link-container svelte-2f58mn"),rh(t,"dir",jt())},m(e,o){Vg(e,t,o),s[n].m(t,null),r=!0},p(e,r){let l=n;n=a(e),n===l?s[n].p(e,r):(qh(),Kh(s[l],1,1,(()=>{s[l]=null})),Vh(),o=s[n],o?o.p(e,r):(o=s[n]=i[n](e),o.c()),Yh(o,1),o.m(t,null))},i(e){r||(Yh(o),r=!0)},o(e){Kh(o),r=!1},d(e){e&&Yg(t),s[n].d()}}}(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,t){e[11]&&o.p(e,t)},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function BS(e){let t,n,o,r;return{c(){t=Zg("button"),n=Zg("div"),n.textContent=`${chrome.i18n.getMessage("linkedin_web_translate_post_link")}`,rh(n,"class","copy svelte-2f58mn"),uh(n,"active",e[1]),rh(t,"class","linkedin-link svelte-2f58mn")},m(i,s){Vg(i,t,s),jg(t,n),o||(r=[th(t,"keydown",e[4]),th(t,"click",e[4])],o=!0)},p(e,t){2&t&&uh(n,"active",e[1])},i:wg,o:wg,d(e){e&&Yg(t),o=!1,Sg(r)}}}function WS(e){let t,n,o;return n=new AT({props:{small:!0}}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","spinner svelte-2f58mn")},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p:wg,i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function zS(e){return{c:wg,m:wg,p:wg,i:wg,o:wg,d:wg}}function FS(e){let t,n,o=e[2]&&e[2][re.linkedIn]&&DS(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,[n]){e[2]&&e[2][re.linkedIn]?o?(o.p(e,n),4&n&&Yh(o,1)):(o=DS(e),o.c(),Yh(o,1),o.m(t.parentNode,t)):o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh())},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function HS(e,n,o){let r,i,s;kg(e,df,(e=>o(6,s=e))),xh("deepl_settings",df),xh("deepl_website_settings",Rw),xh("text_direction",jt());let a,{linkedInPostNode:l}=n,c=!1,d=l.querySelector(".update-components-text").innerText;return e.$$set=e=>{"linkedInPostNode"in e&&o(5,l=e.linkedInPostNode)},e.$$.update=()=>{64&e.$$.dirty&&o(2,i=s.customizationsActiveStates)},o(1,r=!0),[c,r,i,async function(){if(d.length<20)return!1;const e=await Ut(d);return t=e,Pt(chrome.i18n.getUILanguage())!==t&&(e=>Pt(s.selectedTargetLanguage)!==e)(e);var t},async function(){if(a)return;o(0,c=!0);let e,n,i="";try{i=await Ut(d),i=Wt(i)}catch(e){console.log(e)}try{n=await t({action:"dlRequestLinkedInPostTranslation",payload:{message:d,messageLang:i,domainName:window.location.hostname,trigger:_}})}catch(t){e=t,console.error(e)}a=e?"":n[0].text,o(0,c=!1);const s=OS.createElement();s.createDOM(a,d,(()=>{a="",o(1,r=!0),s.cleanupDOM(),s.remove()}),e),l.appendChild(s),o(1,r=!1)},l,s]}class jS extends af{constructor(e){super(),sf(this,e,HS,FS,$g,{linkedInPostNode:5})}}class GS{static HTML_TAG_NAME="deepl-linkedin-post-link";static createElement=(e=document)=>{const t=e.createElement(GS.HTML_TAG_NAME),n=new GS(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent=null;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=e=>{this.domElement.mainComponent=new jS({target:this.domElement.shadowContainer,props:{linkedInPostNode:e}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}const qS=()=>document.body.querySelectorAll(".feed-shared-update-v2__description-wrapper"),VS=e=>{const t=GS.createElement();t.createDOM(e),e.appendChild(t)};function YS(){let e=new MutationObserver((()=>{!function(){const e=qS();for(let t of e)if("true"!==t.dataset.dlHasMessageTranslator&&(t.dataset.dlHasMessageTranslator="true",t&&t.innerText))return void VS(t)}()}));e.observe(document.body,{attributes:!0,childList:!0,subtree:!0}),v_((()=>e.disconnect()))}function KS(){return!!document.documentElement.hasAttribute("dark")}const ZS=function(){let e={isDarkMode:KS()};const{subscribe:t,update:n}=cf(e);let o=new MutationObserver((e=>{e.forEach((e=>{"attributes"===e.type&&"style"===e.attributeName&&n((e=>({...e,isDarkMode:KS(document.body.style.backgroundColor)})))}))}));return o.observe(document,{attributes:!0}),setTimeout((()=>{v_((()=>{o.disconnect()}))})),{subscribe:t}}();function XS(e){let t,n,o=function(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f;const _=[JS,QS],v=[];function y(e,t){return e[2]?0:1}return o=y(e),r=v[o]=_[o](e),{c(){t=Zg("div"),n=Zg("div"),r.c(),i=Jg(),s=Zg("div"),s.textContent=`${chrome.i18n.getMessage("youtube_alternatives_link")}`,l=Jg(),c=Zg("button"),d=Xg("svg"),u=Xg("path"),rh(s,"class","show-alternatives svelte-t50unb"),uh(s,"dark",e[4]),rh(n,"dir",a=jt(e[3].selectedTargetLanguage)),rh(u,"d","M3 9L9 3M3 3L9 9"),rh(u,"stroke",p=e[4]?"white":"#037171"),rh(u,"stroke-width","1.5"),rh(u,"stroke-linecap","round"),rh(u,"stroke-linejoin","round"),rh(d,"width","12"),rh(d,"height","12"),rh(d,"viewBox","0 0 12 12"),rh(d,"fill","none"),rh(d,"xmlns","http://www.w3.org/2000/svg"),rh(c,"class","svelte-t50unb"),rh(t,"class","container svelte-t50unb"),rh(t,"dir",jt()),uh(t,"dark",e[4])},m(r,a){Vg(r,t,a),jg(t,n),v[o].m(n,null),jg(n,i),jg(n,s),jg(t,l),jg(t,c),jg(c,d),jg(d,u),g=!0,h||(f=[th(s,"click",e[5]),th(c,"click",(function(){xg(e[1])&&e[1].apply(this,arguments)}))],h=!0)},p(l,c){let d=o;o=y(e=l),o===d?v[o].p(e,c):(qh(),Kh(v[d],1,1,(()=>{v[d]=null})),Vh(),r=v[o],r?r.p(e,c):(r=v[o]=_[o](e),r.c()),Yh(r,1),r.m(n,i)),(!g||16&c)&&uh(s,"dark",e[4]),(!g||8&c&&a!==(a=jt(e[3].selectedTargetLanguage)))&&rh(n,"dir",a),(!g||16&c&&p!==(p=e[4]?"white":"#037171"))&&rh(u,"stroke",p),(!g||16&c)&&uh(t,"dark",e[4])},i(e){g||(Yh(r),m||Oh((()=>{m=Xh(t,Ff,{y:-10,duration:200}),m.start()})),g=!0)},o(e){Kh(r),g=!1},d(e){e&&Yg(t),v[o].d(),h=!1,Sg(f)}}}(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,t){o.p(e,t)},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function QS(e){let t,n;return{c(){t=Zg("span"),n=Qg(e[0]),rh(t,"class","translatedText svelte-t50unb")},m(e,o){Vg(e,t,o),jg(t,n)},p(e,t){1&t&&ih(n,e[0])},i:wg,o:wg,d(e){e&&Yg(t)}}}function JS(e){let t,n;return t=new Wy({props:{error:e[2]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.error=e[2]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function ex(e){let t,n,o=e[3]&&e[3].isYoutubeEnabled&&XS(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,[n]){e[3]&&e[3].isYoutubeEnabled?o?(o.p(e,n),8&n&&Yh(o,1)):(o=XS(e),o.c(),Yh(o,1),o.m(t.parentNode,t)):o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh())},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function tx(e,n,o){let r,i,s;kg(e,df,(e=>o(3,i=e))),kg(e,ZS,(e=>o(7,s=e)));let a,l,{translatedText:c}=n,{sourceText:d}=n,{onClose:u}=n,{error:p}=n;return e.$$set=e=>{"translatedText"in e&&o(0,c=e.translatedText),"sourceText"in e&&o(6,d=e.sourceText),"onClose"in e&&o(1,u=e.onClose),"error"in e&&o(2,p=e.error)},e.$$.update=()=>{128&e.$$.dirty&&o(4,r=s&&s.isDarkMode),64&e.$$.dirty&&Ut(d).then((e=>{a=e})),8&e.$$.dirty&&(l=i.selectedTargetLanguage)},[c,u,p,i,r,function(){t({action:"dlExternalURLRedirect",payload:{destination:vv,sourceLang:a,targetLang:l,textToShare:d}})},d,s]}class nx extends af{constructor(e){super(),sf(this,e,tx,ex,$g,{translatedText:0,sourceText:6,onClose:1,error:2})}}class ox extends dS{static HTML_TAG_NAME="deepl-youtube-translated-translated";constructor(e){super(e),this.bindChildFunctions()}static createElement=(e=document)=>{const t=e.createElement(ox.HTML_TAG_NAME);return new ox(t),t};createDOM=(e,t,n,o)=>{this.domElement.mainComponent=new nx({target:this.domElement.shadowContainer,props:{translatedText:e,onClose:n,sourceText:t,error:o}})}}function rx(e){let t,n,o,r;const i=[sx,ix],s=[];function a(e,t){return e[2]?0:e[3]?1:-1}return~(n=a(e))&&(o=s[n]=i[n](e)),{c(){t=Zg("div"),o&&o.c(),rh(t,"dir",jt())},m(e,o){Vg(e,t,o),~n&&s[n].m(t,null),r=!0},p(e,r){let l=n;n=a(e),n===l?~n&&s[n].p(e,r):(o&&(qh(),Kh(s[l],1,1,(()=>{s[l]=null})),Vh()),~n?(o=s[n],o?o.p(e,r):(o=s[n]=i[n](e),o.c()),Yh(o,1),o.m(t,null)):o=null)},i(e){r||(Yh(o),r=!0)},o(e){Kh(o),r=!1},d(e){e&&Yg(t),~n&&s[n].d()}}}function ix(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g;return{c(){t=Zg("button"),n=Zg("div"),n.textContent=`${chrome.i18n.getMessage("youtube_translate_comment_link")}`,o=Jg(),r=Xg("svg"),i=Xg("g"),s=Xg("path"),a=Xg("path"),l=Xg("path"),c=Xg("defs"),d=Xg("clipPath"),u=Xg("rect"),rh(n,"class","copy svelte-mtyjwe"),rh(s,"d","M1.85295 4.86015V12.4035C1.85295 12.7953 2.05334 13.1545 2.38029 13.3504L8.70832 17.1167C8.72427 17.1262 8.7404 17.1353 8.75668 17.1439L11.8727 19L11.8621 17.3672L11.8685 16.4605L11.8717 16.4747V16.1699C11.8717 15.9893 11.9613 15.8272 12.0993 15.7262L12.3015 15.6059L12.3991 15.5494L12.394 15.5508L16.091 13.3504C16.418 13.1545 16.6184 12.7953 16.6184 12.4035V4.86015C16.6184 4.46829 16.418 4.10909 16.091 3.91316L9.76299 0.146947C9.43604 -0.0489825 9.03527 -0.0489825 8.70832 0.146947L2.38029 3.92404C2.05334 4.11997 1.85295 4.47918 1.85295 4.86015Z"),rh(s,"class","deepl-icon svelte-mtyjwe"),rh(a,"d","M6.68257 5.19787C7.10444 4.77336 7.77943 4.77336 8.2013 5.19787C8.50446 5.49621 8.60497 5.92588 8.50281 6.3113L11.4143 8.05411C11.4193 8.04902 11.4243 8.04396 11.4294 8.03894C11.8513 7.61442 12.5263 7.61442 12.9481 8.03894C13.4017 8.48522 13.4017 9.2254 12.9481 9.67168C12.5263 10.0962 11.8513 10.0962 11.4294 9.67168C11.111 9.35838 11.0162 8.90024 11.1448 8.50062L11.1341 8.50683L8.24372 6.78659C8.23005 6.80156 8.21591 6.81624 8.2013 6.83062C7.77943 7.25514 7.10444 7.25514 6.68257 6.83062C6.22906 6.38434 6.22906 5.64416 6.68257 5.19787Z"),rh(a,"fill","white"),rh(l,"d","M8.50819 11.5811L11.3455 9.88917L10.8182 9.58439L8.2574 11.1016C8.23971 11.0816 8.2212 11.062 8.20187 11.043C7.78 10.6185 7.10501 10.6185 6.68314 11.043C6.22963 11.4893 6.22963 12.2295 6.68314 12.6757C7.10501 13.1003 7.78 13.1003 8.20187 12.6757C8.50012 12.3822 8.60222 11.9616 8.50819 11.5811Z"),rh(l,"fill","white"),rh(i,"clip-path","url(#clip0)"),rh(u,"width","18.5294"),rh(u,"height","19"),rh(u,"fill","white"),rh(u,"transform","matrix(-1 0 0 1 18.5294 0)"),rh(d,"id","clip0"),rh(r,"width","15"),rh(r,"height","15"),rh(r,"viewBox","0 0 19 19"),rh(r,"fill","none"),rh(r,"xmlns","http://www.w3.org/2000/svg"),rh(r,"class","svelte-mtyjwe"),rh(t,"class","commentLink svelte-mtyjwe"),t.disabled=p=!!e[1],uh(t,"dark",e[4])},m(p,h){Vg(p,t,h),jg(t,n),jg(t,o),jg(t,r),jg(r,i),jg(i,s),jg(i,a),jg(i,l),jg(r,c),jg(c,d),jg(d,u),m||(g=[th(t,"keydown",e[5]),th(t,"click",e[5])],m=!0)},p(e,n){2&n&&p!==(p=!!e[1])&&(t.disabled=p),16&n&&uh(t,"dark",e[4])},i:wg,o:wg,d(e){e&&Yg(t),m=!1,Sg(g)}}}function sx(e){let t,n;return t=new AT({props:{small:!0}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p:wg,i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function ax(e){let t,n,o=e[0]&&e[0].isYoutubeEnabled&&rx(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,[n]){e[0]&&e[0].isYoutubeEnabled?o?(o.p(e,n),1&n&&Yh(o,1)):(o=rx(e),o.c(),Yh(o,1),o.m(t.parentNode,t)):o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh())},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function lx(e,n,o){let r,i,s;kg(e,df,(e=>o(0,i=e))),kg(e,ZS,(e=>o(7,s=e)));let a,l,{commentNode:c}=n,d=!1;return e.$$set=e=>{"commentNode"in e&&o(6,c=e.commentNode)},e.$$.update=()=>{if(128&e.$$.dirty&&o(4,r=s&&s.isDarkMode),1&e.$$.dirty){i.blacklistDomainsForReading.includes(window.location.hostname)?o(3,l=!1):i.selectedTargetLanguage&&async function(){const e=c.innerText;if(e.length<10)return!1;const t=await Ut(e);return Pt(chrome.i18n.getUILanguage())!==t&&Pt(i.selectedTargetLanguage)!==t}().then((e=>o(3,l=e))).catch((()=>o(3,l=!1)))}},[i,a,d,l,r,async function(){if(a)return;o(2,d=!0);let e,n,r="";try{r=await Ut(c.innerText),r=Wt(r)}catch(e){console.log(e)}try{n=await t({action:"dlRequestYouTubeTranslation",payload:{message:c.innerText,messageLang:r,domainName:window.location.hostname}})}catch(t){e=t,console.error(e)}o(1,a=e?"":n[0].text),o(2,d=!1);const i=ox.createElement();i.createDOM(a,c.innerText,(()=>{o(1,a=""),i.cleanupDOM()}),e),c.appendChild(i)},c,s]}class cx extends af{constructor(e){super(),sf(this,e,lx,ax,$g,{commentNode:6})}}class dx extends dS{static HTML_TAG_NAME="deepl-youtube-comment-link";static createElement=(e=document)=>{const t=e.createElement(dx.HTML_TAG_NAME);return new dx(t),t};constructor(e){super(e),this.bindChildFunctions()}createDOM=e=>{this.domElement.mainComponent=new cx({target:this.domElement.shadowContainer,props:{commentNode:e}})}}function ux(){let e=document.body.querySelector("ytd-comments");return e||(e=document.body.querySelector("#comments")),e}function px(){setTimeout((()=>{const e=ux();if(e){let t=new MutationObserver((()=>{!function(){let e=ux();if(!e)return;const t=e.querySelectorAll("#content-text");for(let e of t)if("true"!==e.dataset.dlHasMessageTranslator&&(e.dataset.dlHasMessageTranslator="true",e&&e.innerText)){const t=dx.createElement();return t.createDOM(e),void e.appendChild(t)}}()}));t.observe(e,{attributes:!1,childList:!0,subtree:!0}),v_((()=>t.disconnect()))}}),1e3)}function mx(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}}function gx(e){switch(e){case B.inputTranslationTriggerIcon:return 1;case B.inlineTranslationTriggerIcon:return 2;case B.inlineTranslationSettingPopup:return 3;case B.inputTranslationSettingPopup:return 4;case B.settingsPageFPT:return 5;case B.settingsPageReading:return 6;case B.settingsPageWriting:return 7;case B.fptHideModal:return 8;case B.inputTranslationSettingsIcon:return 9;case B.inlineTranslationSettingsIcon:return 10;case B.inputTranslationReadMoreLink:return 11;case B.inlineTranslationReadMoreLink:return 12;case B.fptTranslationReadMoreLink:return 13;case B.extensionHubToggleSwitch:return 14;case B.hubCustomizeShortcut:return 15;case B.hubLoginButton:return 16;case B.hubUpgradeToProLink:return 17;case B.hubTryProLink:return 18;case B.settingsPageCustomizeShortcutButton:return 19;case B.hubFPTEnableCheckbox:return 20;case B.hubFPTDisableCheckbox:return 21;case B.deeplWriteIcon:return 22;case B.hubViewIntegrations:return 23;case B.hubCloseCustomizationsWidget:return 24;case B.gmailOnboardingPopup:return 25;case B.gmailOnboardingIcon:return 26;case B.gmailCharLimitLogin:return 27;case B.gmailFeedbackSurvey:return 28;case B.gslidesFeedbackSurvey:return 29;case B.gslidesCharLimitLogin:return 30;case B.zendeskTryProLink:return 31;case B.settingsPageIntegrations:return 32;case B.onboardingSignUp:return 33;case B.onboardingSkipSignUp:return 34;case B.onboardingLoginLink:return 35;case B.onboardingSeeAllIntegrations:return 36;case B.inputImproveTriggerIcon:return 37;case B.iconToggleInHubTranslator:return 38;case B.iconToggleInHubWrite:return 39;case B.manageIconSettings:return 40;case B.writeLanguageSwitchedInHub:return 41;case B.writeLanguageSwitchedInSettings:return 42;default:return 0}}function hx(e){switch(e){case Q.chrome:return X.chrome;case Q.edge:return X.edge;case Q.firefox:return X.firefox;case Q.local:return X.local;default:return X.unspecified}}function fx(e){switch(e){case Ee.free:return 1;case Ee.pro:return 2;case Ee.none:return 3;default:return 0}}function _x(e){switch(e){case Pe.READING_VIEW_TRANSLATE:return 1;case Pe.COMPOSE_VIEW_TRANSLATE:return 2;case Pe.COMPOSE_VIEW_IMPROVE:return 3;default:return 0}}function vx(e){switch(e){case Ye.none:return 1;case Ye.pro:return 2;case Ye.free:return 3;default:return 0}}const yx=["accountData","domainName"],wx=[60067,60068,60069],bx=(e,t)=>e&&"object"==typeof e?Array.isArray(e)?e.map((e=>bx(e,t))):Object.keys(e).reduce(((n,o)=>(t.includes(o)||(n[o]=bx(e[o],t)),n)),{}):e,Ex=(e,t=!1,n=!1)=>e?n&&t?e:!n&&wx.includes(e?.eventId)?null:bx(e,yx):null,Tx=(e=!1,t=!1)=>!(!e&&!t)&&(!(!e&&t)&&(!(!e||t)||(!(!e||!t)||void 0)));async function Sx(e){let t,n,o,r,i,s,a,l,c,d,u,p=!1;try{const e=await Ix(["session","installationId","firefoxAnonPermissionGranted","firefoxPersonalPermissionGranted"]);n=e.session.id,t=e.installationId,d=e.firefoxAnonPermissionGranted,u=e.firefoxPersonalPermissionGranted}catch(e){console.error(`DAP: Failed to fetch settings. Error: ${e.message}`)}try{const e=await async function(){return await chrome.storage.local.get(["isLoggedIn","isProUser","sessionType","translatorServiceType","writeServiceType","apiServiceType","docTranslatorServiceType","accountId","hasTermbaseService"])}();p=!!e.accountId,o=fx(e.translatorServiceType),r=fx(e.apiServiceType),i=fx(e.docTranslatorServiceType),c=fx(e.writeServiceType),a=p?2===o||2===r||2===c||2===i?y.loggedInPro:y.loggedInFree:y.notLoggedIn,l=e.sessionType?vx(e.sessionType):vx(Ye.none)}catch(e){console.error(`DAP: Failed to fetch user information. Error: ${e.message}`)}try{s=await async function(){return(await chrome.storage.local.get(["browserInstanceId"])).browserInstanceId}()}catch(e){console.error(e)}const m=ut(),g=await async function(){let e=[];try{e=await async function(){const e=await async function(e,t){$x||await new Promise(((e,t)=>{let n=indexedDB.open(Cx,1);n.onerror=function(){t(n.error)},n.onsuccess=function(t){$x=t.target.result,e()},n.onupgradeneeded=function(t){$x=t.target.result,$x.objectStoreNames.contains(kx)||$x.createObjectStore(kx,{keyPath:"id"}),e()}}));return new Promise(((n,o)=>{let r=$x.transaction(t,"readonly").objectStore(t).get(e);r.onerror=function(e){o(e)},r.onsuccess=function(){r.result?n(r.result):n(null)}}))}(Lx,kx);if(!e||!e.meta)return[];const t=Date.now()-e.meta.createdAt;if(t/6e4>9)return[];if(!e.data||0===e.data.length)return[];return e.data}()}catch(e){}if(!e||0===e.length)return[];const t=e.map((e=>({id:e.id,variant:e.variant,breakout:e.breakout})));return t}();let h,f;try{h=await Ax()}catch(e){console.error(e)}try{f=await async function(){if(pt())return;const e=await chrome.cookies.get({name:"dapUid",url:"https://www.deepl.com"});if(e)return e.value}()}catch(e){console.error(e)}const _={eventId:void 0,extensionVersion:"1.31.0",sessionId:n,sessionType:l,installationId:t,browserInstanceId:s,originStore:hx(chrome.runtime.id),userInfos:{...h&&{accountData:{accountId:h}},userType:a,translatorServiceType:o,apiServiceType:r,docTranslatorServiceType:i,writeServiceType:c},userAgent:m.userAgent,platform:m.platform,browser:m.browser,browserVersion:m.browserVersion,browserLang:m.browserLang,clientExperiments:g,...f&&{webInstanceId:f}};let v=e?e(_):_;if(pt()){if(!Tx(d,u))return;if(v=Ex(v,d,u),!v)return}return fetch("https://s.deepl.com/chrome/statistics",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(v),credentials:"omit"}).then((e=>{e.ok||console.log(`DAP ${v.eventId} request failed: ${e}`)}))}async function xx(){if(!await async function(){const e=await chrome.storage.local.get(["isLoggedIn"]);return!(!e||!e.isLoggedIn)}())return;const e=await Ax();return Sx((t=>({...t,eventId:60067,accountData:{accountUuid:e}})))}let $x;const Cx="dlBrowserExtension",kx="dlCache",Lx="dlexperiments";async function Ix(e){if(e.includes("session")){const e=await chrome.storage.sync.get(["session"]);e&&!e.session&&await async function(){const e=cn();await chrome.storage.sync.set({session:{id:e,timestamp:Date.now()}});try{await xx()}catch(e){console.error(e)}}()}return new Promise(((t,n)=>{chrome.storage.sync.get(e,(o=>{o?t(o):n(`Can not get ${e}`)}))}))}async function Ax(){const e=await chrome.storage.local.get(["accountId","a_t","i_t"]);if(e&&e.accountId)return e.accountId;if(e&&e.a_t){const t=mx(e.a_t),n=mx(e.i_t);return t.sub||n.sub}}function Rx(e){let t,n,o;return{c(){t=Zg("button"),t.textContent=`${chrome.i18n.getMessage("login_widget_login_link")}`,rh(t,"class","user-action-button svelte-9xsres")},m(r,i){Vg(r,t,i),n||(o=[th(t,"mousedown",nh(e[18])),th(t,"click",e[19])],n=!0)},p:wg,d(e){e&&Yg(t),n=!1,Sg(o)}}}function Mx(e){let t,n,o;return{c(){t=Zg("button"),t.textContent=`${chrome.i18n.getMessage("toolbar_upgrade_to_pro_button")}`,rh(t,"class","user-action-button svelte-9xsres")},m(r,i){Vg(r,t,i),n||(o=[th(t,"mousedown",nh(e[17])),th(t,"click",e[20])],n=!0)},p:wg,d(e){e&&Yg(t),n=!1,Sg(o)}}}function Nx(e){let t,n,o;return{c(){t=Zg("div"),rh(t,"type","button"),rh(t,"class","dl-menu-icon dl-menu-icon--user svelte-9xsres")},m(r,i){Vg(r,t,i),n||(o=th(t,"mousedown",nh(e[16])),n=!0)},d(e){e&&Yg(t),n=!1,o()}}}function Ox(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g=pn();function h(e,t){return!0===e[0].isLoggedIn?Px:Dx}let f=h(e),_=f&&f(e),v=g&&function(e){let t,n,o;return{c(){t=Zg("button"),t.textContent="DEV_TOOLS",rh(t,"class","dl-menu-item svelte-9xsres")},m(r,i){Vg(r,t,i),n||(o=th(t,"click",e[9]),n=!0)},p:wg,d(e){e&&Yg(t),n=!1,o()}}}(e);return{c(){t=Zg("div"),n=Zg("button"),o=Zg("span"),r=Zg("div"),r.textContent=`${chrome.i18n.getMessage("menu_share_feedback_link")}`,i=Jg(),s=Zg("div"),a=Jg(),l=Zg("button"),l.textContent=`${chrome.i18n.getMessage("menu_settings_label")}`,c=Jg(),_&&_.c(),d=Jg(),v&&v.c(),rh(s,"class","dl-feedback-icon svelte-9xsres"),rh(o,"class","dl-menu-link dl-feedback-link svelte-9xsres"),rh(n,"class","dl-menu-item svelte-9xsres"),rh(l,"class","dl-menu-item svelte-9xsres"),rh(t,"class","dl-menu-list svelte-9xsres")},m(u,g){Vg(u,t,g),jg(t,n),jg(n,o),jg(o,r),jg(o,i),jg(o,s),jg(t,a),jg(t,l),jg(t,c),_&&_.m(t,null),jg(t,d),v&&v.m(t,null),p||(m=[th(n,"click",e[7]),th(l,"click",e[10])],p=!0)},p(e,n){f===(f=h(e))&&_?_.p(e,n):(_&&_.d(1),_=f&&f(e),_&&(_.c(),_.m(t,d))),g&&v.p(e,n)},i(e){u||Oh((()=>{u=Xh(t,Ff,{y:-5,duration:500}),u.start()}))},o:wg,d(e){e&&Yg(t),_&&_.d(),v&&v.d(),p=!1,Sg(m)}}}function Dx(e){let t,n,o,r,i,s,a,l,c;return{c(){t=Zg("div"),t.innerHTML='<div class="divider svelte-9xsres"></div>',n=Jg(),o=Zg("button"),r=Zg("span"),r.textContent=`${chrome.i18n.getMessage("menu_login_label")}`,i=Jg(),s=Zg("button"),a=Zg("span"),a.textContent=`${chrome.i18n.getMessage("menu_trial_label")}`,rh(t,"class","dl-menu-item dl-menu-item--divider svelte-9xsres"),rh(o,"class","dl-menu-item svelte-9xsres"),rh(a,"class","dl-menu-link link svelte-9xsres"),rh(s,"class","dl-menu-item svelte-9xsres")},m(d,u){Vg(d,t,u),Vg(d,n,u),Vg(d,o,u),jg(o,r),Vg(d,i,u),Vg(d,s,u),jg(s,a),l||(c=[th(o,"click",e[5]),th(s,"click",e[6])],l=!0)},p:wg,d(e){e&&(Yg(t),Yg(n),Yg(o),Yg(i),Yg(s)),l=!1,Sg(c)}}}function Px(e){let t,n,o,r,i,s;return{c(){t=Zg("div"),t.innerHTML='<div class="divider svelte-9xsres"></div>',n=Jg(),o=Zg("button"),r=Zg("span"),r.textContent=`${chrome.i18n.getMessage("menu_logout_label")}`,rh(t,"class","dl-menu-item dl-menu-item--divider svelte-9xsres"),rh(o,"class","dl-menu-item svelte-9xsres")},m(a,l){Vg(a,t,l),Vg(a,n,l),Vg(a,o,l),jg(o,r),i||(s=th(o,"click",e[4]),i=!0)},p:wg,d(e){e&&(Yg(t),Yg(n),Yg(o)),i=!1,s()}}}function Ux(e){let t,n,o,r,i,s,a,l,c,d,u,p=!e[0].isLoggedIn&&Rx(e),m=e[2]&&Mx(e),g=!0===e[0].isLoggedIn&&Nx(e),h=e[1]&&Ox(e);return{c(){t=Zg("div"),n=Zg("div"),p&&p.c(),o=Jg(),m&&m.c(),r=Jg(),g&&g.c(),i=Jg(),s=Zg("button"),a=Jg(),l=Zg("button"),c=Jg(),h&&h.c(),rh(s,"type","button"),rh(s,"class","dl-menu-icon dl-menu-icon--settings svelte-9xsres"),rh(s,"aria-label",chrome.i18n.getMessage("menu_open_settings")),rh(l,"type","button"),rh(l,"class","dl-menu-icon dl-menu-icon--hamburger svelte-9xsres"),rh(l,"aria-label",chrome.i18n.getMessage("menu_open_menu")),uh(l,"isOpen",e[1]),rh(n,"class","dl-menu-icon-wrapper svelte-9xsres"),rh(t,"class","dl-container-menu svelte-9xsres")},m(f,_){Vg(f,t,_),jg(t,n),p&&p.m(n,null),jg(n,o),m&&m.m(n,null),jg(n,r),g&&g.m(n,null),jg(n,i),jg(n,s),jg(n,a),jg(n,l),jg(t,c),h&&h.m(t,null),d||(u=[th(s,"mousedown",nh(e[15])),th(s,"click",e[21]),th(l,"mousedown",nh(e[14])),th(l,"click",e[22]),th(n,"mousedown",oh(nh(e[13]))),Dg(__.call(null,t,{isShadow:!0})),th(t,"click_outside",e[8]),th(t,"mousedown",oh(nh(e[12])))],d=!0)},p(e,[s]){e[0].isLoggedIn?p&&(p.d(1),p=null):p?p.p(e,s):(p=Rx(e),p.c(),p.m(n,o)),e[2]?m?m.p(e,s):(m=Mx(e),m.c(),m.m(n,r)):m&&(m.d(1),m=null),!0===e[0].isLoggedIn?g||(g=Nx(e),g.c(),g.m(n,i)):g&&(g.d(1),g=null),2&s&&uh(l,"isOpen",e[1]),e[1]?h?(h.p(e,s),2&s&&Yh(h,1)):(h=Ox(e),h.c(),Yh(h,1),h.m(t,null)):h&&(h.d(1),h=null)},i(e){Yh(h)},o:wg,d(e){e&&Yg(t),p&&p.d(),m&&m.d(),g&&g.d(),h&&h.d(),d=!1,Sg(u)}}}function Bx(e,n,o){let r,i;const s=$h("deepl_settings");kg(e,s,(e=>o(0,i=e)));let a=!1;function l(){t({action:"dlRequestLogin"}),c()}function c(){o(1,a=!1)}function d(){t({action:"dlOpenInternalPage",payload:{destination:RT.settings_page}}),c()}function u(){t({action:"dlExternalURLRedirect",payload:{destination:nt(i,be.TRANSLATOR)?_v:fv,utmContent:"menu"}}),c()}return e.$$.update=()=>{1&e.$$.dirty&&o(2,r=i.isLoggedIn&&(!nt(i,be.TRANSLATOR)||!nt(i,be.WRITE)))},[i,a,r,s,function(){t({action:"dlRequestLogout"}),t({action:"dlTrackUiAction",payload:{uiAction:j}}),c()},l,function(){t({action:"dlExternalURLRedirect",payload:{destination:fv,utmContent:"menu"}}),c()},function(){t({action:"dlExternalURLRedirect",payload:{destination:pt()?kv:hv}}),c()},c,function(){t({action:"dlOpenInternalPage",payload:{destination:RT.developer_tools}}),c()},d,u,function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},()=>{l()},()=>{u()},()=>{d()},()=>{o(1,a=!a)}]}class Wx extends af{constructor(e){super(),sf(this,e,Bx,Ux,$g,{})}}function zx(e){let t,n;return{c(){t=Zg("div"),rh(t,"class",n=Ng(`deepl-shield-icon ${e[0]}`)+" svelte-16nk5mq"),rh(t,"style",e[2])},m(e,n){Vg(e,t,n)},p(e,o){1&o&&n!==(n=Ng(`deepl-shield-icon ${e[0]}`)+" svelte-16nk5mq")&&rh(t,"class",n)},i:wg,o:wg,d(e){e&&Yg(t)}}}function Fx(e){let t,n;return t=new T_({props:{tooltip:e[1],zIndex:"5",$$slots:{default:[Hx]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.tooltip=e[1]),257&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function Hx(e){let t,n;return{c(){t=Zg("div"),rh(t,"class",n=Ng(`deepl-shield-icon ${e[0]}`)+" svelte-16nk5mq"),rh(t,"style",e[2])},m(e,n){Vg(e,t,n)},p(e,o){1&o&&n!==(n=Ng(`deepl-shield-icon ${e[0]}`)+" svelte-16nk5mq")&&rh(t,"class",n)},d(e){e&&Yg(t)}}}function jx(e){let t,n,o,r;const i=[Fx,zx],s=[];function a(e,t){return e[1]?0:1}return t=a(e),n=s[t]=i[t](e),{c(){n.c(),o=eh()},m(e,n){s[t].m(e,n),Vg(e,o,n),r=!0},p(e,[r]){let l=t;t=a(e),t===l?s[t].p(e,r):(qh(),Kh(s[l],1,1,(()=>{s[l]=null})),Vh(),n=s[t],n?n.p(e,r):(n=s[t]=i[t](e),n.c()),Yh(n,1),n.m(o.parentNode,o))},i(e){r||(Yh(n),r=!0)},o(e){Kh(n),r=!1},d(e){e&&Yg(o),s[t].d(e)}}}function Gx(e,t,n){let o,{write:r=!1}=t,{translator:i=!1}=t,{size:s=20}=t,{marginStart:a=0}=t,{marginEnd:l=0}=t,{alternateColor:c}=t;const d=`height: ${s}px; width: ${s}px; margin-inline-start: ${a}px; margin-inline-end: ${l}px;`;return r?o=chrome.i18n.getMessage("tooltip_write_fully_encrypted"):i&&(o=chrome.i18n.getMessage("tooltip_translator_fully_encrypted")),e.$$set=e=>{"write"in e&&n(3,r=e.write),"translator"in e&&n(4,i=e.translator),"size"in e&&n(5,s=e.size),"marginStart"in e&&n(6,a=e.marginStart),"marginEnd"in e&&n(7,l=e.marginEnd),"alternateColor"in e&&n(0,c=e.alternateColor)},[c,o,d,r,i,s,a,l]}class qx extends af{constructor(e){super(),sf(this,e,Gx,jx,$g,{write:3,translator:4,size:5,marginStart:6,marginEnd:7,alternateColor:0})}}function Vx(e){let t;return{c(){t=Zg("div"),rh(t,"class","dl-logo svelte-1tthjxl")},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function Yx(e){let t,n,o;return{c(){t=Zg("button"),rh(t,"class","dl-logo dl-logo--clickable svelte-1tthjxl"),rh(t,"aria-label",chrome.i18n.getMessage("deepl_logo"))},m(r,i){Vg(r,t,i),n||(o=th(t,"click",e[13]),n=!0)},p:wg,d(e){e&&Yg(t),n=!1,o()}}}function Kx(e){let t,n,o=e[6]===ae.translate&&Zx(),r=e[6]===ae.write&&Xx();return{c(){o&&o.c(),t=Jg(),r&&r.c(),n=eh()},m(e,i){o&&o.m(e,i),Vg(e,t,i),r&&r.m(e,i),Vg(e,n,i)},p(e,i){e[6]===ae.translate?o?o.p(e,i):(o=Zx(),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),e[6]===ae.write?r?r.p(e,i):(r=Xx(),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(e){e&&(Yg(t),Yg(n)),o&&o.d(e),r&&r.d(e)}}}function Zx(e){let t;return{c(){t=Zg("span"),t.textContent=`${chrome.i18n.getMessage("layout_tab_translator")}`,rh(t,"class","translator-name svelte-1tthjxl")},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function Xx(e){let t;return{c(){t=Zg("span"),t.textContent=`${chrome.i18n.getMessage("layout_tab_write")}`,rh(t,"class","translator-name svelte-1tthjxl")},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function Qx(e){let t,n;return t=new qx({props:{size:24,write:e[6]===ae.write,translator:e[6]===ae.translate}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};64&n&&(o.write=e[6]===ae.write),64&n&&(o.translator=e[6]===ae.translate),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function Jx(e){let t,n,o,r;return o=new mb({props:{value:e[10].selectedTargetLanguage,websiteSettings:e[4],customClass:"dropdown__wrapper--header",fontSize:"sm"}}),o.$on("selection",e[17]),{c(){t=Zg("div"),n=Zg("div"),nf(o.$$.fragment),rh(n,"class","dl-actions-language-selector__dropdown svelte-1tthjxl"),rh(t,"class","dl-actions-language-selector svelte-1tthjxl")},m(e,i){Vg(e,t,i),jg(t,n),of(o,n,null),r=!0},p(e,t){const n={};1024&t&&(n.value=e[10].selectedTargetLanguage),16&t&&(n.websiteSettings=e[4]),o.$set(n)},i(e){r||(Yh(o.$$.fragment,e),r=!0)},o(e){Kh(o.$$.fragment,e),r=!1},d(e){e&&Yg(t),rf(o)}}}function e$(e){let t,n,o;return{c(){t=Zg("button"),rh(t,"class","dl-settings-icon svelte-1tthjxl"),rh(t,"data-qa","deepl-layour-header-settings-link")},m(r,i){Vg(r,t,i),n||(o=th(t,"click",e[14]),n=!0)},p:wg,d(e){e&&Yg(t),n=!1,o()}}}function t$(e){let t,n;return t=new Wx({}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function n$(e){let t,n,o;return{c(){t=Zg("button"),rh(t,"type","button"),rh(t,"class","dl-close-icon svelte-1tthjxl")},m(r,i){Vg(r,t,i),n||(o=th(t,"click",(function(){xg(e[0])&&e[0].apply(this,arguments)})),n=!0)},p(t,n){e=t},d(e){e&&Yg(t),n=!1,o()}}}function o$(e){let t,n,o,r,i,s,a,l,c,d,u,p,m;let g=function(e,t){return e[13]?Yx:Vx}(e),h=g(e),f=e[9]&&Kx(e),_=e[8]&&Qx(e),v=e[6]===ae.translate&&e[2]&&e[10]&&e[4]&&Jx(e),y=e[7]&&e$(e),w=e[1]&&t$(),b=e[0]&&n$(e);return{c(){t=Zg("div"),n=Zg("div"),h.c(),o=Jg(),f&&f.c(),r=Jg(),_&&_.c(),i=Jg(),s=Zg("div"),v&&v.c(),a=Jg(),y&&y.c(),l=Jg(),w&&w.c(),c=Jg(),b&&b.c(),rh(n,"class","logo-translator-name-container svelte-1tthjxl"),rh(s,"class","dl-actions svelte-1tthjxl"),rh(t,"class",d=Ng("dl-header "+(e[2]?"dl-header--with-lang-selector":""))+" svelte-1tthjxl")},m(d,g){Vg(d,t,g),jg(t,n),h.m(n,null),jg(n,o),f&&f.m(n,null),jg(n,r),_&&_.m(n,null),jg(t,i),jg(t,s),v&&v.m(s,null),jg(s,a),y&&y.m(s,null),jg(s,l),w&&w.m(s,null),jg(s,c),b&&b.m(s,null),u=!0,p||(m=th(t,"mousedown",oh(nh(e[16]))),p=!0)},p(e,[o]){h.p(e,o),e[9]?f?f.p(e,o):(f=Kx(e),f.c(),f.m(n,r)):f&&(f.d(1),f=null),e[8]?_?(_.p(e,o),256&o&&Yh(_,1)):(_=Qx(e),_.c(),Yh(_,1),_.m(n,null)):_&&(qh(),Kh(_,1,1,(()=>{_=null})),Vh()),e[6]===ae.translate&&e[2]&&e[10]&&e[4]?v?(v.p(e,o),1108&o&&Yh(v,1)):(v=Jx(e),v.c(),Yh(v,1),v.m(s,a)):v&&(qh(),Kh(v,1,1,(()=>{v=null})),Vh()),e[7]?y?y.p(e,o):(y=e$(e),y.c(),y.m(s,l)):y&&(y.d(1),y=null),e[1]?w?2&o&&Yh(w,1):(w=t$(),w.c(),Yh(w,1),w.m(s,c)):w&&(qh(),Kh(w,1,1,(()=>{w=null})),Vh()),e[0]?b?b.p(e,o):(b=n$(e),b.c(),b.m(s,null)):b&&(b.d(1),b=null),(!u||4&o&&d!==(d=Ng("dl-header "+(e[2]?"dl-header--with-lang-selector":""))+" svelte-1tthjxl"))&&rh(t,"class",d)},i(e){u||(Yh(_),Yh(v),Yh(w),u=!0)},o(e){Kh(_),Kh(v),Kh(w),u=!1},d(e){e&&Yg(t),h.d(),f&&f.d(),_&&_.d(),v&&v.d(),y&&y.d(),w&&w.d(),b&&b.d(),p=!1,m()}}}function r$(e,n,o){let r,i,s=wg,a=()=>(s(),s=Cg(f,(e=>o(18,r=e))),f),l=wg,c=()=>(l(),l=Cg(g,(e=>o(10,i=e))),g);e.$$.on_destroy.push((()=>s())),e.$$.on_destroy.push((()=>l()));let{closeWindow:u}=n,{showMenu:p=!1}=n,{showLangSelect:m=!1}=n,{settings:g}=n;c();let{websiteSettings:f}=n;a();let{extensionContext:_=0}=n,{platformBehaviour:v=re.default}=n,{textProcessingMode:y=ae.translate}=n,{showSettingsIcon:w=!0}=n,{showProStatus:b=!1}=n,{showServiceName:E=!1}=n;async function T(e){await g.set({selectedTargetLanguage:e.value,isTargetLanguageConfirmed:!0,regionalVariant:e.regionalVariant||""}),f.update({translationState:d.ongoingTranslation}),t({action:"dlRequestInlineTranslation",payload:{requests:[{text:r.originalSnippet}],domainName:window.location.hostname,trigger:h,sourceLang:"auto",websiteLanguage:r.websiteLanguage}}).then((e=>{f.update({translationState:d.none,translatedSnippet:e[0].text,snippetDetectedSourceLang:e[0].detected_source_language,websiteLanguage:e[0].detected_source_language})})).catch((e=>{f.update({translationState:d.none,translatedSnippet:"",snippetDetectedSourceLang:"",error:e.message?e.message:e})}))}async function S(e){await g.set({selectedTargetLanguage:e.value,isTargetLanguageConfirmed:!0,regionalVariant:e.regionalVariant||""});const t=document.getElementsByTagName("deepl-gdocs-icon")[0];t&&t.requestNewTranslation(e.value)}return e.$$set=e=>{"closeWindow"in e&&o(0,u=e.closeWindow),"showMenu"in e&&o(1,p=e.showMenu),"showLangSelect"in e&&o(2,m=e.showLangSelect),"settings"in e&&c(o(3,g=e.settings)),"websiteSettings"in e&&a(o(4,f=e.websiteSettings)),"extensionContext"in e&&o(15,_=e.extensionContext),"platformBehaviour"in e&&o(5,v=e.platformBehaviour),"textProcessingMode"in e&&o(6,y=e.textProcessingMode),"showSettingsIcon"in e&&o(7,w=e.showSettingsIcon),"showProStatus"in e&&o(8,b=e.showProStatus),"showServiceName"in e&&o(9,E=e.showServiceName)},[u,p,m,g,f,v,y,w,b,E,i,T,S,function(){let e=yv;t({action:"dlTrackLogoClickedEvent",payload:{extensionContext:_}}),y===ae.write&&(e=wv),t({action:"dlExternalURLRedirect",payload:{destination:e,utmContent:"gdocs_logo"}})},function(){t({action:"dlOpenInternalPage",payload:{destination:RT.settings_page}})},_,function(t){Ch.call(this,e,t)},e=>{switch(v){case re.gdocs:S(e.detail.selectedOption);break;case re.default:default:T(e.detail.selectedOption)}}]}class i$ extends af{constructor(e){super(),sf(this,e,r$,o$,$g,{closeWindow:0,showMenu:1,showLangSelect:2,settings:3,websiteSettings:4,extensionContext:15,platformBehaviour:5,textProcessingMode:6,showSettingsIcon:7,showProStatus:8,showServiceName:9})}}function s$(e){let t,n;return t=new i$({props:{websiteSettings:e[5],settings:e[4],showLangSelect:e[2],showMenu:e[1],closeWindow:e[0],extensionContext:e[6],platformBehaviour:e[7],textProcessingMode:e[8],showSettingsIcon:e[9],showProStatus:e[10],showServiceName:e[11]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};32&n&&(o.websiteSettings=e[5]),16&n&&(o.settings=e[4]),4&n&&(o.showLangSelect=e[2]),2&n&&(o.showMenu=e[1]),1&n&&(o.closeWindow=e[0]),64&n&&(o.extensionContext=e[6]),128&n&&(o.platformBehaviour=e[7]),256&n&&(o.textProcessingMode=e[8]),512&n&&(o.showSettingsIcon=e[9]),1024&n&&(o.showProStatus=e[10]),2048&n&&(o.showServiceName=e[11]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function a$(e){let t,n,o,r,i,s=e[3]&&s$(e);const a=e[14].default,l=Lg(a,e,e[13],null);return{c(){t=Zg("div"),s&&s.c(),n=Jg(),o=Zg("div"),l&&l.c(),rh(o,"class","dl-content svelte-jwy61a"),rh(t,"class",r=Ng(`dl-layout ${e[2]&&"dl-layout--with-lang-selector"}`)+" svelte-jwy61a"),rh(t,"translate","no"),rh(t,"dir",e[12])},m(e,r){Vg(e,t,r),s&&s.m(t,null),jg(t,n),jg(t,o),l&&l.m(o,null),i=!0},p(e,[o]){e[3]?s?(s.p(e,o),8&o&&Yh(s,1)):(s=s$(e),s.c(),Yh(s,1),s.m(t,n)):s&&(qh(),Kh(s,1,1,(()=>{s=null})),Vh()),l&&l.p&&(!i||8192&o)&&Rg(l,a,e,e[13],i?Ag(a,e[13],o,null):Mg(e[13]),null),(!i||4&o&&r!==(r=Ng(`dl-layout ${e[2]&&"dl-layout--with-lang-selector"}`)+" svelte-jwy61a"))&&rh(t,"class",r)},i(e){i||(Yh(s),Yh(l,e),i=!0)},o(e){Kh(s),Kh(l,e),i=!1},d(e){e&&Yg(t),s&&s.d(),l&&l.d(e)}}}function l$(e,t,n){let{$$slots:o={},$$scope:r}=t;const i=$h("text_direction");let{closeWindow:s}=t,{showMenu:a=!1}=t,{showLangSelect:l=!1}=t,{withHeader:c=!0}=t,{settings:d}=t,{websiteSettings:u}=t,{extensionContext:p}=t,{platformBehaviour:m=re.default}=t,{textProcessingMode:g=ae.translate}=t,{showSettingsIcon:h=!0}=t,{showProStatus:f=!1}=t,{showServiceName:_=!1}=t;return e.$$set=e=>{"closeWindow"in e&&n(0,s=e.closeWindow),"showMenu"in e&&n(1,a=e.showMenu),"showLangSelect"in e&&n(2,l=e.showLangSelect),"withHeader"in e&&n(3,c=e.withHeader),"settings"in e&&n(4,d=e.settings),"websiteSettings"in e&&n(5,u=e.websiteSettings),"extensionContext"in e&&n(6,p=e.extensionContext),"platformBehaviour"in e&&n(7,m=e.platformBehaviour),"textProcessingMode"in e&&n(8,g=e.textProcessingMode),"showSettingsIcon"in e&&n(9,h=e.showSettingsIcon),"showProStatus"in e&&n(10,f=e.showProStatus),"showServiceName"in e&&n(11,_=e.showServiceName),"$$scope"in e&&n(13,r=e.$$scope)},[s,a,l,c,d,u,p,m,g,h,f,_,i,r,o]}class c$ extends af{constructor(e){super(),sf(this,e,l$,a$,$g,{closeWindow:0,showMenu:1,showLangSelect:2,withHeader:3,settings:4,websiteSettings:5,extensionContext:6,platformBehaviour:7,textProcessingMode:8,showSettingsIcon:9,showProStatus:10,showServiceName:11})}}function d$(e){let t,n,o,r,i,s,a,l,c,d;return{c(){t=Zg("div"),n=Zg("input"),o=Jg(),r=Zg("div"),i=Jg(),s=Zg("label"),a=Qg(e[3]),rh(n,"id",e[1]),rh(n,"name",e[4]),rh(n,"type","radio"),n.checked=e[2],rh(n,"data-qa",e[6]),rh(n,"class","svelte-1jny8vu"),rh(r,"class","radio-icon svelte-1jny8vu"),rh(s,"for",e[1]),rh(s,"class","svelte-1jny8vu"),rh(t,"class",l=Ng(`radio ${e[5]} ${e[2]?"radio--checked":""}`)+" svelte-1jny8vu")},m(l,u){Vg(l,t,u),jg(t,n),sh(n,e[0]),jg(t,o),jg(t,r),jg(t,i),jg(t,s),jg(s,a),c||(d=[th(n,"change",e[10]),th(n,"change",e[8]),th(n,"mousedown",oh(nh(e[9]))),th(t,"click",e[7])],c=!0)},p(e,[o]){2&o&&rh(n,"id",e[1]),16&o&&rh(n,"name",e[4]),4&o&&(n.checked=e[2]),64&o&&rh(n,"data-qa",e[6]),1&o&&sh(n,e[0]),8&o&&ih(a,e[3]),2&o&&rh(s,"for",e[1]),36&o&&l!==(l=Ng(`radio ${e[5]} ${e[2]?"radio--checked":""}`)+" svelte-1jny8vu")&&rh(t,"class",l)},i:wg,o:wg,d(e){e&&Yg(t),c=!1,Sg(d)}}}function u$(e,t,n){let{id:o}=t,{checked:r=!1}=t,{label:i=""}=t,{value:s=""}=t,{name:a=""}=t,{cssClassName:l=""}=t,{dataQa:c="deepl-radio-button"}=t;return e.$$set=e=>{"id"in e&&n(1,o=e.id),"checked"in e&&n(2,r=e.checked),"label"in e&&n(3,i=e.label),"value"in e&&n(0,s=e.value),"name"in e&&n(4,a=e.name),"cssClassName"in e&&n(5,l=e.cssClassName),"dataQa"in e&&n(6,c=e.dataQa)},[s,o,r,i,a,l,c,function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(){s=this.value,n(0,s)}]}class p$ extends af{constructor(e){super(),sf(this,e,u$,d$,$g,{id:1,checked:2,label:3,value:0,name:4,cssClassName:5,dataQa:6})}}function m$(e){let t,n,o;return n=new c$({props:{withHeader:!1,$$slots:{default:[g$]},$$scope:{ctx:e}}}),{c(){t=Zg("div"),nf(n.$$.fragment)},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p(e,t){const o={};524297&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function g$(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w,b=chrome.i18n.getMessage("inline_translation_setting_button_ok")+"";return l=new p$({props:{name:"disable_inline_translation",id:q.disablePerSite,value:q.disablePerSite,cssClassName:"radio--with-border",checked:e[3]===q.disablePerSite,label:chrome.i18n.getMessage("inline_translation_setting_radio_disable_per_site"),dataQa:"disable-per-site-radio-button"}}),l.$on("change",e[7]),l.$on("click",e[12]),d=new p$({props:{name:"disable_inline_translation",id:q.disableEverywhere,value:q.disableEverywhere,cssClassName:"radio--with-border",checked:e[3]===q.disableEverywhere,label:chrome.i18n.getMessage("inline_translation_setting_radio_disable_everywhere"),dataQa:"disable-everywhere-radio-button"}}),d.$on("change",e[7]),d.$on("click",e[13]),{c(){t=Zg("div"),n=Zg("button"),o=Jg(),r=Zg("div"),i=Zg("p"),i.textContent=`${chrome.i18n.getMessage("inline_translation_setting_label_title_v2")}`,s=Jg(),a=Zg("div"),nf(l.$$.fragment),c=Jg(),nf(d.$$.fragment),u=Jg(),p=Zg("div"),m=Zg("span"),m.textContent=`${chrome.i18n.getMessage("inline_translation_setting_link_cancel")}`,g=Jg(),h=Zg("button"),f=Qg(b),rh(n,"type","button"),rh(n,"class","close-icon svelte-kj6lw"),rh(t,"class","header svelte-kj6lw"),rh(i,"class","font-bold svelte-kj6lw"),rh(a,"class","option-container svelte-kj6lw"),rh(m,"class","link svelte-kj6lw"),rh(m,"data-qa","close-settings-popup-link"),rh(h,"class",_=Ng("btn btn-primary "+(e[3]?"":"disabled"))+" svelte-kj6lw"),rh(h,"data-qa","save-settings-change-button"),rh(p,"class","action-container svelte-kj6lw"),rh(r,"class","dl-widget svelte-kj6lw")},m(_,b){Vg(_,t,b),jg(t,n),Vg(_,o,b),Vg(_,r,b),jg(r,i),jg(r,s),jg(r,a),of(l,a,null),jg(a,c),of(d,a,null),jg(r,u),jg(r,p),jg(p,m),jg(p,g),jg(p,h),jg(h,f),v=!0,y||(w=[th(n,"click",oh(nh((function(){xg(e[0])&&e[0].apply(this,arguments)})))),th(t,"mousedown",oh(nh(e[11]))),th(m,"click",(function(){xg(e[0])&&e[0].apply(this,arguments)})),th(h,"click",oh(nh(e[6]))),th(r,"mousedown",oh(nh(e[10])))],y=!0)},p(t,n){e=t;const o={};8&n&&(o.checked=e[3]===q.disablePerSite),l.$set(o);const r={};8&n&&(r.checked=e[3]===q.disableEverywhere),d.$set(r),(!v||8&n&&_!==(_=Ng("btn btn-primary "+(e[3]?"":"disabled"))+" svelte-kj6lw"))&&rh(h,"class",_)},i(e){v||(Yh(l.$$.fragment,e),Yh(d.$$.fragment,e),v=!0)},o(e){Kh(l.$$.fragment,e),Kh(d.$$.fragment,e),v=!1},d(e){e&&(Yg(t),Yg(o),Yg(r)),rf(l),rf(d),y=!1,Sg(w)}}}function h$(e){let t,n,o,r,i=e[4].enableInlineTranslation&&m$(e);return{c(){t=Zg("div"),i&&i.c(),rh(t,"class","tooltip-wrapper tooltip-wrapper--settings svelte-kj6lw"),rh(t,"data-qa","deepl-inline-settings-tooltip"),rh(t,"style",e[2]),rh(t,"dir",jt())},m(s,a){Vg(s,t,a),i&&i.m(t,null),e[14](t),n=!0,o||(r=[Dg(__.call(null,t,{isShadow:!0})),th(t,"click_outside",e[15])],o=!0)},p(e,[o]){e[4].enableInlineTranslation?i?(i.p(e,o),16&o&&Yh(i,1)):(i=m$(e),i.c(),Yh(i,1),i.m(t,null)):i&&(qh(),Kh(i,1,1,(()=>{i=null})),Vh()),(!n||4&o)&&rh(t,"style",e[2])},i(e){n||(Yh(i),n=!0)},o(e){Kh(i),n=!1},d(n){n&&Yg(t),i&&i.d(),e[14](null),o=!1,Sg(r)}}}function f$(e,n,o){let r;kg(e,df,(e=>o(4,r=e))),xh("text_direction",jt());let i,s,a,{closeTooltip:l}=n,{replaceElement:c}=n,d="visibility: hidden; opacity:0; height:0;",u="";function p(e){o(3,u=e)}Eh((()=>{setTimeout((()=>{o(2,d="")}),100),a=S_(i,(({clientHeight:e})=>{o(9,s=e)}))})),Th((()=>{a&&a()}));return e.$$set=e=>{"closeTooltip"in e&&o(0,l=e.closeTooltip),"replaceElement"in e&&o(8,c=e.replaceElement)},e.$$.update=()=>{768&e.$$.dirty&&c(s)},[l,i,d,u,r,p,function(){if(!u)return;switch(u){case q.disableEverywhere:df.set({enableInlineTranslation:!1}),t({action:"dlTrackSettingChanged",payload:{settingType:q.disableEverywhere,domainName:window.location.hostname,uiFunction:Y,uiLocation:B.inlineTranslationSettingPopup}});break;case q.disablePerSite:!function(){let e=r.blacklistDomainsForReading;e&&!e.includes(window.location.hostname)&&(e.push(window.location.hostname),df.set({blacklistDomainsForReading:e}),t({action:"dlTrackSettingChanged",payload:{settingType:q.disablePerSite,domainName:window.location.hostname,uiFunction:Y,uiLocation:B.inlineTranslationSettingPopup}}))}()}let e=mT(window.location.hostname,["www."]);l(),t({action:"dlSendNotification",payload:{type:P.inlineTranslation,options:{theme:U.green_theme,currentDomain:e,saveAction:u,settingsPageURL:RT.settings_reading}}})},function(e){o(3,u=e.currentTarget.value)},c,s,function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},()=>p(q.disablePerSite),()=>p(q.disableEverywhere),function(e){Lh[e?"unshift":"push"]((()=>{i=e,o(1,i)}))},()=>l()]}class _$ extends af{constructor(e){super(),sf(this,e,f$,h$,$g,{closeTooltip:0,replaceElement:8})}}class v${static HTML_TAG_NAME="deepl-inline-translate-settings-tooltip";static createElement=(e=document)=>{const t=e.createElement(v$.HTML_TAG_NAME),n=new v$(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=(e,t)=>{const{deepl_inline_ui:n}=D;this.domElement.shadowContainer&&this.domElement.shadowContainer.childElementCount>0&&this.cleanupDOM();const o=300;this.domElement.shadowContainer.appendChild(this.domElement.container);const r=e?.top,i=window.innerHeight-(e?.bottom||0);let s="position: absolute; top: 0px; left: 0px; width: 100%; z-index: "+(n.z_index-100),a=`position: absolute; top: 0px; left: 0px; z-index: ${n.z_index-100};`,l=e.y,c=e.x;this.domElement.shadowContainer.style.cssText=s,this.domElement.container.style.cssText=a,this.domElement.mainComponent=new _$({target:this.domElement.container,props:{closeTooltip:t,replaceElement:t=>{const d=r>o;i>o?l=e.y+8:d&&(l=e.y-30-t-4),i<o&&r<o&&(s=`position: fixed; top:50%; left:50%; transform:translate(-50%,-50%); z-index: ${n.z_index-100}; max-height:90vh;`,a=`z-index: ${n.z_index-100};`,c=0,l=0),e.right<260?c=e.left-260+60:e.left<260&&(c=e.left),this.domElement.container.style.top=`${parseInt(l)}px`,this.domElement.container.style.left=`${parseInt(c)}px`}}})};cleanupDOM=()=>{this.domElement.container.remove(),this.domElement.shadowContainer.remove(),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}const y$=e=>({top:e?.selectedTop,bottom:window.innerHeight-e?.selectedBottom,right:e?.selectedRight,left:e?.selectedLeft}),w$=e=>{const{coords:t,clientHeight:n}=e,o=y$(t),r={top:{position:t.y-t.height,isPossible:o.top>=0},bottom:{position:t.y-n,isPossible:o.bottom>=0},middle:{position:window.pageYOffset+window.innerHeight/2-n/2,isPossible:!0}};for(const e of Object.values(r))if(e.isPossible)return e.position},b$=({coords:e,TOOLTIP_WIDTH:t})=>{const n={right:{position:e.x,isPossible:e.x+t<=window.innerWidth},left:{position:e.x+e.selectedWidth-t,isPossible:e.x+e.selectedWidth-t>=0},middle:{position:window.innerWidth/2-t/2,isPossible:!0}};for(const e of Object.values(n))if(e.isPossible)return e.position},E$=(e,t,n)=>{const{coords:o,clientHeight:r,style:i,TOOLTIP_WIDTH:s,TRIGGER_MENU_ICON_HEIGHT:a}=t;switch(e){case"top":i.top=o.y-o.height-r-2-a-n.y+"px",i.left=b$(t)-n.x+"px";break;case"bottom":i.top=o.y+2+a-n.y+"px",i.left=b$(t)-n.x+"px";break;case"left":i.top=w$(t)-n.y+"px",i.left=o.x-s-2-n.x+"px";break;case"right":i.top=w$(t)-n.y+"px",i.left=o.x+o.selectedWidth+2-n.x+"px";break;default:i.top=window.pageYOffset+window.innerHeight/2-r/2-n.y+"px",i.left=window.innerWidth/2-s/2-n.x+"px"}},T$=(e,t,n)=>{const{coords:o,clientHeight:r,TOOLTIP_WIDTH:i,style:s}=t;switch(s.left=o.x-i-10-n.x+"px",e){case"top":s.top=o.y-r-n.y+"px";break;case"bottom":s.top=o.y-o.height-n.y+"px";break;default:s.top=window.pageYOffset+window.innerHeight/2-r/2-n.y+"px"}},S$=(e,t)=>{const n=x$(t);switch(e){case"top":case"bottom":case"left":case"right":return n[e];default:return!0}},x$=e=>{const{TOOLTIP_WIDTH:t,clientHeight:n,coords:o}=e,r=y$(o);return{left:r.left>t,right:r.right>t,bottom:r.bottom>n,top:r.top>n}},$$=e=>{const t=["bottom","top","left","right","middle"];return t.sort(((t,n)=>t===e?-1:n===e?1:0)),[t,["bottom","top","middle"]]};function C$(e){return e.preventDefault(),!1}function k$(e,n){e.dataTransfer.setData("text/html","");let o=e.target.getBoundingClientRect(),r={x:0,y:0};const i=e.clientX-o.left,s=e.clientY-o.top;return i>0&&(r.x=i),s>0&&(r.y=s),function(e){try{t({action:"dlTrackInlineDragStart",payload:{nicheIntegration:e}})}catch(e){console.error(e)}}(n),{dragElementRect:o,dragOffset:r}}function L$({dropEvent:e,document:t,dragConfig:n}){if(e.preventDefault(),0===e.y||0===e.x)return null;const{dragOffset:o,dragElementRect:r,dragBarWidth:i}=n,s=t.body.getBoundingClientRect();let a;return a=e.pageX-o.x>s.width-r.width?s.width-r.width-i>0?s.width-r.width-i:0:e.pageX-o.x,{x:a,y:e.pageY-o.y}}function I$(e){return e&&function(e){return e.replace(/./gm,(function(e){return e.match(/[a-z0-9\s]+/i)?e:"&#"+e.charCodeAt(0)+";"}))}(e).replaceAll("\n","<br />")}function A$(e){let t,n,o;return{c(){t=Zg("button"),t.innerHTML='<span class="dl-icon dl-icon-copy svelte-sfmd6f"></span>',rh(t,"type","button"),rh(t,"class","dl-btn svelte-sfmd6f"),rh(t,"data-qa","dl-toolbar-copy-button"),uh(t,"dl-btn-active",e[0])},m(r,i){Vg(r,t,i),n||(o=[th(t,"click",e[1]),th(t,"mouseleave",e[2])],n=!0)},p(e,n){1&n&&uh(t,"dl-btn-active",e[0])},d(e){e&&Yg(t),n=!1,Sg(o)}}}function R$(e){let t,n;return t=new T_({props:{zIndex:300,tooltip:chrome.i18n.getMessage(e[0]?"ui_inline_translation_copied":"ui_inline_translation_copy"),$$slots:{default:[A$]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,[n]){const o={};1&n&&(o.tooltip=chrome.i18n.getMessage(e[0]?"ui_inline_translation_copied":"ui_inline_translation_copy")),129&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function M$(e,n,o){let{text:r}=n,{targetLang:i}=n,{platformBehaviour:s=re.default}=n,a=!1;return e.$$set=e=>{"text"in e&&o(3,r=e.text),"targetLang"in e&&o(4,i=e.targetLang),"platformBehaviour"in e&&o(5,s=e.platformBehaviour)},[a,function(){navigator.clipboard.writeText(r).then((function(){o(0,a=!0)}),(function(e){console.error(e)})),function(e){try{t({action:"dlTrackInlineCopy",payload:e})}catch(e){console.error(e)}}({targetLang:i,targetLength:r.length,nicheIntegration:s})},function(){setTimeout((()=>{o(0,a=!1)}),300)},r,i,s]}class N$ extends af{constructor(e){super(),sf(this,e,M$,R$,$g,{text:3,targetLang:4,platformBehaviour:5})}}function O$(e){let t,n,o,r,i,s,a,l,c;return{c(){t=Zg("div"),n=Zg("button"),n.textContent=`${chrome.i18n.getMessage("ui_inline_translation_listen_to_translation")}`,o=Jg(),r=Zg("button"),r.textContent=`${chrome.i18n.getMessage("ui_inline_translation_listen_to_original")}`,rh(n,"class","list-entry svelte-o3etn3"),rh(n,"data-qa","dl-toolbar-listener-button-target-lang"),uh(n,"dl-entry-notAvailable",!e[0]),rh(r,"class","list-entry svelte-o3etn3"),rh(r,"data-qa","dl-toolbar-listener-button-source-lang"),uh(r,"dl-entry-notAvailable",!e[1]),rh(t,"class","listen-list svelte-o3etn3"),rh(t,"data-qa","dl-toolbar-listener-element-langs")},m(i,s){Vg(i,t,s),jg(t,n),jg(t,o),jg(t,r),a=!0,l||(c=[th(n,"click",(function(){xg(e[2])&&e[2].apply(this,arguments)})),th(r,"click",(function(){xg(e[3])&&e[3].apply(this,arguments)}))],l=!0)},p(t,[o]){e=t,(!a||1&o)&&uh(n,"dl-entry-notAvailable",!e[0]),(!a||2&o)&&uh(r,"dl-entry-notAvailable",!e[1])},i(e){a||(Oh((()=>{a&&(s&&s.end(1),i=Xh(t,Ff,{y:-5,duration:500}),i.start())})),a=!0)},o(e){i&&i.invalidate(),s=Qh(t,Ff,{y:-5,duration:500}),a=!1},d(e){e&&Yg(t),e&&s&&s.end(),l=!1,Sg(c)}}}function D$(e,t,n){let{isAvailableSelectedTargetLang:o}=t,{isAvailableSourceLang:r}=t,{onTargetListen:i=(()=>{})}=t,{onSourceListen:s=(()=>{})}=t;return e.$$set=e=>{"isAvailableSelectedTargetLang"in e&&n(0,o=e.isAvailableSelectedTargetLang),"isAvailableSourceLang"in e&&n(1,r=e.isAvailableSourceLang),"onTargetListen"in e&&n(2,i=e.onTargetListen),"onSourceListen"in e&&n(3,s=e.onSourceListen)},[o,r,i,s]}class P$ extends af{constructor(e){super(),sf(this,e,D$,O$,$g,{isAvailableSelectedTargetLang:0,isAvailableSourceLang:1,onTargetListen:2,onSourceListen:3})}}function U$(e){let t,n,o,r,i;return n=new T_({props:{tooltip:e[8],zIndex:300,$$slots:{default:[W$]},$$scope:{ctx:e}}}),{c(){t=Zg("fragment"),nf(n.$$.fragment),rh(t,"role","navigation")},m(s,a){Vg(s,t,a),of(n,t,null),o=!0,r||(i=[th(t,"mouseover",e[11]),th(t,"focus",e[11]),th(t,"mouseleave",e[15])],r=!0)},p(e,t){const o={};256&t&&(o.tooltip=e[8]),1048831&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n),r=!1,Sg(i)}}}function B$(e){let t,n;return t=new P$({props:{isAvailableSelectedTargetLang:e[6],isAvailableSourceLang:e[7],onTargetListen:e[13],onSourceListen:e[14]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};64&n&&(o.isAvailableSelectedTargetLang=e[6]),128&n&&(o.isAvailableSourceLang=e[7]),10&n&&(o.onTargetListen=e[13]),5&n&&(o.onSourceListen=e[14]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function W$(e){let t,n,o,r,i,s,a=e[5]&&B$(e);return{c(){t=Zg("button"),t.innerHTML='<span class="dl-icon dl-icon-listen svelte-17suwwx"></span>',n=Jg(),a&&a.c(),o=eh(),rh(t,"type","button"),rh(t,"class","dl-btn svelte-17suwwx"),rh(t,"data-qa","dl-toolbar-listener-button"),uh(t,"dl-btn-active",e[4]),uh(t,"dl-btn-hovered",e[5])},m(l,c){Vg(l,t,c),Vg(l,n,c),a&&a.m(l,c),Vg(l,o,c),r=!0,i||(s=th(t,"click",e[10]),i=!0)},p(e,n){(!r||16&n)&&uh(t,"dl-btn-active",e[4]),(!r||32&n)&&uh(t,"dl-btn-hovered",e[5]),e[5]?a?(a.p(e,n),32&n&&Yh(a,1)):(a=B$(e),a.c(),Yh(a,1),a.m(o.parentNode,o)):a&&(qh(),Kh(a,1,1,(()=>{a=null})),Vh())},i(e){r||(Yh(a),r=!0)},o(e){Kh(a),r=!1},d(e){e&&(Yg(t),Yg(n),Yg(o)),a&&a.d(e),i=!1,s()}}}function z$(e){let t,n,o=(e[6]||e[7])&&U$(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,[n]){e[6]||e[7]?o?(o.p(e,n),192&n&&Yh(o,1)):(o=U$(e),o.c(),Yh(o,1),o.m(t.parentNode,t)):o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh())},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function F$(e,n,o){let r,{platformBehaviour:i=re.default}=n,{sourceLang:s=""}=n,{targetLang:a=""}=n,{sourceText:l=""}=n,{targetText:c=""}=n,d=!1,u=!1,p=!1,m=!1;function g(){t({action:"dlStopSpeech"}),o(4,r=void 0)}function h(e,n){const o=n===se,r={targetLang:o?a:s,targetLength:o?c.length:l.length,actionType:e,nicheIntegration:i,textKind:n,context:ae.translate};try{t({action:"dlTrackInlineListen",payload:r})}catch(e){console.error(e)}}async function f(e,n,i){r||(t({action:"dlTextToSpeech",payload:{text:e,lang:n}}),o(4,r=i),h(K,i),o(5,p=!1))}async function _(e,t,n){if("dlVoiceOverStopped"===e.action)o(4,r=void 0),n();return!0}function v(e){try{t({action:"dlTrackVoiceOverStops",payload:e})}catch(e){console.error(e)}}chrome.runtime.onMessage.addListener(_),Th((()=>{if(r){const e=r===se;v({targetLang:e?a:s,targetLength:e?c.length:l.length,triggerType:A,nicheIntegration:i,textKind:r,context:ae.translate})}g(),chrome.runtime.onMessage.removeListener(_)}));return e.$$set=e=>{"platformBehaviour"in e&&o(12,i=e.platformBehaviour),"sourceLang"in e&&o(0,s=e.sourceLang),"targetLang"in e&&o(1,a=e.targetLang),"sourceText"in e&&o(2,l=e.sourceText),"targetText"in e&&o(3,c=e.targetText)},e.$$.update=()=>{51&e.$$.dirty&&(a&&t({action:"dlGetSupportedVoices"}).then((e=>{o(6,d=e.includes(["EN-US","EN-GB"].includes(a)?"EN":["PT-PT","PT-BR"].includes(a)?"PT":["ZH-CN","ZH-HANT"].includes(a)?"ZH":a)),o(7,u=e.includes(s))})),!p&&r?setTimeout((()=>{o(8,m=chrome.i18n.getMessage("ui_inline_translation_listen_stop"))}),1e3):o(8,m=!1))},[s,a,l,c,r,p,d,u,m,f,function(){if(r){const e=r;g();const t=e===se;o(4,r=void 0),v({targetLang:t?a:s,targetLength:t?c.length:l.length,triggerType:I,nicheIntegration:i,textKind:e,context:ae.translate}),h(Z,e)}else o(5,p=!0)},function(){r||o(5,p=!0)},i,()=>f(c,a,se),()=>f(l,s,ie),()=>o(5,p=!1)]}class H$ extends af{constructor(e){super(),sf(this,e,F$,z$,$g,{platformBehaviour:12,sourceLang:0,targetLang:1,sourceText:2,targetText:3})}}function j$(e){let t,n,o,r;return{c(){t=Zg("button"),rh(t,"type","button"),rh(t,"class","dl-replace-button svelte-9vlams"),t.disabled=n=e[3]||!e[2]||e[4]},m(n,i){Vg(n,t,i),o||(r=th(t,"click",oh(nh(e[5]))),o=!0)},p(e,o){12&o&&n!==(n=e[3]||!e[2]||e[4])&&(t.disabled=n)},d(e){e&&Yg(t),o=!1,r()}}}function G$(e){let t,n;return t=new T_({props:{tooltip:chrome.i18n.getMessage("ui_gdocs_replace_cta"),multiline:!0,zIndex:"0",isEnabled:!e[3]&&e[2]&&!e[4],$$slots:{default:[j$]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,[n]){const o={};12&n&&(o.isEnabled=!e[3]&&e[2]&&!e[4]),524&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function q$(e,n,o){let r,i,s=wg,a=()=>(s(),s=Cg(u,(e=>o(7,r=e))),u),l=wg,c=()=>(l(),l=Cg(p,(e=>o(8,i=e))),p);e.$$.on_destroy.push((()=>s())),e.$$.on_destroy.push((()=>l()));let{websiteSettings:u}=n;a();let{settings:p}=n;c();let m,{onClose:g}=n,h=!1,f=r.translationState===d.anonymousUserMaxCharExceeded;return Eh((()=>{o(2,m=Tt())})),e.$$set=e=>{"websiteSettings"in e&&a(o(0,u=e.websiteSettings)),"settings"in e&&c(o(1,p=e.settings)),"onClose"in e&&o(6,g=e.onClose)},[u,p,m,h,f,function(){const e=wt().text;o(3,h=!0);const n=document.querySelector("deepl-gdocs-icon");n&&(n.applyReplacement(),g(),t({action:"dlTrackGDocsReplaceText",payload:{sourceLang:r.websiteLanguage,targetLang:i.selectedTargetLanguage,sourceLength:e.length,targetLength:r.translatedSnippet.length}}))},g]}class V$ extends af{constructor(e){super(),sf(this,e,q$,G$,$g,{websiteSettings:0,settings:1,onClose:6})}}function Y$(e){let t,n,o=ft(e[4])+"";return{c(){t=Zg("div"),n=Zg("div"),rh(t,"class","tooltip-linguee svelte-166oozy")},m(e,r){Vg(e,t,r),jg(t,n),n.innerHTML=o},p(e,t){16&t&&o!==(o=ft(e[4])+"")&&(n.innerHTML=o)},d(e){e&&Yg(t)}}}function K$(e){let t,n;return t=new V$({props:{websiteSettings:e[0],settings:df,onClose:e[5]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.websiteSettings=e[0]),32&n&&(o.onClose=e[5]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function Z$(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w,b,E,T,S,x,$=e[4]&&Y$(e);y=new H$({props:{sourceLang:e[7].websiteLanguage,targetLang:e[8].selectedTargetLanguage,sourceText:e[7].originalSnippet,targetText:e[7].translatedSnippet,platformBehaviour:e[6]}}),b=new N$({props:{targetLang:e[8].selectedTargetLanguage,text:e[7].translatedSnippet,platformBehaviour:e[6]}});let C=e[6]===re.gdocs&&K$(e);return{c(){t=Zg("div"),n=Zg("div"),o=Zg("button"),r=Zg("span"),r.textContent=`${chrome.i18n.getMessage("ui_inline_translation_see_alternatives_v2")}`,i=Jg(),s=Zg("span"),a=Jg(),l=Zg("fragment"),c=Zg("div"),d=Zg("div"),d.textContent=`${chrome.i18n.getMessage("ui_inline_translation_dictionary")}`,u=Jg(),p=Zg("div"),m=Jg(),g=Zg("div"),f=Jg(),$&&$.c(),_=Jg(),v=Zg("div"),nf(y.$$.fragment),w=Jg(),nf(b.$$.fragment),E=Jg(),C&&C.c(),rh(s,"class","icon icon-external-link svelte-166oozy"),rh(o,"type","button"),rh(o,"class","link svelte-166oozy"),rh(n,"class","dl-link-container"),rh(d,"class","dict-text svelte-166oozy"),rh(p,"class","img_book svelte-166oozy"),uh(p,"shown-dict",e[2]),rh(g,"class","img_arrow svelte-166oozy"),uh(g,"shown-dict",e[2]),rh(c,"class",h="dl-dictionary "+(e[3]?"":"disable")+" "+(e[2]?"shown-dict":"")+" svelte-166oozy"),rh(c,"data-qa","dl-toolbar-dictionary-button"),ah(l,"position","relative"),rh(v,"class","dl-btn-group svelte-166oozy"),rh(t,"class","dl-toolbar svelte-166oozy")},m(h,k){Vg(h,t,k),jg(t,n),jg(n,o),jg(o,r),jg(o,i),jg(o,s),jg(t,a),jg(t,l),jg(l,c),jg(c,d),jg(c,u),jg(c,p),jg(c,m),jg(c,g),jg(l,f),$&&$.m(l,null),jg(t,_),jg(t,v),of(y,v,null),jg(v,w),of(b,v,null),jg(v,E),C&&C.m(v,null),T=!0,S||(x=[th(o,"click",e[9]),th(c,"click",(function(){xg(e[1])&&e[1].apply(this,arguments)})),th(c,"mouseenter",e[10])],S=!0)},p(t,[n]){e=t,(!T||4&n)&&uh(p,"shown-dict",e[2]),(!T||4&n)&&uh(g,"shown-dict",e[2]),(!T||12&n&&h!==(h="dl-dictionary "+(e[3]?"":"disable")+" "+(e[2]?"shown-dict":"")+" svelte-166oozy"))&&rh(c,"class",h),e[4]?$?$.p(e,n):($=Y$(e),$.c(),$.m(l,null)):$&&($.d(1),$=null);const o={};128&n&&(o.sourceLang=e[7].websiteLanguage),256&n&&(o.targetLang=e[8].selectedTargetLanguage),128&n&&(o.sourceText=e[7].originalSnippet),128&n&&(o.targetText=e[7].translatedSnippet),64&n&&(o.platformBehaviour=e[6]),y.$set(o);const r={};256&n&&(r.targetLang=e[8].selectedTargetLanguage),128&n&&(r.text=e[7].translatedSnippet),64&n&&(r.platformBehaviour=e[6]),b.$set(r),e[6]===re.gdocs?C?(C.p(e,n),64&n&&Yh(C,1)):(C=K$(e),C.c(),Yh(C,1),C.m(v,null)):C&&(qh(),Kh(C,1,1,(()=>{C=null})),Vh())},i(e){T||(Yh(y.$$.fragment,e),Yh(b.$$.fragment,e),Yh(C),T=!0)},o(e){Kh(y.$$.fragment,e),Kh(b.$$.fragment,e),Kh(C),T=!1},d(e){e&&Yg(t),$&&$.d(),rf(y),rf(b),C&&C.d(),S=!1,Sg(x)}}}function X$(e,n,o){let r,i,s=wg,a=()=>(s(),s=Cg(l,(e=>o(7,r=e))),l);kg(e,df,(e=>o(8,i=e))),e.$$.on_destroy.push((()=>s()));let{websiteSettings:l}=n;a();let{switchVisibilityDictionary:c}=n,{showDictionary:d=!1}=n,{enableDictionaryButton:u}=n,{dictionaryButtonError:p}=n,{onClose:m}=n,{platformBehaviour:g=re.default}=n;return e.$$set=e=>{"websiteSettings"in e&&a(o(0,l=e.websiteSettings)),"switchVisibilityDictionary"in e&&o(1,c=e.switchVisibilityDictionary),"showDictionary"in e&&o(2,d=e.showDictionary),"enableDictionaryButton"in e&&o(3,u=e.enableDictionaryButton),"dictionaryButtonError"in e&&o(4,p=e.dictionaryButtonError),"onClose"in e&&o(5,m=e.onClose),"platformBehaviour"in e&&o(6,g=e.platformBehaviour)},[l,c,d,u,p,m,g,r,i,function(){const e={};r&&i&&(e.sourceLang=r.websiteLanguage,e.targetLang=i.selectedTargetLanguage,e.textToShare=r.originalSnippet),t({action:"dlExternalURLRedirect",payload:{destination:vv,...e}});try{t({action:"dlTrackUiAction",payload:{uiAction:F,nicheIntegration:g}})}catch(e){console.error(e)}},function(){if(!u)try{t({action:"dlTrackDisabledDictionaryHover",payload:{}})}catch(e){console.log(e)}}]}class Q$ extends af{constructor(e){super(),sf(this,e,X$,Z$,$g,{websiteSettings:0,switchVisibilityDictionary:1,showDictionary:2,enableDictionaryButton:3,dictionaryButtonError:4,onClose:5,platformBehaviour:6})}}function J$(e){let t,n,o,r,i,s;return{c(){t=Zg("div"),n=Zg("button"),n.textContent=`${chrome.i18n.getMessage("ui_gdocs_write_accept")}`,o=Jg(),r=Zg("button"),r.textContent=`${chrome.i18n.getMessage("ui_gdocs_write_cancel")}`,rh(n,"class","btn-primary svelte-1ou9pye"),rh(r,"class","btn-secondary svelte-1ou9pye"),rh(t,"class","dl-toolbar svelte-1ou9pye")},m(a,l){Vg(a,t,l),jg(t,n),jg(t,o),jg(t,r),i||(s=[th(n,"click",e[0]),th(r,"click",e[1])],i=!0)},p:wg,i:wg,o:wg,d(e){e&&Yg(t),i=!1,Sg(s)}}}function eC(e,t,n){let{onClose:o}=t;return e.$$set=e=>{"onClose"in e&&n(2,o=e.onClose)},[()=>{const e=document.getElementsByTagName("deepl-gdocs-icon")[0];e&&(e.applyReplacement(),e.trackDeeplWriteInsertCopy()),o()},()=>{const e=document.getElementsByTagName("deepl-gdocs-icon")[0];e&&e.trackDeeplWriteDiscardCopy(),o()},o]}class tC extends af{constructor(e){super(),sf(this,e,eC,J$,$g,{onClose:2})}}function nC(e){let t,n,o,r,i,s=JSON.stringify(e[1](),void 0,2)+"";return{c(){t=Zg("p"),n=Qg(e[0]),o=Jg(),r=Zg("pre"),i=Qg(s),rh(r,"class","debug-settings svelte-mu7va1")},m(e,s){Vg(e,t,s),jg(t,n),Vg(e,o,s),Vg(e,r,s),jg(r,i)},p(e,[t]){1&t&&ih(n,e[0]),2&t&&s!==(s=JSON.stringify(e[1](),void 0,2)+"")&&ih(i,s)},i:wg,o:wg,d(e){e&&(Yg(t),Yg(o),Yg(r))}}}function oC(e,t,n){let{headline:o="JSON block"}=t,{jsonData:r=(()=>{})}=t;return e.$$set=e=>{"headline"in e&&n(0,o=e.headline),"jsonData"in e&&n(1,r=e.jsonData)},[o,r]}class rC extends af{constructor(e){super(),sf(this,e,oC,nC,$g,{headline:0,jsonData:1})}}const iC=new Set(["BG","CS","DA","DE","EL","EN","ES","ET","FI","FR","FR_CA","HU","IT","JA","KO","LT","LV","MT","NL","PL","PT","PT_BR","PT_PT","RO","RU","SK","SL","SV","ZH"]),sC=new Map([["ZH_EN","chinese-english"],["EN_ZH","english-chinese"],["NL_EN","dutch-english"],["EN_NL","english-dutch"],["FR_EN","french-english"],["EN_FR","english-french"],["FR_DE","french-german"],["DE_FR","german-french"],["FR_PT","french-portuguese"],["PT_FR","portuguese-french"],["FR_ES","french-spanish"],["ES_FR","spanish-french"],["DE_EN","german-english"],["EN_DE","english-german"],["DE_PT","german-portuguese"],["PT_DE","portuguese-german"],["DE_ES","german-spanish"],["ES_DE","spanish-german"],["IT_EN","italian-english"],["EN_IT","english-italian"],["JA_EN","japanese-english"],["EN_JA","english-japanese"],["PL_EN","polish-english"],["EN_PL","english-polish"],["PT_EN","portuguese-english"],["EN_PT","english-portuguese"],["PT_ES","portuguese-spanish"],["ES_PT","spanish-portuguese"],["RU_EN","russian-english"],["EN_RU","english-russian"],["ES_EN","spanish-english"],["EN_ES","english-spanish"]]);function aC(e,t){return["EN-GB","EN-US"].includes(e)&&(e="EN"),["EN-GB","EN-US"].includes(t)&&(t="EN"),["PT-PT","PT-BR"].includes(e)&&(e="PT"),["PT-PT","PT-BR"].includes(t)&&(t="PT"),["ZH-CN","ZH-HANT"].includes(e)&&(e="ZH"),["ZH-CN","ZH-HANT"].includes(t)&&(t="ZH"),function(e,t){const n=`${e.toUpperCase()}_${t.toUpperCase()}`;return sC.get(n)}(e,t)}async function lC(e){let{interfaceLang:n,sourceLang:o,targetLang:r,text:i}=e;var s;n&&(s=n,iC.has(s.toUpperCase()))||(n="EN"),n=n.substring(0,2).toUpperCase(),await(Nh(),Rh);try{return await t({action:"dlGetDictionary",payload:{interfaceLang:n,sourceLang:o,targetLang:r,text:i}})}catch(e){throw t({action:"dlTrackLingueeErrorData",payload:{lingueeError:e.error}}),e}}function cC(e){let t,n,o,r,i=ft(e[0])+"";return{c(){t=Zg("div"),n=Zg("style"),n.textContent='.lmt__dict {\n  background-color: white;\n  text-align: start;\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  position: relative;\n  font-weight: 400;\n  font-family: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n  padding: 0 24px;\n  border: 0;\n  width: 100%;\n  font-size: 14px;\n}\n.lmt__dict #dictionary .dict_headline_for_0 {\n  display: none;\n}\n.lmt__dict #dictionary .dict_headline_for_1 {\n  display: none;\n}\n.lmt__dict h1 {\n  font-family: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n  font-style: normal;\n  font-weight: normal;\n  line-height: 1.1;\n  font-size: 15px;\n}\n.lmt__dict h1.didyoumean {\n  display: none;\n}\n.lmt__dict #spelling_message_pane {\n  display: none;\n}\n.lmt__dict a {\n  text-decoration: none;\n  pointer-events: none;\n  font-family: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n  color: #333;\n}\n.lmt__dict.lmt--hidden {\n  display: none;\n}\n.lmt__dict .semantic_field,\n.lmt__dict .sem,\n.lmt__dict .othertempora {\n  font-style: italic;\n  color: #999;\n  position: relative;\n  font-size: 12px;\n}\n.lmt__dict noindex:-o-prefocus,\n.lmt__dict .semantic_field,\n.lmt__dict .sem {\n  position: static;\n  z-index: 1;\n}\n.lmt__dict .placeholder {\n  font-size: smaller;\n}\n.lmt__dict #dictionary,\n.lmt__dict .dictionary {\n  font-weight: 400;\n  font-style: italic;\n  font-size: 15px;\n  color: #999;\n  line-height: 1.35em;\n  position: relative;\n}\n.lmt__dict #dictionary .inexact {\n  font-weight: 400;\n  font-style: italic;\n  font-size: 13px;\n  color: #999;\n  margin-top: 18px;\n}\n.lmt__dict .lemma {\n  vertical-align: top;\n  margin: 10px 0 25px 0;\n}\n.lmt__dict .lemma.last {\n  background: none;\n}\n.lmt__dict .lemma_desc {\n  padding: 0 0 10px 0;\n}\n.lmt__dict #dictionary h2.lemma_desc {\n  margin: 0px;\n}\n.lmt__dict .lemma_content {\n  padding: 0 0 0 0;\n  position: relative;\n  margin-bottom: 8px;\n}\n.lmt__dict .translation_group {\n  position: relative;\n  padding-top: 8px;\n}\n.lmt__dict .lemma_content .translation_group_line.with_pie {\n  padding-inline-start: 18px;\n  text-indent: -18px;\n}\n.lmt__dict .exact .translation.featured {\n  margin-bottom: 8px;\n  clear: both;\n}\n.lmt__dict .translation_desc {\n  padding: 2px 0 0 0;\n  display: inline-block;\n}\n.lmt__dict h3.translation_desc {\n  margin: 0;\n  font-weight: 400;\n}\n.lmt__dict #dictionary h3.translation_desc {\n  margin-bottom: 0;\n}\n.lmt__dict .group_line .translation_desc {\n  text-indent: 0;\n  display: inline;\n  padding: 2px 10px 1px 0;\n  padding-inline-start: 0;\n}\n.lmt__dict .comment {\n  margin: 15px 0 15px 0;\n  padding: 0 0 0 10px;\n}\n.lmt__dict .lemma_content {\n  padding-inline-start: 40px;\n}\n.lmt__dict .meaninggroup_description_inner {\n  margin-inline-start: -20px;\n  width: 20px;\n  display: inline-block;\n}\n.lmt__dict .meaninggroup_descriptions {\n  margin-inline-start: -20px;\n  display: inline-block;\n}\n.lmt__dict .tag_t {\n  color: #333;\n  font-style: normal;\n}\n.lmt__dict .tag_s {\n  color: #006494;\n  font-style: normal;\n}\n.lmt__dict .tag_lemma {\n  font-size: 16px;\n  font-weight: 400;\n  color: #006494;\n  font-style: normal;\n}\n.lmt__dict .tag_lemma a {\n  color: #006494;\n}\n.lmt__dict .inexact .tag_lemma {\n  font-size: 14px;\n}\n.lmt__dict .tag_type,\n.lmt__dict .tag_wordtype {\n  font-style: italic;\n  font-size: 14px;\n  margin-inline-end: 2px;\n  color: #999;\n  font-weight: 400;\n}\n.lmt__dict .inexact .tag_type,\n.lmt__dict .inexact .tag_wordtype,\n.lmt__dict .example_lines .tag_type,\n.lmt__dict .example_lines .tag_wordtype,\n.lmt__dict .tag_forms .tag_wordtype {\n  font-size: 14px;\n}\n.lmt__dict .tag_wordtype {\n  font-size: 14px;\n  margin-inline-start: 0;\n}\n.lmt__dict .tag_area,\n.lmt__dict .tag_usage {\n  color: #999;\n  font-style: italic;\n  font-size: 14px;\n  font-weight: 400;\n}\n.lmt__dict .inexact .tag_area,\n.lmt__dict .inexact .tag_usage,\n.lmt__dict .inexact .tag_forms {\n  font-size: 10px;\n}\n.lmt__dict .tag_c {\n  color: #999;\n  font-size: 15px;\n  font-style: italic;\n  font-weight: 400;\n}\n.lmt__dict .inexact .tag_c {\n  font-size: 13px;\n}\n.lmt__dict .tag_forms {\n  font-size: 13px;\n  color: #999;\n  font-weight: 400;\n}\n.lmt__dict .inexact .tag_forms {\n  display: none;\n}\n.lmt__dict .lemma_desc .tag_forms {\n  display: none;\n  padding-inline-start: 3px;\n}\n.lmt__dict .tag_trans_src_context {\n  color: #006494;\n  font-style: normal;\n  padding-inline-end: 10px;\n  font-size: 14px;\n}\n.lmt__dict .tag_trans_src_context:before {\n  content: "(";\n}\n.lmt__dict .tag_trans_src_context:after {\n  content: ")";\n}\n.lmt__dict .tag_lemma_context {\n  padding-inline-start: 5px;\n  padding-inline-end: 5px;\n  font-size: 14px;\n}\n.lmt__dict .inexact .tag_lemma_context {\n  padding-inline-start: 5px;\n  font-size: 13px;\n}\n.lmt__dict .tag_lemma_context .placeholder {\n  font-size: inherit;\n}\n.lmt__dict #dictionary .tag_forms h3 {\n  display: inline;\n  padding-inline-end: 10px;\n  font-size: 12px;\n  margin: 0 0 0 0;\n  color: #999;\n}\n.lmt__dict .tag_formname {\n  color: #999;\n}\n.lmt__dict .tag_c,\n.lmt__dict .tag_t,\n.lmt__dict .tag_s,\n.lmt__dict .tag_area,\n.lmt__dict .tag_usage {\n  font-size: 14px;\n}\n.lmt__dict .tag_trans {\n  font-size: 14px;\n  color: #333;\n  font-style: normal;\n  display: inline-block;\n  min-height: 20px;\n}\n.lmt__dict .inexact .tag_trans {\n  font-size: 14px;\n  color: #333;\n  font-style: normal;\n}\n.lmt__dict .inexact .tag_trans a {\n  color: #333;\n}\n.lmt__dict .exact .tag_trans a.featured {\n  line-height: 24px;\n}\n.lmt__dict .meaninggroup_notfirst {\n  padding-top: 8px;\n}\n.lmt__dict .meaninggroup_editing.meaninggroup_notfirst {\n  padding-top: 20px;\n}\n.lmt__dict .meaning_class_header {\n  padding-inline-start: 5px;\n  padding-top: 5px;\n}\n.lmt__dict .meaninggroup_outer_list {\n  list-style-type: none;\n  padding: 0;\n  margin: 0;\n  display: inline;\n}\n.lmt__dict .meaninggroup_inner_list {\n  list-style-type: none;\n  padding: 0;\n  margin: 0;\n}\n.lmt__dict .meaninggroup_inner_list li {\n  display: inline;\n}\n.lmt__dict .meaninggroup_problematic .meaninggroup_description {\n  color: #e00;\n}\n.lmt__dict .meaninggroup_problematic .meaninggroup_description_index {\n  color: #e00;\n}\n.lmt__dict .isForeignTerm .meaninggroup_synonym,\n.lmt__dict .isForeignTerm .meaninggroup_valency,\n.lmt__dict .isForeignTerm .meaninggroup_valency,\n.lmt__dict .meaninggroup_descriptions {\n  color: #333;\n}\n.lmt__dict .isMainTerm .meaninggroup_synonym,\n.lmt__dict .isMainTerm .meaninggroup_valency,\n.lmt__dict .isMainTerm .meaninggroup_valency,\n.lmt__dict .meaninggroup_descriptions {\n  color: #265182;\n}\n.lmt__dict .meaninggroup_synonym {\n  font-size: 15px;\n  font-weight: 400;\n  font-style: normal;\n}\n.lmt__dict .meaninggroup_preliminary {\n  font-size: 15px;\n  font-weight: 400;\n  font-style: normal;\n  color: green;\n}\n.lmt__dict .meaninggroup_descriptions {\n  font-size: 15px;\n  font-weight: 400;\n  font-style: normal;\n}\n.lmt__dict .meaninggroup_valency {\n  font-size: 15px;\n  font-weight: 400;\n  color: #333;\n  font-style: normal;\n}\n.lmt__dict .meaninggroup_usage {\n  color: #999;\n}\n.lmt__dict .meaninggroup_areas {\n  color: #999;\n  font-style: italic;\n}\n.lmt__dict .meaninggroup_editing .meaninggroup_descriptions,\n.lmt__dict .meaninggroup_editing .meaninggroup_synonym,\n.lmt__dict .meaninggroup_editing .meaninggroup_usage,\n.lmt__dict .meaninggroup_editing .meaninggroup_synonym,\n.lmt__dict .meaninggroup_editing .meaninggroup_description_index,\n.lmt__dict .meaninggroup_editing .meaninggroup_preliminary {\n  font-weight: 600;\n}\n.lmt__dict .meaninggroups_remark {\n  margin-inline-start: -20px;\n}\n.lmt__dict .inflectioninfo,\n.lmt__dict .inflectioninfo .tag_c {\n  color: #006494;\n  font-style: normal;\n  font-size: 13px;\n}\n.lmt__dict .isForeignTerm .inflectioninfo {\n  color: #333;\n}\n.lmt__dict .isForeignTerm .tag_lemma,\n.lmt__dict .isForeignTerm .tag_lemma a,\n.lmt__dict .isForeignTerm .tag_s,\n.lmt__dict .isForeignTerm .tag_s a,\n.lmt__dict .isForeignTerm .tag_trans_src_context {\n  color: #333;\n}\n.lmt__dict .isForeignTerm .tag_trans,\n.lmt__dict .isForeignTerm .tag_trans a,\n.lmt__dict .isForeignTerm .tag_t,\n.lmt__dict .isForeignTerm .tag_t a,\n.lmt__dict .isForeignTerm .tag_trans {\n  color: #006494;\n}\n.lmt__dict .spell_suggestion.isForeignTerm,\n.lmt__dict .spell_suggestion.isForeignTerm .corrected {\n  color: #333;\n}\n.lmt__dict .spell_suggestion,\n.lmt__dict .spell_suggestion .corrected {\n  color: #006494;\n}\n.lmt__dict .line .translation {\n  display: inline-block;\n  line-height: 1em;\n  text-indent: 0;\n}\n.lmt__dict .line.inflectioninfo {\n  display: none;\n}\n.lmt__dict .sep {\n  font-size: 12px;\n  padding-inline-start: 10px;\n  color: #6e6e6e;\n}\n.lmt__dict .tag_forms .sep {\n  padding-inline-start: 5px;\n}\n.lmt__dict .inexact .sep {\n  font-size: 9px;\n}\n.lmt__dict .dash {\n  padding-inline-end: 10px;\n}\n.lmt__dict .exact .lemma_desc .dash {\n  display: none;\n}\n.lmt__dict .lemma_desc .dash {\n  font-size: 14px;\n  font-style: normal;\n  color: #999;\n  padding-inline-start: 7px;\n  padding-inline-end: 7px;\n}\n.lmt__dict .inexact .lemma_desc {\n  padding: 0 0 0 0;\n}\n.lmt__dict .inexact .translation_lines,\n.lmt__dict .inexact .translation_group,\n.lmt__dict .inexact .line {\n  display: inline;\n}\n.lmt__dict .inexact .lemma_content {\n  display: inline;\n}\n.lmt__dict .inexact .lemma_desc,\n.lmt__dict #dictionary .inexact h2.lemma_desc {\n  display: inline-block;\n  padding-inline-end: 0;\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 400;\n}\n.lmt__dict .inexact .lemma_content {\n  padding-inline-start: 0;\n}\n.lmt__dict .inexact .lemma {\n  margin: 1px 0 0 0;\n  text-indent: -10px;\n  padding-inline-start: 20px;\n}\n.lmt__dict .inexact div.singleline {\n  text-indent: 0;\n  padding-inline-start: 0;\n}\n.lmt__dict #dictionary > .expandable > .versionShort > .example_lines {\n  padding-bottom: 15px;\n}\n.lmt__dict #dictionary h3 {\n  margin-bottom: 2px;\n  font-size: 14px;\n}\n.lmt__dict a.audio {\n  display: none;\n  position: relative;\n  cursor: pointer;\n  top: 3px;\n  width: 19px;\n  height: 17px;\n  background-position: -40px -38px;\n  opacity: 0.5;\n}\n.lmt__dict .ie7 a.audio,\n.lmt__dict .ie8 a.audio {\n  filter: alpha(opacity=50);\n  background-position: -120px -92px;\n}\n.lmt__dict .inexact a.audio {\n  display: none;\n}\n.lmt__dict .inexact .lemma_desc a.audio,\n.lmt__dict .inexact .translation.expanded a.audio,\n.lmt__dict .inexact .translation.contracting a.audio {\n  display: inline-block;\n}\n.lmt__dict .exact .tag_lemma a.audio {\n  top: 2px;\n}\n.lmt__dict .mouse_device a.audio {\n  opacity: 0.45;\n}\n.lmt__dict .mouse_device a.audio:hover,\n.lmt__dict .mouse_device a.expand_i:hover {\n  opacity: 1;\n}\n.lmt__dict .grammar_info {\n  position: relative;\n  top: -4px;\n  vertical-align: middle;\n  font-size: 0.7em;\n  color: #999;\n  font-style: italic;\n  margin-inline-start: 1px;\n  display: inline-block;\n  text-indent: 0;\n}\n.lmt__dict .exact .grammar_info {\n  top: -5px;\n  margin-inline-start: 2px;\n}\n.lmt__dict #dictionary h2,\n.lmt__dict #dictionary h3 {\n  color: #333;\n  font-weight: 400;\n}\n.lmt__dict #dictionary h2 {\n  font-size: 20px;\n  margin-bottom: 20px;\n}\n.lmt__dict #dictionary .tag_forms h2 {\n  font-size: 14px;\n}\n.lmt__dict .translation_row.singleline {\n  height: 20px;\n}\n.lmt__dict .singleline {\n  position: relative;\n  padding-inline-end: 20px;\n  height: 20px;\n  overflow: hidden;\n}\n.lmt__dict .singleline > * {\n  line-height: 50px;\n  position: relative;\n  top: -15px;\n}\n.lmt__dict .ie8 .singleline > * {\n  top: -13px;\n  height: 22px;\n}\n.lmt__dict .singleline .tag_s {\n  white-space: nowrap;\n}\n.lmt__dict .expandable {\n  position: relative;\n}\n.lmt__dict .example_lines .expandM,\n.lmt__dict .inexact .expandM {\n  display: block;\n  height: 15px;\n  padding-inline-start: 0px;\n  opacity: 0.7;\n}\n.lmt__dict a.expand_i {\n  width: 17px;\n  height: 17px;\n  position: relative;\n  top: 4px;\n  display: inline-block;\n  background-position: -20px -36px;\n  cursor: pointer;\n  opacity: 0.55;\n  filter: alpha(opacity=55);\n}\n.lmt__dict .translation a.expand_i {\n  background-color: white;\n}\n.lmt__dict .example {\n  padding-inline-start: 45px;\n  margin-top: 8px;\n  margin-bottom: 12px;\n}\n.lmt__dict .expertmode .example {\n  padding-inline-start: 50px;\n}\n.lmt__dict .example .tag_e {\n  display: block;\n  position: relative;\n  max-width: 700px;\n  line-height: 1.1em;\n}\n.lmt__dict .example .tag_s {\n  width: 47%;\n  float: inline-start;\n}\n.lmt__dict .example .tag_t {\n  width: 50%;\n  float: inline-end;\n}\n.lmt__dict .example .tag_e_end {\n  display: block;\n  clear: both;\n}\n.lmt__dict .example .dash {\n  display: none;\n}\n.lmt__dict #soundFlags {\n  display: none;\n}\n.lmt__dict .hidden,\n.lmt__dict #lingueecontent .hidden,\n.lmt__dict #attribution.hidden {\n  display: none;\n}\n.lmt__dict .notascommon {\n  display: block;\n  padding-inline-end: 10px;\n  font-size: 14px;\n  line-height: 1.4em;\n}\n.lmt__dict .tag_wordtype {\n  display: inline-block;\n}\n.lmt__dict .tag_forms {\n  display: inline-block;\n}\n.lmt__dict .inexact .lemma {\n  padding-inline-start: 20px;\n}\n.lmt__dict .example_lines > .expandable > .versionshort > .expandM {\n  margin-inline-start: 0;\n}\n.lmt__dict .source_url_spacer {\n  margin-inline-start: 0;\n}\n.lmt__dict .example {\n  padding-inline-start: 30px;\n}\n.lmt__dict .translation_desc {\n  padding-bottom: 0;\n}\n.lmt__dict .translation a.expand_i,\n.lmt__dict .translation a.audio,\n.lmt__dict .inexact .lemma_desc a.audio,\n.lmt__dict .inexact .translation.expanded a.audio {\n  display: none;\n}\n.lmt__dict .inexact .lemma {\n  padding-inline-start: 20px;\n}\n.lmt__dict .example_lines > .expandable > .versionshort > .expandM {\n  margin-inline-start: 0;\n}\n.lmt__dict .source_url_spacer {\n  margin-inline-start: 0;\n}\n.lmt__dict .example {\n  padding-inline-start: 24px;\n}\n.lmt__dict .lemma_desc {\n  margin: 0;\n}\n.lmt__dict .lemma {\n  margin-top: 0;\n}\n.lmt__dict .source {\n  font-size: 24px;\n  color: #d0d0d0;\n}\n.lmt__dict .source .tag_lemma {\n  font-size: 20px;\n  font-weight: 400;\n}\n.lmt__dict .lemma_content {\n  padding-inline-start: 20px;\n  padding-inline-end: 0px;\n}\n.lmt__dict .source .tag_s,\n.lmt__dict .source .tag_usage,\n.lmt__dict .source .tag_formname,\n.lmt__dict .source .formlink,\n.lmt__dict .source .tag_forms,\n.lmt__dict .source .grammar_info {\n  color: #999 !important;\n}\n.lmt__dict .translation:first-of-type h3 {\n  line-height: 1;\n}\n.lmt__dict .translation:first-of-type h3 .dictlink {\n  font-size: 20px;\n}\n.lmt__dict .source {\n  position: relative;\n}\n.lmt__dict .sourceHint {\n  display: none;\n}\n.lmt__dict .notascommon {\n  color: #aaa;\n}\n.lmt__dict .tag_type,\n.lmt__dict .tag_wordtype,\n.lmt__dict .source .tag_s,\n.lmt__dict .source .tag_usage,\n.lmt__dict .source .tag_formname,\n.lmt__dict .source .tag_wordtype,\n.lmt__dict .source .formlink,\n.lmt__dict .source .tag_forms,\n.lmt__dict .source .grammar_info,\n.lmt__dict .tag_c {\n  font-style: normal;\n}\n.lmt__dict .tag_forms {\n  font-style: normal;\n}\n.lmt__dict .tag_forms .tag_s {\n  padding-inline-start: 0px;\n  margin-inline-end: -19px;\n}\n\n#LMT__dict_right {\n  margin-inline-start: 59px;\n}\n\n@keyframes lmt__dict__appear_animation {\n  0% {\n    transform: scale(0.99) translateY(-5px);\n    opacity: 0;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n.lmt__dict.lmt--is-dict-ready {\n  display: block;\n}\n.lmt__dict .lmt__dict__empty_state {\n  display: none;\n  padding: 16px 24px;\n  color: #6e6e6e;\n  font-size: 16px;\n}\n.lmt__dict #result_container,\n.lmt__dict #wikipedia-body,\n.lmt__dict #wikipedia-header,\n.lmt__dict .copyrightLineOuter,\n.lmt__dict .openTriangle,\n.lmt__dict .expandM {\n  display: none !important;\n}',o=Jg(),r=new mh(!1),rh(n,"lang","scss"),r.a=null},m(e,s){Vg(e,t,s),jg(t,n),jg(t,o),r.m(i,t)},p(e,[t]){1&t&&i!==(i=ft(e[0])+"")&&r.p(i)},i:wg,o:wg,d(e){e&&Yg(t)}}}function dC(e,t,n){let{html:o}=t;return e.$$set=e=>{"html"in e&&n(0,o=e.html)},[o]}class uC extends af{constructor(e){super(),sf(this,e,dC,cC,$g,{html:0})}}function pC(e){let t,n,o,r;return n=new uC({props:{html:e[1]}}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","dl__dictionary svelte-1n7xyu1")},m(e,o){Vg(e,t,o),of(n,t,null),r=!0},p(e,t){const o={};2&t&&(o.html=e[1]),n.$set(o)},i(e){r||(Yh(n.$$.fragment,e),o||Oh((()=>{o=Xh(t,Ff,{y:-50,duration:700}),o.start()})),r=!0)},o(e){Kh(n.$$.fragment,e),r=!1},d(e){e&&Yg(t),rf(n)}}}function mC(e){let t,n,o=e[0]&&e[1]&&e[2]&&pC(e);return{c(){t=Zg("div"),o&&o.c()},m(e,r){Vg(e,t,r),o&&o.m(t,null),n=!0},p(e,[n]){e[0]&&e[1]&&e[2]?o?(o.p(e,n),7&n&&Yh(o,1)):(o=pC(e),o.c(),Yh(o,1),o.m(t,null)):o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh())},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d()}}}function gC(e,n,o){let r,i,s,a,l,{originalSnippet:c}=n,{sourceLanguage:d}=n,{targetLanguage:u}=n,{websiteLanguage:p}=n,{showDictionary:m=!1}=n,{setDictionaryLauncherState:g}=n,{resetDictionary:h=(()=>{})}=n,f="",_="",v="";function y(){if(c&&c!==v){v=c;!async function(e){const n=e.enabled?R.enabled:R.disabled,o=e.langPair;try{await t({action:"dltrackDictionaryStatus",payload:{status:n,langPair:o}})}catch(e){console.log(e)}}({enabled:!!f&&!!i&&a&&l,langPair:i})}}async function w(){o(10,_="");const e={interfaceLang:chrome.i18n.getUILanguage(),sourceLang:p,targetLang:u,text:s};try{o(1,f=await lC(e))}catch(e){o(10,_=function(e,t){let n=chrome.i18n.getMessage("ui_inline_translation_problem_loading_dictionary");return e==Sf.ENTRY_NOT_FOUND&&(n=chrome.i18n.getMessage("ui_inline_translation_no_entry_dictionary",t)),n}(e.error,s))}finally{y(),h()}}return e.$$set=e=>{"originalSnippet"in e&&o(3,c=e.originalSnippet),"sourceLanguage"in e&&o(4,d=e.sourceLanguage),"targetLanguage"in e&&o(5,u=e.targetLanguage),"websiteLanguage"in e&&o(6,p=e.websiteLanguage),"showDictionary"in e&&o(0,m=e.showDictionary),"setDictionaryLauncherState"in e&&o(7,g=e.setDictionaryLauncherState),"resetDictionary"in e&&o(8,h=e.resetDictionary)},e.$$.update=()=>{var n;if(8&e.$$.dirty&&(o(12,a=!!(n=c)&&1===n.trim().split(" ").length),o(13,l=function(e){return!!e&&e.trim().length<200}(c))),48&e.$$.dirty&&(u!==d&&d?o(2,i=aC(d,u)):(o(2,i=""),o(9,r=""))),14604&e.$$.dirty&&(c&&c.trim()!==s?(o(11,s=c.trim()),o(10,_=""),i&&a&&l?(o(9,r=i),w()):(o(1,f=""),y(),h())):h()),12804&e.$$.dirty&&i!=r&&i&&a&&l&&(o(10,_=""),w()),5254&e.$$.dirty){let e="";_?e=_:a?i?f||(e=chrome.i18n.getMessage("ui_inline_translation_problem_loading_dictionary")):e=chrome.i18n.getMessage("ui_inline_translation_unavailable_lang_pair"):e=chrome.i18n.getMessage("ui_inline_translation_translate_only_one_word");g({enableDictionaryButton:!!f&&a&&!!i&&!_,dictionaryButtonError:e})}if(1&e.$$.dirty&&m)try{t({action:"dlTrackOpenDictionarySection",payload:{}})}catch(e){console.log(e)}},[m,f,i,c,d,u,p,g,h,r,_,s,a,l]}class hC extends af{constructor(e){super(),sf(this,e,gC,mC,$g,{originalSnippet:3,sourceLanguage:4,targetLanguage:5,websiteLanguage:6,showDictionary:0,setDictionaryLauncherState:7,resetDictionary:8})}}function fC(e,t,n){const o=e.slice();return o[31]=t[n],o}function _C(e,t,n){const o=e.slice();return o[34]=t[n],o}function vC(e,t,n){const o=e.slice();return o[37]=t[n],o}function yC(e){let t,n,o,r,i,s=!Ve.includes(e[4].selectedTargetLanguage),a=e[6]&&bC(e),l=s&&EC(e),c=e[4].gDocsSegmentation===qe.SENTENCE&&TC(e),d=e[4].gDocsSegmentation===qe.WORD&&$C(e);return{c(){t=Zg("div"),n=Zg("div"),a&&a.c(),o=Jg(),l&&l.c(),r=Jg(),c&&c.c(),i=Jg(),d&&d.c(),rh(n,"class","dl-segmentation-selector svelte-fxpmgu")},m(e,s){Vg(e,t,s),jg(t,n),a&&a.m(n,null),jg(n,o),l&&l.m(n,null),jg(t,r),c&&c.m(t,null),jg(t,i),d&&d.m(t,null)},p(e,r){e[6]?a?a.p(e,r):(a=bC(e),a.c(),a.m(n,o)):a&&(a.d(1),a=null),16&r[0]&&(s=!Ve.includes(e[4].selectedTargetLanguage)),s?l?l.p(e,r):(l=EC(e),l.c(),l.m(n,null)):l&&(l.d(1),l=null),e[4].gDocsSegmentation===qe.SENTENCE?c?c.p(e,r):(c=TC(e),c.c(),c.m(t,i)):c&&(c.d(1),c=null),e[4].gDocsSegmentation===qe.WORD?d?d.p(e,r):(d=$C(e),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},d(e){e&&Yg(t),a&&a.d(),l&&l.d(),c&&c.d(),d&&d.d()}}}function wC(e){let t;return{c(){t=Zg("div"),t.innerHTML='<div class="skeleton-item svelte-fxpmgu"><div class="skeleton-subitem svelte-fxpmgu"></div></div> <div class="skeleton-item svelte-fxpmgu"><div class="skeleton-subitem svelte-fxpmgu"></div></div> <div class="skeleton-item svelte-fxpmgu"><div class="skeleton-subitem svelte-fxpmgu"></div> <div class="skeleton-subitem is-short-line svelte-fxpmgu"></div></div>',rh(t,"class","dl-alternatives-loading-skeleton svelte-fxpmgu")},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function bC(e){let t,n,o;return{c(){t=Zg("button"),t.textContent=`${chrome.i18n.getMessage("ui_alternatives_segmentation_sentence")}`,rh(t,"class","segmentation-button sentence svelte-fxpmgu"),uh(t,"active",e[4].gDocsSegmentation===qe.SENTENCE)},m(r,i){Vg(r,t,i),n||(o=th(t,"click",e[22]),n=!0)},p(e,n){16&n[0]&&uh(t,"active",e[4].gDocsSegmentation===qe.SENTENCE)},d(e){e&&Yg(t),n=!1,o()}}}function EC(e){let t,n,o;return{c(){t=Zg("button"),t.textContent=`${chrome.i18n.getMessage("ui_alternatives_segmentation_word")}`,rh(t,"class","segmentation-button word svelte-fxpmgu"),uh(t,"active",e[4].gDocsSegmentation===qe.WORD)},m(r,i){Vg(r,t,i),n||(o=th(t,"click",e[23]),n=!0)},p(e,n){16&n[0]&&uh(t,"active",e[4].gDocsSegmentation===qe.WORD)},d(e){e&&Yg(t),n=!1,o()}}}function TC(e){let t,n,o=ef(e[2]),r=[];for(let t=0;t<o.length;t+=1)r[t]=xC(_C(e,o,t));return{c(){t=Zg("div");for(let e=0;e<r.length;e+=1)r[e].c();rh(t,"class","alternatives svelte-fxpmgu"),rh(t,"dir",n=jt(e[0].targetLang))},m(e,n){Vg(e,t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null)},p(e,i){if(516&i[0]){let n;for(o=ef(e[2]),n=0;n<o.length;n+=1){const s=_C(e,o,n);r[n]?r[n].p(s,i):(r[n]=xC(s),r[n].c(),r[n].m(t,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=o.length}1&i[0]&&n!==(n=jt(e[0].targetLang))&&rh(t,"dir",n)},d(e){e&&Yg(t),Kg(r,e)}}}function SC(e){let t,n,o=It(e[37].text)+"";return{c(){t=Zg("span"),n=Qg(o),rh(t,"class","svelte-fxpmgu"),uh(t,"highlighted-text-chunk",e[37].isHighlighted)},m(e,o){Vg(e,t,o),jg(t,n)},p(e,r){4&r[0]&&o!==(o=It(e[37].text)+"")&&ih(n,o),4&r[0]&&uh(t,"highlighted-text-chunk",e[37].isHighlighted)},d(e){e&&Yg(t)}}}function xC(e){let t,n,o,r,i=ef(e[34].textChunks),s=[];for(let t=0;t<i.length;t+=1)s[t]=SC(vC(e,i,t));function a(){return e[24](e[34])}return{c(){t=Zg("div");for(let e=0;e<s.length;e+=1)s[e].c();n=Jg(),rh(t,"class","sentence-alternatives alternative svelte-fxpmgu"),rh(t,"tabindex","-1"),rh(t,"aria-hidden","true")},m(e,i){Vg(e,t,i);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);jg(t,n),o||(r=th(t,"click",a),o=!0)},p(o,r){if(e=o,4&r[0]){let o;for(i=ef(e[34].textChunks),o=0;o<i.length;o+=1){const a=vC(e,i,o);s[o]?s[o].p(a,r):(s[o]=SC(a),s[o].c(),s[o].m(t,n))}for(;o<s.length;o+=1)s[o].d(1);s.length=i.length}},d(e){e&&Yg(t),Kg(s,e),o=!1,r()}}}function $C(e){let t,n,o=ef(e[3]),r=[];for(let t=0;t<o.length;t+=1)r[t]=CC(fC(e,o,t));return{c(){t=Zg("div");for(let e=0;e<r.length;e+=1)r[e].c();rh(t,"class","alternatives svelte-fxpmgu"),rh(t,"dir",n=jt(e[0].targetLang))},m(e,n){Vg(e,t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null)},p(e,i){if(1032&i[0]){let n;for(o=ef(e[3]),n=0;n<o.length;n+=1){const s=fC(e,o,n);r[n]?r[n].p(s,i):(r[n]=CC(s),r[n].c(),r[n].m(t,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=o.length}1&i[0]&&n!==(n=jt(e[0].targetLang))&&rh(t,"dir",n)},d(e){e&&Yg(t),Kg(r,e)}}}function CC(e){let t,n,o,r,i,s=It(e[31].text)+"";function a(){return e[25](e[31])}return{c(){t=Zg("div"),n=Qg(s),o=Jg(),rh(t,"role","button"),rh(t,"class","word-alternative alternative svelte-fxpmgu"),rh(t,"tabindex","-1"),rh(t,"aria-hidden","true")},m(e,s){Vg(e,t,s),jg(t,n),jg(t,o),r||(i=th(t,"click",a),r=!0)},p(t,o){e=t,8&o[0]&&s!==(s=It(e[31].text)+"")&&ih(n,s)},d(e){e&&Yg(t),r=!1,i()}}}function kC(e){let t,n,o,r,i;function s(e,t){return e[5]?wC:e[1]?yC:void 0}let a=s(e),l=a&&a(e);return{c(){t=Zg("div"),n=Zg("button"),n.textContent=`${chrome.i18n.getMessage("ui_alternatives_title")}`,o=Jg(),l&&l.c(),rh(n,"class","dl-toggle-show-alternatives svelte-fxpmgu"),uh(n,"is-showing",e[1]),rh(t,"class","dl-alternatives-container svelte-fxpmgu")},m(s,a){Vg(s,t,a),jg(t,n),jg(t,o),l&&l.m(t,null),r||(i=th(n,"click",e[21]),r=!0)},p(e,o){2&o[0]&&uh(n,"is-showing",e[1]),a===(a=s(e))&&l?l.p(e,o):(l&&l.d(1),l=a&&a(e),l&&(l.c(),l.m(t,null)))},i:wg,o:wg,d(e){e&&Yg(t),l&&l.d(),r=!1,i()}}}function LC(e,n,o){let r;const i=$h("deepl_settings");kg(e,i,(e=>o(4,r=e)));let{textProcessingMode:s=ae.translate}=n,{contentProcessBuildingBlocks:l}=n,{buildAndSetReplaceData:c}=n,{activeSentence:d}=n,{activeWord:u}=n,{shouldMarkWordOrSentenceAsActive:p}=n,{registerAlternativesCallbacks:m}=n,{clearAlternativesCallbacks:g}=n,h=!1,f=!1,_=[],v=[],y=!0;const w=()=>{if(h)if(r.gDocsSegmentation===qe.SENTENCE&&y)d||(o(14,d=0),o(15,u=0)),b(d);else if(r.gDocsSegmentation===qe.WORD){u||o(15,u=0),d||o(14,d=0);const e=l.processedSentences[d].text.split(/\s+/)[u],t=At(l.processedSentences[d].text).find((t=>t.text===e));E(d,u,t)}},b=async e=>{if(r.gDocsSegmentation===qe.SENTENCE){o(14,d=e),o(1,h=!0),o(2,_=[]),o(5,f=!0);try{const n=await t({action:"dlRequestGDocsSentenceAlternatives",payload:{mode:s,sourceLang:l.detectedSourceLanguage,targetLang:l.targetLang,sentence:l.sentences[e],contextBefore:e>0&&l.sentences[e-1].text,contextAfter:e<l.sentences.length-1&&l.sentences[e+1].text}});for(const t of n.result.translations[0].beams)t.sentences[0].text!==l.processedSentences[e].text&&_.length<4&&o(2,_=[..._,{text:t.sentences[0].text,textChunks:Kf(t.sentences[0].text,l.processedSentences[e].text)}]);L(qe.SENTENCE)}catch(e){console.error(e)}o(5,f=!1)}},E=async(e,n,i)=>{if(r.gDocsSegmentation===qe.WORD){o(14,d=e),o(15,u=n),o(1,h=!0),o(3,v=[]),o(5,f=!0);try{const n=await t({action:"dlRequestGDocsWordAlternatives",payload:{mode:s,sourceLang:l.detectedSourceLanguage,targetLang:l.targetLang,sentence:l.sentences[e],contextBefore:e>0&&l.sentences[e-1].text,contextAfter:e<l.sentences.length-1&&l.sentences[e+1].text,partialTranslation:l.processedSentences[e].text.substring(0,i.offsetStartRaw)}});for(const t of n.result.translations[0].beams)if(t.sentences[0].text!==l.processedSentences[e].text.substring(0,i.offsetStartRaw+i.offsetLengthRaw)&&v.length<4){const e=t.sentences[0].text.substring(i.offsetStartRaw);e.trim().length>0&&o(3,v=[...v,{text:`${e}...`,partialTranslation:t.sentences[0].text}])}L(qe.WORD)}catch(e){console.error(e)}o(5,f=!1)}},T=e=>{o(0,l.processedSentences[d].text=e,l),o(2,_=[]),c(),k(qe.SENTENCE)},S=async e=>{o(0,l.processedSentences[d].text=e,l),o(3,v=[]);try{const n=await t({action:"dlRequestGDocsSentenceFromPartialTranslation",payload:{mode:s,sourceLang:l.detectedSourceLanguage,targetLang:l.targetLang,sentence:l.sentences[d],contextBefore:d>0&&l.sentences[d-1].text,contextAfter:d<l.sentences.length-1&&l.sentences[d+1].text,partialTranslation:e}});o(0,l.processedSentences[d].text=n.result.translations[0].beams[0].sentences[0].text,l),c(),k(qe.WORD)}catch(e){console.error(e)}},x=()=>{Og(i,r.gDocsSegmentation=qe.SENTENCE,r),d||(o(14,d=0),o(15,u=0)),C(qe.SENTENCE)},$=()=>{let e;Og(i,r.gDocsSegmentation=qe.WORD,r),u||o(15,u=0),e=l.processedSentences[d].text.split(/\s+/)[u];const t=At(l.processedSentences[d].text).find((t=>t.text===e));E(d,u,t),C(qe.WORD)},C=async e=>await I({eventType:Me,alternativesSegmentation:e}),k=async e=>await I({eventType:Ne,alternativesSegmentation:e}),L=async e=>await I({eventType:Re,alternativesSegmentation:e}),I=async({eventType:e,alternativesSegmentation:n})=>await t({action:"dlTrackAlternativesEvent",payload:{eventType:e,alternativesMetaData:{sourceLang:l.detectedSourceLanguage,targetLang:l.targetLang,nicheIntegration:re.gdocs,contentProcessingMode:s,alternativesSegmentation:n}}});Eh((()=>{Og(i,r.gDocsSegmentation=qe.SENTENCE,r),m({showSentenceAlternatives:b,showWordAlternatives:E})})),Th((()=>{g()}));return e.$$set=e=>{"textProcessingMode"in e&&o(17,s=e.textProcessingMode),"contentProcessBuildingBlocks"in e&&o(0,l=e.contentProcessBuildingBlocks),"buildAndSetReplaceData"in e&&o(18,c=e.buildAndSetReplaceData),"activeSentence"in e&&o(14,d=e.activeSentence),"activeWord"in e&&o(15,u=e.activeWord),"shouldMarkWordOrSentenceAsActive"in e&&o(16,p=e.shouldMarkWordOrSentenceAsActive),"registerAlternativesCallbacks"in e&&o(19,m=e.registerAlternativesCallbacks),"clearAlternativesCallbacks"in e&&o(20,g=e.clearAlternativesCallbacks)},e.$$.update=()=>{16&e.$$.dirty[0]&&a.includes(r.gdocsWriteLang)&&(o(6,y=!1),Og(i,r.gDocsSegmentation=qe.WORD,r)),30&e.$$.dirty[0]&&o(16,p=h&&(r.gDocsSegmentation===qe.WORD&&v||r.gDocsSegmentation===qe.SENTENCE&&_))},[l,h,_,v,r,f,y,i,w,T,S,x,$,L,d,u,p,s,c,m,g,()=>{o(1,h=!h),L(),w()},()=>x(),()=>$(),e=>T(e.text),e=>S(e.partialTranslation)]}class IC extends af{constructor(e){super(),sf(this,e,LC,kC,$g,{textProcessingMode:17,contentProcessBuildingBlocks:0,buildAndSetReplaceData:18,activeSentence:14,activeWord:15,shouldMarkWordOrSentenceAsActive:16,registerAlternativesCallbacks:19,clearAlternativesCallbacks:20},null,[-1,-1])}}function AC(e,t,n){const o=e.slice();return o[25]=t[n],o}function RC(e,t,n){const o=e.slice();return o[28]=t[n],o}function MC(e,t,n){const o=e.slice();return o[31]=t[n],o[33]=n,o}function NC(e){let t,n,o=ef(e[8].contentReference),r=[];for(let t=0;t<o.length;t+=1)r[t]=HC(AC(e,o,t));return{c(){t=Zg("div");for(let e=0;e<r.length;e+=1)r[e].c();rh(t,"class","preview-text-scroller svelte-t9u7lm"),rh(t,"dir",n=jt(e[0]===ae.translate?e[7].selectedTargetLanguage:e[7].gdocsWriteLang))},m(e,n){Vg(e,t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null)},p(e,i){if(16256&i[0]){let n;for(o=ef(e[8].contentReference),n=0;n<o.length;n+=1){const s=AC(e,o,n);r[n]?r[n].p(s,i):(r[n]=HC(s),r[n].c(),r[n].m(t,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=o.length}129&i[0]&&n!==(n=jt(e[0]===ae.translate?e[7].selectedTargetLanguage:e[7].gdocsWriteLang))&&rh(t,"dir",n)},d(e){e&&Yg(t),Kg(r,e)}}}function OC(e){let t;return{c(){t=Zg("div"),rh(t,"class","dl-untranslatable-line svelte-t9u7lm")},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function DC(e){let t,n,o=ef(e[8].textLinesComponents[e[25].index]),r=[];for(let t=0;t<o.length;t+=1)r[t]=FC(RC(e,o,t));return{c(){t=Zg("div");for(let e=0;e<r.length;e+=1)r[e].c();n=Jg(),rh(t,"class","dl-translatable-line svelte-t9u7lm"),uh(t,"is-sentence-segmentation",e[7].gDocsSegmentation===qe.SENTENCE),uh(t,"is-word-segmentation",e[7].gDocsSegmentation===qe.WORD)},m(e,o){Vg(e,t,o);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null);jg(t,n)},p(e,i){if(16256&i[0]){let s;for(o=ef(e[8].textLinesComponents[e[25].index]),s=0;s<o.length;s+=1){const a=RC(e,o,s);r[s]?r[s].p(a,i):(r[s]=FC(a),r[s].c(),r[s].m(t,n))}for(;s<r.length;s+=1)r[s].d(1);r.length=o.length}128&i[0]&&uh(t,"is-sentence-segmentation",e[7].gDocsSegmentation===qe.SENTENCE),128&i[0]&&uh(t,"is-word-segmentation",e[7].gDocsSegmentation===qe.WORD)},d(e){e&&Yg(t),Kg(r,e)}}}function PC(e){let t,n=It(e[8].processedSentences[e[28]].text)+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p(e,o){256&o[0]&&n!==(n=It(e[8].processedSentences[e[28]].text)+"")&&ih(t,n)},d(e){e&&Yg(t)}}}function UC(e){let t,n=ef(At(e[8].processedSentences[e[28]].text)),o=[];for(let t=0;t<n.length;t+=1)o[t]=zC(MC(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=eh()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);Vg(e,t,n)},p(e,r){if(12032&r[0]){let i;for(n=ef(At(e[8].processedSentences[e[28]].text)),i=0;i<n.length;i+=1){const s=MC(e,n,i);o[i]?o[i].p(s,r):(o[i]=zC(s),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){e&&Yg(t),Kg(o,e)}}}function BC(e){let t,n,o=e[31].text+"";return{c(){t=Zg("span"),n=Qg(o)},m(e,o){Vg(e,t,o),jg(t,n)},p(e,t){256&t[0]&&o!==(o=e[31].text+"")&&ih(n,o)},d(e){e&&Yg(t)}}}function WC(e){let t,n,o,r,i=e[31].text+"";function s(){return e[18](e[28],e[33],e[31])}return{c(){t=Zg("span"),n=Qg(i),rh(t,"class","word-text svelte-t9u7lm"),rh(t,"tabindex","-1"),rh(t,"aria-hidden","true"),uh(t,"active-word",e[28]===e[9]&&e[10]===e[33]&&e[11])},m(e,i){Vg(e,t,i),jg(t,n),o||(r=th(t,"click",s),o=!0)},p(o,r){e=o,256&r[0]&&i!==(i=e[31].text+"")&&ih(n,i),3840&r[0]&&uh(t,"active-word",e[28]===e[9]&&e[10]===e[33]&&e[11])},d(e){e&&Yg(t),o=!1,r()}}}function zC(e){let t;function n(e,t){return e[31].isWord?WC:BC}let o=n(e),r=o(e);return{c(){r.c(),t=eh()},m(e,n){r.m(e,n),Vg(e,t,n)},p(e,i){o===(o=n(e))&&r?r.p(e,i):(r.d(1),r=o(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){e&&Yg(t),r.d(e)}}}function FC(e){let t,n,o,r,i,s,a,l=e[8].processedSentences[e[28]].prefix+"",c=e[7].gDocsSegmentation===qe.SENTENCE&&PC(e),d=e[7].gDocsSegmentation===qe.WORD&&UC(e);function u(){return e[19](e[28])}return{c(){t=Zg("span"),n=Qg(l),o=Jg(),r=Zg("span"),c&&c.c(),i=Jg(),d&&d.c(),rh(t,"class","sentence-prefix"),rh(r,"class","sentence-text svelte-t9u7lm"),rh(r,"tabindex","-1"),rh(r,"aria-hidden","true"),uh(r,"active-sentence",e[9]===e[28]&&e[11])},m(e,l){Vg(e,t,l),jg(t,n),Vg(e,o,l),Vg(e,r,l),c&&c.m(r,null),jg(r,i),d&&d.m(r,null),s||(a=th(r,"click",u),s=!0)},p(t,o){e=t,256&o[0]&&l!==(l=e[8].processedSentences[e[28]].prefix+"")&&ih(n,l),e[7].gDocsSegmentation===qe.SENTENCE?c?c.p(e,o):(c=PC(e),c.c(),c.m(r,i)):c&&(c.d(1),c=null),e[7].gDocsSegmentation===qe.WORD?d?d.p(e,o):(d=UC(e),d.c(),d.m(r,null)):d&&(d.d(1),d=null),2816&o[0]&&uh(r,"active-sentence",e[9]===e[28]&&e[11])},d(e){e&&(Yg(t),Yg(o),Yg(r)),c&&c.d(),d&&d.d(),s=!1,a()}}}function HC(e){let t;function n(e,t){return e[25].isTranslatable?DC:OC}let o=n(e),r=o(e);return{c(){r.c(),t=eh()},m(e,n){r.m(e,n),Vg(e,t,n)},p(e,i){o===(o=n(e))&&r?r.p(e,i):(r.d(1),r=o(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){e&&Yg(t),r.d(e)}}}function jC(e){let t,n,o;return n=new Q$({props:{platformBehaviour:re.gdocs,websiteSettings:e[1],showDictionary:e[2],switchVisibilityDictionary:e[3],enableDictionaryButton:e[4],dictionaryButtonError:e[5],onClose:e[6]}}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","dl-inline-translate-toolbar-frame svelte-t9u7lm")},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p(e,t){const o={};2&t[0]&&(o.websiteSettings=e[1]),4&t[0]&&(o.showDictionary=e[2]),8&t[0]&&(o.switchVisibilityDictionary=e[3]),16&t[0]&&(o.enableDictionaryButton=e[4]),32&t[0]&&(o.dictionaryButtonError=e[5]),64&t[0]&&(o.onClose=e[6]),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function GC(e){let t,n;return t=new tC({props:{onClose:e[6]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};64&n[0]&&(o.onClose=e[6]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function qC(e){let t,n,o,r,i,s;function a(t){e[20](t)}function l(t){e[21](t)}function c(t){e[22](t)}function d(t){e[23](t)}let u={textProcessingMode:e[0],buildAndSetReplaceData:e[15],registerAlternativesCallbacks:e[16],clearAlternativesCallbacks:e[17]};return void 0!==e[8]&&(u.contentProcessBuildingBlocks=e[8]),void 0!==e[9]&&(u.activeSentence=e[9]),void 0!==e[10]&&(u.activeWord=e[10]),void 0!==e[11]&&(u.shouldMarkWordOrSentenceAsActive=e[11]),t=new IC({props:u}),Lh.push((()=>tf(t,"contentProcessBuildingBlocks",a))),Lh.push((()=>tf(t,"activeSentence",l))),Lh.push((()=>tf(t,"activeWord",c))),Lh.push((()=>tf(t,"shouldMarkWordOrSentenceAsActive",d))),{c(){nf(t.$$.fragment)},m(e,n){of(t,e,n),s=!0},p(e,s){const a={};1&s[0]&&(a.textProcessingMode=e[0]),!n&&256&s[0]&&(n=!0,a.contentProcessBuildingBlocks=e[8],Dh((()=>n=!1))),!o&&512&s[0]&&(o=!0,a.activeSentence=e[9],Dh((()=>o=!1))),!r&&1024&s[0]&&(r=!0,a.activeWord=e[10],Dh((()=>r=!1))),!i&&2048&s[0]&&(i=!0,a.shouldMarkWordOrSentenceAsActive=e[11],Dh((()=>i=!1))),t.$set(a)},i(e){s||(Yh(t.$$.fragment,e),s=!0)},o(e){Kh(t.$$.fragment,e),s=!1},d(e){rf(t,e)}}}function VC(e){let t,n,o,r,i,s,a=e[8]&&e[8].contentReference&&NC(e),l=e[0]===ae.translate&&jC(e),c=e[0]===ae.write&&GC(e),d=e[8]&&qC(e);return{c(){t=Zg("div"),a&&a.c(),n=Jg(),l&&l.c(),o=Jg(),c&&c.c(),r=Jg(),i=Zg("div"),d&&d.c(),rh(i,"class","dl-alternatives-frame svelte-t9u7lm")},m(e,u){Vg(e,t,u),a&&a.m(t,null),jg(t,n),l&&l.m(t,null),jg(t,o),c&&c.m(t,null),jg(t,r),jg(t,i),d&&d.m(i,null),s=!0},p(e,s){e[8]&&e[8].contentReference?a?a.p(e,s):(a=NC(e),a.c(),a.m(t,n)):a&&(a.d(1),a=null),e[0]===ae.translate?l?(l.p(e,s),1&s[0]&&Yh(l,1)):(l=jC(e),l.c(),Yh(l,1),l.m(t,o)):l&&(qh(),Kh(l,1,1,(()=>{l=null})),Vh()),e[0]===ae.write?c?(c.p(e,s),1&s[0]&&Yh(c,1)):(c=GC(e),c.c(),Yh(c,1),c.m(t,r)):c&&(qh(),Kh(c,1,1,(()=>{c=null})),Vh()),e[8]?d?(d.p(e,s),256&s[0]&&Yh(d,1)):(d=qC(e),d.c(),Yh(d,1),d.m(i,null)):d&&(qh(),Kh(d,1,1,(()=>{d=null})),Vh())},i(e){s||(Yh(l),Yh(c),Yh(d),s=!0)},o(e){Kh(l),Kh(c),Kh(d),s=!1},d(e){e&&Yg(t),a&&a.d(),l&&l.d(),c&&c.d(),d&&d.d()}}}function YC(e,t,n){let o;const r=$h("deepl_settings");kg(e,r,(e=>n(7,o=e)));let i,s,a,l,{textProcessingMode:c=ae.translate}=t,{websiteSettings:d}=t,{showDictionary:u}=t,{switchVisibilityDictionary:p}=t,{enableDictionaryButton:m}=t,{dictionaryButtonError:g}=t,{onClose:h}=t,f=!1,_=()=>{},v=()=>{};const y=()=>{if(s)try{const{processedText:e,processedEntities:t}=Lt({textLines:s.textLinesComponents.map((e=>e.map((e=>s.processedSentences[e].prefix+s.processedSentences[e].text)))),entities:s.entities,contentReference:s.contentReference});d.update({translatedSnippet:e}),i&&i.setReplaceData({entities:t,text:e,originalObject:s.originalObject})}catch(e){console.error(e)}};Eh((()=>{i=document.querySelector("deepl-gdocs-icon"),n(8,s=i.getContentProcessBuildingBlocks()),y()}));return e.$$set=e=>{"textProcessingMode"in e&&n(0,c=e.textProcessingMode),"websiteSettings"in e&&n(1,d=e.websiteSettings),"showDictionary"in e&&n(2,u=e.showDictionary),"switchVisibilityDictionary"in e&&n(3,p=e.switchVisibilityDictionary),"enableDictionaryButton"in e&&n(4,m=e.enableDictionaryButton),"dictionaryButtonError"in e&&n(5,g=e.dictionaryButtonError),"onClose"in e&&n(6,h=e.onClose)},e.$$.update=()=>{128&e.$$.dirty[0]&&Ve.includes(o.selectedTargetLanguage)&&Og(r,o.gDocsSegmentation=qe.SENTENCE,o)},[c,d,u,p,m,g,h,o,s,a,l,f,_,v,r,y,e=>{n(12,_=e.showSentenceAlternatives),n(13,v=e.showWordAlternatives)},()=>{n(12,_=()=>{}),n(13,v=()=>{})},(e,t,n)=>v(e,t,n),e=>_(e),function(e){s=e,n(8,s)},function(e){a=e,n(9,a)},function(e){l=e,n(10,l)},function(e){f=e,n(11,f)}]}class KC extends af{constructor(e){super(),sf(this,e,YC,VC,$g,{textProcessingMode:0,websiteSettings:1,showDictionary:2,switchVisibilityDictionary:3,enableDictionaryButton:4,dictionaryButtonError:5,onClose:6},null,[-1,-1])}}function ZC(e){let t,n,o,r;return t=new rC({props:{headline:"Response - Translated DOM",jsonData:e[18]}}),o=new rC({props:{headline:"Request - Original DOM",jsonData:e[19]}}),{c(){nf(t.$$.fragment),n=Jg(),nf(o.$$.fragment)},m(e,i){of(t,e,i),Vg(e,n,i),of(o,e,i),r=!0},p(e,n){const r={};16&n&&(r.jsonData=e[18]),t.$set(r);const i={};16&n&&(i.jsonData=e[19]),o.$set(i)},i(e){r||(Yh(t.$$.fragment,e),Yh(o.$$.fragment,e),r=!0)},o(e){Kh(t.$$.fragment,e),Kh(o.$$.fragment,e),r=!1},d(e){e&&Yg(n),rf(t,e),rf(o,e)}}}function XC(e){let t,n,o,r,i,s,a=ft(I$(e[4].translatedSnippet))+"",l=e[3]===ae.translate&&nk(e),c=e[3]===ae.write&&ok(e);return{c(){t=Zg("div"),o=Jg(),l&&l.c(),r=Jg(),c&&c.c(),i=eh(),rh(t,"class","result-frame svelte-1qr4p6b"),rh(t,"dir",n=jt(e[5].selectedTargetLanguage))},m(e,n){Vg(e,t,n),t.innerHTML=a,Vg(e,o,n),l&&l.m(e,n),Vg(e,r,n),c&&c.m(e,n),Vg(e,i,n),s=!0},p(e,o){(!s||16&o)&&a!==(a=ft(I$(e[4].translatedSnippet))+"")&&(t.innerHTML=a),(!s||32&o&&n!==(n=jt(e[5].selectedTargetLanguage)))&&rh(t,"dir",n),e[3]===ae.translate?l?(l.p(e,o),8&o&&Yh(l,1)):(l=nk(e),l.c(),Yh(l,1),l.m(r.parentNode,r)):l&&(qh(),Kh(l,1,1,(()=>{l=null})),Vh()),e[3]===ae.write?c?(c.p(e,o),8&o&&Yh(c,1)):(c=ok(e),c.c(),Yh(c,1),c.m(i.parentNode,i)):c&&(qh(),Kh(c,1,1,(()=>{c=null})),Vh())},i(e){s||(Yh(l),Yh(c),s=!0)},o(e){Kh(l),Kh(c),s=!1},d(e){e&&(Yg(t),Yg(o),Yg(r),Yg(i)),l&&l.d(e),c&&c.d(e)}}}function QC(e){let t,n;return t=new KC({props:{textProcessingMode:e[3],websiteSettings:e[1],showDictionary:e[7],switchVisibilityDictionary:e[13],enableDictionaryButton:e[9],dictionaryButtonError:e[8],onClose:e[0]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};8&n&&(o.textProcessingMode=e[3]),2&n&&(o.websiteSettings=e[1]),128&n&&(o.showDictionary=e[7]),512&n&&(o.enableDictionaryButton=e[9]),256&n&&(o.dictionaryButtonError=e[8]),1&n&&(o.onClose=e[0]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function JC(e){let t,n;return t=new Wy({props:{error:e[4].error}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};16&n&&(o.error=e[4].error),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function ek(e){let t,n,o,r,i,s,a,l,c,d,u;function p(e,t){return e[3]===ae.translate?ik:rk}let m=p(e),g=m(e);function h(e,t){return e[3]===ae.translate?ak:sk}let f=h(e),_=f(e);function v(e,t){return e[3]===ae.translate?ck:lk}let y=v(e),w=y(e);return{c(){t=Zg("div"),n=Zg("p"),g.c(),o=Jg(),r=Zg("div"),i=Zg("h2"),_.c(),s=Jg(),w.c(),a=Jg(),l=Zg("div"),c=Zg("button"),c.textContent=`${chrome.i18n.getMessage("link_try_deepl")}`,rh(n,"class","counter svelte-1qr4p6b"),rh(i,"class","svelte-1qr4p6b"),rh(c,"class","svelte-1qr4p6b"),rh(l,"class","button-row svelte-1qr4p6b"),rh(r,"class","box svelte-1qr4p6b"),rh(t,"class","anonymous-user-max-char-exceeded svelte-1qr4p6b")},m(p,m){Vg(p,t,m),jg(t,n),g.m(n,null),jg(t,o),jg(t,r),jg(r,i),_.m(i,null),jg(r,s),w.m(r,null),jg(r,a),jg(r,l),jg(l,c),d||(u=th(c,"click",e[15]),d=!0)},p(e,t){m===(m=p(e))&&g?g.p(e,t):(g.d(1),g=m(e),g&&(g.c(),g.m(n,null))),f===(f=h(e))&&_?_.p(e,t):(_.d(1),_=f(e),_&&(_.c(),_.m(i,null))),y===(y=v(e))&&w?w.p(e,t):(w.d(1),w=y(e),w&&(w.c(),w.m(r,a)))},i:wg,o:wg,d(e){e&&Yg(t),g.d(),_.d(),w.d(),d=!1,u()}}}function tk(e){let t,n,o;return n=new AT({}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","loading-spinner-container svelte-1qr4p6b")},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p:wg,i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function nk(e){let t,n;return t=new Q$({props:{platformBehaviour:e[2],websiteSettings:e[1],showDictionary:e[7],switchVisibilityDictionary:e[13],enableDictionaryButton:e[9],dictionaryButtonError:e[8],onClose:e[0]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.platformBehaviour=e[2]),2&n&&(o.websiteSettings=e[1]),128&n&&(o.showDictionary=e[7]),512&n&&(o.enableDictionaryButton=e[9]),256&n&&(o.dictionaryButtonError=e[8]),1&n&&(o.onClose=e[0]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function ok(e){let t,n;return t=new tC({props:{onClose:e[0]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.onClose=e[0]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function rk(e){let t,n,o=e[4].originalSnippet.length+"";return{c(){t=Qg(o),n=Qg("/2000")},m(e,o){Vg(e,t,o),Vg(e,n,o)},p(e,n){16&n&&o!==(o=e[4].originalSnippet.length+"")&&ih(t,o)},d(e){e&&(Yg(t),Yg(n))}}}function ik(e){let t,n,o=e[4].originalSnippet.length+"";return{c(){t=Qg(o),n=Qg("/5000")},m(e,o){Vg(e,t,o),Vg(e,n,o)},p(e,n){16&n&&o!==(o=e[4].originalSnippet.length+"")&&ih(t,o)},d(e){e&&(Yg(t),Yg(n))}}}function sk(e){let t,n=chrome.i18n.getMessage("inline_gdocs_max_chars_exceeded_improvement_title")+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function ak(e){let t,n=chrome.i18n.getMessage("inline_gdocs_max_chars_exceeded_title")+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function lk(e){let t;return{c(){t=Zg("p"),t.textContent=`${chrome.i18n.getMessage("inline_gdocs_max_chars_exceeded_body_write")}`},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function ck(e){let t;return{c(){t=Zg("p"),t.textContent=`${chrome.i18n.getMessage("inline_gdocs_max_chars_exceeded_body")}`},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function dk(e){let t,n,o,r,i,s,a,l,c,u=!!mt();const p=[tk,ek,JC,QC,XC,ZC],m=[];function g(e,t){return 16&t&&(n=null),null==e[4]||e[4].translationState===d.ongoingTranslation?0:e[4].translationState===d.anonymousUserMaxCharExceeded?1:e[4].error?2:e[2]===re.gdocs?3:e[4].translatedSnippet?4:(null==n&&(n=!(!pn()||!e[4].translatedDOMSnippet)),n?5:-1)}~(o=g(e,-1))&&(r=m[o]=p[o](e)),s=new hC({props:{originalSnippet:e[4].originalSnippet,sourceLanguage:e[4].snippetDetectedSourceLang,targetLanguage:e[5].selectedTargetLanguage,websiteLanguage:e[4].websiteLanguage,showDictionary:e[7],setDictionaryLauncherState:e[12],resetDictionary:e[14]}});let h=u&&function(e){let t,n,o,r,i,s,a,l,c=chrome.i18n.getMessage("inline_translation_ads_ms_office")+"";return{c(){t=Zg("div"),n=Zg("div"),o=Jg(),r=Zg("div"),r.textContent=`${chrome.i18n.getMessage("inline_translation_ads_ms_office_discover")}`,i=Jg(),s=Zg("div"),rh(n,"class","text-banner svelte-1qr4p6b"),rh(r,"class","button-banner svelte-1qr4p6b"),rh(s,"class","icon svelte-1qr4p6b"),rh(t,"class","dl-ms-addin-banner svelte-1qr4p6b")},m(d,u){Vg(d,t,u),jg(t,n),n.innerHTML=c,jg(t,o),jg(t,r),jg(t,i),jg(t,s),a||(l=th(r,"click",e[16]),a=!0)},p:wg,d(e){e&&Yg(t),a=!1,l()}}}(e);return{c(){t=Zg("div"),r&&r.c(),i=Jg(),nf(s.$$.fragment),a=Jg(),h&&h.c(),l=eh(),rh(t,"class","tooltip-container svelte-1qr4p6b"),rh(t,"data-qa","deepl-inline-translation-result-container"),uh(t,"error",e[4].error)},m(e,n){Vg(e,t,n),~o&&m[o].m(t,null),Vg(e,i,n),of(s,e,n),Vg(e,a,n),h&&h.m(e,n),Vg(e,l,n),c=!0},p(e,n){let i=o;o=g(e,n),o===i?~o&&m[o].p(e,n):(r&&(qh(),Kh(m[i],1,1,(()=>{m[i]=null})),Vh()),~o?(r=m[o],r?r.p(e,n):(r=m[o]=p[o](e),r.c()),Yh(r,1),r.m(t,null)):r=null),(!c||16&n)&&uh(t,"error",e[4].error);const a={};16&n&&(a.originalSnippet=e[4].originalSnippet),16&n&&(a.sourceLanguage=e[4].snippetDetectedSourceLang),32&n&&(a.targetLanguage=e[5].selectedTargetLanguage),16&n&&(a.websiteLanguage=e[4].websiteLanguage),128&n&&(a.showDictionary=e[7]),s.$set(a),u&&h.p(e,n)},i(e){c||(Yh(r),Yh(s.$$.fragment,e),c=!0)},o(e){Kh(r),Kh(s.$$.fragment,e),c=!1},d(e){e&&(Yg(t),Yg(i),Yg(a),Yg(l)),~o&&m[o].d(),rf(s,e),h&&h.d(e)}}}function uk(e){let t,n,o;return n=new c$({props:{closeWindow:e[11],showLangSelect:!e[4].error,settings:df,websiteSettings:e[1],extensionContext:e[10],platformBehaviour:e[2],textProcessingMode:e[3],showProStatus:e[6],showServiceName:!0,showSettingsIcon:!0,$$slots:{default:[dk]},$$scope:{ctx:e}}}),{c(){t=Zg("div"),nf(n.$$.fragment)},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p(e,[t]){const o={};16&t&&(o.showLangSelect=!e[4].error),2&t&&(o.websiteSettings=e[1]),4&t&&(o.platformBehaviour=e[2]),8&t&&(o.textProcessingMode=e[3]),64&t&&(o.showProStatus=e[6]),2098111&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function pk(e,n,o){let r,i,s=wg,a=()=>(s(),s=Cg(c,(e=>o(4,r=e))),c);kg(e,df,(e=>o(5,i=e))),e.$$.on_destroy.push((()=>s()));let{closeTooltip:l}=n,{websiteSettings:c}=n;a();let u,{platformBehaviour:p=re.default}=n,{textProcessingMode:m=ae.translate}=n,{setPositioningStatus:g}=n,h=!1,f="",_=!1,v=x;async function y(e){switch(m){case ae.translate:{const n=await Ut(r.originalSnippet);let o;e===Oe&&(o="dlTrackGdocsMaxCharExceededShown"),e===De&&(o="dlTrackGDocsMaxCharExceededTryProClicked"),t({action:o,payload:{sourceLang:n,targetLang:i.selectedTargetLanguage,sourceLength:r.originalSnippet.length}})}break;case ae.write:{const t=document.getElementsByTagName("deepl-gdocs-icon")[0];t&&t.trackMaxCharExceeded(e)}}}return e.$$set=e=>{"closeTooltip"in e&&o(0,l=e.closeTooltip),"websiteSettings"in e&&a(o(1,c=e.websiteSettings)),"platformBehaviour"in e&&o(2,p=e.platformBehaviour),"textProcessingMode"in e&&o(3,m=e.textProcessingMode),"setPositioningStatus"in e&&o(17,g=e.setPositioningStatus)},e.$$.update=()=>{20&e.$$.dirty&&p===re.gdocs&&r.translationState===d.anonymousUserMaxCharExceeded&&r.originalSnippet.length>0&&y(Oe),17&e.$$.dirty&&r&&(!r.isTranslationTooltipInjected||r.translationState!==d.none||r.translatedSnippet||r.error||r.translatedDOMSnippet||l()),131092&e.$$.dirty&&!r.translationState&&p===re.default&&g&&(g(!0),setTimeout((()=>{g(!1)}),600)),40&e.$$.dirty&&o(6,u=nt(i,be.TRANSLATOR)&&m===ae.translate||nt(i,be.WRITE)&&m===ae.write)},[l,c,p,m,r,i,u,h,f,_,v,function(){t({action:"dlTrackUiAction",payload:{uiAction:H,nicheIntegration:p}}),l()},function(e){o(8,f=e.dictionaryButtonError),o(9,_=e.enableDictionaryButton)},function(){_&&o(7,h=!h)},function(){o(7,h=!1)},function(){y(De),t({action:"dlExternalURLRedirect",payload:{destination:m===ae.translate?fv:_v,utmContent:m===ae.translate?"gdocs_customization":"gdocs_customization_write"}})},()=>{t({action:"dlExternalURLRedirect",payload:{destination:Rv,utmContent:"msaddin_ads_banner"}});try{t({action:"dlTrackClicksOnAdsButton"})}catch(e){console.error(e)}},g,()=>r.translatedDOMSnippet,()=>r.originalSnippet]}class mk extends af{constructor(e){super(),sf(this,e,pk,uk,$g,{closeTooltip:0,websiteSettings:1,platformBehaviour:2,textProcessingMode:3,setPositioningStatus:17})}}function gk(e){let t,n,o,r,i,s,a,l;return i=new mk({props:{closeTooltip:e[0],websiteSettings:e[1],platformBehaviour:e[2],textProcessingMode:e[3],setPositioningStatus:e[7]}}),{c(){t=Zg("div"),n=Zg("div"),o=Jg(),r=Zg("div"),nf(i.$$.fragment),rh(n,"class","tooltip-drag-handle svelte-un7ezn"),rh(r,"class","tooltip-body svelte-un7ezn"),rh(t,"data-qa","inline-translate-tooltip"),rh(t,"class","tooltip-wrapper svelte-un7ezn"),rh(t,"role","dialog"),rh(t,"style",e[6]),rh(t,"draggable",e[5]),rh(t,"dir",jt())},m(c,d){Vg(c,t,d),jg(t,n),jg(t,o),jg(t,r),of(i,r,null),e[18](t),s=!0,a||(l=[th(n,"mouseover",e[8]),th(n,"mouseout",e[9]),Dg(__.call(null,t,{isShadow:!0})),th(t,"click_outside",e[17]),th(t,"dragstart",e[10])],a=!0)},p(e,[n]){const o={};1&n&&(o.closeTooltip=e[0]),2&n&&(o.websiteSettings=e[1]),4&n&&(o.platformBehaviour=e[2]),8&n&&(o.textProcessingMode=e[3]),i.$set(o),(!s||64&n)&&rh(t,"style",e[6]),(!s||32&n)&&rh(t,"draggable",e[5])},i(e){s||(Yh(i.$$.fragment,e),s=!0)},o(e){Kh(i.$$.fragment,e),s=!1},d(n){n&&Yg(t),rf(i),e[18](null),a=!1,Sg(l)}}}function hk(e,t,n){let o;kg(e,df,(e=>n(16,o=e))),xh("deepl_settings",df),xh("text_direction",jt());let r,i,s,a,l,{closeTooltip:c}=t,{websiteSettings:d}=t,{replaceElement:u}=t,{actualPosition:p}=t,{dragContainerTo:m}=t,{platformBehaviour:g=re.default}=t,{textProcessingMode:h=ae.translate}=t,f=!1,_=!1,v="visibility: hidden; opacity:0; height:0;";let y={x:0,y:0};function w(e){let t=L$({dropEvent:e,document:document,dragConfig:{dragOffset:y,dragElementRect:a,dragBarWidth:16}});t&&m(t)}Eh((()=>{n(15,l=o.isLoggedIn),setTimeout((()=>{n(6,v="")}),100),document.addEventListener("dragover",C$),document.addEventListener("drop",w),s=S_(r,(({clientHeight:e})=>{n(14,i=e)}))})),Th((()=>{document.removeEventListener("dragover",C$),document.removeEventListener("drop",w),s&&s()}));return e.$$set=e=>{"closeTooltip"in e&&n(0,c=e.closeTooltip),"websiteSettings"in e&&n(1,d=e.websiteSettings),"replaceElement"in e&&n(12,u=e.replaceElement),"actualPosition"in e&&n(11,p=e.actualPosition),"dragContainerTo"in e&&n(13,m=e.dragContainerTo),"platformBehaviour"in e&&n(2,g=e.platformBehaviour),"textProcessingMode"in e&&n(3,h=e.textProcessingMode)},e.$$.update=()=>{var t,r;98305&e.$$.dirty&&!1===l&&!0===o.isLoggedIn&&c(),65536&e.$$.dirty&&n(11,(t=o.inlineTranslateTooltipPosition,p=u(i,t))),16384&e.$$.dirty&&n(11,(r=i,p=_||g===re.gdocs?u(r,o.inlineTranslateTooltipPosition):p))},[c,d,g,h,r,f,v,e=>{_=e},function(){n(5,f=!0)},function(){n(5,f=!1)},function(e){const t=k$(e,g);y=t.dragOffset,a=t.dragElementRect},p,u,m,i,l,o,()=>c(),function(e){Lh[e?"unshift":"push"]((()=>{r=e,n(4,r)}))}]}class fk extends af{constructor(e){super(),sf(this,e,hk,gk,$g,{closeTooltip:0,websiteSettings:1,replaceElement:12,actualPosition:11,dragContainerTo:13,platformBehaviour:2,textProcessingMode:3})}}class _k{static HTML_TAG_NAME="deepl-inline-translate-tooltip";static createElement=(e=document)=>{const t=e.createElement(_k.HTML_TAG_NAME),n=new _k(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.dragContainerTo=n.dragContainerTo,t};#e=void 0;constructor(e){this.domElement=e,this.domElement.platformBehaviour=re.default,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.mainComponent,this.domElement.selectionRange;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=(e,t,n)=>{const{deepl_inline_ui:o}=D;this.domElement.shadowContainer&&this.domElement.shadowContainer.childElementCount>0&&this.cleanupDOM(),this.domElement.platformBehaviour===re.default&&(this.domElement.selectionRange=window.getSelection().getRangeAt(0));let r=e(this.domElement.selectionRange);this.domElement.shadowContainer.appendChild(this.domElement.container);let i="visibility: initial !important; position: absolute; top: 0px; left: 0px; width: 100%; z-index: "+(o.z_index-100),s=`position: absolute; top: ${r.y}px; left: ${r.x-200}px; z-index: ${o.z_index-100};`;switch(this.domElement.platformBehaviour){case re.gdocs:s+="top: 600px; left: 10px;";break;case re.default:default:s+=""}this.domElement.shadowContainer.style.cssText=i,this.domElement.container.style.cssText=s,this.domElement.mainComponent=new fk({target:this.domElement.container,props:{closeTooltip:t,websiteSettings:n,replaceElement:(t,n)=>{r=e(this.domElement.selectionRange);const o={coords:r,clientHeight:t,TOOLTIP_WIDTH:550,TRIGGER_MENU_ICON_HEIGHT:30,style:this.domElement.container.style};let i=n;const s=x$(o),[a,l]=$$(n),c=this.#e??{x:0,y:0};if(this.domElement.platformBehaviour===re.gdocs){for(const e of l)if(S$(e,o)){T$(e,o,c);break}}else for(const e of a)if(S$(e,o)){i="middle"!==e?e:void 0,E$(e,o,c);break}return{...s,current:i}},platformBehaviour:this.domElement.platformBehaviour,textProcessingMode:this.domElement.textProcessingMode,dragContainerTo:this.dragContainerTo}})};dragContainerTo=e=>{this.#e={y:parseInt(this.domElement.container.style.top)-e.y+(this.#e?.y??0),x:parseInt(this.domElement.container.style.left)-e.x+(this.#e?.x??0)},this.domElement.container.style.top=`${e.y}px`,this.domElement.container.style.left=`${e.x}px`};cleanupDOM=()=>{this.domElement.container.remove(),this.domElement.shadowContainer.remove(),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function vk(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f;return{c(){t=Zg("div"),n=Zg("div"),o=Zg("div"),r=Zg("div"),i=Zg("div"),i.textContent=`${chrome.i18n.getMessage("inline_translation_highlighter_tooltip_headline")}`,s=Jg(),a=Zg("div"),a.textContent=`${chrome.i18n.getMessage("inline_translation_highlighter_tooltip_text")}`,l=Jg(),c=Zg("button"),rh(i,"class","headline svelte-150jdi1"),rh(a,"class","text svelte-150jdi1"),rh(r,"class","text-wrapper svelte-150jdi1"),rh(o,"class","content svelte-150jdi1"),rh(c,"class","close-icon svelte-150jdi1"),rh(n,"class",d=Ng(`body body__${e[1]}`)+" svelte-150jdi1"),rh(t,"class",u=Ng(`container container__${e[1]}`)+" svelte-150jdi1")},m(d,u){Vg(d,t,u),jg(t,n),jg(n,o),jg(o,r),jg(r,i),jg(r,s),jg(r,a),jg(n,l),jg(n,c),g=!0,h||(f=th(c,"click",e[3]),h=!0)},p(e,[o]){(!g||2&o&&d!==(d=Ng(`body body__${e[1]}`)+" svelte-150jdi1"))&&rh(n,"class",d),(!g||2&o&&u!==(u=Ng(`container container__${e[1]}`)+" svelte-150jdi1"))&&rh(t,"class",u)},i(e){g||(Oh((()=>{g&&(m&&m.end(1),p=Xh(t,Ff,{x:100,duration:1e3}),p.start())})),g=!0)},o(e){p&&p.invalidate(),m=Qh(t,Ff,{x:100,duration:1e3}),g=!1},d(e){e&&Yg(t),e&&m&&m.end(),h=!1,f()}}}function yk(n,o,r){let{closeInlineHighlighter:i=(()=>{})}=o,{el:s}=o,a="topLeft";Eh((async()=>{try{t({action:"dltrackOpenInlineHighlighter",payload:{domainName:e.websiteData.hostname}})}catch(e){console.error(e)}}));return n.$$set=e=>{"closeInlineHighlighter"in e&&r(0,i=e.closeInlineHighlighter),"el"in e&&r(2,s=e.el)},n.$$.update=()=>{if(4&n.$$.dirty&&s){const e=s.getBoundingClientRect();let t=e.x>305,n=window.innerWidth-e.right>305,o=window.innerHeight-e.bottom>190,i=e.y>190;i&&t?r(1,a="topLeft"):i&&n?r(1,a="topRight"):o&&t?r(1,a="bottomLeft"):o&&n&&r(1,a="bottomRight")}},[i,a,s,()=>i(oe.close_icon)]}class wk extends af{constructor(e){super(),sf(this,e,yk,vk,$g,{closeInlineHighlighter:0,el:2})}}function bk(e){let t,n,o,r,i,s,a,l,c,d,u,p=e[2]&&!e[0].isInlineHighlighterShown&&Ek(e);return i=new T_({props:{tooltip:e[1],showProShield:nt(e[0],be.WRITE),$$slots:{default:[Tk]},$$scope:{ctx:e}}}),a=new T_({props:{tooltip:chrome.i18n.getMessage("inline_translation_tooltip_turnoff"),$$slots:{default:[Sk]},$$scope:{ctx:e}}}),{c(){t=Zg("div"),p&&p.c(),n=Jg(),o=Zg("div"),r=Zg("div"),nf(i.$$.fragment),s=Jg(),nf(a.$$.fragment),rh(r,"class","icon-container svelte-thfl2z"),rh(r,"data-qa","deepl-inline-translate-icon-container"),rh(o,"class","layout-container svelte-thfl2z"),rh(t,"dir",jt())},m(l,m){Vg(l,t,m),p&&p.m(t,null),jg(t,n),jg(t,o),jg(o,r),of(i,r,null),jg(r,s),of(a,r,null),e[24](r),c=!0,d||(u=[th(r,"blur",e[15]),th(r,"mouseenter",e[6]),th(r,"mouseleave",e[7])],d=!0)},p(e,o){e[2]&&!e[0].isInlineHighlighterShown?p?(p.p(e,o),5&o&&Yh(p,1)):(p=Ek(e),p.c(),Yh(p,1),p.m(t,n)):p&&(qh(),Kh(p,1,1,(()=>{p=null})),Vh());const r={};2&o&&(r.tooltip=e[1]),1&o&&(r.showProShield=nt(e[0],be.WRITE)),134217728&o&&(r.$$scope={dirty:o,ctx:e}),i.$set(r);const s={};134217736&o&&(s.$$scope={dirty:o,ctx:e}),a.$set(s)},i(e){c||(Yh(p),Yh(i.$$.fragment,e),Yh(a.$$.fragment,e),l||Oh((()=>{l=Xh(r,Ff,{x:-5,duration:300}),l.start()})),c=!0)},o(e){Kh(p),Kh(i.$$.fragment,e),Kh(a.$$.fragment,e),c=!1},d(n){n&&Yg(t),p&&p.d(),rf(i),rf(a),e[24](null),d=!1,Sg(u)}}}function Ek(e){let t,n;return t=new wk({props:{closeInlineHighlighter:e[10],el:e[2]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.el=e[2]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function Tk(e){let t,n,o;return{c(){t=Zg("div"),rh(t,"class","dl-logo svelte-thfl2z"),rh(t,"data-qa","deepl-inline-translate-menu-icon")},m(r,i){Vg(r,t,i),n||(o=[th(t,"click",oh(nh(e[5]))),th(t,"focus",e[19]),th(t,"mouseup",oh(nh(e[20]))),th(t,"mousedown",oh(nh(e[21]))),th(t,"mouseenter",e[22])],n=!0)},p:wg,d(e){e&&Yg(t),n=!1,Sg(o)}}}function Sk(e){let t,n,o,r,i;return{c(){t=Zg("div"),rh(t,"data-qa","deepl-inline-translate-turnoff-icon"),rh(t,"class",n=Ng(`dl-turnoff-inline-icon ${e[3]?"":"hidden"} `)+" svelte-thfl2z")},m(n,o){Vg(n,t,o),r||(i=[th(t,"click",oh(nh(e[8]))),th(t,"focus",e[16]),th(t,"mousedown",oh(nh(e[17]))),th(t,"mouseup",oh(nh(e[18]))),th(t,"mouseenter",e[23])],r=!0)},p(e,o){8&o&&n!==(n=Ng(`dl-turnoff-inline-icon ${e[3]?"":"hidden"} `)+" svelte-thfl2z")&&rh(t,"class",n)},i(e){o||Oh((()=>{o=Xh(t,Ff,{x:-5,duration:300}),o.start()}))},o:wg,d(e){e&&Yg(t),r=!1,Sg(i)}}}function xk(e){let t,n,o=!e[4]&&bk(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,[n]){e[4]?o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh()):o?(o.p(e,n),16&n&&Yh(o,1)):(o=bk(e),o.c(),Yh(o,1),o.m(t.parentNode,t))},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function $k(e,o,r){let i,s,a;kg(e,df,(e=>r(0,s=e))),kg(e,Rw,(e=>r(14,a=e))),xh("deepl_settings",df),xh("text_direction",jt());let l,c,{platformBehaviour:d=re.default}=o,{isInput:u=!1}=o,p="",m=[],g=!1;function h(){DD(),_(),pn()&&console.log("INLINE_TRIGGER isInput",u),t(u?{action:"dlTriggerTranslateInput"}:{action:"dlTriggerTranslateInline"}),p||n(P.hintKeyboardShortcut),y(oe.deepl_icon)}async function f(e,n,o){if("dlTriggerTranslationShortcut"===e.action)h(),t({action:"dlTrackUseOfShortcut",payload:{shortcutType:W,location:B.inlineTranslationTriggerIcon,nicheIntegration:d}}),o();return!0}function _(){a&&a.isInlineTranslateSettingsTooltipInjected||r(3,g=!1)}function v(e){m.includes(e)||(t({action:"dlTrackIconHover",payload:{uiLocation:e,domainName:window.location.host,nicheIntegration:d}}),m.push(e))}function y(e){if(!s.isInlineHighlighterShown){df.set({isInlineHighlighterShown:!0});try{t({action:"dltrackCloseInlineHighlighter",payload:{trigger:e}})}catch(e){console.error(e)}}}t({action:"dlCheckCommandShortcuts"}).then((e=>r(13,p=e?e.filter((e=>e.name==W))[0].shortcut:""))),chrome.runtime.onMessage.addListener(f),Th((()=>{chrome.runtime.onMessage.removeListener(f)}));return e.$$set=e=>{"platformBehaviour"in e&&r(11,d=e.platformBehaviour),"isInput"in e&&r(12,u=e.isInput)},e.$$.update=()=>{if(1&e.$$.dirty&&r(4,i=s.blacklistDomainsForReading&&s.blacklistDomainsForReading.includes(window.location.hostname)||!s.enableInlineTranslation||s.isGmailEnabled&&rT()),24576&e.$$.dirty){let e;e=chrome.i18n.getMessage("context_menus_translate_section"),r(1,l=p?`${e} (${p})`:e),!1===a.isInlineTranslateSettingsTooltipInjected&&r(3,g=!1)}},[s,l,c,g,i,h,function(){r(3,g=!0)},_,function(){a&&!a.isInlineTranslateSettingsTooltipInjected&&(r(3,g=!0),OD(d),t({action:"dlTrackInlineSettingOpened",payload:{uiFunction:Y,uiLocation:B.inlineTranslationTriggerIcon,nicheIntegration:d}})),y(oe.deepl_icon)},v,y,d,u,p,a,function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},()=>v(B.inlineTranslationTriggerIcon),()=>v(B.inlineTranslationSettingsIcon),function(e){Lh[e?"unshift":"push"]((()=>{c=e,r(2,c)}))}]}class Ck extends af{constructor(e){super(),sf(this,e,$k,xk,$g,{platformBehaviour:11,isInput:12})}}const kk={TRIGGER_HEIGHT:25,TRIGGER_WIDTH:25,TRIGGER_EXPENDED_WIDTH:60};function Lk(e,t){let n={containerStyleTop:t.y>0?t.y:0,containerStyleLeft:t.x>0?t.x:0};if(!e||!t)return n;const{TRIGGER_EXPENDED_WIDTH:o,TRIGGER_WIDTH:r,TRIGGER_HEIGHT:i}=kk,s=e?.detail;if(1===s){if(e.isOutsideOfView)return n;let s=parseInt(window.getComputedStyle(window.getSelection().anchorNode.parentElement,null).getPropertyValue("font-size"));const a=document.body.parentNode.getBoundingClientRect();let l=e.pageY+.5*s,c=t.selectedTop+t.height-s-a.y;const d=()=>{const e=window.getSelection();if(!e.rangeCount)return;const t=e.getRangeAt(0).getClientRects();if(!t.length)return;return{firstRect:t[0],lastRect:t[t.length-1]}};if(t.height<1.5*s){n.containerStyleLeft=e.clientX;const i=t.x+t.selectedWidth;e.clientX>i?n.containerStyleLeft=t.selectedRight>o?i:i-o:e.clientX-t.x<r&&e.clientX<t.x&&(n.containerStyleLeft=t.selectedLeft>o?t.x:t.x+o)}else if(l>c){const t=d();t&&t.lastRect?n.containerStyleLeft=t.lastRect.right:n.containerStyleLeft=e.clientX}else if(l<c){n.containerStyleTop=t.y-t.height-i-5;const o=d();o&&o.firstRect?n.containerStyleLeft=o.firstRect.x:n.containerStyleLeft=e.clientX}}else if(2===s){n.containerStyleLeft=t.x+t.selectedWidth-r;let e=parseInt(window.getComputedStyle(window.getSelection().anchorNode.parentElement,null).getPropertyValue("font-size"));parseInt(t.height/2)>e&&(n.containerStyleTop=t.y-t.height+e+2)}const a=window.innerWidth||document.documentElement.innerWidth,l=window.scrollHeight||document.documentElement.scrollHeight;return n.containerStyleLeft+o>a&&(n.containerStyleLeft=n.containerStyleLeft-o),(n.containerStyleTop+i>l||n.containerStyleTop<0)&&(n.containerStyleTop=t.y-i),n}class Ik{static HTML_TAG_NAME="deepl-inline-trigger";static createElement=(e=document)=>{const t=e.createElement(Ik.HTML_TAG_NAME),n=new Ik(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.addChangeEvents=n.addChangeEvents,t.removeChangeEvents=n.removeChangeEvents,t.repositionContainer=n.repositionContainer,t.cachedReposition=n.cachedReposition,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.mainComponent,this.domElement.cachedMouseEvent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=(e,t)=>{this.domElement.shadowContainer&&this.domElement.shadowContainer.childElementCount>0&&this.domElement.cleanupDOM(),this.domElement.repositionContainer(t),this.domElement.shadowContainer.appendChild(this.domElement.container),this.domElement.mainComponent=new Ck({target:this.domElement.container,props:{websiteSettings:e}}),this.domElement.addChangeEvents(),this.domElement.cachedMouseEvent=t};repositionContainer=e=>{if(window.getSelection()&&!window.getSelection().toString())return void this.domElement.cleanupDOM();const{deepl_inline_ui:t}=D,n=t.z_index-500,o=fT();let r=`position: absolute; top: 0px; left: 0px; width: 100%; z-index: ${n}; visibility: initial !important;`,i=`position: absolute; z-index: ${n};`;this.domElement.shadowContainer.style.cssText=r,this.domElement.container.style.cssText=i;const s=Lk(e,o);this.domElement.container.style.top=`${parseInt(s.containerStyleTop)}px`,this.domElement.container.style.left=`${parseInt(s.containerStyleLeft)}px`};cachedReposition=()=>this.domElement.repositionContainer(this.domElement.cachedMouseEvent);addChangeEvents=()=>{window.addEventListener("scroll",this.domElement.cachedReposition),window.addEventListener("resize",this.domElement.cachedReposition)};removeChangeEvents=()=>{window.removeEventListener("scroll",this.domElement.cachedReposition),window.removeEventListener("resize",this.domElement.cachedReposition)};cleanupDOM=()=>{this.domElement.container.remove(),this.domElement.shadowContainer.remove(),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy(),this.domElement.removeChangeEvents()}}const Ak={TRANSLATE:"translate",WRITE:"write"},Rk=Ak,Mk=async e=>{const t=pt();let n,o=e.ownerDocument,r=Xf(e).getSelection();n=t?r&&r.anchorNode&&"#text"==r.anchorNode.nodeName&&"Range"==r.type&&e.contains(r.anchorNode):r&&r.baseNode&&"#text"==r.baseNode.nodeName&&"Range"==r.type&&(e.contains(r.baseNode)||function(e,t){return"IFRAME"===e.nodeName.toUpperCase()&&e_(e)===t.ownerDocument}(e,r.baseNode)),n||(e.focus(),await o_(e)),r=Xf(e).getSelection();const{domElements:i,strings:s,container:a}=function({thisDocument:e,selection:t}){let n;t.getRangeAt?n=t.getRangeAt(0):(n=e.createRange(),n.setStart(t.anchorNode,t.anchorOffset),n.setEnd(t.focusNode,t.focusOffset));const o=n.cloneContents(),r=document.createElement("div");r.appendChild(o),r.style.display="block",r.style.position="fixed",r.style.height="0px",r.style.width="0px",r.style.top="-500px",r.style.left="-500px",r.style.overflow="hidden",document.body.appendChild(r);const{domElements:i,strings:s}=bT(r);return{domElements:i,strings:s,container:r}}({thisDocument:o,selection:r});return{domElements:i,strings:s,container:a,isSubtextSelected:n}};const Nk=e=>{const{domElements:t,strings:n,cloneContainer:o}=function(e){const t=e.cloneNode(!0),n=document.createElement("div");n.appendChild(t),n.style.display="none",document.body.appendChild(n);const{domElements:o,strings:r}=bT(n);return{domElements:o,strings:r,cloneContainer:n}}(e);return{domElements:t,strings:n,cloneContainer:o}};const Ok=new DOMParser,Dk=(e,t)=>{const n=document.createElement(t),o=Array.from(e.attributes),r=e.tagName;for(;e.firstChild;)n.appendChild(e.firstChild);return e.parentNode?.replaceChild(n,e),{tagName:r.toLowerCase(),attributes:o}},Pk=e=>{const t=[],n=new Map;for(let o=0;o<e.length;++o){const r=e[o],i=Ok.parseFromString(r,"text/html"),s=Array.from(i.querySelectorAll("body *:not(head):not(html)"));for(let e of s){const t=`a${n.size+1}`,o=Dk(e,t);n.set(t,o)}const a=i.body.innerHTML;t.push(a)}return{map:n,simplifiedHtml:t}},Uk=(e,t)=>{const n=Ok.parseFromString(t,"text/html"),o=Array.from(n.querySelectorAll("body *:not(head):not(html)"));for(const t of o){const n=e.get(t.tagName.toLowerCase());if(!n)continue;const o=document.createElement(n.tagName);for(const e of n.attributes)o.setAttribute(e.name,e.value);for(;t.firstChild;)o.appendChild(t.firstChild);t.parentNode?.replaceChild(o,t)}return n.body.innerHTML};async function Bk(e,t,n){!function(){const e=window.getSelection();return e.toString()===e.focusNode.textContent}()?await aT(e,t,n):await c_(e,t)}var Wk=Object.freeze({__proto__:null,split:async function(e,t){const n=await Mk(e);t&&(n.strings=n.domElements.map((e=>e.innerText)));const o=n.strings.map((e=>({text:e})));return{textConfig:n,requests:o}},reassemble:function(e,t){TT({strings:t[0]?.texts,domElements:e.domElements});const n=new Map;let o=0,r=0;for(const t of e.container.children)1===t.children.length&&"BR"===t.children[0].nodeName?r++:(n.set(o,r),o++);const i={text:t[0]?.texts?t[0]?.texts.map(((e,t)=>{const o=n.get(t+1)??0;return e+"\n".repeat(o)})).join("\n"):"",html:e.container.innerHTML};return e.container.remove(),i},injectContent:async function(e,t,n){await Bk(e,t,n)}});var zk=Object.freeze({__proto__:null,injectContent:async function(e,t,n){await Bk(e,t,n)}});function Fk(e){return e.includes("web.whatsapp.com")?Wk:e.includes("facebook.com")?zk:void 0}async function Hk(e,n){const{isWriteRequest:o,targetLang:r,nicheIntegration:i,sourceLang:s,isHtml:a,clearInnerHTML:l,removeFormatting:c}={isWriteRequest:!1,targetLang:null,nicheIntegration:null,sourceLang:null,isHtml:null,clearInnerHTML:null,removeFormatting:!1,...n};let d,u={},p=[];const m=!iT(e),g=Fk(window.location.host);if(g?.split){const t=await g.split(e,c);u=t.textConfig,p=t.requests}else if(m)u=await Mk(e),c&&(u.strings=u.domElements.map((e=>e.innerText))),p=u.strings.map((e=>({text:e})));else{const t=e.value;sT(e)&&(u.isSubtextSelected=!0),d=u.isSubtextSelected?t.substring(e.selectionStart,e.selectionEnd):t,p.push({text:d})}if(0===p.length)return;let h,f;if(s)h=s;else try{h=document.documentElement.lang}catch(e){console.error(e)}const _=Pk(p.map((e=>e.text)));f=o?await t({action:"dlRequestImproveWriting",payload:{requests:_.simplifiedHtml.map((e=>({text:e}))),domainName:window.location.hostname,websiteLanguage:h,sourceLang:s,...a&&{isHtml:!0},nicheIntegration:i}}):await t({action:"dlRequestInputTranslation",payload:{requests:_.simplifiedHtml.map((e=>({text:e}))),domainName:window.location.hostname,websiteLanguage:h,targetLang:r,platformBehavior:i}}),f=f.map((e=>({...e,text:Uk(_.map,e.text),texts:e.texts.map((e=>Uk(_.map,e)))})));let v={text:"",html:""};g?.reassemble?v=g.reassemble(u,f):m?(TT({strings:f[0]?.texts,domElements:u.domElements}),v.text=u.container.innerText,v.html=ft(u.container.innerHTML),u.container.remove()):(v.text=f[0].text,v.html=f[0].text),m&&!u.isSubtextSelected&&f_(e),l&&!u.isSubtextSelected&&(e.innerHTML=""),await aT(e,v,u.isSubtextSelected)}async function jk(e,n){let o,r={},i=[];if(!iT(e))r=await Mk(e),i=r.strings.map((e=>e));else{const t=e.value;sT(e)&&(r.isSubtextSelected=!0),o=r.isSubtextSelected?t.substring(e.selectionStart,e.selectionEnd):t,i.push(o)}return await t({action:"dlSplitTextRequest",payload:{texts:i,mode:n}})}async function Gk(e){const{element:n,mode:o,targetLang:r,style:i,formality:s,writeLang:a}=e;let l,c={},d=[];const u=!iT(n);if(u)c=await Mk(n),d=c.strings.map((e=>e));else{const e=n.value;sT(n)&&(c.isSubtextSelected=!0),l=c.isSubtextSelected?e.substring(n.selectionStart,n.selectionEnd):e,d.push(l)}const p=Pk(d);let m=await t({action:"dlRequestAlternatives",payload:{texts:p.simplifiedHtml,mode:o,targetLang:r,style:i,formality:s,domainName:window.location.hostname,writeLang:a}});if(u){const e=m.alternativeComponents.map((e=>{const t=e.map((e=>Uk(p.map,e)));return TT({strings:t,domElements:c.domElements}),{text:c.container.innerText,html:ft(c.container.innerHTML)}}));m={...m,processedText:Uk(p.map,m.processedText.processedText),alternatives:e.map((e=>e.text)),alternativesHtml:e.map((e=>e.html))},c.container.remove()}else m={...m,processedText:Uk(p.map,m.processedText.processedText),alternatives:m.alternatives.map((e=>Uk(p.map,e)))};return m}async function qk(e,t,n){const o=!iT(t),r={text:"",html:""},i=Fk(window.location.host);i?.injectContent?(r.text=e,r.html=n):o?(r.text=e,r.html=n,f_(t)):(r.text=e,r.html=e),i?.injectContent?await i.injectContent(t,r,!0):await aT(t,r,!0)}function Vk(e){let t,n,o,r,i;return n=new R_({props:{items:e[1],selectedOption:e[2],alignRight:!1,dataQaButton:"deepl-formality-selection-button",dataQaList:"deepl-formality-selection-list",variant:e[0],autoHeight:!0}}),n.$on("valueselected",e[3]),{c(){t=Zg("div"),nf(n.$$.fragment)},m(s,a){Vg(s,t,a),of(n,t,null),o=!0,r||(i=th(t,"mousedown",oh(nh(e[5]))),r=!0)},p(e,[t]){const o={};2&t&&(o.items=e[1]),4&t&&(o.selectedOption=e[2]),1&t&&(o.variant=e[0]),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n),r=!1,i()}}}function Yk(e,n,o){let r,i;const s=Sh();let{value:a}=n,{variant:l}=n;return e.$$set=e=>{"value"in e&&o(4,a=e.value),"variant"in e&&o(0,l=e.variant)},e.$$.update=()=>{18&e.$$.dirty&&o(2,i=a?r.find((e=>e.value===a)):r.find((e=>e.value===Ke)))},o(1,r=[{value:Ke,label:chrome.i18n.getMessage("ui_formality_automatic"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_automatic")},{value:Ze,label:chrome.i18n.getMessage("ui_formality_formal"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_formal")},{value:Xe,label:chrome.i18n.getMessage("ui_formality_informal"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_informal")}]),[l,r,i,function(e){e.detail.selectedOption.value!==a&&(s("selection",e.detail),Promise.allSettled([t({action:"dlTrackFormalitySelected",payload:{formality:e.detail.selectedOption.value}})]))},a,function(t){Ch.call(this,e,t)}]}class Kk extends af{constructor(e){super(),sf(this,e,Yk,Vk,$g,{value:4,variant:0})}}function Zk(e,t,n){const o=e.slice();return o[11]=t[n],o}function Xk(e,t,n){const o=e.slice();return o[14]=t[n],o}function Qk(e){let t,n,o;function r(){return e[8](e[14])}return{c(){t=Zg("button"),t.textContent=`${chrome.i18n.getMessage(`writing_style_${e[14]}`)}`,rh(t,"class","svelte-i0wtba"),uh(t,"active",e[14]===e[0])},m(e,i){Vg(e,t,i),n||(o=th(t,"click",r),n=!0)},p(n,o){e=n,1&o&&uh(t,"active",e[14]===e[0])},d(e){e&&Yg(t),n=!1,o()}}}function Jk(e){let t,n,o;function r(){return e[9](e[11])}return{c(){t=Zg("button"),t.textContent=`${chrome.i18n.getMessage(`writing_tone_${e[11]}`)}`,rh(t,"class","svelte-i0wtba"),uh(t,"active",e[11]===e[1])},m(e,i){Vg(e,t,i),n||(o=th(t,"click",r),n=!0)},p(n,o){e=n,2&o&&uh(t,"active",e[11]===e[1])},d(e){e&&Yg(t),n=!1,o()}}}function eL(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w,b,E=ef(Je),T=[];for(let t=0;t<E.length;t+=1)T[t]=Qk(Xk(e,E,t));let S=ef(et),x=[];for(let t=0;t<S.length;t+=1)x[t]=Jk(Zk(e,S,t));return{c(){t=Zg("div"),n=Zg("div"),o=Zg("div"),o.textContent=`${chrome.i18n.getMessage("write_style_options_headline_style")}`,r=Jg(),i=Zg("div");for(let e=0;e<T.length;e+=1)T[e].c();s=Jg(),a=Zg("div"),a.textContent=`${chrome.i18n.getMessage("write_style_options_description_style")}`,l=Jg(),c=Zg("div"),d=Zg("div"),d.textContent=`${chrome.i18n.getMessage("write_style_options_headline_tone")}`,u=Jg(),p=Zg("div");for(let e=0;e<x.length;e+=1)x[e].c();m=Jg(),g=Zg("div"),g.textContent=`${chrome.i18n.getMessage("write_style_options_description_tone")}`,h=Jg(),f=Zg("div"),_=Zg("button"),_.textContent=`${chrome.i18n.getMessage("write_style_options_cta_reset")}`,v=Jg(),y=Zg("button"),y.textContent=`${chrome.i18n.getMessage("write_style_options_cta_apply")}`,rh(o,"class","title svelte-i0wtba"),rh(i,"class","toggles svelte-i0wtba"),rh(a,"class","explanation svelte-i0wtba"),rh(n,"class","writing-style svelte-i0wtba"),rh(d,"class","title svelte-i0wtba"),rh(p,"class","toggles svelte-i0wtba"),rh(g,"class","explanation svelte-i0wtba"),rh(c,"class","tone svelte-i0wtba"),rh(_,"class","reset svelte-i0wtba"),rh(y,"class","apply svelte-i0wtba"),uh(y,"enabled",e[0]||e[1]),rh(f,"class","actions svelte-i0wtba"),rh(t,"class","container svelte-i0wtba")},m(E,S){Vg(E,t,S),jg(t,n),jg(n,o),jg(n,r),jg(n,i);for(let e=0;e<T.length;e+=1)T[e]&&T[e].m(i,null);jg(n,s),jg(n,a),jg(t,l),jg(t,c),jg(c,d),jg(c,u),jg(c,p);for(let e=0;e<x.length;e+=1)x[e]&&x[e].m(p,null);jg(c,m),jg(c,g),jg(t,h),jg(t,f),jg(f,_),jg(f,v),jg(f,y),w||(b=[th(_,"click",e[5]),th(y,"click",e[4])],w=!0)},p(e,[t]){if(5&t){let n;for(E=ef(Je),n=0;n<E.length;n+=1){const o=Xk(e,E,n);T[n]?T[n].p(o,t):(T[n]=Qk(o),T[n].c(),T[n].m(i,null))}for(;n<T.length;n+=1)T[n].d(1);T.length=E.length}if(10&t){let n;for(S=ef(et),n=0;n<S.length;n+=1){const o=Zk(e,S,n);x[n]?x[n].p(o,t):(x[n]=Jk(o),x[n].c(),x[n].m(p,null))}for(;n<x.length;n+=1)x[n].d(1);x.length=S.length}3&t&&uh(y,"enabled",e[0]||e[1])},i:wg,o:wg,d(e){e&&Yg(t),Kg(T,e),Kg(x,e),w=!1,Sg(b)}}}function tL(e,n,o){const r=Sh();let{writingStyle:i}=n,{tone:s}=n,a=i,l=s;function c(e){o(1,l=void 0),o(0,a=e);try{t({action:"dlTrackWriteTextStylesChanged",payload:{style:a||void 0}})}catch(e){console.error(e)}}function d(e){o(0,a=void 0),o(1,l=e);try{t({action:"dlTrackWriteTextTonesChanged",payload:{tone:l||void 0}})}catch(e){console.error(e)}}return e.$$set=e=>{"writingStyle"in e&&o(6,i=e.writingStyle),"tone"in e&&o(7,s=e.tone)},[a,l,c,d,function(){o(6,i=a),o(7,s=l);try{t({action:"dlTrackWriteTextStylesApplied",payload:{style:i||s||void 0}})}catch(e){console.error(e)}r("apply")},function(){o(1,l=void 0),o(0,a=void 0),o(7,s=void 0),o(6,i=void 0),r("reset")},i,s,e=>c(e),e=>d(e)]}class nL extends af{constructor(e){super(),sf(this,e,tL,eL,$g,{writingStyle:6,tone:7})}}function oL(e){let t,n,o,r,i,s;return{c(){t=Zg("div"),n=Zg("div"),o=Zg("div"),o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M11.25 11.25L11.2915 11.2293C11.8646 10.9427 12.5099 11.4603 12.3545 12.082L11.6455 14.918C11.4901 15.5397 12.1354 16.0573 12.7085 15.7707L12.75 15.75M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12ZM12 8.25H12.0075V8.2575H12V8.25Z" stroke="#0177A9" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',r=Jg(),i=Zg("div"),s=Zg("p"),s.textContent=`${chrome.i18n.getMessage("write_not_supported_language_message")}`,rh(o,"class","icon svelte-16948va"),rh(s,"class","svelte-16948va"),rh(i,"class","text svelte-16948va"),rh(n,"class","message svelte-16948va"),rh(t,"class","container svelte-16948va")},m(e,a){Vg(e,t,a),jg(t,n),jg(n,o),jg(n,r),jg(n,i),jg(i,s)},p:wg,i:wg,o:wg,d(e){e&&Yg(t)}}}class rL extends af{constructor(e){super(),sf(this,e,null,oL,$g,{})}}function iL(e){let t,n,o;return{c(){t=Xg("svg"),n=Xg("path"),rh(n,"d","M19 10C19 14.9706 14.9706 19 10 19M19 10C19 5.02944 14.9706 1 10 1M19 10H1M10 19C5.02944 19 1 14.9706 1 10M10 19C11.6569 19 13 14.9706 13 10C13 5.02944 11.6569 1 10 1M10 19C8.34315 19 7 14.9706 7 10C7 5.02944 8.34315 1 10 1M1 10C1 5.02944 5.02944 1 10 1"),rh(n,"stroke",o=e[0]?"white":"#242B34"),rh(n,"stroke-width","1.5"),rh(n,"stroke-linecap","round"),rh(n,"stroke-linejoin","round"),rh(t,"width","20"),rh(t,"height","20"),rh(t,"viewBox","0 0 20 20"),rh(t,"fill","none"),rh(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){Vg(e,t,o),jg(t,n)},p(e,[t]){1&t&&o!==(o=e[0]?"white":"#242B34")&&rh(n,"stroke",o)},i:wg,o:wg,d(e){e&&Yg(t)}}}function sL(e,t,n){let{isActive:o}=t;return e.$$set=e=>{"isActive"in e&&n(0,o=e.isActive)},[o]}class aL extends af{constructor(e){super(),sf(this,e,sL,iL,$g,{isActive:0})}}function lL(e){let t,n;return{c(){t=Xg("svg"),n=Xg("path"),rh(n,"d","M13.2322 3.23223L16.7677 6.76777M14.7322 1.73223C15.7085 0.755922 17.2914 0.755922 18.2677 1.73223C19.244 2.70854 19.244 4.29146 18.2677 5.26777L4.5 19.0355H1V15.4644L14.7322 1.73223Z"),rh(n,"stroke",e[0]),rh(n,"stroke-width","1.5"),rh(n,"stroke-linecap","round"),rh(n,"stroke-linejoin","round"),rh(t,"width","20"),rh(t,"height","20"),rh(t,"viewBox","0 0 20 20"),rh(t,"fill","none"),rh(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){Vg(e,t,o),jg(t,n)},p(e,[t]){1&t&&rh(n,"stroke",e[0])},i:wg,o:wg,d(e){e&&Yg(t)}}}function cL(e,t,n){let{isActive:o}=t,{isDisabled:r}=t,i="#242B34";return e.$$set=e=>{"isActive"in e&&n(1,o=e.isActive),"isDisabled"in e&&n(2,r=e.isDisabled)},e.$$.update=()=>{6&e.$$.dirty&&n(0,i=r?"#848F9B":o?"white":"#242B34")},[i,o,r]}class dL extends af{constructor(e){super(),sf(this,e,cL,lL,$g,{isActive:1,isDisabled:2})}}function uL(e){let t,n;return{c(){t=Xg("svg"),n=Xg("path"),rh(n,"fill-rule","evenodd"),rh(n,"clip-rule","evenodd"),rh(n,"d","M7.66109 0.236324C7.85709 0.0735691 8.1429 0.0735693 8.33891 0.236324C10.2777 1.84618 12.7315 2.85723 15.4166 2.98576C15.658 2.99732 15.8641 3.17164 15.8957 3.41119C15.9645 3.93104 16 4.4614 16 5.00004C16 10.1625 12.7401 14.5635 8.16655 16.257C8.05931 16.2967 7.94102 16.2967 7.83378 16.257C3.26004 14.5636 0 10.1625 0 4.99992C0 4.46132 0.0354836 3.93101 0.10424 3.41119C0.135926 3.17165 0.342016 2.99732 0.583373 2.98576C3.2685 2.85723 5.72231 1.84618 7.66109 0.236324ZM11.8566 6.19088C12.1002 5.8559 12.0261 5.38683 11.6911 5.1432C11.3561 4.89958 10.8871 4.97364 10.6434 5.30863L7.15969 10.0988L5.28033 8.21943C4.98744 7.92653 4.51256 7.92653 4.21967 8.21943C3.92678 8.51232 3.92678 8.98719 4.21967 9.28009L6.71967 11.7801C6.87477 11.9352 7.08999 12.0146 7.30867 11.9975C7.52734 11.9803 7.72754 11.8683 7.85655 11.6909L11.8566 6.19088Z"),rh(n,"fill","#007E5E"),rh(t,"width","16"),rh(t,"height","17"),rh(t,"viewBox","0 0 16 17"),rh(t,"fill","none"),rh(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){Vg(e,t,o),jg(t,n)},d(e){e&&Yg(t)}}}function pL(e){let t,n;return{c(){t=Xg("svg"),n=Xg("path"),rh(n,"fill-rule","evenodd"),rh(n,"clip-rule","evenodd"),rh(n,"d","M7.66109 0.236324C7.85709 0.0735691 8.1429 0.0735693 8.33891 0.236324C10.2777 1.84618 12.7315 2.85723 15.4166 2.98576C15.658 2.99732 15.8641 3.17164 15.8957 3.41119C15.9645 3.93104 16 4.4614 16 5.00004C16 10.1625 12.7401 14.5635 8.16655 16.257C8.05931 16.2967 7.94102 16.2967 7.83378 16.257C3.26004 14.5636 0 10.1625 0 4.99992C0 4.46132 0.0354836 3.93101 0.10424 3.41119C0.135926 3.17165 0.342016 2.99732 0.583373 2.98576C3.2685 2.85723 5.72231 1.84618 7.66109 0.236324ZM11.8566 6.19088C12.1002 5.8559 12.0261 5.38683 11.6911 5.1432C11.3561 4.89958 10.8871 4.97364 10.6434 5.30863L7.15969 10.0988L5.28033 8.21943C4.98744 7.92653 4.51256 7.92653 4.21967 8.21943C3.92678 8.51232 3.92678 8.98719 4.21967 9.28009L6.71967 11.7801C6.87477 11.9352 7.08999 12.0146 7.30867 11.9975C7.52734 11.9803 7.72754 11.8683 7.85655 11.6909L11.8566 6.19088Z"),rh(n,"fill","white"),rh(t,"width","16"),rh(t,"height","17"),rh(t,"viewBox","0 0 16 17"),rh(t,"fill","none"),rh(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){Vg(e,t,o),jg(t,n)},d(e){e&&Yg(t)}}}function mL(e){let t;function n(e,t){return e[0]?pL:uL}let o=n(e),r=o(e);return{c(){r.c(),t=eh()},m(e,n){r.m(e,n),Vg(e,t,n)},p(e,[i]){o!==(o=n(e))&&(r.d(1),r=o(e),r&&(r.c(),r.m(t.parentNode,t)))},i:wg,o:wg,d(e){e&&Yg(t),r.d(e)}}}function gL(e,t,n){let{isActive:o}=t;return e.$$set=e=>{"isActive"in e&&n(0,o=e.isActive)},[o]}class hL extends af{constructor(e){super(),sf(this,e,gL,mL,$g,{isActive:0})}}function fL(e,t,n){const o=e.slice();return o[49]=t[n],o[51]=n,o}function _L(e){let t,n;return t=new hL({props:{isActive:e[7]===Rk.TRANSLATE}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};128&n[0]&&(o.isActive=e[7]===Rk.TRANSLATE),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function vL(e){let t,n;return t=new hL({props:{isActive:e[7]===Rk.WRITE}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};128&n[0]&&(o.isActive=e[7]===Rk.WRITE),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function yL(e){let t,n,o,r,i,s,a,l,c=chrome.i18n.getMessage("input_selection_tab_button_write")+"",d=nt(e[6],be.WRITE);n=new dL({props:{isActive:e[7]===Rk.WRITE,isDisabled:e[18]}});let u=d&&vL(e);return{c(){t=Zg("button"),nf(n.$$.fragment),o=Jg(),r=Qg(c),i=Jg(),u&&u.c(),rh(t,"class","svelte-1o1n7yg"),uh(t,"isActive",e[7]===Rk.WRITE),uh(t,"isDisabled",e[18])},m(c,d){Vg(c,t,d),of(n,t,null),jg(t,o),jg(t,r),jg(t,i),u&&u.m(t,null),s=!0,a||(l=th(t,"click",e[37]),a=!0)},p(e,o){const r={};128&o[0]&&(r.isActive=e[7]===Rk.WRITE),262144&o[0]&&(r.isDisabled=e[18]),n.$set(r),64&o[0]&&(d=nt(e[6],be.WRITE)),d?u?(u.p(e,o),64&o[0]&&Yh(u,1)):(u=vL(e),u.c(),Yh(u,1),u.m(t,null)):u&&(qh(),Kh(u,1,1,(()=>{u=null})),Vh()),(!s||128&o[0])&&uh(t,"isActive",e[7]===Rk.WRITE),(!s||262144&o[0])&&uh(t,"isDisabled",e[18])},i(e){s||(Yh(n.$$.fragment,e),Yh(u),s=!0)},o(e){Kh(n.$$.fragment,e),Kh(u),s=!1},d(e){e&&Yg(t),rf(n),u&&u.d(),a=!1,l()}}}function wL(e){let t,n,o=e[17]&&!e[2]&&EL(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,n){e[17]&&!e[2]?o?(o.p(e,n),131076&n[0]&&Yh(o,1)):(o=EL(e),o.c(),Yh(o,1),o.m(t.parentNode,t)):o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh())},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function bL(e){let t,n,o,r,i=e[20]&&nt(e[6],be.TRANSLATOR);n=new mb({props:{value:e[1],fontSize:"sm",variant:"input-selection-result"}}),n.$on("selection",e[40]);let s=i&&SL(e);return{c(){t=Zg("div"),nf(n.$$.fragment),o=Jg(),s&&s.c(),rh(t,"class","translate-options svelte-1o1n7yg")},m(e,i){Vg(e,t,i),of(n,t,null),jg(t,o),s&&s.m(t,null),r=!0},p(e,o){const r={};2&o[0]&&(r.value=e[1]),n.$set(r),1048640&o[0]&&(i=e[20]&&nt(e[6],be.TRANSLATOR)),i?s?(s.p(e,o),1048640&o[0]&&Yh(s,1)):(s=SL(e),s.c(),Yh(s,1),s.m(t,null)):s&&(qh(),Kh(s,1,1,(()=>{s=null})),Vh())},i(e){r||(Yh(n.$$.fragment,e),Yh(s),r=!0)},o(e){Kh(n.$$.fragment,e),Kh(s),r=!1},d(e){e&&Yg(t),rf(n),s&&s.d()}}}function EL(e){let t,n,o,r;n=new mb({props:{onlyShowWriteEnabledLanguages:!0,showChooseLanguageOption:!e[16],value:e[16],fontSize:"sm",variant:"input-selection-result",autoHeight:!0}}),n.$on("selection",e[41]);let i=e[19]&&TL(e);return{c(){t=Zg("div"),nf(n.$$.fragment),o=Jg(),i&&i.c(),rh(t,"class","write-options svelte-1o1n7yg")},m(e,s){Vg(e,t,s),of(n,t,null),jg(t,o),i&&i.m(t,null),r=!0},p(e,o){const r={};65536&o[0]&&(r.showChooseLanguageOption=!e[16]),65536&o[0]&&(r.value=e[16]),n.$set(r),e[19]?i?i.p(e,o):(i=TL(e),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},i(e){r||(Yh(n.$$.fragment,e),r=!0)},o(e){Kh(n.$$.fragment,e),r=!1},d(e){e&&Yg(t),rf(n),i&&i.d()}}}function TL(e){let t,n,o;return{c(){t=Zg("button"),t.textContent=`${chrome.i18n.getMessage("write_style_options_button_label")}`,rh(t,"class","style-switch svelte-1o1n7yg"),uh(t,"open",e[11])},m(r,i){Vg(r,t,i),n||(o=th(t,"click",e[42]),n=!0)},p(e,n){2048&n[0]&&uh(t,"open",e[11])},d(e){e&&Yg(t),n=!1,o()}}}function SL(e){let t,n;return t=new T_({props:{tooltip:chrome.i18n.getMessage("input_selection_alternatives_tone_tooltip"),$$slots:{default:[xL]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};256&n[0]|2097152&n[1]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function xL(e){let t,n;return t=new Kk({props:{value:e[8],variant:"input-selection-result"}}),t.$on("selection",e[23]),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};256&n[0]&&(o.value=e[8]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function $L(e){let t,n,o,r,i;const s=[IL,LL,kL],a=[];function l(e,t){return e[12]?0:e[7]!==Rk.WRITE||e[17]?e[0]&&e[0].length>0?2:-1:1}return~(n=l(e))&&(o=a[n]=s[n](e)),{c(){t=Zg("div"),o&&o.c(),rh(t,"style",r=`height: ${e[15]?e[15]+"px":"auto"}; max-height: 300px; width: 100%; overflow-y: auto`)},m(e,o){Vg(e,t,o),~n&&a[n].m(t,null),i=!0},p(e,c){let d=n;n=l(e),n===d?~n&&a[n].p(e,c):(o&&(qh(),Kh(a[d],1,1,(()=>{a[d]=null})),Vh()),~n?(o=a[n],o?o.p(e,c):(o=a[n]=s[n](e),o.c()),Yh(o,1),o.m(t,null)):o=null),(!i||32768&c[0]&&r!==(r=`height: ${e[15]?e[15]+"px":"auto"}; max-height: 300px; width: 100%; overflow-y: auto`))&&rh(t,"style",r)},i(e){i||(Yh(o),i=!0)},o(e){Kh(o),i=!1},d(e){e&&Yg(t),~n&&a[n].d()}}}function CL(e){let t,n,o;return n=new Wy({props:{error:e[2]}}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","error-container svelte-1o1n7yg")},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p(e,t){const o={};4&t[0]&&(o.error=e[2]),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function kL(e){let t,n,o,r;const i=[RL,AL],s=[];function a(e,t){return e[11]?0:1}return n=a(e),o=s[n]=i[n](e),{c(){t=Zg("div"),o.c(),rh(t,"class","alternatives-container svelte-1o1n7yg")},m(o,i){Vg(o,t,i),s[n].m(t,null),e[47](t),r=!0},p(e,r){let l=n;n=a(e),n===l?s[n].p(e,r):(qh(),Kh(s[l],1,1,(()=>{s[l]=null})),Vh(),o=s[n],o?o.p(e,r):(o=s[n]=i[n](e),o.c()),Yh(o,1),o.m(t,null))},i(e){r||(Yh(o),r=!0)},o(e){Kh(o),r=!1},d(o){o&&Yg(t),s[n].d(),e[47](null)}}}function LL(e){let t,n,o;return n=new rL({}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","write-support svelte-1o1n7yg")},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p:wg,i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function IL(e){let t,n,o,r;return n=new AT({}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"style",o=`height: ${e[15]?e[15]+"px":"auto"}; max-height: 300px;`),rh(t,"class","loading-spinner svelte-1o1n7yg")},m(e,o){Vg(e,t,o),of(n,t,null),r=!0},p(e,n){(!r||32768&n[0]&&o!==(o=`height: ${e[15]?e[15]+"px":"auto"}; max-height: 300px;`))&&rh(t,"style",o)},i(e){r||(Yh(n.$$.fragment,e),r=!0)},o(e){Kh(n.$$.fragment,e),r=!1},d(e){e&&Yg(t),rf(n)}}}function AL(e){let t,n,o,r,i=ef(e[13]),s=[];for(let t=0;t<i.length;t+=1)s[t]=ML(fL(e,i,t));let a=e[0].length>3&&!e[4]&&NL(e);return{c(){t=Zg("div"),n=Zg("div"),n.textContent=`${chrome.i18n.getMessage("input_selection_alternatives_label")}`,o=Jg();for(let e=0;e<s.length;e+=1)s[e].c();r=Jg(),a&&a.c(),rh(n,"class","alternative headline svelte-1o1n7yg"),rh(t,"class","alternatives svelte-1o1n7yg")},m(e,i){Vg(e,t,i),jg(t,n),jg(t,o);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);jg(t,r),a&&a.m(t,null)},p(e,n){if(33562624&n[0]){let o;for(i=ef(e[13]),o=0;o<i.length;o+=1){const a=fL(e,i,o);s[o]?s[o].p(a,n):(s[o]=ML(a),s[o].c(),s[o].m(t,r))}for(;o<s.length;o+=1)s[o].d(1);s.length=i.length}e[0].length>3&&!e[4]?a?a.p(e,n):(a=NL(e),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},i:wg,o:wg,d(e){e&&Yg(t),Kg(s,e),a&&a.d()}}}function RL(e){let t,n,o,r,i,s;function a(t){e[43](t)}function l(t){e[44](t)}let c={};return void 0!==e[9]&&(c.writingStyle=e[9]),void 0!==e[10]&&(c.tone=e[10]),n=new nL({props:c}),Lh.push((()=>tf(n,"writingStyle",a))),Lh.push((()=>tf(n,"tone",l))),n.$on("apply",e[24]),n.$on("reset",e[24]),{c(){t=Zg("div"),nf(n.$$.fragment)},m(e,o){Vg(e,t,o),of(n,t,null),s=!0},p(e,t){const i={};!o&&512&t[0]&&(o=!0,i.writingStyle=e[9],Dh((()=>o=!1))),!r&&1024&t[0]&&(r=!0,i.tone=e[10],Dh((()=>r=!1))),n.$set(i)},i(e){s||(Yh(n.$$.fragment,e),e&&(i||Oh((()=>{i=Xh(t,Ff,{y:-5,duration:500}),i.start()}))),s=!0)},o(e){Kh(n.$$.fragment,e),s=!1},d(e){e&&Yg(t),rf(n)}}}function ML(e){let t,n,o,r,i=e[49]+"";function s(){return e[45](e[49],e[51])}return{c(){t=Zg("div"),n=Qg(i),rh(t,"class","alternative svelte-1o1n7yg"),rh(t,"data-qa","selection-result-view-alternative")},m(e,i){Vg(e,t,i),jg(t,n),o||(r=th(t,"click",s),o=!0)},p(t,o){e=t,8192&o[0]&&i!==(i=e[49]+"")&&ih(n,i)},d(e){e&&Yg(t),o=!1,r()}}}function NL(e){let t,n,o,r;return{c(){t=Zg("div"),n=Zg("span"),n.textContent=`${chrome.i18n.getMessage("input_selection_alternatives_show_more")}`,rh(t,"class","alternative show-more svelte-1o1n7yg")},m(i,s){Vg(i,t,s),jg(t,n),o||(r=th(t,"click",e[46]),o=!0)},p:wg,d(e){e&&Yg(t),o=!1,r()}}}function OL(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w,b,E,T,S,x,$,C,k,L,I,A=chrome.i18n.getMessage("input_selection_tab_button_translate")+"",R=nt(e[6],be.TRANSLATOR);c=new aL({props:{isActive:e[7]===Rk.TRANSLATE}});let M=R&&_L(e);g=new T_({props:{isEnabled:e[18],tooltip:chrome.i18n.getMessage("contact_admin_info_write_disabled"),$$slots:{default:[yL]},$$scope:{ctx:e}}});const N=[bL,wL],O=[];function D(e,t){return e[7]===Rk.TRANSLATE?0:e[7]===Rk.WRITE?1:-1}~(E=D(e))&&(T=O[E]=N[E](e));const P=[CL,$L],U=[];function B(e,t){return e[2]?0:1}return x=B(e),$=U[x]=P[x](e),{c(){t=Zg("div"),n=Zg("div"),o=Zg("div"),r=Zg("button"),i=Jg(),s=Zg("div"),a=Zg("div"),l=Zg("button"),nf(c.$$.fragment),d=Jg(),u=Qg(A),p=Jg(),M&&M.c(),m=Jg(),nf(g.$$.fragment),h=Jg(),f=Zg("div"),_=Zg("button"),v=Jg(),y=Zg("button"),w=Jg(),b=Zg("div"),T&&T.c(),S=Jg(),$.c(),rh(r,"class","dl-logo svelte-1o1n7yg"),rh(r,"aria-label",chrome.i18n.getMessage("deepl_logo")),rh(l,"class","svelte-1o1n7yg"),uh(l,"isActive",e[7]===Rk.TRANSLATE),rh(a,"class","selector svelte-1o1n7yg"),rh(s,"class","selector-container svelte-1o1n7yg"),rh(o,"class","tab-container svelte-1o1n7yg"),rh(_,"type","button"),rh(_,"class","dl-settings-icon svelte-1o1n7yg"),rh(y,"type","button"),rh(y,"class","dl-close-icon svelte-1o1n7yg"),rh(f,"class","action-container svelte-1o1n7yg"),rh(n,"class","header svelte-1o1n7yg"),rh(b,"class","ai-options svelte-1o1n7yg"),ah(b,"min-height","37px"),rh(t,"style",e[5]),rh(t,"class","container svelte-1o1n7yg"),rh(t,"data-qa","selection-result-view")},m(T,$){Vg(T,t,$),jg(t,n),jg(n,o),jg(o,r),jg(o,i),jg(o,s),jg(s,a),jg(a,l),of(c,l,null),jg(l,d),jg(l,u),jg(l,p),M&&M.m(l,null),jg(a,m),of(g,a,null),jg(n,h),jg(n,f),jg(f,_),jg(f,v),jg(f,y),jg(t,w),jg(t,b),~E&&O[E].m(b,null),jg(t,S),U[x].m(t,null),k=!0,L||(I=[th(l,"click",e[36]),th(_,"click",e[38]),th(y,"click",e[39]),th(t,"mousedown",oh(nh(e[35])))],L=!0)},p(e,n){const o={};128&n[0]&&(o.isActive=e[7]===Rk.TRANSLATE),c.$set(o),64&n[0]&&(R=nt(e[6],be.TRANSLATOR)),R?M?(M.p(e,n),64&n[0]&&Yh(M,1)):(M=_L(e),M.c(),Yh(M,1),M.m(l,null)):M&&(qh(),Kh(M,1,1,(()=>{M=null})),Vh()),(!k||128&n[0])&&uh(l,"isActive",e[7]===Rk.TRANSLATE);const r={};262144&n[0]&&(r.isEnabled=e[18]),262336&n[0]|2097152&n[1]&&(r.$$scope={dirty:n,ctx:e}),g.$set(r);let i=E;E=D(e),E===i?~E&&O[E].p(e,n):(T&&(qh(),Kh(O[i],1,1,(()=>{O[i]=null})),Vh()),~E?(T=O[E],T?T.p(e,n):(T=O[E]=N[E](e),T.c()),Yh(T,1),T.m(b,null)):T=null);let s=x;x=B(e),x===s?U[x].p(e,n):(qh(),Kh(U[s],1,1,(()=>{U[s]=null})),Vh(),$=U[x],$?$.p(e,n):($=U[x]=P[x](e),$.c()),Yh($,1),$.m(t,null)),(!k||32&n[0])&&rh(t,"style",e[5])},i(e){k||(Yh(c.$$.fragment,e),Yh(M),Yh(g.$$.fragment,e),Yh(T),Yh($),e&&Oh((()=>{k&&(C||(C=Jh(t,Hf,{},!0)),C.run(1))})),k=!0)},o(e){Kh(c.$$.fragment,e),Kh(M),Kh(g.$$.fragment,e),Kh(T),Kh($),e&&(C||(C=Jh(t,Hf,{},!1)),C.run(0)),k=!1},d(e){e&&Yg(t),rf(c),M&&M.d(),rf(g),~E&&O[E].d(),U[x].d(),e&&C&&C.end(),L=!1,Sg(I)}}}function DL(e,n,o){let r,i,a,l,c;const d=$h("deepl_settings");kg(e,d,(e=>o(6,c=e)));let u,p,m,g,h,f,_,{element:v}=n,{detectedLanguage:y}=n,{isMoreThanOneSentence:w}=n,{alternatives:b}=n,{alternativesHtml:E}=n,{error:T}=n,{mode:S}=n,{close:x}=n,{initialTargetLang:$}=n,{mostSpace:C}=n,k=S,L=!1,I=!1,A=0,R=Ft(y)?Wt(y):void 0;function M(e){e===Rk.WRITE&&i||(o(11,L=!1),o(7,k=e),N())}async function N(){if(k===Rk.WRITE&&i)return;let e,t=$;try{if(!y){const e=await jk(v);o(29,y=e.detected_source_language),o(30,w=e.sentences.length>1)}}catch(e){return void o(2,T=e)}if(k===Rk.WRITE){if(!a)return;e=p||m,t=y,R&&(t=R)}o(12,I=!0),o(2,T=null);const n={element:v,mode:k,targetLang:t,style:e,writeLang:R,...k===Rk.TRANSLATE&&{formality:u}};try{let e=await Gk(n);o(0,b=e.alternatives),o(31,E=e.alternativesHtml)}catch(e){o(2,T=e)}o(12,I=!1)}async function O(e,n){E&&E.length>0?qk(e,v,E[n]):qk(e,v);try{t({action:"dlTrackAlternativeSelected",payload:{numberOfAlternatives:b.length,selectedAlternative:n+1,sourceLang:y,targetLang:$,contentProcessingMode:S,alternativesSegmentation:qt(e)?qe.WORD:qe.SENTENCE}})}catch(e){console.error(e)}}function D(e){o(1,$=e),N()}function P(e){o(16,R=e),N()}function U(){t({action:"dlOpenInternalPage",payload:{destination:RT.settings_page}})}var B;B=()=>{if(L)o(15,A=0);else if(_){const e=_.offsetHeight;e>A&&o(15,A=e)}},bh().$$.after_update.push(B);return e.$$set=e=>{"element"in e&&o(32,v=e.element),"detectedLanguage"in e&&o(29,y=e.detectedLanguage),"isMoreThanOneSentence"in e&&o(30,w=e.isMoreThanOneSentence),"alternatives"in e&&o(0,b=e.alternatives),"alternativesHtml"in e&&o(31,E=e.alternativesHtml),"error"in e&&o(2,T=e.error),"mode"in e&&o(33,S=e.mode),"close"in e&&o(3,x=e.close),"initialTargetLang"in e&&o(1,$=e.initialTargetLang),"mostSpace"in e&&o(34,C=e.mostSpace)},e.$$.update=()=>{2&e.$$.dirty[0]&&o(20,r=Ht($)),64&e.$$.dirty[0]&&o(18,i=rt(c,be.WRITE)),32&e.$$.dirty[0]|8&e.$$.dirty[1]&&(o(5,f=""),"top"===C.vertical?o(5,f="bottom: 35px;"):o(5,f="top: 5px;"),"left"===C.horizontal&&o(5,f=`${f} right: -32px;`),o(5,f=`${f} max-height: ${C.verticalSpaceLeft}px;`)),17&e.$$.dirty[0]&&b&&(b.length<=3&&o(13,g=[...b]),o(13,g=h?[...b]:b.slice(0,3))),536870912&e.$$.dirty[0]&&o(17,a=y&&Ft(y)),536870912&e.$$.dirty[0]&&o(19,l=y&&s.includes(y.substring(0,2).toUpperCase()))},[b,$,T,x,h,f,c,k,u,p,m,L,I,g,_,A,R,a,i,l,r,d,M,function(e){const t=e.detail.selectedOption.value;o(8,u=t),k===Rk.TRANSLATE&&N()},async function(){o(11,L=!1),await N()},O,D,P,U,y,w,E,v,S,C,function(t){Ch.call(this,e,t)},()=>M(Rk.TRANSLATE),()=>M(Rk.WRITE),()=>U(),()=>x(),e=>{D(e.detail.selectedOption.value)},e=>{P(e.detail.selectedOption.value)},()=>o(11,L=!L),function(e){p=e,o(9,p)},function(e){m=e,o(10,m)},(e,t)=>O(e,t),()=>o(4,h=!h),function(e){Lh[e?"unshift":"push"]((()=>{_=e,o(14,_)}))}]}class PL extends af{constructor(e){super(),sf(this,e,DL,OL,$g,{element:32,detectedLanguage:29,isMoreThanOneSentence:30,alternatives:0,alternativesHtml:31,error:2,mode:33,close:3,initialTargetLang:1,mostSpace:34},null,[-1,-1])}}function UL(e){let t,n,o,r,i,s;const a=[WL,BL],l=[];function c(e,t){return e[2]?0:1}n=c(e),o=l[n]=a[n](e);let d=e[7]&&FL(e);return{c(){t=Zg("div"),o.c(),r=Jg(),i=Zg("div"),d&&d.c(),rh(t,"class","icon-container svelte-1695l6u"),rh(t,"dir",jt()),rh(t,"data-qa","input-selection-trigger"),rh(i,"class","popup svelte-1695l6u")},m(o,a){Vg(o,t,a),l[n].m(t,null),e[18](t),Vg(o,r,a),Vg(o,i,a),d&&d.m(i,null),s=!0},p(e,r){let s=n;n=c(e),n===s?l[n].p(e,r):(qh(),Kh(l[s],1,1,(()=>{l[s]=null})),Vh(),o=l[n],o?o.p(e,r):(o=l[n]=a[n](e),o.c()),Yh(o,1),o.m(t,null)),e[7]?d?(d.p(e,r),128&r&&Yh(d,1)):(d=FL(e),d.c(),Yh(d,1),d.m(i,null)):d&&(qh(),Kh(d,1,1,(()=>{d=null})),Vh())},i(e){s||(Yh(o),Yh(d),s=!0)},o(e){Kh(o),Kh(d),s=!1},d(o){o&&(Yg(t),Yg(r),Yg(i)),l[n].d(),e[18](null),d&&d.d()}}}function BL(e){let t,n;return t=new T_({props:{tooltip:chrome.i18n.getMessage("input_selection_see_alternatives_icon_trigger"),showProShield:nt(e[3],be.WRITE),$$slots:{default:[zL]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};8&n&&(o.showProShield=nt(e[3],be.WRITE)),1048576&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function WL(e){let t,n;return t=new AT({props:{small:!0}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p:wg,i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function zL(e){let t,n,o;return{c(){t=Zg("div"),rh(t,"class","dl-logo svelte-1695l6u")},m(r,i){Vg(r,t,i),n||(o=[th(t,"click",oh(nh(e[14]))),th(t,"mouseup",oh(nh(e[16]))),th(t,"mousedown",oh(nh(e[17])))],n=!0)},p:wg,d(e){e&&Yg(t),n=!1,Sg(o)}}}function FL(e){let t,n;return t=new PL({props:{element:e[0],detectedLanguage:e[5],isMoreThanOneSentence:e[6],mode:e[8],alternatives:e[9],alternativesHtml:e[10],mostSpace:e[4],error:e[12],close:e[15],initialTargetLang:e[11]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.element=e[0]),32&n&&(o.detectedLanguage=e[5]),64&n&&(o.isMoreThanOneSentence=e[6]),256&n&&(o.mode=e[8]),512&n&&(o.alternatives=e[9]),1024&n&&(o.alternativesHtml=e[10]),16&n&&(o.mostSpace=e[4]),4096&n&&(o.error=e[12]),2048&n&&(o.initialTargetLang=e[11]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function HL(e){let t,n,o=!e[13]&&UL(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,[n]){e[13]?o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh()):o?(o.p(e,n),8192&n&&Yh(o,1)):(o=UL(e),o.c(),Yh(o,1),o.m(t.parentNode,t))},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function jL(e,n,o){let r,i,s;kg(e,df,(e=>o(3,s=e))),xh("deepl_settings",df),xh("text_direction",jt());let a,l,c,d,u,p,m,{element:g}=n,h={vertical:"bottom",horizontal:"right"},f=!1,_=Rk.TRANSLATE,v="EN-GB";return e.$$set=e=>{"element"in e&&o(0,g=e.element)},e.$$.update=()=>{6&e.$$.dirty&&!p&&a&&o(4,h=function(e){if(!e)return void console.error("No element provided");const t=e.getBoundingClientRect(),n=window.innerWidth,o=window.innerHeight,r={top:t.top,right:n-t.right,bottom:o-t.bottom,left:t.left};return{vertical:r.top>r.bottom?"top":"bottom",horizontal:r.left>r.right?"left":"right",verticalSpaceLeft:r.top>r.bottom?r.top:r.bottom}}(a)),8&e.$$.dirty&&(r=rt(s,be.WRITE)),8&e.$$.dirty&&o(13,i=!s.enableInputTranslation||uT(window.location.host,window.location.href)||s.blacklistDomainsForWriting.includes(window.location.host))},[g,a,p,s,h,l,c,f,_,d,u,v,m,i,async function(){try{t({action:"dlTrackSeeAlternativesClicked"})}catch(e){console.error(e)}if(!f){o(2,p=!0);try{const e=await jk(g);o(5,l=e.detected_source_language),o(6,c=e.sentences.length>1),o(11,v=s.targetLanguageUserInput?s.targetLanguageUserInput:"EN-GB"),o(8,_=v.substring(0,2).toUpperCase()===l.substring(0,2).toUpperCase()?Rk.WRITE:Rk.TRANSLATE),r&&o(8,_=Rk.TRANSLATE);const t={element:g,mode:_,targetLang:v},n=await Gk(t);o(9,d=n.alternatives),o(10,u=n.alternativesHtml)}catch(e){o(12,m=e)}o(2,p=!1)}o(7,f=!f)},function(){o(7,f=!1)},function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(e){Lh[e?"unshift":"push"]((()=>{a=e,o(1,a)}))}]}class GL extends af{constructor(e){super(),sf(this,e,jL,HL,$g,{element:0})}}const qL=[{domain:"zendesk.com",selectors:['div[data-test-id="ticket-rich-text-editor"] [contenteditable="true"]'],uniqueDataAttributes:[{key:"testId",value:"ticket-rich-text-editor"}]}];async function VL(){const{enableItaInputDev:e}=await Ix(["enableItaInputDev"]);return e}class YL{static HTML_TAG_NAME="deepl-input-selection-trigger";static createElement=(e=document)=>{const t=e.createElement(YL.HTML_TAG_NAME),n=new YL(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.addChangeEvents=n.addChangeEvents,t.removeChangeEvents=n.removeChangeEvents,t.repositionContainer=n.repositionContainer,t.cachedReposition=n.cachedReposition,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.mainComponent,this.domElement.cachedMouseEvent,this.domElement.cachedElement=null;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=async(e,t)=>{this.domElement.shadowContainer&&this.domElement.shadowContainer.childElementCount>0&&this.domElement.cleanupDOM(),this.domElement.cachedElement=e,this.domElement.repositionContainer(t,e),this.domElement.shadowContainer.appendChild(this.domElement.container),await VL()?(pn()&&console.log("ITA_INPUT_ENABLED_INLINE_TRIGGER"),Rw.update({inputElement:e}),this.domElement.mainComponent=new Ck({target:this.domElement.container,props:{isInput:!0}})):(pn()&&console.log("ITA_INPUT_ENABLED_INPUT_SELECTION_TRIGGER"),this.domElement.mainComponent=new GL({target:this.domElement.container,props:{element:e}})),this.domElement.addChangeEvents(),this.domElement.cachedMouseEvent=t};repositionContainer=(e,t)=>{if(window.getSelection()&&!window.getSelection().toString())return void this.domElement.cleanupDOM();const{deepl_inline_ui:n}=D,o=n.z_index+500;let r;r="TEXTAREA"===t.tagName?yT(t):fT();let i=`position: absolute; top: 0px; left: 0px; width: 100%; z-index: ${o}`,s=`position: absolute; z-index: ${o};`;this.domElement.shadowContainer.style.cssText=i,this.domElement.container.style.cssText=s;const a=Lk(e,r);this.domElement.container.style.top=`${parseInt(a.containerStyleTop)}px`,this.domElement.container.style.left=`${parseInt(a.containerStyleLeft)}px`};cachedReposition=()=>this.domElement.repositionContainer(this.domElement.cachedMouseEvent,this.domElement.cachedElement);addChangeEvents=()=>{window.addEventListener("scroll",this.domElement.cachedReposition),window.addEventListener("resize",this.domElement.cachedReposition)};removeChangeEvents=()=>{window.removeEventListener("scroll",this.domElement.cachedReposition),window.removeEventListener("resize",this.domElement.cachedReposition)};cleanupDOM=()=>{this.domElement.container.remove(),this.domElement.shadowContainer.remove(),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy(),this.domElement.removeChangeEvents()}}function KL(e){let t,n,o,r=ft(e[1])+"";return{c(){t=Zg("div"),rh(t,"class","container svelte-1dicgbw")},m(i,s){Vg(i,t,s),t.innerHTML=r,n||(o=th(t,"click",e[0]),n=!0)},p:wg,i:wg,o:wg,d(e){e&&Yg(t),n=!1,o()}}}function ZL(e){return[function(){t({action:"dlExternalURLRedirect",payload:{destination:bv}}),t({action:"dlTrackUiAction",payload:{uiAction:z}})},chrome.i18n.getMessage("notification_keyboard_shortcut_hint",`<span style="color: #006494; text-decoration: underline;">${chrome.i18n.getMessage("notification_keyboard_shortcut_hint_placeholder")}</span>`)]}class XL extends af{constructor(e){super(),sf(this,e,ZL,KL,$g,{})}}function QL(e){let t,n,o,r=ft(e[0])+"";return{c(){t=Zg("div"),rh(t,"class","container svelte-1dicgbw"),rh(t,"data-qa","deepl-notification-open-settings-page-writing-link")},m(i,s){Vg(i,t,s),t.innerHTML=r,n||(o=th(t,"click",e[1]),n=!0)},p(e,[n]){1&n&&r!==(r=ft(e[0])+"")&&(t.innerHTML=r)},i:wg,o:wg,d(e){e&&Yg(t),n=!1,o()}}}function JL(e,n,o){let{options:r}=n,i=r?.settingsPageURL?r?.settingsPageURL:RT.settings_page;let s="",a=r?.currentDomain?r.currentDomain:"";switch(r.saveAction){case q.disableEverywhere:s=chrome.i18n.getMessage("notification_input_translation_disabled_everywhere",`<span style="text-decoration: underline;">${chrome.i18n.getMessage("notification_input_translation_link_to_settings_placeholder")}</span>`);break;case q.disablePerSite:s=chrome.i18n.getMessage("notification_input_translation_disabled_per_site",[a,`<span style="text-decoration: underline;">${chrome.i18n.getMessage("notification_input_translation_link_to_settings_placeholder")}</span>`])}return e.$$set=e=>{"options"in e&&o(2,r=e.options)},[s,function(){t({action:"dlOpenInternalPage",payload:{destination:i}})},r]}class eI extends af{constructor(e){super(),sf(this,e,JL,QL,$g,{options:2})}}function tI(e){let t,n,o,r=ft(e[0])+"";return{c(){t=Zg("div"),rh(t,"class","container svelte-1dicgbw"),rh(t,"data-qa","deepl-notification-open-settings-page-reading-link")},m(i,s){Vg(i,t,s),t.innerHTML=r,n||(o=th(t,"click",e[1]),n=!0)},p(e,[n]){1&n&&r!==(r=ft(e[0])+"")&&(t.innerHTML=r)},i:wg,o:wg,d(e){e&&Yg(t),n=!1,o()}}}function nI(e,n,o){let{options:r}=n,i=r?.settingsPageURL?r?.settingsPageURL:RT.settings_page;let s="",a=r?.currentDomain?r.currentDomain:"";switch(r.saveAction){case q.disableEverywhere:s=chrome.i18n.getMessage("notification_inline_translation_disabled_everywhere",`<span style="text-decoration: underline;">${chrome.i18n.getMessage("notification_inline_translation_link_to_settings_placeholder")}</span>`);break;case q.disablePerSite:s=chrome.i18n.getMessage("notification_inline_translation_disabled_per_site",[a,`<span style="text-decoration: underline;">${chrome.i18n.getMessage("notification_inline_translation_link_to_settings_placeholder")}</span>`])}return e.$$set=e=>{"options"in e&&o(2,r=e.options)},[s,function(){t({action:"dlOpenInternalPage",payload:{destination:i}})},r]}class oI extends af{constructor(e){super(),sf(this,e,nI,tI,$g,{options:2})}}function rI(e){let t,n,o;return{c(){t=Zg("div"),t.textContent=`${chrome.i18n.getMessage("ui_notification_fpt_hide")}`,rh(t,"class","container svelte-1dicgbw"),rh(t,"data-qa","deepl-notification-open-settings-page-reading-link")},m(r,i){Vg(r,t,i),n||(o=th(t,"click",e[0]),n=!0)},p:wg,i:wg,o:wg,d(e){e&&Yg(t),n=!1,o()}}}function iI(e){return[function(){t({action:"dlOpenInternalPage",payload:{destination:RT.settings_page}})}]}class sI extends af{constructor(e){super(),sf(this,e,iI,rI,$g,{})}}function aI(e){let t;return{c(){t=Zg("div"),t.textContent=`${chrome.i18n.getMessage("onboarding_account_successfully_created")}`,rh(t,"class","dl-account-created svelte-nuwktw")},m(e,n){Vg(e,t,n)},p:wg,i:wg,o:wg,d(e){e&&Yg(t)}}}class lI extends af{constructor(e){super(),sf(this,e,null,aI,$g,{})}}function cI(e){let t;return{c(){t=Zg("div"),t.textContent=`${chrome.i18n.getMessage("onboarding_successful_login_notification")}`,rh(t,"class","dl-account-created svelte-nuwktw")},m(e,n){Vg(e,t,n)},p:wg,i:wg,o:wg,d(e){e&&Yg(t)}}}class dI extends af{constructor(e){super(),sf(this,e,null,cI,$g,{})}}function uI(e){let t,n,o,r;return{c(){t=Zg("div"),n=Zg("span"),n.textContent=`${chrome.i18n.getMessage("ui_gslides_unsaved_asset_warning_main")}`,o=Jg(),r=Zg("span"),r.textContent=`${chrome.i18n.getMessage("ui_gslides_unsaved_asset_warning_explanation")}`,rh(n,"class","main-text svelte-18of7gm"),rh(t,"class","dl-notification-gslides-prevent-asset-loss")},m(e,i){Vg(e,t,i),jg(t,n),jg(t,o),jg(t,r)},p:wg,i:wg,o:wg,d(e){e&&Yg(t)}}}class pI extends af{constructor(e){super(),sf(this,e,null,uI,$g,{})}}function mI(e){let t,n,o,r,i,s,a,l,c;return{c(){t=Zg("div"),n=Zg("div"),n.textContent=`${chrome.i18n.getMessage("notification_ads_ms_office_headline")}`,o=Jg(),r=Zg("div"),r.textContent=`${chrome.i18n.getMessage("notification_ads_ms_office_text")}`,i=Jg(),s=Zg("div"),a=Zg("div"),a.textContent=`${chrome.i18n.getMessage("notification_ads_ms_office_learn_more")}`,rh(n,"class","dl-ads-for-addins_headline svelte-drhmpk"),rh(r,"class","dl-ads-for-addins_text"),rh(a,"class","dl-ads-for-addins_button svelte-drhmpk"),rh(s,"class","dl-ads-for-addins_wrapper svelte-drhmpk"),rh(t,"class","dl-ads-for-addins svelte-drhmpk")},m(d,u){Vg(d,t,u),jg(t,n),jg(t,o),jg(t,r),jg(t,i),jg(t,s),jg(s,a),l||(c=th(s,"click",e[0]),l=!0)},p:wg,i:wg,o:wg,d(e){e&&Yg(t),l=!1,c()}}}function gI(e){return[()=>{t({action:"dlExternalURLRedirect",payload:{destination:Rv,utmContent:"msaddin_ads_notification"}}),t({action:"dlTrackClicksOnAdsButton"})}]}class hI extends af{constructor(e){super(),sf(this,e,gI,mI,$g,{})}}function fI(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f=e[4]==U.warning_theme&&_I();var _=e[5];function v(e,t){return{props:{options:e[1]}}}return _&&(l=gh(_,v(e))),{c(){t=Zg("div"),n=Zg("div"),o=Zg("button"),i=Jg(),s=Zg("div"),f&&f.c(),a=Jg(),l&&nf(l.$$.fragment),rh(o,"class",r="dl-close-icon "+e[4]+" svelte-np3z9s"),rh(n,"class","header"),rh(n,"notificationtheme",e[4]),rh(s,"class",c="body "+e[4]+" svelte-np3z9s"),rh(t,"class",d="container "+e[4]+" svelte-np3z9s"),rh(t,"dir",jt()),uh(t,"success",e[0]===P.accountSuccessfullyCreated||e[0]===P.successfullyLoggedIn)},m(r,c){Vg(r,t,c),jg(t,n),jg(n,o),jg(t,i),jg(t,s),f&&f.m(s,null),jg(s,a),l&&of(l,s,null),m=!0,g||(h=th(o,"click",(function(){xg(e[2])&&e[2].apply(this,arguments)})),g=!0)},p(i,u){if(e=i,(!m||16&u&&r!==(r="dl-close-icon "+e[4]+" svelte-np3z9s"))&&rh(o,"class",r),(!m||16&u)&&rh(n,"notificationtheme",e[4]),e[4]==U.warning_theme?f||(f=_I(),f.c(),f.m(s,a)):f&&(f.d(1),f=null),32&u&&_!==(_=e[5])){if(l){qh();const e=l;Kh(e.$$.fragment,1,0,(()=>{rf(e,1)})),Vh()}_?(l=gh(_,v(e)),nf(l.$$.fragment),Yh(l.$$.fragment,1),of(l,s,null)):l=null}else if(_){const t={};2&u&&(t.options=e[1]),l.$set(t)}(!m||16&u&&c!==(c="body "+e[4]+" svelte-np3z9s"))&&rh(s,"class",c),(!m||16&u&&d!==(d="container "+e[4]+" svelte-np3z9s"))&&rh(t,"class",d),(!m||17&u)&&uh(t,"success",e[0]===P.accountSuccessfullyCreated||e[0]===P.successfullyLoggedIn)},i(e){m||(l&&Yh(l.$$.fragment,e),Oh((()=>{m&&(p&&p.end(1),u=Xh(t,Ff,{x:100,duration:1e3}),u.start())})),m=!0)},o(e){l&&Kh(l.$$.fragment,e),u&&u.invalidate(),p=Qh(t,Ff,{x:100,duration:1e3}),m=!1},d(e){e&&Yg(t),f&&f.d(),l&&rf(l),e&&p&&p.end(),g=!1,h()}}}function _I(e){let t;return{c(){t=Zg("div"),t.innerHTML='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 6V10M10 14H10.01M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z" stroke="#ECBA82" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',rh(t,"class","icon-container")},m(e,n){Vg(e,t,n)},d(e){e&&Yg(t)}}}function vI(e){let t,n,o=e[3]&&fI(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,[n]){e[3]?o?(o.p(e,n),8&n&&Yh(o,1)):(o=fI(e),o.c(),Yh(o,1),o.m(t.parentNode,t)):o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh())},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function yI(e,t,n){let o,r;xh("text_direction",jt());let{type:i}=t,{options:s}=t,{close:a}=t,l=!1;const c={[P.hintKeyboardShortcut]:XL,[P.inputTranslation]:eI,[P.inlineTranslation]:oI,[P.fullPageTranslation]:sI,[P.accountSuccessfullyCreated]:lI,[P.successfullyLoggedIn]:dI,[P.glidesPreventAssetLoss]:pI,[P.showAdsForMSAddins]:hI};return Eh((()=>{setTimeout((()=>n(3,l=!0)),100),setTimeout((()=>n(3,l=!1)),10100),setTimeout((()=>a()),11100)})),e.$$set=e=>{"type"in e&&n(0,i=e.type),"options"in e&&n(1,s=e.options),"close"in e&&n(2,a=e.close)},e.$$.update=()=>{1&e.$$.dirty&&n(5,o=c[i]),2&e.$$.dirty&&n(4,r=U[s?.theme]?U[s?.theme]:"")},[i,s,a,l,r,o]}class wI extends af{constructor(e){super(),sf(this,e,yI,vI,$g,{type:0,options:1,close:2})}}class bI{static HTML_TAG_NAME="deepl-notification";static createElement=(e=document)=>{const t=e.createElement(bI.HTML_TAG_NAME),n=new bI(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=(e,t)=>{const n="rtl"===jt()?"left":"right";this.domElement.shadowContainer.style.cssText=`position: fixed; top: 20px; ${n}: 20px; z-index: ${D.deepl_inline_ui.z_index}`,this.domElement.mainComponent=new wI({target:this.domElement.shadowContainer,props:{type:e,options:t,close:this.cleanupDOM}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy(),this.domElement.remove()}}function EI(e){let t,n,o,r;return{c(){t=Zg("div"),n=Zg("div"),rh(n,"class","close-button svelte-2cst7"),rh(t,"class","close-button-container svelte-2cst7")},m(i,s){Vg(i,t,s),jg(t,n),o||(r=th(n,"click",(function(){xg(e[0])&&e[0].apply(this,arguments)})),o=!0)},p(t,n){e=t},d(e){e&&Yg(t),o=!1,r()}}}function TI(e){let t,n,o,r,i,s=e[0]&&EI(e);const a=e[2].default,l=Lg(a,e,e[1],null);return{c(){s&&s.c(),t=Jg(),n=Zg("div"),o=Zg("div"),r=Jg(),l&&l.c(),rh(o,"class","logo svelte-2cst7"),rh(n,"class","body svelte-2cst7")},m(e,a){s&&s.m(e,a),Vg(e,t,a),Vg(e,n,a),jg(n,o),jg(n,r),l&&l.m(n,null),i=!0},p(e,[n]){e[0]?s?s.p(e,n):(s=EI(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),l&&l.p&&(!i||2&n)&&Rg(l,a,e,e[1],i?Ag(a,e[1],n,null):Mg(e[1]),null)},i(e){i||(Yh(l,e),i=!0)},o(e){Kh(l,e),i=!1},d(e){e&&(Yg(t),Yg(n)),s&&s.d(e),l&&l.d(e)}}}function SI(e,t,n){let{$$slots:o={},$$scope:r}=t,{onClose:i}=t;return e.$$set=e=>{"onClose"in e&&n(0,i=e.onClose),"$$scope"in e&&n(1,r=e.$$scope)},[i,r,o]}class xI extends af{constructor(e){super(),sf(this,e,SI,TI,$g,{onClose:0})}}function $I(e){let t,n;return{c(){t=Zg("div"),n=Qg(e[0]),rh(t,"class","info-msg svelte-17qaccl")},m(e,o){Vg(e,t,o),jg(t,n)},p(e,[t]){1&t&&ih(n,e[0])},i:wg,o:wg,d(e){e&&Yg(t)}}}function CI(e,t,n){let{message:o}=t;return e.$$set=e=>{"message"in e&&n(0,o=e.message)},[o]}class kI extends af{constructor(e){super(),sf(this,e,CI,$I,$g,{message:0})}}function LI(e){let t,n=chrome.i18n.getMessage("ui_fpt_hide_cancel")+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function II(e){let t,n=chrome.i18n.getMessage("ui_fpt_hide_confirm")+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function AI(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w,b,E,T,S,x,$,C,k,L,I,A,R,M;return C=new Dw({props:{className:"button-link",paddingX:"none",$$slots:{default:[LI]},$$scope:{ctx:e}}}),C.$on("click",(function(){xg(e[0])&&e[0].apply(this,arguments)})),L=new Dw({props:{className:"button-primary",$$slots:{default:[II]},$$scope:{ctx:e}}}),L.$on("click",e[4]),A=function(e){let t;return{p(...n){t=n,t.forEach((t=>e.push(t)))},r(){t.forEach((t=>e.splice(e.indexOf(t),1)))}}}(e[7][0]),{c(){t=Zg("div"),n=Zg("p"),n.textContent=`${chrome.i18n.getMessage("ui_fpt_hide_heading")}`,o=Jg(),r=Zg("div"),i=Zg("div"),s=Zg("label"),a=Zg("span"),l=Zg("input"),c=Jg(),d=Zg("span"),d.textContent=`${chrome.i18n.getMessage("ui_fpt_hide_option_domain")}`,u=Jg(),p=Zg("div"),m=Zg("label"),g=Zg("span"),h=Zg("input"),f=Jg(),_=Zg("span"),_.textContent=`${chrome.i18n.getMessage("ui_fpt_hide_option_lang")}`,v=Jg(),y=Zg("div"),w=Zg("label"),b=Zg("span"),E=Zg("input"),T=Jg(),S=Zg("span"),S.textContent=`${chrome.i18n.getMessage("ui_fpt_hide_option_fpt")}`,x=Jg(),$=Zg("div"),nf(C.$$.fragment),k=Jg(),nf(L.$$.fragment),rh(n,"class","font-bold svelte-1vpv55x"),rh(l,"id","option-website"),rh(l,"name","option"),rh(l,"type","radio"),l.__value="website",sh(l,l.__value),rh(l,"class","svelte-1vpv55x"),rh(d,"class","label svelte-1vpv55x"),rh(s,"for","option-website"),rh(s,"class","svelte-1vpv55x"),rh(i,"class","option svelte-1vpv55x"),rh(h,"id","option-lang"),rh(h,"type","radio"),rh(h,"name","option"),h.__value="lang",sh(h,h.__value),rh(h,"class","svelte-1vpv55x"),rh(_,"class","label svelte-1vpv55x"),rh(m,"for","option-lang"),rh(m,"class","svelte-1vpv55x"),rh(p,"class","option svelte-1vpv55x"),rh(E,"id","option-fpt"),rh(E,"type","radio"),rh(E,"name","option"),E.__value="fpt",sh(E,E.__value),rh(E,"class","svelte-1vpv55x"),rh(S,"class","label svelte-1vpv55x"),rh(w,"for","option-fpt"),rh(w,"class","svelte-1vpv55x"),rh(y,"class","option svelte-1vpv55x"),rh(r,"class","cancel-container svelte-1vpv55x"),rh(t,"class","cancel-translation-body svelte-1vpv55x"),rh($,"class","cancel-translation-footer svelte-1vpv55x"),A.p(l,h,E)},m(A,N){Vg(A,t,N),jg(t,n),jg(t,o),jg(t,r),jg(r,i),jg(i,s),jg(s,a),jg(a,l),l.checked=l.__value===e[1],jg(s,c),jg(s,d),jg(r,u),jg(r,p),jg(p,m),jg(m,g),jg(g,h),h.checked=h.__value===e[1],jg(m,f),jg(m,_),jg(r,v),jg(r,y),jg(y,w),jg(w,b),jg(b,E),E.checked=E.__value===e[1],jg(w,T),jg(w,S),Vg(A,x,N),Vg(A,$,N),of(C,$,null),jg($,k),of(L,$,null),I=!0,R||(M=[th(l,"change",e[6]),th(h,"change",e[8]),th(E,"change",e[9])],R=!0)},p(t,[n]){e=t,2&n&&(l.checked=l.__value===e[1]),2&n&&(h.checked=h.__value===e[1]),2&n&&(E.checked=E.__value===e[1]);const o={};65536&n&&(o.$$scope={dirty:n,ctx:e}),C.$set(o);const r={};65536&n&&(r.$$scope={dirty:n,ctx:e}),L.$set(r)},i(e){I||(Yh(C.$$.fragment,e),Yh(L.$$.fragment,e),I=!0)},o(e){Kh(C.$$.fragment,e),Kh(L.$$.fragment,e),I=!1},d(e){e&&(Yg(t),Yg(x),Yg($)),rf(C),rf(L),A.r(),R=!1,Sg(M)}}}function RI(e,n,o){let r,i;const s=$h("deepl_settings");kg(e,s,(e=>o(11,i=e)));const a=$h("deepl_website_settings");kg(e,a,(e=>o(10,r=e)));let{onClose:l}=n,{onCancel:d}=n,u="fpt";return e.$$set=e=>{"onClose"in e&&o(5,l=e.onClose),"onCancel"in e&&o(0,d=e.onCancel)},[d,u,s,a,()=>{const e={hideOption:void 0,sourceLang:r.websiteLanguage,domainName:r.hostname,uiLocation:gx(B.fptHideModal)};switch(u){case"website":Og(s,i.blacklistDomains=[...i.blacklistDomains,r.hostname],i),e.hideOption=C;break;case"lang":n=r.websiteLanguage,o=c,"EN"===n?(Og(s,i.languagesForTranslation={...i.languagesForTranslation,"EN-GB":o},i),Og(s,i.languagesForTranslation={...i.languagesForTranslation,"EN-US":o},i)):"PT"===n?(Og(s,i.languagesForTranslation={...i.languagesForTranslation,"PT-PT":o},i),Og(s,i.languagesForTranslation={...i.languagesForTranslation,"PT-BR":o},i)):"ZH"===n?(Og(s,i.languagesForTranslation={...i.languagesForTranslation,"ZH-CN":o},i),Og(s,i.languagesForTranslation={...i.languagesForTranslation,"ZH-HANT":o},i)):Og(s,i.languagesForTranslation={...i.languagesForTranslation,[n]:o},i),e.hideOption=k;break;default:e.hideOption=L,s.set({enableFullPageTranslation:!1})}var n,o;t({action:"dlSendNotification",payload:{type:P.fullPageTranslation,options:{theme:U.green_theme}}}),t({action:"dlTrackFptHide",payload:e}),l()},l,function(){u=this.__value,o(1,u)},[[]],function(){u=this.__value,o(1,u)},function(){u=this.__value,o(1,u)}]}class MI extends af{constructor(e){super(),sf(this,e,RI,AI,$g,{onClose:5,onCancel:0})}}function NI(e,t,n){const o=e.slice();return o[17]=t[n],o}function OI(e,t,n){const o=e.slice();return o[17]=t[n],o}function DI(e,t,n){const o=e.slice();return o[17]=t[n],o}function PI(e,t,n){const o=e.slice();return o[17]=t[n],o}function UI(e,t,n){const o=e.slice();return o[17]=t[n],o}function BI(e){let t,n,o,r,i,s,a,l,c,d,u,p=chrome.i18n.getMessage("ui_fpt_hide_checkbox")+"";t=new xI({props:{onClose:e[0],$$slots:{default:[KI]},$$scope:{ctx:e}}});let m=e[6]&&ZI(e);return{c(){nf(t.$$.fragment),n=Jg(),m&&m.c(),o=Jg(),r=Zg("div"),i=Zg("label"),s=Zg("input"),a=Jg(),l=Qg(p),rh(s,"type","checkbox"),s.disabled=e[6],rh(s,"class","svelte-6tzge"),rh(i,"class","svelte-6tzge"),rh(r,"class","footer svelte-6tzge"),uh(r,"hasError",e[6])},m(p,g){of(t,p,g),Vg(p,n,g),m&&m.m(p,g),Vg(p,o,g),Vg(p,r,g),jg(r,i),jg(i,s),jg(i,a),jg(i,l),c=!0,d||(u=th(i,"click",e[15]),d=!0)},p(e,n){const i={};1&n&&(i.onClose=e[0]),268435476&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i),e[6]?m?(m.p(e,n),64&n&&Yh(m,1)):(m=ZI(e),m.c(),Yh(m,1),m.m(o.parentNode,o)):m&&(qh(),Kh(m,1,1,(()=>{m=null})),Vh()),(!c||64&n)&&(s.disabled=e[6]),(!c||64&n)&&uh(r,"hasError",e[6])},i(e){c||(Yh(t.$$.fragment,e),Yh(m),c=!0)},o(e){Kh(t.$$.fragment,e),Kh(m),c=!1},d(e){e&&(Yg(n),Yg(o),Yg(r)),rf(t,e),m&&m.d(e),d=!1,u()}}}function WI(e){let t,n,o,r;return t=new xI({props:{onClose:e[0]}}),o=new MI({props:{onClose:e[0],onCancel:e[13]}}),{c(){nf(t.$$.fragment),n=Jg(),nf(o.$$.fragment)},m(e,i){of(t,e,i),Vg(e,n,i),of(o,e,i),r=!0},p(e,n){const r={};1&n&&(r.onClose=e[0]),t.$set(r);const i={};1&n&&(i.onClose=e[0]),8&n&&(i.onCancel=e[13]),o.$set(i)},i(e){r||(Yh(t.$$.fragment,e),Yh(o.$$.fragment,e),r=!0)},o(e){Kh(t.$$.fragment,e),Kh(o.$$.fragment,e),r=!1},d(e){e&&Yg(n),rf(t,e),rf(o,e)}}}function zI(e){let t,n;return t=new xI({props:{$$slots:{default:[mA]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};268435510&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function FI(e){let t,n;return t=new xI({props:{$$slots:{default:[vA]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};268435472&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function HI(e){let t,n;return t=new xI({props:{$$slots:{default:[yA]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};268435456&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function jI(e){let t,n;return t=new xI({props:{$$slots:{default:[wA]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};268435456&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function GI(e){let t,n;return t=new xI({props:{$$slots:{default:[bA]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};268435456&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function qI(e){let t,n;return t=new xI({props:{$$slots:{default:[EA]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};268435456&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function VI(e){let t,n;return t=new xI({props:{$$slots:{default:[TA]},$$scope:{ctx:e}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};268435456&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function YI(e){let t;return{c(){t=Zg("span"),t.textContent=`${chrome.i18n.getMessage("ui_fpt_translate_button")}`,rh(t,"class","svelte-6tzge")},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function KI(e){let t,n,o,r,i,s,a,l,c,d,u,p;return l=new mb({props:{value:e[2].selectedTargetLanguage,variant:"alternate",alignRight:!1}}),l.$on("selection",e[14]),u=new Dw({props:{className:"btn-primary",paddingX:"md",dataQa:"dl-button-translate-page",$$slots:{default:[YI]},$$scope:{ctx:e}}}),u.$on("click",e[10]),{c(){t=Zg("div"),n=Zg("div"),o=Qg(e[4]),r=Jg(),i=Zg("div"),s=Jg(),a=Zg("div"),nf(l.$$.fragment),c=Jg(),d=Zg("div"),nf(u.$$.fragment),rh(n,"class","website-lang svelte-6tzge"),rh(i,"class","translate-to-arrow svelte-6tzge"),rh(a,"class","language-switch svelte-6tzge"),rh(t,"class","language-selection svelte-6tzge"),rh(t,"dir",jt()),rh(d,"class","translate-button svelte-6tzge")},m(e,m){Vg(e,t,m),jg(t,n),jg(n,o),jg(t,r),jg(t,i),jg(t,s),jg(t,a),of(l,a,null),Vg(e,c,m),Vg(e,d,m),of(u,d,null),p=!0},p(e,t){(!p||16&t)&&ih(o,e[4]);const n={};4&t&&(n.value=e[2].selectedTargetLanguage),l.$set(n);const r={};268435456&t&&(r.$$scope={dirty:t,ctx:e}),u.$set(r)},i(e){p||(Yh(l.$$.fragment,e),Yh(u.$$.fragment,e),p=!0)},o(e){Kh(l.$$.fragment,e),Kh(u.$$.fragment,e),p=!1},d(e){e&&(Yg(t),Yg(c),Yg(d)),rf(l),rf(u)}}}function ZI(e){let t,n,o;return n=new Wy({props:{error:e[1].error}}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","error-container svelte-6tzge")},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p(e,t){const o={};2&t&&(o.error=e[1].error),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function XI(e){let t,n=ef(qf(chrome.i18n.getMessage("ui_notice_no_translate_language",e[4]),["strong"])),o=[];for(let t=0;t<n.length;t+=1)o[t]=tA(OI(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=eh()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);Vg(e,t,n)},p(e,r){if(16&r){let i;for(n=ef(qf(chrome.i18n.getMessage("ui_notice_no_translate_language",e[4]),["strong"])),i=0;i<n.length;i+=1){const s=OI(e,n,i);o[i]?o[i].p(s,r):(o[i]=tA(s),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){e&&Yg(t),Kg(o,e)}}}function QI(e){let t;function n(e,t){return e[5]?oA:nA}let o=n(e),r=o(e);return{c(){r.c(),t=eh()},m(e,n){r.m(e,n),Vg(e,t,n)},p(e,i){o===(o=n(e))&&r?r.p(e,i):(r.d(1),r=o(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){e&&Yg(t),r.d(e)}}}function JI(e){let t,n=e[17].text+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p(e,o){16&o&&n!==(n=e[17].text+"")&&ih(t,n)},d(e){e&&Yg(t)}}}function eA(e){let t,n,o=e[17].text+"";return{c(){t=Zg("strong"),n=Qg(o),rh(t,"class","svelte-6tzge")},m(e,o){Vg(e,t,o),jg(t,n)},p(e,t){16&t&&o!==(o=e[17].text+"")&&ih(n,o)},d(e){e&&Yg(t)}}}function tA(e){let t;function n(e,t){return"strong"===e[17].block?eA:JI}let o=n(e),r=o(e);return{c(){r.c(),t=eh()},m(e,n){r.m(e,n),Vg(e,t,n)},p(e,i){o===(o=n(e))&&r?r.p(e,i):(r.d(1),r=o(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){e&&Yg(t),r.d(e)}}}function nA(e){let t,n=ef(qf(chrome.i18n.getMessage("ui_notice_no_translate_website",e[1].hostname),["strong"])),o=[];for(let t=0;t<n.length;t+=1)o[t]=sA(DI(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=eh()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);Vg(e,t,n)},p(e,r){if(2&r){let i;for(n=ef(qf(chrome.i18n.getMessage("ui_notice_no_translate_website",e[1].hostname),["strong"])),i=0;i<n.length;i+=1){const s=DI(e,n,i);o[i]?o[i].p(s,r):(o[i]=sA(s),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){e&&Yg(t),Kg(o,e)}}}function oA(e){let t,n=ef(qf(chrome.i18n.getMessage("ui_notice_no_translate_website_and_language",[e[1].hostname,e[4]]),["strong"])),o=[];for(let t=0;t<n.length;t+=1)o[t]=cA(PI(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=eh()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);Vg(e,t,n)},p(e,r){if(18&r){let i;for(n=ef(qf(chrome.i18n.getMessage("ui_notice_no_translate_website_and_language",[e[1].hostname,e[4]]),["strong"])),i=0;i<n.length;i+=1){const s=PI(e,n,i);o[i]?o[i].p(s,r):(o[i]=cA(s),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){e&&Yg(t),Kg(o,e)}}}function rA(e){let t,n=e[17].text+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p(e,o){2&o&&n!==(n=e[17].text+"")&&ih(t,n)},d(e){e&&Yg(t)}}}function iA(e){let t,n,o=e[17].text+"";return{c(){t=Zg("strong"),n=Qg(o),rh(t,"class","svelte-6tzge")},m(e,o){Vg(e,t,o),jg(t,n)},p(e,t){2&t&&o!==(o=e[17].text+"")&&ih(n,o)},d(e){e&&Yg(t)}}}function sA(e){let t;function n(e,t){return"strong"===e[17].block?iA:rA}let o=n(e),r=o(e);return{c(){r.c(),t=eh()},m(e,n){r.m(e,n),Vg(e,t,n)},p(e,i){o===(o=n(e))&&r?r.p(e,i):(r.d(1),r=o(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){e&&Yg(t),r.d(e)}}}function aA(e){let t,n=e[17].text+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p(e,o){18&o&&n!==(n=e[17].text+"")&&ih(t,n)},d(e){e&&Yg(t)}}}function lA(e){let t,n,o=e[17].text+"";return{c(){t=Zg("strong"),n=Qg(o),rh(t,"class","svelte-6tzge")},m(e,o){Vg(e,t,o),jg(t,n)},p(e,t){18&t&&o!==(o=e[17].text+"")&&ih(n,o)},d(e){e&&Yg(t)}}}function cA(e){let t;function n(e,t){return"strong"===e[17].block?lA:aA}let o=n(e),r=o(e);return{c(){r.c(),t=eh()},m(e,n){r.m(e,n),Vg(e,t,n)},p(e,i){o===(o=n(e))&&r?r.p(e,i):(r.d(1),r=o(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){e&&Yg(t),r.d(e)}}}function dA(e){let t,n=e[17].text+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function uA(e){let t,n,o;return{c(){t=Zg("span"),t.textContent=`${e[17].text}`,rh(t,"class","link svelte-6tzge")},m(r,i){Vg(r,t,i),n||(o=th(t,"click",e[9]),n=!0)},p:wg,d(e){e&&Yg(t),n=!1,o()}}}function pA(e){let t;let n=function(e,t){return"settingsLink"===e[17].block?uA:dA}(e),o=n(e);return{c(){o.c(),t=eh()},m(e,n){o.m(e,n),Vg(e,t,n)},p(e,t){o.p(e,t)},d(e){e&&Yg(t),o.d(e)}}}function mA(e){let t,n,o,r,i;function s(e,t){return 6&t&&(o=null),null==o&&(o=!!e[2].blacklistDomains.includes(e[1].hostname)),o?QI:e[5]?XI:void 0}let a=s(e,-1),l=a&&a(e),c=ef(qf(chrome.i18n.getMessage("ui_notice_no_translate_change_option"),["settingsLink"])),d=[];for(let t=0;t<c.length;t+=1)d[t]=pA(NI(e,c,t));return{c(){t=Zg("div"),n=Zg("p"),l&&l.c(),r=Jg(),i=Zg("p");for(let e=0;e<d.length;e+=1)d[e].c();rh(n,"class","svelte-6tzge"),rh(i,"class","svelte-6tzge")},m(e,o){Vg(e,t,o),jg(t,n),l&&l.m(n,null),jg(t,r),jg(t,i);for(let e=0;e<d.length;e+=1)d[e]&&d[e].m(i,null)},p(e,t){if(a===(a=s(e,t))&&l?l.p(e,t):(l&&l.d(1),l=a&&a(e),l&&(l.c(),l.m(n,null))),512&t){let n;for(c=ef(qf(chrome.i18n.getMessage("ui_notice_no_translate_change_option"),["settingsLink"])),n=0;n<c.length;n+=1){const o=NI(e,c,n);d[n]?d[n].p(o,t):(d[n]=pA(o),d[n].c(),d[n].m(i,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=c.length}},d(e){e&&Yg(t),l&&l.d(),Kg(d,e)}}}function gA(e){let t,n=e[17].text+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p(e,o){16&o&&n!==(n=e[17].text+"")&&ih(t,n)},d(e){e&&Yg(t)}}}function hA(e){let t,n,o=e[17].text+"";return{c(){t=Zg("strong"),n=Qg(o),rh(t,"class","svelte-6tzge")},m(e,o){Vg(e,t,o),jg(t,n)},p(e,t){16&t&&o!==(o=e[17].text+"")&&ih(n,o)},d(e){e&&Yg(t)}}}function fA(e){let t;function n(e,t){return"strong"===e[17].block?hA:gA}let o=n(e),r=o(e);return{c(){r.c(),t=eh()},m(e,n){r.m(e,n),Vg(e,t,n)},p(e,i){o===(o=n(e))&&r?r.p(e,i):(r.d(1),r=o(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){e&&Yg(t),r.d(e)}}}function _A(e){let t,n=chrome.i18n.getMessage("full_page_translation_show_original")+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function vA(e){let t,n,o,r,i,s,a=ef(qf(chrome.i18n.getMessage("ui_translated_automatically",e[4]),["strong"])),l=[];for(let t=0;t<a.length;t+=1)l[t]=fA(UI(e,a,t));return i=new Dw({props:{className:"button-reload",$$slots:{default:[_A]},$$scope:{ctx:e}}}),i.$on("click",e[11]),{c(){t=Zg("div"),n=Zg("p");for(let e=0;e<l.length;e+=1)l[e].c();o=Jg(),r=Zg("p"),nf(i.$$.fragment),rh(n,"class","mb-none svelte-6tzge"),rh(r,"class","svelte-6tzge")},m(e,a){Vg(e,t,a),jg(t,n);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(n,null);jg(t,o),jg(t,r),of(i,r,null),s=!0},p(e,t){if(16&t){let o;for(a=ef(qf(chrome.i18n.getMessage("ui_translated_automatically",e[4]),["strong"])),o=0;o<a.length;o+=1){const r=UI(e,a,o);l[o]?l[o].p(r,t):(l[o]=fA(r),l[o].c(),l[o].m(n,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=a.length}const o={};268435456&t&&(o.$$scope={dirty:t,ctx:e}),i.$set(o)},i(e){s||(Yh(i.$$.fragment,e),s=!0)},o(e){Kh(i.$$.fragment,e),s=!1},d(e){e&&Yg(t),Kg(l,e),rf(i)}}}function yA(e){let t;return{c(){t=Zg("p"),t.textContent=`${chrome.i18n.getMessage("full_page_translation_ongoing_translation")}`,rh(t,"class","translation-in-progress svelte-6tzge")},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function wA(e){let t;return{c(){t=Zg("p"),t.textContent=`${chrome.i18n.getMessage("full_page_translation_auto_detect_lang")}`,rh(t,"class","translation-in-progress svelte-6tzge")},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function bA(e){let t,n;return t=new kI({props:{message:chrome.i18n.getMessage("full_page_translation_info_google_translate")}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p:wg,i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function EA(e){let t,n;return t=new kI({props:{message:chrome.i18n.getMessage("full_page_translation_no_website_data")}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p:wg,i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function TA(e){let t,n,o;return n=new AT({}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","translation-in-progress svelte-6tzge")},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p:wg,i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function SA(e){let t,n,o,r,i,s;const a=[VI,qI,GI,jI,HI,FI,zI,WI,BI],l=[];function c(e,t){return 2&t&&(n=null),38&t&&(o=null),null==e[1]?0:(null==n&&(n=!(0!==Object.keys(e[1]).length)),n?1:e[1].isGoogleTranslatedActive?2:e[1].translationState===d.ongoingAutoDetection?3:e[1].translationState===d.ongoingTranslation?4:e[1].translationState===d.isTranslationComplete?5:(null==o&&(o=!(!e[2].blacklistDomains.includes(e[1].hostname)&&!e[5])),o?6:e[3]?7:e[1].websiteLanguage?8:-1))}return~(r=c(e,-1))&&(i=l[r]=a[r](e)),{c(){t=Zg("div"),i&&i.c(),rh(t,"class","full-page-translation svelte-6tzge")},m(e,n){Vg(e,t,n),~r&&l[r].m(t,null),s=!0},p(e,[n]){let o=r;r=c(e,n),r===o?~r&&l[r].p(e,n):(i&&(qh(),Kh(l[o],1,1,(()=>{l[o]=null})),Vh()),~r?(i=l[r],i?i.p(e,n):(i=l[r]=a[r](e),i.c()),Yh(i,1),i.m(t,null)):i=null)},i(e){s||(Yh(i),s=!0)},o(e){Kh(i),s=!1},d(e){e&&Yg(t),~r&&l[r].d()}}}function xA(e,n,o){let r,i,s,a;const l=$h("deepl_settings");kg(e,l,(e=>o(2,a=e)));const u=$h("deepl_website_settings");kg(e,u,(e=>o(1,s=e)));let p=S,{onClose:m}=n;let g,h,f=!1;return e.$$set=e=>{"onClose"in e&&o(0,m=e.onClose)},e.$$.update=()=>{2&e.$$.dirty&&o(6,r=s&&s.error),6&e.$$.dirty&&o(5,i=zt(s.websiteLanguage,a.languagesForTranslation,c)),2&e.$$.dirty&&s&&(s.isSupportedLanguage?o(4,g=chrome.i18n.getMessage(`supported_languages_${s.websiteLanguage}`)):o(4,g=chrome.i18n.getMessage("supported_languages_EN"))),4098&e.$$.dirty&&s&&s.hostname&&s.hostname!==h&&(o(12,h=s.hostname),t({action:"dlTrackExtensionOpenedEvent",payload:{domainName:h,extensionContext:p}}))},[m,s,a,f,g,i,r,l,u,function(){t({action:"dlOpenInternalPage",payload:{destination:RT.settings_page}})},function(){0==a.isTargetLanguageConfirmed&&l.set({isTargetLanguageConfirmed:!0}),OU(s.websiteLanguage,_)},()=>{u.update({translationState:d.showOriginal})},h,()=>{o(3,f=!1)},e=>l.set({selectedTargetLanguage:e.detail.selectedOption.value,isTargetLanguageConfirmed:!0,regionalVariant:e.detail.selectedOption.regionalVariant}),()=>{r||o(3,f=!f)}]}class $A extends af{constructor(e){super(),sf(this,e,xA,SA,$g,{onClose:0})}}function CA(e){let t,n,o;return n=new $A({props:{onClose:e[0]}}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","app-popup svelte-1x9ra34"),rh(t,"style",`z-index: ${e[2].z_index}`),rh(t,"dir",jt())},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p(e,t){const o={};1&t&&(o.onClose=e[0]),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function kA(e){let t,n,o=e[3]()&&e[1]&&e[1].isValidUrlForPopup,r=o&&CA(e);return{c(){r&&r.c(),t=eh()},m(e,o){r&&r.m(e,o),Vg(e,t,o),n=!0},p(e,[n]){2&n&&(o=e[3]()&&e[1]&&e[1].isValidUrlForPopup),o?r?(r.p(e,n),2&n&&Yh(r,1)):(r=CA(e),r.c(),Yh(r,1),r.m(t.parentNode,t)):r&&(qh(),Kh(r,1,1,(()=>{r=null})),Vh())},i(e){n||(Yh(r),n=!0)},o(e){Kh(r),n=!1},d(e){e&&Yg(t),r&&r.d(e)}}}function LA(e,t,n){let o,r;kg(e,df,(e=>n(4,o=e))),kg(e,Rw,(e=>n(1,r=e))),xh("deepl_settings",df),xh("deepl_website_settings",Rw),xh("text_direction",jt());let{onClose:i}=t;const{deepl_inline_ui:s}=D;return e.$$set=e=>{"onClose"in e&&n(0,i=e.onClose)},[i,r,s,function(){return nt(o,be.TRANSLATOR)}]}class IA extends af{constructor(e){super(),sf(this,e,LA,kA,$g,{onClose:0})}}class AA{static HTML_TAG_NAME="deepl-page-load-popup";static createElement=(e=document)=>{const t=e.createElement(AA.HTML_TAG_NAME),n=new AA(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=()=>{this.domElement.mainComponent=new IA({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function RA(e){let t,n,o,r;return{c(){t=Zg("button"),n=Zg("span"),rh(n,"class","svelte-19tdlik"),rh(t,"aria-label",e[3]?chrome.i18n.getMessage("toggle_off"):chrome.i18n.getMessage("toggle_on")),rh(t,"class","switch svelte-19tdlik"),rh(t,"data-testid","deepl-switch"),rh(t,"data-qa",e[2]),uh(t,"checked",e[0]),uh(t,"disabled",e[1])},m(i,s){Vg(i,t,s),jg(t,n),o||(r=th(t,"click",e[3]),o=!0)},p(e,[n]){4&n&&rh(t,"data-qa",e[2]),1&n&&uh(t,"checked",e[0]),2&n&&uh(t,"disabled",e[1])},i:wg,o:wg,d(e){e&&Yg(t),o=!1,r()}}}function MA(e,t,n){let{checked:o=!1}=t,{disabled:r=!1}=t,{qaRoot:i="dl-switch"}=t;const s=Sh();return e.$$set=e=>{"checked"in e&&n(0,o=e.checked),"disabled"in e&&n(1,r=e.disabled),"qaRoot"in e&&n(2,i=e.qaRoot)},[o,r,i,function(){r||s("change",{checked:!o})}]}class NA extends af{constructor(e){super(),sf(this,e,MA,RA,$g,{checked:0,disabled:1,qaRoot:2})}}function OA(e){let t,n,o,r,i,s,a,l,c,d,u=e[1]&&DA();return a=new NA({props:{checked:e[3].isGDocsEnabled}}),a.$on("change",e[8]),{c(){t=Zg("div"),u&&u.c(),n=Jg(),o=Zg("div"),r=Zg("div"),r.textContent=`${chrome.i18n.getMessage("ui_gdocs_setting_switch")}`,i=Jg(),s=Zg("div"),nf(a.$$.fragment),rh(r,"class","legend"),rh(s,"class","switch svelte-8jz3zx"),rh(o,"class","turn-on-off-panel svelte-8jz3zx"),rh(t,"class","dl-gdocs-top-icon-modal svelte-8jz3zx"),ah(t,"left",e[2]+"px"),rh(t,"dir",jt())},m(p,m){Vg(p,t,m),u&&u.m(t,null),jg(t,n),jg(t,o),jg(o,r),jg(o,i),jg(o,s),of(a,s,null),l=!0,c||(d=[Dg(__.call(null,t,{isShadow:!0})),th(t,"click_outside",e[9])],c=!0)},p(e,o){e[1]?u?u.p(e,o):(u=DA(),u.c(),u.m(t,n)):u&&(u.d(1),u=null);const r={};8&o&&(r.checked=e[3].isGDocsEnabled),a.$set(r),(!l||4&o)&&ah(t,"left",e[2]+"px")},i(e){l||(Yh(a.$$.fragment,e),l=!0)},o(e){Kh(a.$$.fragment,e),l=!1},d(e){e&&Yg(t),u&&u.d(),rf(a),c=!1,Sg(d)}}}function DA(e){let t,n,o,r,i,s,a,l,c,d,u=chrome.i18n.getMessage("ui_gdocs_welcome_usp1")+"",p=chrome.i18n.getMessage("ui_gdocs_welcome_usp2")+"",m=chrome.i18n.getMessage("ui_gdocs_welcome_usp3")+"";return{c(){t=Zg("div"),n=Zg("div"),o=Zg("p"),o.textContent=`${chrome.i18n.getMessage("ui_gdocs_welcome_title")}`,r=Jg(),i=Zg("div"),s=Zg("div"),a=Jg(),l=Zg("div"),c=Jg(),d=Zg("div"),rh(o,"class","svelte-8jz3zx"),rh(n,"class","header svelte-8jz3zx"),rh(s,"class","ups-item svelte-8jz3zx"),rh(l,"class","ups-item svelte-8jz3zx"),rh(d,"class","ups-item svelte-8jz3zx"),rh(i,"class","ups-list"),rh(t,"class","onboarding svelte-8jz3zx")},m(e,g){Vg(e,t,g),jg(t,n),jg(n,o),jg(t,r),jg(t,i),jg(i,s),s.innerHTML=u,jg(i,a),jg(i,l),l.innerHTML=p,jg(i,c),jg(i,d),d.innerHTML=m},p:wg,d(e){e&&Yg(t)}}}function PA(e){let t,n,o,r,i,s,a=e[0]&&OA(e);return{c(){t=Zg("button"),n=Jg(),a&&a.c(),o=eh(),rh(t,"class","dl-gdocs-top-icon svelte-8jz3zx"),ah(t,"left",e[2]+"px"),uh(t,"onboarding-pending",!e[3].isGDocsOnboardingShown)},m(l,c){Vg(l,t,c),Vg(l,n,c),a&&a.m(l,c),Vg(l,o,c),r=!0,i||(s=th(t,"click",e[7]),i=!0)},p(e,[n]){(!r||4&n)&&ah(t,"left",e[2]+"px"),(!r||8&n)&&uh(t,"onboarding-pending",!e[3].isGDocsOnboardingShown),e[0]?a?(a.p(e,n),1&n&&Yh(a,1)):(a=OA(e),a.c(),Yh(a,1),a.m(o.parentNode,o)):a&&(qh(),Kh(a,1,1,(()=>{a=null})),Vh())},i(e){r||(Yh(a),r=!0)},o(e){Kh(a),r=!1},d(e){e&&(Yg(t),Yg(n),Yg(o)),a&&a.d(e),i=!1,s()}}}function UA(e,n,o){let r;const i=$h("deepl_settings");kg(e,i,(e=>o(3,r=e)));let s,{registerTopToolbarIconCallbacks:a}=n,{clearTopToolbarIconCallbacks:l}=n,c=!1,d=!1;const u=()=>{const e=document.querySelector("#titlebar-mode-indicator-container"),t=document.querySelector(".docs-titlebar-buttons #docs-presence-container"),n=null!=document.querySelector(".docs-titlebar-buttons-rtl");if(e){const t=e.getBoundingClientRect();o(2,s=n?o(2,s=t.left+40-32):t.left-40)}else if(t){const e=t.getBoundingClientRect();o(2,s=n?o(2,s=e.left+40-32):e.left-40)}};Eh((()=>{u(),a({repositionTopToolbarIcon:u})})),Th((()=>{l()}));return e.$$set=e=>{"registerTopToolbarIconCallbacks"in e&&o(5,a=e.registerTopToolbarIconCallbacks),"clearTopToolbarIconCallbacks"in e&&o(6,l=e.clearTopToolbarIconCallbacks)},e.$$.update=()=>{3&e.$$.dirty&&c&&d&&t({action:"dlTrackOnboardingModalShown",payload:{nicheIntegration:re.gdocs}})},[c,d,s,r,i,a,l,()=>{o(0,c=!0),r.isGDocsOnboardingShown||(Og(i,r.isGDocsOnboardingShown=!0,r),o(1,d=!0))},e=>Og(i,r.isGDocsEnabled=e.detail.checked,r),()=>{o(1,d=!1),o(0,c=!1)}]}class BA extends af{constructor(e){super(),sf(this,e,UA,PA,$g,{registerTopToolbarIconCallbacks:5,clearTopToolbarIconCallbacks:6})}}function WA(e){let t,n,o,r,i,s,a,l,c,d,u;o=new T_({props:{tooltip:e[4],showProShield:nt(e[0],be.TRANSLATOR),zIndex:"10000000000",$$slots:{default:[zA]},$$scope:{ctx:e}}});let p=e[3]&&FA(e);return a=new T_({props:{tooltip:chrome.i18n.getMessage("ui_gdocs_turn_off"),zIndex:"10000000000",$$slots:{default:[jA]},$$scope:{ctx:e}}}),{c(){t=Zg("div"),n=Zg("button"),nf(o.$$.fragment),r=Jg(),p&&p.c(),i=Jg(),s=Zg("button"),nf(a.$$.fragment),rh(n,"class","dl-icon-circle dl-icon svelte-fyt1eq"),rh(s,"class","dl-icon-circle dl-on-off-icon svelte-fyt1eq"),rh(s,"data-qa","deepl-inline-translate-menu-icon"),rh(t,"class","dl-gdocs-icon svelte-fyt1eq"),ah(t,"top",e[5].top),ah(t,"left",e[5].left),rh(t,"dir",jt()),uh(t,"has-deepl-write",e[3])},m(l,m){Vg(l,t,m),jg(t,n),of(o,n,null),jg(t,r),p&&p.m(t,null),jg(t,i),jg(t,s),of(a,s,null),c=!0,d||(u=[th(n,"click",e[7]),th(n,"mouseenter",e[25]),th(s,"click",e[10]),th(s,"mouseenter",e[28])],d=!0)},p(e,n){const r={};16&n[0]&&(r.tooltip=e[4]),1&n[0]&&(r.showProShield=nt(e[0],be.TRANSLATOR)),1&n[2]&&(r.$$scope={dirty:n,ctx:e}),o.$set(r),e[3]?p?(p.p(e,n),8&n[0]&&Yh(p,1)):(p=FA(e),p.c(),Yh(p,1),p.m(t,i)):p&&(qh(),Kh(p,1,1,(()=>{p=null})),Vh());const s={};1&n[2]&&(s.$$scope={dirty:n,ctx:e}),a.$set(s),(!c||32&n[0])&&ah(t,"top",e[5].top),(!c||32&n[0])&&ah(t,"left",e[5].left),(!c||8&n[0])&&uh(t,"has-deepl-write",e[3])},i(e){c||(Yh(o.$$.fragment,e),Yh(p),Yh(a.$$.fragment,e),l||Oh((()=>{l=Xh(t,zf,{x:-5,duration:300}),l.start()})),c=!0)},o(e){Kh(o.$$.fragment,e),Kh(p),Kh(a.$$.fragment,e),c=!1},d(e){e&&Yg(t),rf(o),p&&p.d(),rf(a),d=!1,Sg(u)}}}function zA(e){let t;return{c(){t=Zg("span"),rh(t,"class","svelte-fyt1eq")},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function FA(e){let t,n,o,r,i;return n=new T_({props:{tooltip:chrome.i18n.getMessage("ui_gdocs_deepl_write"),showProShield:nt(e[0],be.WRITE),zIndex:"10000000000",$$slots:{default:[HA]},$$scope:{ctx:e}}}),{c(){t=Zg("button"),nf(n.$$.fragment),rh(t,"class","dl-icon-circle dl-write-icon svelte-fyt1eq")},m(s,a){Vg(s,t,a),of(n,t,null),o=!0,r||(i=[th(t,"click",e[26]),th(t,"mouseenter",e[27])],r=!0)},p(e,t){const o={};1&t[0]&&(o.showProShield=nt(e[0],be.WRITE)),1&t[2]&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n),r=!1,Sg(i)}}}function HA(e){let t;return{c(){t=Zg("span"),rh(t,"class","svelte-fyt1eq")},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function jA(e){let t;return{c(){t=Zg("span"),rh(t,"class","svelte-fyt1eq")},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function GA(e){let t,n,o,r;t=new BA({props:{registerTopToolbarIconCallbacks:e[11],clearTopToolbarIconCallbacks:e[12]}});let i=e[6]&&!e[1]&&!e[2]&&WA(e);return{c(){nf(t.$$.fragment),n=Jg(),i&&i.c(),o=eh()},m(e,s){of(t,e,s),Vg(e,n,s),i&&i.m(e,s),Vg(e,o,s),r=!0},p(e,t){!e[6]||e[1]||e[2]?i&&(qh(),Kh(i,1,1,(()=>{i=null})),Vh()):i?(i.p(e,t),70&t[0]&&Yh(i,1)):(i=WA(e),i.c(),Yh(i,1),i.m(o.parentNode,o))},i(e){r||(Yh(t.$$.fragment,e),Yh(i),r=!0)},o(e){Kh(t.$$.fragment,e),Kh(i),r=!1},d(e){e&&(Yg(n),Yg(o)),rf(t,e),i&&i.d(e)}}}function qA(e,n,o){let r,i;kg(e,df,(e=>o(0,i=e))),xh("deepl_settings",df),xh("deepl_website_settings",Rw),xh("text_direction",jt());let s,a,l,c,d,u,p,m,g,{replaceData:h}=n,{contentProcessBuildingBlocks:f}=n,{deeplWriteTrackingData:_={lang:"",sourceLength:0,targetLength:0,nicheIntegration:re.gdocs,error:""}}=n,v=!0,y=!1,w="",b="",E=!1,T="",S={top:0,left:0};async function x(e,n,o){if("dlTriggerTranslationShortcut"===e.action)C(),t({action:"dlTrackUseOfShortcut",payload:{shortcutType:W,location:B.inlineTranslationTriggerIcon,nicheIntegration:re.gdocs}}),o();return!0}const $=e=>{u=ae.translate,e&&(p=e),yt()},C=()=>{$(i.selectedTargetLanguage)},k=()=>{u=ae.write,yt()},L=()=>{const{shouldBeOutOfViewport:e,newPosition:{left:t,top:n}}=Et();e!==y&&o(2,y=e),o(5,S.left=`${Math.round(t)}px`,S),o(5,S.top=`${Math.round(n)}px`,S)};function I(e){t({action:"dlTrackIconHover",payload:{uiLocation:e,domainName:window.location.host,nicheIntegration:re.gdocs}})}const A=()=>{s=setInterval((()=>{const e=wt(),n=!e.text;!n&&v&&L(),n&&!v&&(()=>{if(!i.isInlineHighlighterShown){df.set({isInlineHighlighterShown:!0});try{t({action:"dltrackCloseInlineHighlighter",payload:{trigger:oe.outside_click}})}catch(e){console.error(e)}}})(),o(1,v=n),w!==e.text&&o(23,w=e.text)}),300)},R=()=>{const e=document.querySelector("#docs-instant-bubble");l=new MutationObserver((()=>{L()}));return l.observe(e,{attributes:!0,childList:!1,characterData:!1}),()=>l.unobserve()},M=async e=>{if(u&&("ClipboardEvent"===e.constructor.name||e.constructor.toString().includes("ClipboardEvent"))){switch(u){case ae.translate:UU({event:e,targetLang:p});break;case ae.write:BU({event:e,lang:b})}u=void 0}},N=()=>{A(),(()=>{const e=document.querySelector("#kix-appview");a=new MutationObserver((()=>{document.querySelector("#docs-instant-bubble")&&(L(),R())})),a.observe(e,{attributes:!1,childList:!0,characterData:!1})})(),(()=>{const e=new ResizeObserver((()=>{L(),m&&m()}));e.observe(document.body)})(),document.querySelector("#kix-appview .kix-appview-editor").addEventListener("scroll",L),(()=>{const{editable:e}=vt();e.addEventListener("copy",M)})(),(()=>{const e=document.querySelector("#docs-presence-container");c=new ResizeObserver((()=>{m&&m()})),c.observe(e)})(),(()=>{const e=document.querySelector("#docs-titlebar");d=new ResizeObserver((()=>{m&&m()})),d.observe(e)})()},O=()=>{a&&a.disconnect(),l&&l.disconnect(),s&&clearInterval(s),document.querySelector("#kix-appview .kix-appview-editor").removeEventListener("scroll",L),(()=>{const{editable:e}=vt();e.removeEventListener("copy",M)})(),c&&c.disconnect(),d&&d.disconnect()};Eh((()=>{N(),chrome.runtime.onMessage.addListener(x),t({action:"dlCheckCommandShortcuts"}).then((e=>o(24,T=e?e.filter((e=>e.name==W))[0].shortcut:"")))})),Th((()=>{O()}));return e.$$set=e=>{"replaceData"in e&&o(14,h=e.replaceData),"contentProcessBuildingBlocks"in e&&o(13,f=e.contentProcessBuildingBlocks),"deeplWriteTrackingData"in e&&o(15,_=e.deeplWriteTrackingData)},e.$$.update=()=>{if(1&e.$$.dirty[0]&&o(6,r=i&&i.isGDocsEnabled),8388608&e.$$.dirty[0]&&(async e=>{const t=await Ut(e);b=t,o(3,E=Ft(b)&&!rt(i,be.WRITE))})(w),16777216&e.$$.dirty[0]){let e=chrome.i18n.getMessage("ui_gdocs_translate_tooltip_2");o(4,g=T?`${e} (${T})`:e)}},[i,v,y,E,g,S,r,C,k,I,()=>{df.set({isGDocsEnabled:!1}),t({action:"dlTrackCustomizationEnabledEvent",payload:{nicheIntegration:re.gdocs,uiLocation:B.inlineTranslationTriggerIcon,customizationEnabled:!1}})},e=>{m=e.repositionTopToolbarIcon},()=>{m=void 0},f,h,_,e=>{o(13,f=e)},()=>f,()=>{h&&Rt(h)},$,()=>{tB({eventType:Se,..._})},()=>{tB({eventType:xe,..._})},e=>{switch(e){case Oe:tB({eventType:$e,..._});break;case De:t({action:"dlTrackGDocsMaxCharExceededTryProClicked",payload:{sourceLang:_.lang,targetLang:_.lang,sourceLength:_.sourceLength}})}},w,T,()=>I(B.inlineTranslationTriggerIcon),()=>k(),()=>I(B.deeplWriteIcon),()=>I(B.inlineTranslationSettingsIcon)]}class VA extends af{constructor(e){super(),sf(this,e,qA,GA,$g,{replaceData:14,contentProcessBuildingBlocks:13,deeplWriteTrackingData:15,setContentProcessBuildingBlocks:16,getContentProcessBuildingBlocks:17,applyReplacement:18,requestTranslation:19,trackDeeplWriteInsertCopy:20,trackDeeplWriteDiscardCopy:21,trackMaxCharExceeded:22},null,[-1,-1,-1])}get setContentProcessBuildingBlocks(){return this.$$.ctx[16]}get getContentProcessBuildingBlocks(){return this.$$.ctx[17]}get applyReplacement(){return this.$$.ctx[18]}get requestTranslation(){return this.$$.ctx[19]}get trackDeeplWriteInsertCopy(){return this.$$.ctx[20]}get trackDeeplWriteDiscardCopy(){return this.$$.ctx[21]}get trackMaxCharExceeded(){return this.$$.ctx[22]}}class YA{static HTML_TAG_NAME="deepl-gdocs-icon";static createElement=(e=document)=>{const t=e.createElement(YA.HTML_TAG_NAME),n=new YA(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.setReplaceData=n.setReplaceData,t.applyReplacement=n.applyReplacement,t.requestNewTranslation=n.requestNewTranslation,t.setDeeplWriteTrackingData=n.setDeeplWriteTrackingData,t.trackDeeplWriteInsertCopy=n.trackDeeplWriteInsertCopy,t.trackDeeplWriteDiscardCopy=n.trackDeeplWriteDiscardCopy,t.trackMaxCharExceeded=n.trackMaxCharExceeded,t.setContentProcessBuildingBlocks=n.setContentProcessBuildingBlocks,t.getContentProcessBuildingBlocks=n.getContentProcessBuildingBlocks,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=()=>{this.domElement.mainComponent=new VA({target:this.domElement.shadowContainer,props:{onClose:this.domElement.cleanupDOM}})};setReplaceData=e=>{this.domElement.mainComponent.$$set({replaceData:e})};setDeeplWriteTrackingData=e=>{this.domElement.mainComponent.$$set({deeplWriteTrackingData:e})};trackDeeplWriteInsertCopy=()=>this.domElement.mainComponent.trackDeeplWriteInsertCopy();trackDeeplWriteDiscardCopy=()=>this.domElement.mainComponent.trackDeeplWriteDiscardCopy();trackMaxCharExceeded=e=>this.domElement.mainComponent.trackMaxCharExceeded(e);applyReplacement=()=>{this.domElement.mainComponent.applyReplacement()};requestNewTranslation=e=>{this.domElement.mainComponent.requestTranslation(e)};setContentProcessBuildingBlocks=e=>this.domElement.mainComponent.setContentProcessBuildingBlocks(e);getContentProcessBuildingBlocks=()=>this.domElement.mainComponent.getContentProcessBuildingBlocks();cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function KA(e){let t,n;return t=new qx({props:{size:16,marginStart:8,alternateColor:"white"}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function ZA(e){let t,n;return t=new qx({props:{size:16,marginStart:8,alternateColor:"white"}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function XA(e){let t,n,o,r,i,s,a,l=chrome.i18n.getMessage("ui_gslides_write_cta")+"",c=nt(e[4],be.TRANSLATOR),d=c&&ZA();return{c(){t=Zg("button"),n=Qg(l),o=Jg(),d&&d.c(),rh(t,"class","action-button svelte-c2z0h2"),t.disabled=r=!Ft(e[3])||rt(e[4],be.WRITE)},m(r,l){Vg(r,t,l),jg(t,n),jg(t,o),d&&d.m(t,null),i=!0,s||(a=th(t,"click",(function(){xg(e[1])&&e[1].apply(this,arguments)})),s=!0)},p(n,o){e=n,16&o&&(c=nt(e[4],be.TRANSLATOR)),c?d?16&o&&Yh(d,1):(d=ZA(),d.c(),Yh(d,1),d.m(t,null)):d&&(qh(),Kh(d,1,1,(()=>{d=null})),Vh()),(!i||24&o&&r!==(r=!Ft(e[3])||rt(e[4],be.WRITE)))&&(t.disabled=r)},i(e){i||(Yh(d),i=!0)},o(e){Kh(d),i=!1},d(e){e&&Yg(t),d&&d.d(),s=!1,a()}}}function QA(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w,b,E=chrome.i18n.getMessage("ui_gslides_translate_cta")+"",T=nt(e[4],be.TRANSLATOR);s=new mb({props:{disabled:e[2],websiteSettings:e[6],value:e[3],showSortCode:!1,showRegionalVariants:!1,extraPadding:!0}}),s.$on("selection",e[10]),u=new mb({props:{disabled:e[2],websiteSettings:e[6],value:e[4].selectedTargetLanguage,extraPadding:!0}}),u.$on("selection",e[11]);let S=T&&KA();return v=new T_({props:{tooltip:rt(e[4],be.WRITE)?chrome.i18n.getMessage("input_translation_tooltip_improve_disabled_by_admin"):chrome.i18n.getMessage("input_translation_tooltip_improve_supported_lang"),zIndex:"10000000000",multiline:!0,$$slots:{default:[XA]},$$scope:{ctx:e}}}),{c(){t=Zg("div"),n=Zg("div"),o=Zg("p"),o.textContent=`${chrome.i18n.getMessage("ui_gslides_translate_from")}`,r=Jg(),i=Zg("div"),nf(s.$$.fragment),a=Jg(),l=Zg("p"),l.textContent=`${chrome.i18n.getMessage("ui_gslides_translate_into")}`,c=Jg(),d=Zg("div"),nf(u.$$.fragment),p=Jg(),m=Zg("button"),g=Qg(E),h=Jg(),S&&S.c(),f=Jg(),_=Zg("div"),nf(v.$$.fragment),rh(o,"class","svelte-c2z0h2"),rh(i,"class","dropdown svelte-c2z0h2"),rh(l,"class","svelte-c2z0h2"),rh(d,"class","dropdown svelte-c2z0h2"),rh(m,"class","action-button svelte-c2z0h2"),rh(n,"class","translate-container svelte-c2z0h2"),rh(_,"class","write-container svelte-c2z0h2"),rh(t,"class","dl-gslides-toolbar svelte-c2z0h2")},m(E,T){Vg(E,t,T),jg(t,n),jg(n,o),jg(n,r),jg(n,i),of(s,i,null),jg(n,a),jg(n,l),jg(n,c),jg(n,d),of(u,d,null),jg(n,p),jg(n,m),jg(m,g),jg(m,h),S&&S.m(m,null),jg(t,f),jg(t,_),of(v,_,null),y=!0,w||(b=th(m,"click",(function(){xg(e[0])&&e[0].apply(this,arguments)})),w=!0)},p(t,[n]){e=t;const o={};4&n&&(o.disabled=e[2]),8&n&&(o.value=e[3]),s.$set(o);const r={};4&n&&(r.disabled=e[2]),16&n&&(r.value=e[4].selectedTargetLanguage),u.$set(r),16&n&&(T=nt(e[4],be.TRANSLATOR)),T?S?16&n&&Yh(S,1):(S=KA(),S.c(),Yh(S,1),S.m(m,null)):S&&(qh(),Kh(S,1,1,(()=>{S=null})),Vh());const i={};16&n&&(i.tooltip=rt(e[4],be.WRITE)?chrome.i18n.getMessage("input_translation_tooltip_improve_disabled_by_admin"):chrome.i18n.getMessage("input_translation_tooltip_improve_supported_lang")),4122&n&&(i.$$scope={dirty:n,ctx:e}),v.$set(i)},i(e){y||(Yh(s.$$.fragment,e),Yh(u.$$.fragment,e),Yh(S),Yh(v.$$.fragment,e),y=!0)},o(e){Kh(s.$$.fragment,e),Kh(u.$$.fragment,e),Kh(S),Kh(v.$$.fragment,e),y=!1},d(e){e&&Yg(t),rf(s),rf(u),S&&S.d(),rf(v),w=!1,b()}}}function JA(e,t,n){let o;const r=$h("deepl_settings");kg(e,r,(e=>n(4,o=e)));const i=$h("deepl_website_settings");let{onTranslateSelection:s}=t,{onImproveSelection:a}=t,{isLoading:l}=t,{sourceLang:c}=t,{manualSourceLang:d}=t;const u=e=>{n(9,d=e)},p=e=>{Og(r,o.selectedTargetLanguage=e,o)};return e.$$set=e=>{"onTranslateSelection"in e&&n(0,s=e.onTranslateSelection),"onImproveSelection"in e&&n(1,a=e.onImproveSelection),"isLoading"in e&&n(2,l=e.isLoading),"sourceLang"in e&&n(3,c=e.sourceLang),"manualSourceLang"in e&&n(9,d=e.manualSourceLang)},[s,a,l,c,o,r,i,u,p,d,e=>{u(e.detail.selectedOption.value)},e=>{p(e.detail.selectedOption.value)}]}class eR extends af{constructor(e){super(),sf(this,e,JA,QA,$g,{onTranslateSelection:0,onImproveSelection:1,isLoading:2,sourceLang:3,manualSourceLang:9})}}function tR(e){let t,n,o,r,i,s,a;function l(t){e[12](t)}let c={onTranslateSelection:e[7],onImproveSelection:e[8],isLoading:e[4],sourceLang:e[1]};return void 0!==e[0]&&(c.manualSourceLang=e[0]),n=new eR({props:c}),Lh.push((()=>tf(n,"manualSourceLang",l))),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","dl-gslides-toolbar svelte-1esuwx"),rh(t,"dir",jt())},m(o,r){Vg(o,t,r),of(n,t,null),i=!0,s||(a=[Dg(__.call(null,t,{isShadow:!0})),th(t,"click_outside",e[13])],s=!0)},p(e,t){const r={};16&t&&(r.isLoading=e[4]),2&t&&(r.sourceLang=e[1]),!o&&1&t&&(o=!0,r.manualSourceLang=e[0],Dh((()=>o=!1))),n.$set(r)},i(e){i||(Yh(n.$$.fragment,e),Oh((()=>{i&&(r||(r=Jh(t,zf,{},!0)),r.run(1))})),i=!0)},o(e){Kh(n.$$.fragment,e),r||(r=Jh(t,zf,{},!1)),r.run(0),i=!1},d(e){e&&Yg(t),rf(n),e&&r&&r.end(),s=!1,Sg(a)}}}function nR(e){let t,n;return t=new AT({props:{small:!0}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function oR(e){let t,n,o,r,i,s,a,l,c=e[3]&&tR(e),d=e[4]&&nR();return{c(){t=Zg("div"),c&&c.c(),n=Jg(),o=Zg("button"),d&&d.c(),rh(o,"class","dl-gslides-button svelte-1esuwx"),rh(o,"title","Translate with DeepL"),uh(o,"is-loading",e[4]),rh(t,"class","dl-gslides-icon svelte-1esuwx"),rh(t,"style",i="bottom: "+e[2].bottom+"px; "+e[2].horizonalAlignment+": "+e[2].horizonalOffset+"px;")},m(r,i){Vg(r,t,i),c&&c.m(t,null),jg(t,n),jg(t,o),d&&d.m(o,null),s=!0,a||(l=th(o,"click",e[6]),a=!0)},p(e,[r]){e[3]?c?(c.p(e,r),8&r&&Yh(c,1)):(c=tR(e),c.c(),Yh(c,1),c.m(t,n)):c&&(qh(),Kh(c,1,1,(()=>{c=null})),Vh()),e[4]?d?16&r&&Yh(d,1):(d=nR(),d.c(),Yh(d,1),d.m(o,null)):d&&(qh(),Kh(d,1,1,(()=>{d=null})),Vh()),(!s||16&r)&&uh(o,"is-loading",e[4]),(!s||4&r&&i!==(i="bottom: "+e[2].bottom+"px; "+e[2].horizonalAlignment+": "+e[2].horizonalOffset+"px;"))&&rh(t,"style",i)},i(e){s||(Yh(c),Yh(d),Oh((()=>{s&&(r||(r=Jh(o,zf,{},!0)),r.run(1))})),s=!0)},o(e){Kh(c),Kh(d),r||(r=Jh(o,zf,{},!1)),r.run(0),s=!1},d(e){e&&Yg(t),c&&c.d(),d&&d.d(),e&&r&&r.end(),a=!1,l()}}}const rR=16,iR="application/x-vnd.google-docs-drawings-object+wrapped",sR="application/x-vnd.google-docs-document-slice-clip+wrapped";function aR(e,t,o){let r;const i=$h("deepl_settings");kg(e,i,(e=>o(15,r=e)));let s,{registerActionIconCallbacks:a}=t,{clearActionIconCallbacks:l}=t,{sourceLang:c}=t,{manualSourceLang:d}=t,{charLimitError:u}=t,p={bottom:0,right:0},m=!1,g=!1,h=[];const f=()=>{const e=document.querySelector("#canvas-container"),t=jt(),n="ltr"===t?"right":"left";if(e){const r=e.getBoundingClientRect();let i=rR;i="ltr"===t?r.right>window.innerWidth?0:window.innerWidth-r.right:r.left<0?0:r.left;const s=r.bottom>window.innerHeight?16:window.innerHeight-r.bottom;o(2,p={bottom:s+rR,horizonalOffset:i+rR,horizonalAlignment:n})}else o(2,p={bottom:rR,horizonalOffset:rR,horizonalAlignment:n})},_=async(e,t)=>{try{let i=e.clipboardData.getData(iR),a=e.clipboardData.getData(sR);if(i){if((e=>{let t=e.getData("application/x-vnd.google-docs-image-clip+wrapped");if(!t)return!1;const n=JSON.parse(t),o=JSON.parse(n.data).image_urls,r=Object.keys(o);let i=!1;for(const e of r)if(e.includes("PLACEHOLDER_")&&!h.includes(e)){h.push(e),i=!0;break}return i})(e.clipboardData))return void n(P.glidesPreventAssetLoss,{theme:U.warning_theme});o(4,g=!0);const s=await(async(e,t)=>{const n=JSON.parse(e),o=JSON.parse(n.data),i=o.unresolved,{entities:s,sentencesToTranslate:a}=Zt(i),l=await WU({targetLang:r.selectedTargetLanguage,sourceLang:c,sentences:a,mode:t}),d=[];for(let e=0;e<s.length;e++)Xt({entity:s[e],translatedSentences:l,modifiersToDelete:d});return o.unresolved=o.unresolved.filter((e=>!d.includes(e))),n.data=JSON.stringify(o),JSON.stringify(n)})(i,t);g_("keydown",document.querySelector("svg > g > g[pointer-events=visiblePainted]")),v(s),o(4,g=!1)}else if(a){o(4,g=!0);const n=await(async(e,t)=>await zU({event:e,sourceLang:c,targetLang:r.selectedTargetLanguage,mode:t}))(e,t);g_("keydown",document.querySelector("svg > g > g[pointer-events=visiblePainted]")),y(n),o(4,g=!1)}else await Kt(),s=t,o(3,m=!1),yt()}catch(e){console.log("errororr slidews",e),e.name===kf?o(9,u=Ge.ANONYMOUS):e.name===Cf?o(9,u=Ge.FREE):e.name===If?o(9,u=If):e.name===Af&&o(9,u=Af),console.error(e),o(4,g=!1)}},v=e=>{const{editable:t}=vt();let n;if(pt())n=new ClipboardEvent("paste",{dataType:iR,data:e});else{const t=new DataTransfer;t.setData(iR,e),n=new ClipboardEvent("paste",{bubbles:!0,clipboardData:t})}t.dispatchEvent(n)},y=e=>{const{editable:t}=vt();let n;if(pt())n=new ClipboardEvent("paste",{dataType:sR,data:e});else{const t=new DataTransfer;t.setData(sR,e),n=new ClipboardEvent("paste",{bubbles:!0,clipboardData:t})}t.dispatchEvent(n)};Eh((()=>{setTimeout((()=>{const{editable:e}=vt();e.addEventListener("copy",(e=>{if(s){const t=s;s=void 0,_(e,t)}}))}),2e3),a({repositionActionIcon:f})})),Th((()=>{l()}));return e.$$set=e=>{"registerActionIconCallbacks"in e&&o(10,a=e.registerActionIconCallbacks),"clearActionIconCallbacks"in e&&o(11,l=e.clearActionIconCallbacks),"sourceLang"in e&&o(1,c=e.sourceLang),"manualSourceLang"in e&&o(0,d=e.manualSourceLang),"charLimitError"in e&&o(9,u=e.charLimitError)},[d,c,p,m,g,i,()=>{o(3,m=!m)},()=>{s=ae.translate,o(3,m=!1),yt()},()=>{s=ae.write,o(3,m=!1),yt()},u,a,l,function(e){d=e,o(0,d)},()=>{o(3,m=!1)}]}class lR extends af{constructor(e){super(),sf(this,e,aR,oR,$g,{registerActionIconCallbacks:10,clearActionIconCallbacks:11,sourceLang:1,manualSourceLang:0,charLimitError:9})}}function cR(e){let t,n,o,r,i,s,a,l,c,d,u=e[1]&&dR();return a=new NA({props:{checked:e[3].isGSlidesEnabled}}),a.$on("change",e[8]),{c(){t=Zg("div"),u&&u.c(),n=Jg(),o=Zg("div"),r=Zg("div"),r.textContent=`${chrome.i18n.getMessage("ui_gslides_toggle_customization")}`,i=Jg(),s=Zg("div"),nf(a.$$.fragment),rh(r,"class","legend"),rh(s,"class","switch svelte-19uh4k2"),rh(o,"class","turn-on-off-panel svelte-19uh4k2"),rh(t,"class","dl-gslides-top-icon-modal svelte-19uh4k2"),ah(t,"left",e[2]+"px"),rh(t,"dir",jt())},m(p,m){Vg(p,t,m),u&&u.m(t,null),jg(t,n),jg(t,o),jg(o,r),jg(o,i),jg(o,s),of(a,s,null),l=!0,c||(d=[Dg(__.call(null,t,{isShadow:!0})),th(t,"click_outside",e[9])],c=!0)},p(e,o){e[1]?u?u.p(e,o):(u=dR(),u.c(),u.m(t,n)):u&&(u.d(1),u=null);const r={};8&o&&(r.checked=e[3].isGSlidesEnabled),a.$set(r),(!l||4&o)&&ah(t,"left",e[2]+"px")},i(e){l||(Yh(a.$$.fragment,e),l=!0)},o(e){Kh(a.$$.fragment,e),l=!1},d(e){e&&Yg(t),u&&u.d(),rf(a),c=!1,Sg(d)}}}function dR(e){let t,n,o,r,i,s,a,l,c,d;return{c(){t=Zg("div"),n=Zg("div"),o=Zg("p"),o.textContent=`${chrome.i18n.getMessage("ui_gslides_onboarding_title")}`,r=Jg(),i=Zg("div"),i.textContent=`${chrome.i18n.getMessage("ui_gslides_onboarding_label_beta")}`,s=Jg(),a=Zg("div"),l=Zg("div"),l.textContent=`${chrome.i18n.getMessage("ui_gslides_onboarding_ups_1")}`,c=Jg(),d=Zg("div"),d.textContent=`${chrome.i18n.getMessage("ui_gslides_onboarding_ups_2")}`,rh(o,"class","svelte-19uh4k2"),rh(i,"class","beta-label svelte-19uh4k2"),rh(n,"class","header svelte-19uh4k2"),rh(l,"class","ups-item svelte-19uh4k2"),rh(d,"class","ups-item svelte-19uh4k2"),rh(a,"class","ups-list"),rh(t,"class","onboarding svelte-19uh4k2")},m(e,u){Vg(e,t,u),jg(t,n),jg(n,o),jg(n,r),jg(n,i),jg(t,s),jg(t,a),jg(a,l),jg(a,c),jg(a,d)},p:wg,d(e){e&&Yg(t)}}}function uR(e){let t,n,o,r,i,s,a=e[0]&&cR(e);return{c(){t=Zg("button"),n=Jg(),a&&a.c(),o=eh(),rh(t,"class","dl-gslides-top-icon svelte-19uh4k2"),ah(t,"left",e[2]+"px"),uh(t,"onboarding-pending",!e[3].isGSlidesOnboardingShown)},m(l,c){Vg(l,t,c),Vg(l,n,c),a&&a.m(l,c),Vg(l,o,c),r=!0,i||(s=th(t,"click",e[7]),i=!0)},p(e,[n]){(!r||4&n)&&ah(t,"left",e[2]+"px"),(!r||8&n)&&uh(t,"onboarding-pending",!e[3].isGSlidesOnboardingShown),e[0]?a?(a.p(e,n),1&n&&Yh(a,1)):(a=cR(e),a.c(),Yh(a,1),a.m(o.parentNode,o)):a&&(qh(),Kh(a,1,1,(()=>{a=null})),Vh())},i(e){r||(Yh(a),r=!0)},o(e){Kh(a),r=!1},d(e){e&&(Yg(t),Yg(n),Yg(o)),a&&a.d(e),i=!1,s()}}}function pR(e,n,o){let r;const i=$h("deepl_settings");kg(e,i,(e=>o(3,r=e)));let s,{registerTopIconCallbacks:a}=n,{clearTopIconCallbacks:l}=n,c=!1,d=!1;const u=()=>{const e=document.querySelector(".docs-titlebar-buttons #docs-presence-container"),t=null!=document.querySelector(".docs-titlebar-buttons-rtl");if(e){const n=e.getBoundingClientRect();o(2,s=t?o(2,s=n.left+40-32):n.left-40)}};Eh((()=>{u(),a({repositionTopIcon:u})})),Th((()=>{l()}));return e.$$set=e=>{"registerTopIconCallbacks"in e&&o(5,a=e.registerTopIconCallbacks),"clearTopIconCallbacks"in e&&o(6,l=e.clearTopIconCallbacks)},e.$$.update=()=>{3&e.$$.dirty&&c&&d&&t({action:"dlTrackOnboardingModalShown",payload:{nicheIntegration:re.gslides}})},[c,d,s,r,i,a,l,()=>{o(0,c=!0),r.isGSlidesOnboardingShown||(Og(i,r.isGSlidesOnboardingShown=!0,r),o(1,d=!0))},e=>Og(i,r.isGSlidesEnabled=e.detail.checked,r),()=>{o(1,d=!1),o(0,c=!1)}]}class mR extends af{constructor(e){super(),sf(this,e,pR,uR,$g,{registerTopIconCallbacks:5,clearTopIconCallbacks:6})}}function gR(e){let t,n,o,r,i;function s(e,t){return e[0]===Ge.FREE?_R:e[0]===Ge.ANONYMOUS?fR:void 0}let a=s(e),l=a&&a(e);return{c(){t=Zg("button"),n=Jg(),l&&l.c(),o=eh(),rh(t,"class","close-button svelte-8x6yh8")},m(s,a){Vg(s,t,a),Vg(s,n,a),l&&l.m(s,a),Vg(s,o,a),r||(i=th(t,"click",(function(){xg(e[1])&&e[1].apply(this,arguments)})),r=!0)},p(t,n){a===(a=s(e=t))&&l?l.p(e,n):(l&&l.d(1),l=a&&a(e),l&&(l.c(),l.m(o.parentNode,o)))},i:wg,o:wg,d(e){e&&(Yg(t),Yg(n),Yg(o)),l&&l.d(e),r=!1,i()}}}function hR(e){let t,n;return t=new Wy({props:{error:{error:e[0]},close:e[1],config:{nicheIntegration:re.gslides}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.error={error:e[0]}),2&n&&(o.close=e[1]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function fR(e){let t,n,o,r,i,s,a,l,c,d;return{c(){t=Zg("h2"),t.textContent=`${chrome.i18n.getMessage("ui_gslides_limit_reached_anonymous_title")}`,n=Jg(),o=Zg("p"),o.textContent=`${chrome.i18n.getMessage("ui_gslides_limit_reached_anonymous_content")}`,r=Jg(),i=Zg("div"),s=Zg("button"),s.textContent=`${chrome.i18n.getMessage("ui_gslides_limit_reached_anonymous_cta_login")}`,a=Jg(),l=Zg("button"),l.textContent=`${chrome.i18n.getMessage("ui_gslides_limit_reached_anonymous_cta_signup")}`,rh(t,"class","svelte-8x6yh8"),rh(o,"class","svelte-8x6yh8"),rh(s,"class","btn-secondary svelte-8x6yh8"),rh(l,"class","btn-primary svelte-8x6yh8"),rh(i,"class","buttons-row svelte-8x6yh8")},m(u,p){Vg(u,t,p),Vg(u,n,p),Vg(u,o,p),Vg(u,r,p),Vg(u,i,p),jg(i,s),jg(i,a),jg(i,l),c||(d=[th(s,"click",e[4]),th(l,"click",e[3])],c=!0)},p:wg,d(e){e&&(Yg(t),Yg(n),Yg(o),Yg(r),Yg(i)),c=!1,Sg(d)}}}function _R(e){let t,n,o,r,i,s,a,l;return{c(){t=Zg("h2"),t.textContent=`${chrome.i18n.getMessage("ui_gslides_limit_reached_logged_in_title")}`,n=Jg(),o=Zg("p"),o.textContent=`${chrome.i18n.getMessage("ui_gslides_limit_reached_logged_in_content")}`,r=Jg(),i=Zg("div"),s=Zg("button"),s.textContent=`${chrome.i18n.getMessage("ui_gslides_limit_reached_logged_in_cta")}`,rh(t,"class","svelte-8x6yh8"),rh(o,"class","svelte-8x6yh8"),rh(s,"class","btn-primary svelte-8x6yh8"),rh(i,"class","buttons-row svelte-8x6yh8")},m(c,d){Vg(c,t,d),Vg(c,n,d),Vg(c,o,d),Vg(c,r,d),Vg(c,i,d),jg(i,s),a||(l=th(s,"click",e[3]),a=!0)},p:wg,d(e){e&&(Yg(t),Yg(n),Yg(o),Yg(r),Yg(i)),a=!1,l()}}}function vR(e){let t,n,o,r,i,s,a;const l=[hR,gR],c=[];function d(e,t){return e[2]?0:1}return o=d(e),r=c[o]=l[o](e),{c(){t=Zg("div"),n=Zg("div"),r.c(),rh(n,"class","dl-char-limit-error-container svelte-8x6yh8"),uh(n,"is-translator-limit",!e[2]),rh(t,"class","dl-char-limit-error-overlay svelte-8x6yh8")},m(r,l){Vg(r,t,l),jg(t,n),c[o].m(n,null),i=!0,s||(a=[Dg(__.call(null,n,{isShadow:!0})),th(n,"click_outside",(function(){xg(e[1])&&e[1].apply(this,arguments)}))],s=!0)},p(t,[s]){let a=o;o=d(e=t),o===a?c[o].p(e,s):(qh(),Kh(c[a],1,1,(()=>{c[a]=null})),Vh(),r=c[o],r?r.p(e,s):(r=c[o]=l[o](e),r.c()),Yh(r,1),r.m(n,null)),(!i||4&s)&&uh(n,"is-translator-limit",!e[2])},i(e){i||(Yh(r),i=!0)},o(e){Kh(r),i=!1},d(e){e&&Yg(t),c[o].d(),s=!1,Sg(a)}}}function yR(e,n,o){let r,{charLimitError:i}=n,{closeModal:s}=n;let a=!1;return e.$$set=e=>{"charLimitError"in e&&o(0,i=e.charLimitError),"closeModal"in e&&o(1,s=e.closeModal)},e.$$.update=()=>{1&e.$$.dirty&&o(2,r=i===If||i===Af)},[i,s,r,()=>{t({action:"dlExternalURLRedirect",payload:{destination:fv,utmContent:"gslides_customization"}}),s()},()=>{a||(t({action:"dlTrackUILocationClicked",payload:B.gslidesCharLimitLogin}),a=!0,t({action:"dlRequestLogin"}).then((()=>{a=!1,s()})).catch((()=>{a=!1})))}]}class wR extends af{constructor(e){super(),sf(this,e,yR,vR,$g,{charLimitError:0,closeModal:1})}}function bR(e){let t,n;return t=new wR({props:{charLimitError:e[2],closeModal:e[10]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.charLimitError=e[2]),4&n&&(o.closeModal=e[10]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function ER(e){let t,n,o,r;function i(t){e[11](t)}function s(t){e[12](t)}let a={registerActionIconCallbacks:e[7],clearActionIconCallbacks:e[8],sourceLang:e[3]};return void 0!==e[0]&&(a.manualSourceLang=e[0]),void 0!==e[2]&&(a.charLimitError=e[2]),t=new lR({props:a}),Lh.push((()=>tf(t,"manualSourceLang",i))),Lh.push((()=>tf(t,"charLimitError",s))),{c(){nf(t.$$.fragment)},m(e,n){of(t,e,n),r=!0},p(e,r){const i={};8&r&&(i.sourceLang=e[3]),!n&&1&r&&(n=!0,i.manualSourceLang=e[0],Dh((()=>n=!1))),!o&&4&r&&(o=!0,i.charLimitError=e[2],Dh((()=>o=!1))),t.$set(i)},i(e){r||(Yh(t.$$.fragment,e),r=!0)},o(e){Kh(t.$$.fragment,e),r=!1},d(e){rf(t,e)}}}function TR(e){let t,n,o,r,i;t=new mR({props:{registerTopIconCallbacks:e[5],clearTopIconCallbacks:e[6]}});let s=e[2]&&bR(e),a=e[4].isGSlidesEnabled&&!e[1]&&ER(e);return{c(){nf(t.$$.fragment),n=Jg(),s&&s.c(),o=Jg(),a&&a.c(),r=eh()},m(e,l){of(t,e,l),Vg(e,n,l),s&&s.m(e,l),Vg(e,o,l),a&&a.m(e,l),Vg(e,r,l),i=!0},p(e,[t]){e[2]?s?(s.p(e,t),4&t&&Yh(s,1)):(s=bR(e),s.c(),Yh(s,1),s.m(o.parentNode,o)):s&&(qh(),Kh(s,1,1,(()=>{s=null})),Vh()),e[4].isGSlidesEnabled&&!e[1]?a?(a.p(e,t),18&t&&Yh(a,1)):(a=ER(e),a.c(),Yh(a,1),a.m(r.parentNode,r)):a&&(qh(),Kh(a,1,1,(()=>{a=null})),Vh())},i(e){i||(Yh(t.$$.fragment,e),Yh(s),Yh(a),i=!0)},o(e){Kh(t.$$.fragment,e),Kh(s),Kh(a),i=!1},d(e){e&&(Yg(n),Yg(o),Yg(r)),rf(t,e),s&&s.d(e),a&&a.d(e)}}}function SR(e,t,n){let o,r,i,s,a,l,c;kg(e,df,(e=>n(4,r=e))),xh("deepl_settings",df),xh("deepl_website_settings",Rw),xh("text_direction",jt());let d,u,p=!0;const m=async e=>{if("dlChangeActiveTabStatus"===e.action)e.payload.isActive?g():h();return!0},g=()=>{i&&clearInterval(i),i=setInterval(f,800)},h=()=>{clearInterval(i)},f=()=>{s&&s(),a&&a(),c||_()},_=async()=>{n(9,l=await Yt()||"EN-US")};Eh((()=>{g(),d=new MutationObserver((()=>{window.document.querySelector(".punch-full-screen-element")?n(1,p=!0):n(1,p=!1)})),d.observe(window.document.body,{attributes:!0,childList:!0,subtree:!0}),v_((()=>d.disconnect())),chrome.runtime.onMessage.addListener(m)})),Th((()=>{i&&h(),chrome.runtime.onMessage.removeListener(m),d.disconnect()}));return e.$$.update=()=>{513&e.$$.dirty&&n(3,o=c||l)},[c,p,u,o,r,e=>{s=e.repositionTopIcon},()=>{s=void 0},e=>{a=e.repositionActionIcon},()=>{a=void 0},l,()=>n(2,u=void 0),function(e){c=e,n(0,c)},function(e){u=e,n(2,u)}]}class xR extends af{constructor(e){super(),sf(this,e,SR,TR,$g,{})}}class $R{static HTML_TAG_NAME="deepl-gslides-controller";static createElement=(e=document)=>{const t=e.createElement($R.HTML_TAG_NAME),n=new $R(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=()=>{this.domElement.mainComponent=new xR({target:this.domElement.shadowContainer,props:{onClose:this.domElement.cleanupDOM}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function CR(e){let t,n,o;return{c(){t=Zg("p"),t.innerHTML='<strong class="svelte-xhv8yz">Help us improve DeepL for Arabic</strong>',n=Jg(),o=Zg("p"),o.textContent="Take 2 minutes to tell us what we can do better.",rh(t,"class","svelte-xhv8yz"),rh(o,"class","svelte-xhv8yz")},m(e,r){Vg(e,t,r),Vg(e,n,r),Vg(e,o,r)},p:wg,d(e){e&&(Yg(t),Yg(n),Yg(o))}}}function kR(e){let t;return{c(){t=Zg("p"),t.textContent=`${chrome.i18n.getMessage("segmentation_survey_copy")}`,rh(t,"class","svelte-xhv8yz")},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function LR(e){let t,n,o,r;return{c(){t=Zg("p"),n=Zg("strong"),n.textContent=`${chrome.i18n.getMessage("ui_gslides_feedback_title")}`,o=Jg(),r=Zg("p"),r.textContent=`${chrome.i18n.getMessage("ui_gslides_feedback_content")}`,rh(n,"class","svelte-xhv8yz"),rh(t,"class","svelte-xhv8yz"),rh(r,"class","svelte-xhv8yz")},m(e,i){Vg(e,t,i),jg(t,n),Vg(e,o,i),Vg(e,r,i)},p:wg,d(e){e&&(Yg(t),Yg(o),Yg(r))}}}function IR(e){let t,n,o,r;return{c(){t=Zg("p"),n=Zg("strong"),n.textContent=`${chrome.i18n.getMessage("ui_toaster_gmail_feedback_title")}`,o=Jg(),r=Zg("p"),r.textContent=`${chrome.i18n.getMessage("ui_toaster_gmail_feedback_content")}`,rh(n,"class","svelte-xhv8yz"),rh(t,"class","svelte-xhv8yz"),rh(r,"class","svelte-xhv8yz")},m(e,i){Vg(e,t,i),jg(t,n),Vg(e,o,i),Vg(e,r,i)},p:wg,d(e){e&&(Yg(t),Yg(o),Yg(r))}}}function AR(e){let t,n,o,r;return{c(){t=Zg("p"),n=Zg("strong"),n.textContent=`${chrome.i18n.getMessage("ui_toaster_feedback_form_line_1")}`,o=Jg(),r=Zg("p"),r.textContent=`${chrome.i18n.getMessage("ui_toaster_feedback_form_line_2")}`,rh(n,"class","svelte-xhv8yz"),rh(t,"class","svelte-xhv8yz"),rh(r,"class","svelte-xhv8yz")},m(e,i){Vg(e,t,i),jg(t,n),Vg(e,o,i),Vg(e,r,i)},p:wg,d(e){e&&(Yg(t),Yg(o),Yg(r))}}}function RR(e){let t,n,o,r;return{c(){t=Zg("p"),n=Zg("strong"),n.textContent=`${chrome.i18n.getMessage("ui_toaster_write_a_review_line_1")}`,o=Jg(),r=Zg("p"),r.textContent=`${e[3].writeAReview.lineTwo}`,rh(n,"class","svelte-xhv8yz"),rh(t,"class","svelte-xhv8yz"),rh(r,"class","svelte-xhv8yz")},m(e,i){Vg(e,t,i),jg(t,n),Vg(e,o,i),Vg(e,r,i)},p:wg,d(e){e&&(Yg(t),Yg(o),Yg(r))}}}function MR(e){let t,n,o,r;return{c(){t=Zg("p"),t.textContent=`${e[3].howWasYourExperience.lineOne}`,n=Jg(),o=Zg("p"),r=Zg("strong"),r.textContent=`${e[3].howWasYourExperience.lineTwo}`,rh(t,"class","svelte-xhv8yz"),rh(r,"class","svelte-xhv8yz"),rh(o,"class","svelte-xhv8yz")},m(e,i){Vg(e,t,i),Vg(e,n,i),Vg(e,o,i),jg(o,r)},p:wg,d(e){e&&(Yg(t),Yg(n),Yg(o))}}}function NR(e){let t,n,o;return{c(){t=Zg("button"),t.innerHTML="<span>Start survey</span>",rh(t,"class","svelte-xhv8yz")},m(r,i){Vg(r,t,i),n||(o=th(t,"click",e[10]),n=!0)},p:wg,d(e){e&&Yg(t),n=!1,o()}}}function OR(e){let t,n,o,r;return{c(){t=Zg("button"),n=Zg("span"),n.textContent=`${chrome.i18n.getMessage("segmentation_survey_button")}`,rh(t,"class","svelte-xhv8yz")},m(i,s){Vg(i,t,s),jg(t,n),o||(r=th(t,"click",e[9]),o=!0)},p:wg,d(e){e&&Yg(t),o=!1,r()}}}function DR(e){let t,n,o,r;return{c(){t=Zg("button"),n=Zg("span"),n.textContent=`${chrome.i18n.getMessage("ui_gslides_feedback_cta")}`,rh(t,"class","svelte-xhv8yz")},m(i,s){Vg(i,t,s),jg(t,n),o||(r=th(t,"click",e[8]),o=!0)},p:wg,d(e){e&&Yg(t),o=!1,r()}}}function PR(e){let t,n,o,r;return{c(){t=Zg("button"),n=Zg("span"),n.textContent=`${chrome.i18n.getMessage("ui_toaster_gmail_feedback_button")}`,rh(t,"class","svelte-xhv8yz")},m(i,s){Vg(i,t,s),jg(t,n),o||(r=th(t,"click",e[7]),o=!0)},p:wg,d(e){e&&Yg(t),o=!1,r()}}}function UR(e){let t,n,o,r;return{c(){t=Zg("button"),n=Zg("span"),n.textContent=`${chrome.i18n.getMessage("ui_toaster_write_a_review_cta")}`,rh(t,"class","svelte-xhv8yz")},m(i,s){Vg(i,t,s),jg(t,n),o||(r=th(t,"click",e[6]),o=!0)},p:wg,d(e){e&&Yg(t),o=!1,r()}}}function BR(e){let t,n,o,r,i,s,a,l,c,d,u;return{c(){t=Zg("button"),n=Zg("i"),o=Jg(),r=Zg("span"),r.textContent=`${chrome.i18n.getMessage("ui_toaster_how_was_your_experience_bad")}`,i=Jg(),s=Zg("button"),a=Zg("i"),l=Jg(),c=Zg("span"),c.textContent=`${chrome.i18n.getMessage("ui_toaster_how_was_your_experience_good")}`,rh(n,"class","icon-bad svelte-xhv8yz"),rh(t,"class","svelte-xhv8yz"),rh(a,"class","icon-good svelte-xhv8yz"),rh(s,"class","svelte-xhv8yz")},m(p,m){Vg(p,t,m),jg(t,n),jg(t,o),jg(t,r),Vg(p,i,m),Vg(p,s,m),jg(s,a),jg(s,l),jg(s,c),d||(u=[th(t,"click",e[4]),th(s,"click",e[5])],d=!0)},p:wg,d(e){e&&(Yg(t),Yg(i),Yg(s)),d=!1,Sg(u)}}}function WR(e){let t,n,o,r,i,s,a,l,c,d,u,p,m;function g(e,t){return e[0]===ne.initial?MR:e[0]===ne.review?RR:e[0]===ne.feedback?AR:e[0]===ne.gmail?IR:e[0]===ne.gslides?LR:e[0]===ne.customer_segmentation?kR:e[0]===ne.arabic_survey?CR:void 0}let h=g(e),f=h&&h(e),_=e[2]&&function(e){let t;function n(e,t){return e[0]===ne.initial?BR:e[0]===ne.review?UR:e[0]===ne.gmail?PR:e[0]===ne.gslides?DR:e[0]===ne.customer_segmentation?OR:e[0]===ne.arabic_survey?NR:void 0}let o=n(e),r=o&&o(e);return{c(){t=Zg("div"),r&&r.c(),rh(t,"class","buttons svelte-xhv8yz")},m(e,n){Vg(e,t,n),r&&r.m(t,null)},p(e,i){o===(o=n(e))&&r?r.p(e,i):(r&&r.d(1),r=o&&o(e),r&&(r.c(),r.m(t,null)))},d(e){e&&Yg(t),r&&r.d()}}}(e);return{c(){t=Zg("div"),n=Zg("div"),o=Zg("div"),r=Jg(),i=Zg("div"),s=Zg("button"),a=Jg(),f&&f.c(),l=Jg(),_&&_.c(),rh(o,"class","logo svelte-xhv8yz"),rh(s,"class","close-icon svelte-xhv8yz"),uh(s,"rtl",!e[11]&&"rtl"===jt()),rh(i,"class","content svelte-xhv8yz"),rh(n,"class","body svelte-xhv8yz"),rh(t,"class","container svelte-xhv8yz"),rh(t,"dir",e[11]?"ltr":jt())},m(c,d){Vg(c,t,d),jg(t,n),jg(n,o),jg(n,r),jg(n,i),jg(i,s),jg(i,a),f&&f.m(i,null),jg(t,l),_&&_.m(t,null),u=!0,p||(m=th(s,"click",(function(){xg(e[1])&&e[1].apply(this,arguments)})),p=!0)},p(t,[n]){h===(h=g(e=t))&&f?f.p(e,n):(f&&f.d(1),f=h&&h(e),f&&(f.c(),f.m(i,null))),e[2]&&_.p(e,n)},i(e){u||(Oh((()=>{u&&(d&&d.end(1),c=Xh(t,Ff,{x:100,duration:1e3}),c.start())})),u=!0)},o(e){c&&c.invalidate(),d=Qh(t,Ff,{x:100,duration:1e3}),u=!1},d(e){e&&Yg(t),f&&f.d(),_&&_.d(),e&&d&&d.end(),p=!1,m()}}}function zR(e,n,o){let r;kg(e,df,(e=>o(12,r=e))),xh("deepl_settings",df),xh("deepl_website_settings",Rw),xh("text_direction",jt());let{onClose:i}=n,{reviewStage:s=ne.initial}=n;const a=[ne.initial,ne.review,ne.gmail,ne.gslides,ne.customer_segmentation,ne.arabic_survey].includes(s);let l=(()=>{let e;if(pt())e={howWasYourExperience:{lineOne:"ui_toaster_how_was_your_experience_line_1_firefox",lineTwo:"ui_toaster_how_was_your_experience_line_2_firefox"},writeAReview:{lineTwo:"ui_toaster_write_a_review_line_2_firefox"}};else{if(ut().browser===at.edge)e={howWasYourExperience:{lineOne:"ui_toaster_how_was_your_experience_line_1_edge",lineTwo:"ui_toaster_how_was_your_experience_line_2_edge"},writeAReview:{lineTwo:"ui_toaster_write_a_review_line_2_edge"}};else e={howWasYourExperience:{lineOne:"ui_toaster_how_was_your_experience_line_1",lineTwo:"ui_toaster_how_was_your_experience_line_2"},writeAReview:{lineTwo:"ui_toaster_write_a_review_line_2"}}}return{howWasYourExperience:{lineOne:chrome.i18n.getMessage(e.howWasYourExperience.lineOne),lineTwo:chrome.i18n.getMessage(e.howWasYourExperience.lineTwo)},writeAReview:{lineTwo:chrome.i18n.getMessage(e.writeAReview.lineTwo)}}})();const c=s==ne.arabic_survey;return e.$$set=e=>{"onClose"in e&&o(1,i=e.onClose),"reviewStage"in e&&o(0,s=e.reviewStage)},[s,i,a,l,function(){df.set({shouldDisplayFeedbackPopup:!0}),t({action:"dlExternalURLRedirect",payload:{destination:pt()?kv:gv}}),i()},function(){o(0,s=ne.review)},function(){let e=Ev;if(chrome.runtime.id===Q.edge)e=Tv;else if(pt())e=$v;else{if(ut().browser===at.edge)e=Tv;else e=Ev}t({action:"dlExternalURLRedirect",payload:{destination:e}}),i()},function(){t({action:"dlTrackUILocationClicked",payload:B.gmailFeedbackSurvey}),t({action:"dlExternalURLRedirect",payload:{destination:Sv}}),i()},function(){t({action:"dlTrackUILocationClicked",payload:B.gslidesFeedbackSurvey}),t({action:"dlExternalURLRedirect",payload:{destination:xv}}),i()},function(){(e=>!(!nt(e,be.TRANSLATOR)&&!nt(e,be.WRITE)))(r)?t({action:"dlExternalURLRedirect",payload:{destination:Iv}}):t({action:"dlExternalURLRedirect",payload:{destination:Lv}}),i()},function(){t({action:"dlExternalURLRedirect",payload:{destination:Av}})},c]}class FR extends af{constructor(e){super(),sf(this,e,zR,WR,$g,{onClose:1,reviewStage:0})}}class HR{static HTML_TAG_NAME="deepl-ask-for-review-popup";static createElement=(e=document)=>{const t=e.createElement(HR.HTML_TAG_NAME),n=new HR(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=({reviewStage:e})=>{const t="rtl"===jt()?"left":"right";this.domElement.shadowContainer.style.cssText=`position: fixed; bottom: 32px; ${t}: 32px; z-index: ${D.deepl_inline_ui.z_index}`,this.domElement.mainComponent=new FR({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM,reviewStage:e}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}async function jR(){if(un()===dn.test&&window.location.href.includes("ita-playground"))return!0;const{enableItaDev:e}=await Ix(["enableItaDev"]),n=await t({action:"dlGetClientState"});return pn()&&e||(n?.featureSet?.customizations?.includes("itaTranslateEnabled")??!1)}async function GR(){const{enableItaWriteDev:e}=await Ix(["enableItaWriteDev"]);return e}function qR(e){let t,n,o,r,i,s,a,l,c,d,u,p=e[2]&&VR(),m=e[6]&&YR(e);return{c(){t=Zg("div"),n=Zg("button"),o=Zg("div"),r=Jg(),i=Zg("span"),i.textContent=`${chrome.i18n.getMessage("layout_tab_translator")}`,s=Jg(),p&&p.c(),l=Jg(),m&&m.c(),rh(o,"class","translate-icon svelte-1f5g1yc"),rh(n,"class",a=Ng("tab "+(e[1]===ae.translate?"active":""))+" svelte-1f5g1yc"),rh(t,"class","tabs-container svelte-1f5g1yc")},m(a,g){Vg(a,t,g),jg(t,n),jg(n,o),jg(n,r),jg(n,i),jg(n,s),p&&p.m(n,null),jg(t,l),m&&m.m(t,null),c=!0,d||(u=th(n,"click",e[10]),d=!0)},p(e,o){e[2]?p?4&o&&Yh(p,1):(p=VR(),p.c(),Yh(p,1),p.m(n,null)):p&&(qh(),Kh(p,1,1,(()=>{p=null})),Vh()),(!c||2&o&&a!==(a=Ng("tab "+(e[1]===ae.translate?"active":""))+" svelte-1f5g1yc"))&&rh(n,"class",a),e[6]?m?(m.p(e,o),64&o&&Yh(m,1)):(m=YR(e),m.c(),Yh(m,1),m.m(t,null)):m&&(qh(),Kh(m,1,1,(()=>{m=null})),Vh())},i(e){c||(Yh(p),Yh(m),c=!0)},o(e){Kh(p),Kh(m),c=!1},d(e){e&&Yg(t),p&&p.d(),m&&m.d(),d=!1,u()}}}function VR(e){let t,n;return t=new qx({props:{size:24,translator:!0}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function YR(e){let t,n,o,r,i,s,a,l,c,d=e[3]&&KR();return{c(){t=Zg("button"),n=Zg("div"),o=Jg(),r=Zg("span"),r.textContent=`${chrome.i18n.getMessage("layout_tab_write")}`,i=Jg(),d&&d.c(),rh(n,"class","write-icon svelte-1f5g1yc"),rh(t,"class",s=Ng("tab "+(e[1]===ae.write?"active":""))+" svelte-1f5g1yc")},m(s,u){Vg(s,t,u),jg(t,n),jg(t,o),jg(t,r),jg(t,i),d&&d.m(t,null),a=!0,l||(c=th(t,"click",e[11]),l=!0)},p(e,n){e[3]?d?8&n&&Yh(d,1):(d=KR(),d.c(),Yh(d,1),d.m(t,null)):d&&(qh(),Kh(d,1,1,(()=>{d=null})),Vh()),(!a||2&n&&s!==(s=Ng("tab "+(e[1]===ae.write?"active":""))+" svelte-1f5g1yc"))&&rh(t,"class",s)},i(e){a||(Yh(d),a=!0)},o(e){Kh(d),a=!1},d(e){e&&Yg(t),d&&d.d(),l=!1,c()}}}function KR(e){let t,n;return t=new qx({props:{size:24,write:!0}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function ZR(e){let t,n,o,r,i,s,a,l,c,d,u,p=e[5]&&qR(e);return{c(){t=Zg("div"),n=Zg("button"),o=Jg(),p&&p.c(),r=Jg(),i=Zg("div"),s=Zg("button"),a=Jg(),l=Zg("button"),rh(n,"class","dl-logo svelte-1f5g1yc"),rh(n,"aria-label",chrome.i18n.getMessage("deepl_logo")),rh(s,"class","dl-settings-icon svelte-1f5g1yc"),rh(l,"class","dl-close-icon svelte-1f5g1yc"),rh(i,"class","dl-actions svelte-1f5g1yc"),rh(t,"class","dl-review-header svelte-1f5g1yc")},m(m,g){Vg(m,t,g),jg(t,n),jg(t,o),p&&p.m(t,null),jg(t,r),jg(t,i),jg(i,s),jg(i,a),jg(i,l),c=!0,d||(u=[th(n,"click",e[7]),th(s,"click",e[8]),th(l,"click",(function(){xg(e[0])&&e[0].apply(this,arguments)}))],d=!0)},p(n,[o]){(e=n)[5]?p?(p.p(e,o),32&o&&Yh(p,1)):(p=qR(e),p.c(),Yh(p,1),p.m(t,r)):p&&(qh(),Kh(p,1,1,(()=>{p=null})),Vh())},i(e){c||(Yh(p),c=!0)},o(e){Kh(p),c=!1},d(e){e&&Yg(t),p&&p.d(),d=!1,Sg(u)}}}function XR(e,n,o){let{closeWindow:r}=n,{extensionContext:i=0}=n,{textProcessingMode:s=ae.translate}=n,{showProTranslateStatus:a=!0}=n,{showProWriteStatus:l=!0}=n,{onChangeTextProcessingMode:c=(()=>{})}=n,{enableTranslateWriteTabs:d=!0}=n,u=!1;Eh((async()=>{o(6,u=await GR())}));return e.$$set=e=>{"closeWindow"in e&&o(0,r=e.closeWindow),"extensionContext"in e&&o(9,i=e.extensionContext),"textProcessingMode"in e&&o(1,s=e.textProcessingMode),"showProTranslateStatus"in e&&o(2,a=e.showProTranslateStatus),"showProWriteStatus"in e&&o(3,l=e.showProWriteStatus),"onChangeTextProcessingMode"in e&&o(4,c=e.onChangeTextProcessingMode),"enableTranslateWriteTabs"in e&&o(5,d=e.enableTranslateWriteTabs)},e.$$.update=()=>{2&e.$$.dirty&&Rw.update({textProcessingMode:s})},[r,s,a,l,c,d,u,function(){t({action:"dlTrackLogoClickedEvent",payload:{extensionContext:i}}),t({action:"dlExternalURLRedirect",payload:{destination:s===ae.write?wv:yv,utmContent:"review_window_logo"}})},function(){t({action:"dlOpenInternalPage",payload:{destination:s===ae.write?RT.settings_writing:RT.settings_reading}})},i,()=>c(ae.translate),()=>c(ae.write)]}class QR extends af{constructor(e){super(),sf(this,e,XR,ZR,$g,{closeWindow:0,extensionContext:9,textProcessingMode:1,showProTranslateStatus:2,showProWriteStatus:3,onChangeTextProcessingMode:4,enableTranslateWriteTabs:5})}}const JR={ITA_REQUEST_TRANSLATION:"ITA_REQUEST_TRANSLATION",ITA_CLOSE_TRANSLATION_SESSION:"ITA_CLOSE_TRANSLATION_SESSION",ITA_REQUEST_WRITE:"ITA_REQUEST_WRITE",ITA_WRITE_UPDATE_SOURCE_TEXT:"ITA_WRITE_UPDATE_SOURCE_TEXT",ITA_RESTORE_TRANSLATE_SESSION:"ITA_RESTORE_TRANSLATE_SESSION",ITA_TRANSLATE_SOURCE_LANGUAGE:"ITA_TRANSLATE_SOURCE_LANGUAGE",ITA_TRANSLATE_SOURCE_LANGUAGE_IS_AUTO_DETECTED:"ITA_TRANSLATE_SOURCE_LANGUAGE_IS_AUTO_DETECTED",ITA_TARGET_TEXT_FIELD:"ITA_TARGET_TEXT_FIELD",ITA_WRITE_TARGET_TEXT_FIELD:"ITA_WRITE_TARGET_TEXT_FIELD",ITA_UPDATE_FORMALITY:"ITA_UPDATE_FORMALITY",ERROR:"ERROR",ITA_DOCUMENT_STATE:"ITA_DOCUMENT_STATE",ITA_WRITE_DOCUMENT_STATE:"ITA_WRITE_DOCUMENT_STATE",ITA_WRITE_UPDATE_REQUESTED_LANGUAGE:"ITA_WRITE_UPDATE_REQUESTED_LANGUAGE",ITA_WRITE_UPDATE_STYLE_VARIANT:"ITA_WRITE_UPDATE_STYLE_VARIANT",ITA_RESTORE_WRITE_SESSION:"ITA_RESTORE_WRITE_SESSION",ITA_RATE_LIMITED:"ITA_RATE_LIMITED",ITA_WRITE_SOURCE_LANGUAGE:"ITA_WRITE_SOURCE_LANGUAGE",ITA_WRITE_SOURCE_LANGUAGE_IS_AUTO_DETECTED:"ITA_WRITE_SOURCE_LANGUAGE_IS_AUTO_DETECTED",ITA_CLOSE_WRITE_SESSION:"ITA_CLOSE_WRITE_SESSION",ITA_TRANSLATE_SOURCE_LANGUAGE_IS_UNSUPPORTED:"ITA_TRANSLATE_SOURCE_LANGUAGE_IS_UNSUPPORTED",ITA_WRITE_SOURCE_LANGUAGE_IS_UNSUPPORTED:"ITA_WRITE_SOURCE_LANGUAGE_IS_UNSUPPORTED",ITA_TRANSLATE_GENERIC_ERROR:"ITA_TRANSLATE_GENERIC_ERROR",ITA_WRITE_GENERIC_ERROR:"ITA_WRITE_GENERIC_ERROR",WRITE:{REQUEST:{ITA_SELECT_ALTERNATIVE:"ITA_SELECT_WRITE_ALTERNATIVE"},REPLY:{ITA_BACKEND_IDLE:"ITA_BACKEND_IDLE",ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS:"ITA_TRANSLATE_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS"}},TRANSLATE:{REQUEST:{ITA_UPDATE_TARGET_LANGUAGE:"ITA_UPDATE_TARGET_LANGUAGE",ITA_SELECT_ALTERNATIVE:"ITA_SELECT_TRANSLATE_ALTERNATIVE"},REPLY:{ITA_BACKEND_IDLE:"ITA_BACKEND_IDLE",ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS:"ITA_WRITE_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS"}}};function eM(e){Rw.update({translationState:d.none,error:e})}let tM;const nM=()=>clearTimeout(tM);function oM(e){Rw.update({translationState:d.none,itaRateLimitWarning:{error:e}}),nM(),tM=window.setTimeout((()=>{Rw.update({itaRateLimitWarning:void 0})}),15e3)}const rM=()=>{nM(),Rw.update({itaRateLimitWarning:void 0}),CM({type:JR.ITA_CLOSE_TRANSLATION_SESSION}),CM({type:JR.ITA_CLOSE_WRITE_SESSION})},iM=(t,n=!1)=>{if(t&&window.getSelection()?.toString()){const o=window.getSelection()?.toString();document.getElementsByTagName("deepl-review-translate-write-window").length||AD({websiteData:Rw,onRemove:rM,isInput:n}),Rw.update({translationState:d.ongoingTranslation,translatedSnippet:"",snippetDetectedSourceLang:"",translatedDOMSnippet:"",originalSnippet:o,itaTranslateSourceLanguage:"",itaTranslateSourceLanguageIsAutoDetected:null,itaDocumentState:null,error:null,providedTranslateAlternatives:[]}),CM({type:JR.ITA_REQUEST_TRANSLATION,payload:{sourceText:o,targetLanguage:t,domainName:window.location.hostname,trigger:h,websiteLanguage:e.websiteData.websiteLanguage}})}},sM=e=>null==e,aM=()=>{sM(e.websiteData.translatedSnippet)||Rw.update({translationState:d.none})},lM=()=>{sM(e.websiteData.improvedSnippet)||Rw.update({writeState:u})},cM=e=>{e&&Rw.update({translationState:d.none,translatedSnippet:e,error:null})},dM=e=>{e&&Rw.update({writeState:u,improvedSnippet:e,error:null})},uM=e=>{e&&Rw.update({itaTranslateSourceLanguage:e.toUpperCase()})},pM=e=>{e&&Rw.update({itaWriteSourceLanguage:e.toUpperCase()})},mM=e=>{e&&Rw.update({itaTranslateSourceLanguageIsAutoDetected:e})},gM=e=>{e&&Rw.update({itaWriteSourceLanguageIsAutoDetected:e})},hM=e=>{e&&Rw.update({itaDocumentState:e})},fM=e=>{e&&Rw.update({itaWriteDocumentState:e})};function _M(t){e.websiteData.itaDocumentState&&t.postMessage({type:JR.ITA_RESTORE_TRANSLATE_SESSION,payload:{itaDocumentState:e.websiteData.itaDocumentState,domainName:window.location.host}}),e.websiteData.itaWriteDocumentState&&t.postMessage({type:JR.ITA_RESTORE_WRITE_SESSION,payload:{itaWriteDocumentState:e.websiteData.itaWriteDocumentState,domainName:window.location.host}})}const vM=e=>{Rw.update({isTranslateSourceLanguageUnsupported:e})},yM=e=>{Rw.update({isWriteSourceLanguageUnsupported:e})},wM=()=>{Rw.update({error:{error:W_.TRANSLATE_GENERIC_ERROR}})},bM=()=>{Rw.update({error:{error:W_.WRITE_GENERIC_ERROR}})},EM=e=>{console.log("ITA_WRITE_TARGET_TEXT_ALTERNATIVES",e),Rw.update({providedWriteAlternatives:e})},TM=e=>{console.log("ITA_TRANSLATE_TARGET_TEXT_ALTERNATIVES",e),Rw.update({providedTranslateAlternatives:e})};function SM(t,n,o){switch(t.action){case"dlTranslate":t.sourceLang&&OU(t.sourceLang,_),o();break;case"dlShowOriginal":Rw.update({translationState:d.showOriginal}),o();break;case"dlDefaultPopUpMounting":e.websiteData.translationState===d.none&&ND(),UD(),o();break;case"dlTabChanged":setTimeout((()=>{qU()}),500),o();break;case"dlTranslateInline":qU().then((async()=>{await jR()?iM(t.targetLang):MU(t)})),o();break;case"dlTranslateInput":qU().then((async()=>{iM(t.targetLang,!0)})),o();break;case"dlTranslateSelectionRightClick":qU().then((()=>NU(t.payload))),o();break;case"dlGetWebsiteData":qU().then((()=>o(e.websiteData)));break;case"dlShowNotification":eP(t.payload.type,t.payload.options),o();break;case"dlErrorVisibility":QU(t.payload.state),o();break;case"dlShowAskForAReviewPopup":tP(ne.initial),o();break;case"dlShowCustomerSegmentationSurvey":tP(ne.customer_segmentation),o();break;case"dlShowArabicSurveyPopup":tP(ne.arabic_survey),o();break;case"dlShowAlert":nB(t.payload),o();break;case"dlShowGmailFeedbackPopup":tP(ne.gmail),o();break;case"dlShowSlidesFeedbackPopup":tP(ne.gslides),o()}return!0}let xM;function $M(e){e.onMessage.addListener(kM),xM=e}function CM(e){xM&&(pn()&&console.log(`Sending message to background port:\n type: ${e.type}, payload: ${e.payload}`),xM.postMessage(e))}function kM(e){switch(pn()&&console.log(`Received message from background port - type: ${e.type}, payload: ${Object.toString(e.payload)}`),e.type){case JR.ITA_TARGET_TEXT_FIELD:cM(e.payload.targetText);break;case JR.ITA_WRITE_TARGET_TEXT_FIELD:dM(e.payload.targetText);break;case JR.ITA_TRANSLATE_SOURCE_LANGUAGE:uM(e.payload.language);break;case JR.ITA_TRANSLATE_SOURCE_LANGUAGE_IS_AUTO_DETECTED:mM(e.payload.isAutoDetected);break;case JR.ERROR:eM(e.payload);break;case JR.ITA_DOCUMENT_STATE:hM(e.payload.itaDocumentState);break;case JR.ITA_WRITE_DOCUMENT_STATE:fM(e.payload.itaDocumentState);break;case JR.ITA_RATE_LIMITED:oM(e.payload.warning);break;case JR.ITA_WRITE_SOURCE_LANGUAGE:pM(e.payload.language);break;case JR.ITA_WRITE_SOURCE_LANGUAGE_IS_AUTO_DETECTED:gM(e.payload.isAutoDetected);break;case JR.ITA_TRANSLATE_SOURCE_LANGUAGE_IS_UNSUPPORTED:vM(e.payload.isUnsupported);break;case JR.ITA_WRITE_SOURCE_LANGUAGE_IS_UNSUPPORTED:yM(e.payload.isUnsupported);break;case JR.ITA_TRANSLATE_GENERIC_ERROR:wM();break;case JR.ITA_WRITE_GENERIC_ERROR:bM();break;case JR.TRANSLATE.REPLY.ITA_BACKEND_IDLE:aM();break;case JR.WRITE.REPLY.ITA_BACKEND_IDLE:lM();break;case JR.TRANSLATE.REPLY.ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS:TM(e.payload.providedAlternatives);break;case JR.WRITE.REPLY.ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS:console.log("ITA_WRITE_TARGET_TEXT_ALTERNATIVES",e.payload.providedAlternatives),EM(e.payload.providedAlternatives);break;default:pn()&&console.log(`Unrecognised message type:\n ${e.type}`)}}function LM(e,t,n){const o=e.slice();return o[18]=t[n],o}function IM(e){let t,n,o=ft(e[1])+"";return{c(){t=Zg("div"),n=Zg("div"),rh(t,"class","dictionary-error svelte-1x35eps"),uh(t,"display-dictionary-error",e[6])},m(e,r){Vg(e,t,r),jg(t,n),n.innerHTML=o},p(e,r){2&r&&o!==(o=ft(e[1])+"")&&(n.innerHTML=o),64&r&&uh(t,"display-dictionary-error",e[6])},d(e){e&&Yg(t)}}}function AM(e){let t,n,o=ef(e[2]),r=[];for(let t=0;t<o.length;t+=1)r[t]=RM(LM(e,o,t));return{c(){t=Zg("div"),n=Zg("div");for(let e=0;e<r.length;e+=1)r[e].c();rh(n,"class","alternatives-list svelte-1x35eps"),rh(t,"class","alternatives-container svelte-1x35eps")},m(e,o){Vg(e,t,o),jg(t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(n,null)},p(e,t){if(8196&t){let i;for(o=ef(e[2]),i=0;i<o.length;i+=1){const s=LM(e,o,i);r[i]?r[i].p(s,t):(r[i]=RM(s),r[i].c(),r[i].m(n,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=o.length}},d(e){e&&Yg(t),Kg(r,e)}}}function RM(e){let t,n,o,r,i,s=ft(e[18].text)+"";function a(){return e[16](e[18])}function l(...t){return e[17](e[18],...t)}return{c(){t=Zg("div"),n=new mh(!1),o=Jg(),n.a=o,rh(t,"class","alternative svelte-1x35eps"),rh(t,"tabindex","0"),rh(t,"role","button")},m(e,c){Vg(e,t,c),n.m(s,t),jg(t,o),r||(i=[th(t,"click",a),th(t,"keydown",l)],r=!0)},p(t,o){e=t,4&o&&s!==(s=ft(e[18].text)+"")&&n.p(s)},d(e){e&&Yg(t),r=!1,Sg(i)}}}function MM(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f,_,v,y=chrome.i18n.getMessage("ui_alternatives_title")+"",w=chrome.i18n.getMessage("ui_inline_translation_dictionary")+"",b=e[1]&&IM(e),E=e[5]&&AM(e);return h=new hC({props:{originalSnippet:e[3].originalSnippet,sourceLanguage:e[3].itaTranslateSourceLanguage,targetLanguage:e[7].selectedTargetLanguage,websiteLanguage:e[3].websiteLanguage,showDictionary:e[4],setDictionaryLauncherState:e[11],resetDictionary:e[10]}}),{c(){t=Zg("div"),n=Zg("div"),o=Zg("div"),r=Zg("button"),i=Qg(y),a=Jg(),l=Zg("div"),c=Zg("button"),d=Qg(w),p=Jg(),b&&b.c(),m=Jg(),E&&E.c(),g=Jg(),nf(h.$$.fragment),r.disabled=s=!e[2]||!e[2].length,rh(r,"class","svelte-1x35eps"),rh(o,"class","tab svelte-1x35eps"),rh(c,"class","dl-dictionary svelte-1x35eps"),c.disabled=u=!e[0],rh(l,"class","tab svelte-1x35eps"),rh(n,"class","tabs-container svelte-1x35eps"),rh(t,"class","dl-review-footer svelte-1x35eps")},m(s,u){Vg(s,t,u),jg(t,n),jg(n,o),jg(o,r),jg(r,i),jg(n,a),jg(n,l),jg(l,c),jg(c,d),jg(l,p),b&&b.m(l,null),jg(t,m),E&&E.m(t,null),jg(t,g),of(h,t,null),f=!0,_||(v=[th(r,"click",e[9]),th(c,"click",e[14]),th(c,"mouseenter",e[8]),th(c,"mouseleave",e[15])],_=!0)},p(e,[n]){(!f||4&n&&s!==(s=!e[2]||!e[2].length))&&(r.disabled=s),(!f||1&n&&u!==(u=!e[0]))&&(c.disabled=u),e[1]?b?b.p(e,n):(b=IM(e),b.c(),b.m(l,null)):b&&(b.d(1),b=null),e[5]?E?E.p(e,n):(E=AM(e),E.c(),E.m(t,g)):E&&(E.d(1),E=null);const o={};8&n&&(o.originalSnippet=e[3].originalSnippet),8&n&&(o.sourceLanguage=e[3].itaTranslateSourceLanguage),128&n&&(o.targetLanguage=e[7].selectedTargetLanguage),8&n&&(o.websiteLanguage=e[3].websiteLanguage),16&n&&(o.showDictionary=e[4]),h.$set(o)},i(e){f||(Yh(h.$$.fragment,e),f=!0)},o(e){Kh(h.$$.fragment,e),f=!1},d(e){e&&Yg(t),b&&b.d(),E&&E.d(),rf(h),_=!1,Sg(v)}}}function NM(e,n,o){let r,i,s;kg(e,Rw,(e=>o(3,i=e))),kg(e,df,(e=>o(7,s=e)));let{enableDictionaryButton:a=!1}=n,{dictionaryButtonError:l=""}=n,c=!1,d=!1,u=!1;function p(){a&&o(4,c=!c)}function m(e){CM({type:i.textProcessingMode===ae.write?JR.WRITE.REQUEST.ITA_SELECT_ALTERNATIVE:JR.TRANSLATE.REQUEST.ITA_SELECT_ALTERNATIVE,payload:{alternative:e}}),Promise.allSettled([t({action:"dlTrackAlternativeSelected",payload:{numberOfAlternatives:r.length,selectedAlternative:e.index+1,sourceLang:i.itaTranslateSourceLanguage,targetLang:s.selectedTargetLanguage,contentProcessingMode:i.textProcessingMode,alternativesSegmentation:qt(e)?qe.WORD:qe.SENTENCE}})]),o(5,d=!1)}return e.$$set=e=>{"enableDictionaryButton"in e&&o(0,a=e.enableDictionaryButton),"dictionaryButtonError"in e&&o(1,l=e.dictionaryButtonError)},e.$$.update=()=>{8&e.$$.dirty&&o(2,r=(i.textProcessingMode===ae.write?i.providedWriteAlternatives:i.providedTranslateAlternatives)??[]),12&e.$$.dirty&&console.log("providedAlternatives",{providedAlternatives:r,translateAlternatives:i.providedTranslateAlternatives,writeAlternatives:i.providedWriteAlternatives})},[a,l,r,i,c,d,u,s,function(){if(o(6,u=!0),!a)try{t({action:"dlTrackDisabledDictionaryHover",payload:{}})}catch(e){console.log(e)}},async function(){c&&p(),o(5,d=!d),d&&await t({action:"dlRequestAlternatives",payload:{texts:i.originalSnippet,mode:i.textProcessingMode,targetLang:s.selectedTargetLanguage,style:i.writeStyle,formality:i.formality,domainName:window.location.hostname,writeLang:i.itaWriteSourceLanguage}})},function(){o(4,c=!1)},function(e){o(1,l=e.dictionaryButtonError),o(0,a=e.enableDictionaryButton)},p,m,()=>{o(5,d=!1),p()},()=>{o(6,u=!1)},e=>{m(e)},(e,t)=>{"Enter"===t.key&&m(e)}]}class OM extends af{constructor(e){super(),sf(this,e,NM,MM,$g,{enableDictionaryButton:0,dictionaryButtonError:1})}}function DM(e){let t,n,o=e[2],r=PM();return{c(){r.c(),t=eh()},m(e,o){r.m(e,o),Vg(e,t,o),n=!0},p(e,n){4&n&&$g(o,o=e[2])?(qh(),Kh(r,1,1,wg),Vh(),r=PM(),r.c(),Yh(r,1),r.m(t.parentNode,t)):r.p(e,n)},i(e){n||(Yh(r),n=!0)},o(e){Kh(r),n=!1},d(e){e&&Yg(t),r.d(e)}}}function PM(e){let t,n;return t=new OM({props:{enableDictionaryButton:WM,dictionaryButtonError:BM}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p:wg,i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function UM(e){let t,n,o,r,i,s;n=new QR({props:{closeWindow:e[0],extensionContext:e[1],textProcessingMode:e[2],showProTranslateStatus:e[3],showProWriteStatus:e[4],onChangeTextProcessingMode:e[5],enableTranslateWriteTabs:!e[6]}});const a=e[9].default,l=Lg(a,e,e[8],null);let c=!e[6]&&DM(e);return{c(){t=Zg("div"),nf(n.$$.fragment),o=Jg(),r=Zg("div"),l&&l.c(),i=Jg(),c&&c.c(),rh(r,"class","dl-content svelte-jwy61a"),rh(t,"class","dl-layout svelte-jwy61a"),rh(t,"translate","no"),rh(t,"dir",e[7])},m(e,a){Vg(e,t,a),of(n,t,null),jg(t,o),jg(t,r),l&&l.m(r,null),jg(t,i),c&&c.m(t,null),s=!0},p(e,[o]){const r={};1&o&&(r.closeWindow=e[0]),2&o&&(r.extensionContext=e[1]),4&o&&(r.textProcessingMode=e[2]),8&o&&(r.showProTranslateStatus=e[3]),16&o&&(r.showProWriteStatus=e[4]),32&o&&(r.onChangeTextProcessingMode=e[5]),64&o&&(r.enableTranslateWriteTabs=!e[6]),n.$set(r),l&&l.p&&(!s||256&o)&&Rg(l,a,e,e[8],s?Ag(a,e[8],o,null):Mg(e[8]),null),e[6]?c&&(qh(),Kh(c,1,1,(()=>{c=null})),Vh()):c?(c.p(e,o),64&o&&Yh(c,1)):(c=DM(e),c.c(),Yh(c,1),c.m(t,null))},i(e){s||(Yh(n.$$.fragment,e),Yh(l,e),Yh(c),s=!0)},o(e){Kh(n.$$.fragment,e),Kh(l,e),Kh(c),s=!1},d(e){e&&Yg(t),rf(n),l&&l.d(e),c&&c.d()}}}let BM="",WM=!1;function zM(e,t,n){let{$$slots:o={},$$scope:r}=t;const i=$h("text_direction");let{closeWindow:s}=t,{extensionContext:a}=t,{textProcessingMode:l=ae.translate}=t,{showProTranslateStatus:c=!1}=t,{showProWriteStatus:d=!1}=t,{onChangeTextProcessingMode:u}=t,{error:p}=t;return e.$$set=e=>{"closeWindow"in e&&n(0,s=e.closeWindow),"extensionContext"in e&&n(1,a=e.extensionContext),"textProcessingMode"in e&&n(2,l=e.textProcessingMode),"showProTranslateStatus"in e&&n(3,c=e.showProTranslateStatus),"showProWriteStatus"in e&&n(4,d=e.showProWriteStatus),"onChangeTextProcessingMode"in e&&n(5,u=e.onChangeTextProcessingMode),"error"in e&&n(6,p=e.error),"$$scope"in e&&n(8,r=e.$$scope)},[s,a,l,c,d,u,p,i,r,o]}class FM extends af{constructor(e){super(),sf(this,e,zM,UM,$g,{closeWindow:0,extensionContext:1,textProcessingMode:2,showProTranslateStatus:3,showProWriteStatus:4,onChangeTextProcessingMode:5,error:6})}}function HM(e){let t,n,o;function r(e,t){return e[1].isTranslateSourceLanguageUnsupported?GM:jM}let i=r(e),s=i(e),a=e[1].itaTranslateSourceLanguageIsAutoDetected&&!e[1].isTranslateSourceLanguageUnsupported&&qM();return{c(){t=Zg("div"),n=Zg("span"),s.c(),o=Jg(),a&&a.c(),rh(n,"class","source-language-label svelte-gpr70l")},m(e,r){Vg(e,t,r),jg(t,n),s.m(n,null),jg(t,o),a&&a.m(t,null)},p(e,o){i===(i=r(e))&&s?s.p(e,o):(s.d(1),s=i(e),s&&(s.c(),s.m(n,null))),e[1].itaTranslateSourceLanguageIsAutoDetected&&!e[1].isTranslateSourceLanguageUnsupported?a||(a=qM(),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},d(e){e&&Yg(t),s.d(),a&&a.d()}}}function jM(e){let t,n=chrome.i18n.getMessage(`supported_languages_${e[1].itaTranslateSourceLanguage}`)+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p(e,o){2&o&&n!==(n=chrome.i18n.getMessage(`supported_languages_${e[1].itaTranslateSourceLanguage}`)+"")&&ih(t,n)},d(e){e&&Yg(t)}}}function GM(e){let t,n=chrome.i18n.getMessage("ui_inline_translation_source_language_unavailable")+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function qM(e){let t;return{c(){t=Zg("span"),t.textContent="(detected)"},m(e,n){Vg(e,t,n)},d(e){e&&Yg(t)}}}function VM(e){let t,n,o,r;return o=new mb({props:{value:e[2].selectedTargetLanguage,websiteSettings:Rw,customClass:"dropdown__wrapper--header",fontSize:"sm",autoHeight:!1}}),o.$on("selection",e[3]),{c(){t=Zg("div"),t.innerHTML='<svg width="33" height="32" viewBox="0 0 33 32" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-gpr70l"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.5 15C9.5 14.5858 9.83579 14.25 10.25 14.25L20.8879 14.25L16.7302 10.2906C16.4316 10.0035 16.4223 9.52875 16.7094 9.23017C16.9965 8.93159 17.4713 8.92228 17.7698 9.20937L23.2698 14.4594C23.4169 14.6008 23.5 14.796 23.5 15C23.5 15.204 23.4169 15.3992 23.2698 15.5406L17.7698 20.7906C17.4713 21.0777 16.9965 21.0684 16.7094 20.7698C16.4223 20.4713 16.4316 19.9965 16.7302 19.7094L20.8879 15.75L10.25 15.75C9.83579 15.75 9.5 15.4142 9.5 15Z" fill="#848F9B"></path></svg>',n=Jg(),nf(o.$$.fragment),rh(t,"class","arrow-icon svelte-gpr70l")},m(e,i){Vg(e,t,i),Vg(e,n,i),of(o,e,i),r=!0},p(e,t){const n={};4&t&&(n.value=e[2].selectedTargetLanguage),o.$set(n)},i(e){r||(Yh(o.$$.fragment,e),r=!0)},o(e){Kh(o.$$.fragment,e),r=!1},d(e){e&&(Yg(t),Yg(n)),rf(o,e)}}}function YM(e){let t,n,o,r=e[1].itaTranslateSourceLanguage&&HM(e),i=e[2]?.selectedTargetLanguage&&VM(e);return{c(){t=Zg("div"),r&&r.c(),n=Jg(),i&&i.c(),rh(t,"class","language-selector-container svelte-gpr70l")},m(e,s){Vg(e,t,s),r&&r.m(t,null),jg(t,n),i&&i.m(t,null),o=!0},p(e,[o]){e[1].itaTranslateSourceLanguage?r?r.p(e,o):(r=HM(e),r.c(),r.m(t,n)):r&&(r.d(1),r=null),e[2]?.selectedTargetLanguage?i?(i.p(e,o),4&o&&Yh(i,1)):(i=VM(e),i.c(),Yh(i,1),i.m(t,null)):i&&(qh(),Kh(i,1,1,(()=>{i=null})),Vh())},i(e){o||(Yh(i),o=!0)},o(e){Kh(i),o=!1},d(e){e&&Yg(t),r&&r.d(),i&&i.d()}}}function KM(e,t,n){let o,r,i=wg,s=()=>(i(),i=Cg(a,(e=>n(2,r=e))),a);kg(e,Rw,(e=>n(1,o=e))),e.$$.on_destroy.push((()=>i()));let{settings:a}=t;return s(),e.$$set=e=>{"settings"in e&&s(n(0,a=e.settings))},[a,o,r,async function(e){const t=e.detail.selectedOption;await a.set({selectedTargetLanguage:t.value,isTargetLanguageConfirmed:!0,regionalVariant:t.regionalVariant||""}),Rw.update({translationState:d.ongoingTranslation}),CM({type:JR.TRANSLATE.REQUEST.ITA_UPDATE_TARGET_LANGUAGE,payload:{language:t.value}})}]}class ZM extends af{constructor(e){super(),sf(this,e,KM,YM,$g,{settings:0})}}function XM(e){let t,n,o,r;return{c(){t=Zg("button"),n=Zg("div"),rh(n,"class","glossary-icon svelte-q1f4m0"),rh(t,"class","glossary-button svelte-q1f4m0"),rh(t,"aria-label",chrome.i18n.getMessage("glossary_label"))},m(i,s){Vg(i,t,s),jg(t,n),o||(r=th(t,"click",e[0]),o=!0)},p:wg,d(e){e&&Yg(t),o=!1,r()}}}function QM(e){let t,n,o;return n=new T_({props:{tooltip:chrome.i18n.getMessage("glossary_label"),zIndex:"10000000000",isEnabled:!0,$$slots:{default:[XM]},$$scope:{ctx:e}}}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","customisations-toolbar svelte-q1f4m0")},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p(e,[t]){const o={};2&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function JM(e){return[function(){t({action:"dlOpenInternalPage",payload:{destination:RT.settings_glossary}})}]}class eN extends af{constructor(e){super(),sf(this,e,JM,QM,$g,{})}}function tN(e,t,n){const o=e.slice();return o[32]=t[n],o[34]=n,o}function nN(e){let t;let n=function(e,t){return e[15]()?rN:oN}(e),o=n(e);return{c(){o.c(),t=eh()},m(e,n){o.m(e,n),Vg(e,t,n)},p(e,t){o.p(e,t)},i(e){Yh(o)},o:wg,d(e){e&&Yg(t),o.d(e)}}}function oN(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f,_;return{c(){t=Zg("ul"),n=Zg("li"),o=Zg("span"),o.textContent=`${chrome.i18n.getMessage("ui_formality_formal")}`,r=Jg(),i=Zg("span"),i.textContent=`${chrome.i18n.getMessage("login_translate_pages_pro_badge")}`,s=Jg(),a=Zg("li"),l=Zg("span"),l.textContent=`${chrome.i18n.getMessage("ui_formality_informal")}`,c=Jg(),d=Zg("span"),d.textContent=`${chrome.i18n.getMessage("login_translate_pages_pro_badge")}`,u=Jg(),p=Zg("li"),p.textContent=`${chrome.i18n.getMessage("ui_formality_automatic")}`,m=Jg(),g=Zg("li"),h=Zg("button"),h.textContent=`${chrome.i18n.getMessage("link_try_deepl")}`,rh(i,"class","pro-label svelte-mfqqj4"),rh(n,"disabled",""),rh(n,"class","svelte-mfqqj4"),rh(d,"class","pro-label svelte-mfqqj4"),rh(a,"disabled",""),rh(a,"class","svelte-mfqqj4"),rh(p,"class","selected svelte-mfqqj4"),rh(h,"class","svelte-mfqqj4"),rh(g,"class","svelte-mfqqj4"),rh(t,"id","dropdown_list"),rh(t,"class","alternate-dropdown-list svelte-mfqqj4"),rh(t,"role","listbox"),rh(t,"aria-labelledby","dropdown_option"),rh(t,"tabindex","-1"),uh(t,"pro-dropdown",!0)},m(v,y){Vg(v,t,y),jg(t,n),jg(n,o),jg(n,r),jg(n,i),jg(t,s),jg(t,a),jg(a,l),jg(a,c),jg(a,d),jg(t,u),jg(t,p),jg(t,m),jg(t,g),jg(g,h),f||(_=th(h,"click",e[16]),f=!0)},p:wg,i:wg,o:wg,d(e){e&&Yg(t),f=!1,_()}}}function rN(e){let t,n,o=ef(e[10]),r=[];for(let t=0;t<o.length;t+=1)r[t]=iN(tN(e,o,t));return{c(){t=Zg("ul");for(let e=0;e<r.length;e+=1)r[e].c();rh(t,"id","dropdown_list"),rh(t,"class","alternate-dropdown-list svelte-mfqqj4"),rh(t,"role","listbox"),rh(t,"aria-labelledby","dropdown_option"),rh(t,"tabindex","-1"),rh(t,"style",`height: ${e[12].height}; top: ${e[12].top};`),rh(t,"data-qa",e[2])},m(n,o){Vg(n,t,o);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null);e[24](t)},p(e,n){if(1161&n[0]){let i;for(o=ef(e[10]),i=0;i<o.length;i+=1){const s=tN(e,o,i);r[i]?r[i].p(s,n):(r[i]=iN(s),r[i].c(),r[i].m(t,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=o.length}4&n[0]&&rh(t,"data-qa",e[2])},i(e){n||Oh((()=>{n=Xh(t,Ff,{y:-5,duration:500}),n.start()}))},o:wg,d(n){n&&Yg(t),Kg(r,n),e[24](null)}}}function iN(e){let t,n,o,r,i,s,a=e[32].label+"";function l(){return e[23](e[32])}return{c(){t=Zg("li"),n=Qg(a),o=Jg(),rh(t,"role","option"),rh(t,"data-option-value",e[32].value),rh(t,"aria-selected",r=e[3]===e[32]),rh(t,"class","svelte-mfqqj4"),uh(t,"selected",e[3]===e[32]),uh(t,"keyboardSelected",e[34]===e[7])},m(r,a){Vg(r,t,a),jg(t,n),jg(t,o),i||(s=[th(t,"click",l),th(t,"mousedown",oh(nh(e[20])))],i=!0)},p(n,o){e=n,8&o[0]&&r!==(r=e[3]===e[32])&&rh(t,"aria-selected",r),1032&o[0]&&uh(t,"selected",e[3]===e[32]),128&o[0]&&uh(t,"keyboardSelected",e[34]===e[7])},d(e){e&&Yg(t),i=!1,Sg(s)}}}function sN(e){let t,n,o,r,i,s,a=e[0]&&nN(e);return{c(){t=Zg("div"),n=Zg("button"),o=Qg(e[5]),r=Jg(),a&&a.c(),rh(n,"aria-haspopup","listbox"),rh(n,"id","dropdown_button"),rh(n,"aria-labelledby","dropdown_option dropdown_button"),rh(n,"aria-expanded",e[0]),rh(n,"data-qa",e[1]),rh(n,"class","dropdown-label svelte-mfqqj4"),rh(t,"class","dropdown__wrapper svelte-mfqqj4"),rh(t,"style",e[9])},m(l,c){Vg(l,t,c),jg(t,n),jg(n,o),e[22](n),jg(t,r),a&&a.m(t,null),e[26](t),i||(s=[th(n,"click",e[13]),th(n,"mousedown",oh(nh(e[21]))),th(n,"keydown",e[14]),Dg(__.call(null,t,{isShadow:!0})),th(t,"click_outside",e[25])],i=!0)},p(e,r){32&r[0]&&ih(o,e[5]),1&r[0]&&rh(n,"aria-expanded",e[0]),2&r[0]&&rh(n,"data-qa",e[1]),e[0]?a?(a.p(e,r),1&r[0]&&Yh(a,1)):(a=nN(e),a.c(),Yh(a,1),a.m(t,null)):a&&(a.d(1),a=null),512&r[0]&&rh(t,"style",e[9])},i(e){Yh(a)},o:wg,d(n){n&&Yg(t),e[22](null),a&&a.d(),e[26](null),i=!1,Sg(s)}}}function aN(e,n,o){let r,{isOpen:i=!1}=n,{dataQaButton:s="dl-dropdown-button"}=n,{dataQaList:a="dl-dropdown-list"}=n,{handleSelect:l}=n;const c=[{value:Ze,label:chrome.i18n.getMessage("ui_formality_formal"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_formal")},{value:Xe,label:chrome.i18n.getMessage("ui_formality_informal"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_informal")},{value:Qe,label:chrome.i18n.getMessage("ui_formality_automatic"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_automatic")}];let d=c.find((e=>e.value===Qe));const u=$h("deepl_settings");kg(e,u,(e=>o(29,r=e)));let p,m,g,h,f,_=0,v=d,y=-1,w="visibility: hidden; opacity:0; height:0;";Eh((()=>{setTimeout((()=>{o(9,w="")}),100),h=S_(g,(({clientWidth:e})=>{o(18,_=e)}))})),Th((()=>{h&&h()}));return e.$$set=e=>{"isOpen"in e&&o(0,i=e.isOpen),"dataQaButton"in e&&o(1,s=e.dataQaButton),"dataQaList"in e&&o(2,a=e.dataQaList),"handleSelect"in e&&o(17,l=e.handleSelect)},e.$$.update=()=>{917512&e.$$.dirty[0]&&(d&&v?.value!==d?.value&&(o(19,v=d),l({selectedOption:d}),t({action:"dlTrackFormalitySelected",payload:{formality:d.value}})),_&&(Math.abs(p.getBoundingClientRect().top),Math.abs(window.innerHeight-p.getBoundingClientRect().bottom))),8&e.$$.dirty[0]&&d&&o(5,m=`${d.selectedOptionLabel}`)},[i,s,a,d,p,m,g,y,f,w,c,u,{},function(){o(0,i=!i),function(){let e=p.getRootNode().querySelector("ul li[aria-selected=true]");setTimeout((()=>{e?.scrollIntoView({block:"nearest"})}),0)}()},function(e){if(!i)return;if("ArrowUp"===e.key&&y>0)o(7,y-=1);else if("ArrowDown"===e.key&&y<c.length-1)o(7,y+=1);else if("Enter"===e.key&&-1!==y){const t=c[y];o(0,i=!1),o(3,d=t),o(7,y=-1),e.preventDefault(),e.stopPropagation()}else{if("Escape"!==e.key)return;o(0,i=!1),o(7,y=-1)}const t=c[y];var n=f.querySelector(`[data-option-value="${t.value}"]`).offsetTop-f.offsetTop;f.scrollTo({top:n,behavior:"smooth"})},function(){return nt(r,be.TRANSLATOR)},function(){const e=fv;t({action:"dlTrackUILocationClicked",payload:B.inlineTranslationTriggerIcon}),t({action:"dlExternalURLRedirect",payload:{destination:e,utmContent:"inline_translator"}})},l,_,v,function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(e){Lh[e?"unshift":"push"]((()=>{p=e,o(4,p)}))},e=>{o(0,i=!1),o(3,d=e),o(7,y=-1)},function(e){Lh[e?"unshift":"push"]((()=>{f=e,o(8,f)}))},()=>{o(0,i=!1)},function(e){Lh[e?"unshift":"push"]((()=>{g=e,o(6,g)}))}]}class lN extends af{constructor(e){super(),sf(this,e,aN,sN,$g,{isOpen:0,dataQaButton:1,dataQaList:2,handleSelect:17},null,[-1,-1])}}function cN(e){let t,n,o,r,i;return n=new lN({props:{dataQaButton:"deepl-formality-selection-button",dataQaList:"deepl-formality-selection-list",handleSelect:e[0]}}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"role","button"),rh(t,"tabindex","-1")},m(s,a){Vg(s,t,a),of(n,t,null),o=!0,r||(i=th(t,"mousedown",oh(nh(e[1]))),r=!0)},p:wg,i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n),r=!1,i()}}}function dN(e){return[function({selectedOption:e}){df.set({formality:e.value}),CM({type:JR.ITA_UPDATE_FORMALITY,payload:{formality:e.value}})},function(t){Ch.call(this,e,t)}]}class uN extends af{constructor(e){super(),sf(this,e,dN,cN,$g,{})}}function pN(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h;n=new ZM({props:{settings:e[0]}});let f=e[4]&&gN();s=new eN({});const _=[fN,hN],v=[];function y(e,t){return e[5].isTranslateSourceLanguageUnsupported?0:1}c=y(e),d=v[c]=_[c](e);let w=!e[5].isTranslateSourceLanguageUnsupported&&_N(e),b=e[5].itaRateLimitWarning&&yN(e);return{c(){t=Zg("div"),nf(n.$$.fragment),o=Jg(),r=Zg("div"),f&&f.c(),i=Jg(),nf(s.$$.fragment),a=Jg(),l=Zg("div"),d.c(),p=Jg(),w&&w.c(),m=Jg(),b&&b.c(),g=eh(),rh(r,"class","translate-toolbar-buttons svelte-mpctqd"),rh(t,"class","translate-toolbar-container svelte-mpctqd"),rh(l,"class","result-frame svelte-mpctqd"),rh(l,"dir",u=jt(e[3].selectedTargetLanguage))},m(e,d){Vg(e,t,d),of(n,t,null),jg(t,o),jg(t,r),f&&f.m(r,null),jg(r,i),of(s,r,null),Vg(e,a,d),Vg(e,l,d),v[c].m(l,null),Vg(e,p,d),w&&w.m(e,d),Vg(e,m,d),b&&b.m(e,d),Vg(e,g,d),h=!0},p(e,t){const o={};1&t&&(o.settings=e[0]),n.$set(o),e[4]?f?16&t&&Yh(f,1):(f=gN(),f.c(),Yh(f,1),f.m(r,i)):f&&(qh(),Kh(f,1,1,(()=>{f=null})),Vh());let s=c;c=y(e),c===s?v[c].p(e,t):(qh(),Kh(v[s],1,1,(()=>{v[s]=null})),Vh(),d=v[c],d?d.p(e,t):(d=v[c]=_[c](e),d.c()),Yh(d,1),d.m(l,null)),(!h||8&t&&u!==(u=jt(e[3].selectedTargetLanguage)))&&rh(l,"dir",u),e[5].isTranslateSourceLanguageUnsupported?w&&(qh(),Kh(w,1,1,(()=>{w=null})),Vh()):w?(w.p(e,t),32&t&&Yh(w,1)):(w=_N(e),w.c(),Yh(w,1),w.m(m.parentNode,m)),e[5].itaRateLimitWarning?b?(b.p(e,t),32&t&&Yh(b,1)):(b=yN(e),b.c(),Yh(b,1),b.m(g.parentNode,g)):b&&(qh(),Kh(b,1,1,(()=>{b=null})),Vh())},i(e){h||(Yh(n.$$.fragment,e),Yh(f),Yh(s.$$.fragment,e),Yh(d),Yh(w),Yh(b),h=!0)},o(e){Kh(n.$$.fragment,e),Kh(f),Kh(s.$$.fragment,e),Kh(d),Kh(w),Kh(b),h=!1},d(e){e&&(Yg(t),Yg(a),Yg(l),Yg(p),Yg(m),Yg(g)),rf(n),f&&f.d(),rf(s),v[c].d(),w&&w.d(e),b&&b.d(e)}}}function mN(e){let t,n,o;return n=new AT({}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","loading-spinner-container svelte-mpctqd")},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p:wg,i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function gN(e){let t,n;return t=new uN({}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function hN(e){let t,n,o=I$(e[5].translatedSnippet)+"";return{c(){t=new mh(!1),n=eh(),t.a=n},m(e,r){t.m(o,e,r),Vg(e,n,r)},p(e,n){32&n&&o!==(o=I$(e[5].translatedSnippet)+"")&&t.p(o)},i:wg,o:wg,d(e){e&&(Yg(n),t.d())}}}function fN(e){let t,n;return t=new Wy({props:{error:{error:W_.TRANSLATE_LANGUAGE_NOT_SUPPORTED}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p:wg,i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function _N(e){let t,n,o,r,i,s,a,l=e[2]&&vN(e);return r=new H$({props:{sourceLang:e[5].websiteLanguage,targetLang:e[3].selectedTargetLanguage,sourceText:e[5].originalSnippet,targetText:e[5].translatedSnippet,platformBehaviour:e[1]}}),s=new N$({props:{targetLang:e[3].selectedTargetLanguage,text:e[5].translatedSnippet,platformBehaviour:e[1]}}),{c(){t=Zg("div"),l&&l.c(),n=Jg(),o=Zg("div"),nf(r.$$.fragment),i=Jg(),nf(s.$$.fragment),rh(o,"class","dl-options-container svelte-mpctqd"),rh(t,"class","dl-btn-group svelte-mpctqd"),uh(t,"is-input",!e[2])},m(e,c){Vg(e,t,c),l&&l.m(t,null),jg(t,n),jg(t,o),of(r,o,null),jg(o,i),of(s,o,null),a=!0},p(e,o){e[2]?l?l.p(e,o):(l=vN(e),l.c(),l.m(t,n)):l&&(l.d(1),l=null);const i={};32&o&&(i.sourceLang=e[5].websiteLanguage),8&o&&(i.targetLang=e[3].selectedTargetLanguage),32&o&&(i.sourceText=e[5].originalSnippet),32&o&&(i.targetText=e[5].translatedSnippet),2&o&&(i.platformBehaviour=e[1]),r.$set(i);const c={};8&o&&(c.targetLang=e[3].selectedTargetLanguage),32&o&&(c.text=e[5].translatedSnippet),2&o&&(c.platformBehaviour=e[1]),s.$set(c),(!a||4&o)&&uh(t,"is-input",!e[2])},i(e){a||(Yh(r.$$.fragment,e),Yh(s.$$.fragment,e),a=!0)},o(e){Kh(r.$$.fragment,e),Kh(s.$$.fragment,e),a=!1},d(e){e&&Yg(t),l&&l.d(),rf(r),rf(s)}}}function vN(e){let t,n,o;return{c(){t=Zg("button"),t.textContent=`${chrome.i18n.getMessage("replace_in_field")}`,rh(t,"class","svelte-mpctqd")},m(r,i){Vg(r,t,i),n||(o=th(t,"click",e[6]),n=!0)},p:wg,d(e){e&&Yg(t),n=!1,o()}}}function yN(e){let t,n;return t=new Wy({props:{error:{error:e[5].itaRateLimitWarning}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};32&n&&(o.error={error:e[5].itaRateLimitWarning}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function wN(e){let t,n,o,r;const i=[mN,pN],s=[];function a(e,t){return null==e[5]||e[5].translationState===d.ongoingTranslation?0:e[5].translatedSnippet?1:-1}return~(n=a(e))&&(o=s[n]=i[n](e)),{c(){t=Zg("div"),o&&o.c()},m(e,o){Vg(e,t,o),~n&&s[n].m(t,null),r=!0},p(e,[r]){let l=n;n=a(e),n===l?~n&&s[n].p(e,r):(o&&(qh(),Kh(s[l],1,1,(()=>{s[l]=null})),Vh()),~n?(o=s[n],o?o.p(e,r):(o=s[n]=i[n](e),o.c()),Yh(o,1),o.m(t,null)):o=null)},i(e){r||(Yh(o),r=!0)},o(e){Kh(o),r=!1},d(e){e&&Yg(t),~n&&s[n].d()}}}function bN(e,t,n){let o,r,i,s=wg,a=()=>(s(),s=Cg(l,(e=>n(3,r=e))),l);kg(e,Rw,(e=>n(5,i=e))),e.$$.on_destroy.push((()=>s()));let{settings:l}=t;a();let{platformBehaviour:c}=t,{isInput:d=!1}=t,{closeWindow:u}=t;return e.$$set=e=>{"settings"in e&&a(n(0,l=e.settings)),"platformBehaviour"in e&&n(1,c=e.platformBehaviour),"isInput"in e&&n(2,d=e.isInput),"closeWindow"in e&&n(7,u=e.closeWindow)},e.$$.update=()=>{8&e.$$.dirty&&n(4,o=Ht(r.selectedTargetLanguage))},[l,c,d,r,o,i,()=>{aT(i.inputElement,{html:i.translatedSnippet??"",text:i.translatedSnippet??""},sT(i.inputElement)),u()},u]}class EN extends af{constructor(e){super(),sf(this,e,bN,wN,$g,{settings:0,platformBehaviour:1,isInput:2,closeWindow:7})}}function TN(e){let t,n,o;function r(e,t){return e[0].isWriteSourceLanguageUnsupported?xN:SN}let i=r(e),s=i(e),a=e[0].itaWriteSourceLanguageIsAutoDetected&&!e[0].isWriteSourceLanguageUnsupported&&$N();return{c(){t=Zg("div"),n=Zg("span"),s.c(),o=Jg(),a&&a.c(),rh(n,"class","source-language-label svelte-1cvmdvq")},m(e,r){Vg(e,t,r),jg(t,n),s.m(n,null),jg(t,o),a&&a.m(t,null)},p(e,o){i===(i=r(e))&&s?s.p(e,o):(s.d(1),s=i(e),s&&(s.c(),s.m(n,null))),e[0].itaWriteSourceLanguageIsAutoDetected&&!e[0].isWriteSourceLanguageUnsupported?a||(a=$N(),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},d(e){e&&Yg(t),s.d(),a&&a.d()}}}function SN(e){let t,n=chrome.i18n.getMessage(`supported_languages_${e[0].itaWriteSourceLanguage}`)+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p(e,o){1&o&&n!==(n=chrome.i18n.getMessage(`supported_languages_${e[0].itaWriteSourceLanguage}`)+"")&&ih(t,n)},d(e){e&&Yg(t)}}}function xN(e){let t,n=chrome.i18n.getMessage("ui_inline_translation_source_language_unavailable")+"";return{c(){t=Qg(n)},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function $N(e){let t;return{c(){t=Zg("span"),t.textContent="(detected)"},m(e,n){Vg(e,t,n)},d(e){e&&Yg(t)}}}function CN(e){let t,n=e[0].itaWriteSourceLanguage&&TN(e);return{c(){t=Zg("div"),n&&n.c(),rh(t,"class","language-selector-container svelte-1cvmdvq")},m(e,o){Vg(e,t,o),n&&n.m(t,null)},p(e,[o]){e[0].itaWriteSourceLanguage?n?n.p(e,o):(n=TN(e),n.c(),n.m(t,null)):n&&(n.d(1),n=null)},i:wg,o:wg,d(e){e&&Yg(t),n&&n.d()}}}function kN(e,t,n){let o;return kg(e,Rw,(e=>n(0,o=e))),[o]}class LN extends af{constructor(e){super(),sf(this,e,kN,CN,$g,{})}}function IN(e){let t,n,o,r,i,s,a,l,c;return{c(){t=Zg("div"),n=Zg("button"),n.textContent=`${chrome.i18n.getMessage("ui_inline_translation_listen_to_new")}`,o=Jg(),r=Zg("button"),r.textContent=`${chrome.i18n.getMessage("ui_inline_translation_listen_to_original")}`,rh(n,"class","list-entry svelte-o3etn3"),rh(n,"data-qa","dl-toolbar-listener-button-target-lang"),uh(n,"dl-entry-notAvailable",!e[0]),rh(r,"class","list-entry svelte-o3etn3"),rh(r,"data-qa","dl-toolbar-listener-button-source-lang"),uh(r,"dl-entry-notAvailable",!e[0]),rh(t,"class","listen-list svelte-o3etn3"),rh(t,"data-qa","dl-toolbar-listener-element-langs")},m(i,s){Vg(i,t,s),jg(t,n),jg(t,o),jg(t,r),a=!0,l||(c=[th(n,"click",e[5]),th(r,"click",e[6])],l=!0)},p(e,[t]){(!a||1&t)&&uh(n,"dl-entry-notAvailable",!e[0]),(!a||1&t)&&uh(r,"dl-entry-notAvailable",!e[0])},i(e){a||(Oh((()=>{a&&(s&&s.end(1),i=Xh(t,Ff,{y:-5,duration:500}),i.start())})),a=!0)},o(e){i&&i.invalidate(),s=Qh(t,Ff,{y:-5,duration:500}),a=!1},d(e){e&&Yg(t),e&&s&&s.end(),l=!1,Sg(c)}}}function AN(e,t,n){let{isRequestedLanguageAvailable:o}=t,{requestedLang:r}=t,{sourceText:i}=t,{improvedText:s}=t,{listen:a=((e,t)=>null)}=t;return e.$$set=e=>{"isRequestedLanguageAvailable"in e&&n(0,o=e.isRequestedLanguageAvailable),"requestedLang"in e&&n(1,r=e.requestedLang),"sourceText"in e&&n(2,i=e.sourceText),"improvedText"in e&&n(3,s=e.improvedText),"listen"in e&&n(4,a=e.listen)},[o,r,i,s,a,()=>{a(s,r)},()=>{a(i,r)}]}class RN extends af{constructor(e){super(),sf(this,e,AN,IN,$g,{isRequestedLanguageAvailable:0,requestedLang:1,sourceText:2,improvedText:3,listen:4})}}function MN(e){let t,n,o,r,i;return n=new T_({props:{tooltip:e[6],zIndex:300,$$slots:{default:[ON]},$$scope:{ctx:e}}}),{c(){t=Zg("fragment"),nf(n.$$.fragment),rh(t,"role","navigation")},m(s,a){Vg(s,t,a),of(n,t,null),o=!0,r||(i=[th(t,"mouseover",e[9]),th(t,"focus",e[9]),th(t,"mouseleave",e[11])],r=!0)},p(e,t){const o={};64&t&&(o.tooltip=e[6]),65599&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n),r=!1,Sg(i)}}}function NN(e){let t,n;return t=new RN({props:{isRequestedLanguageAvailable:e[5],requestedLang:e[0],sourceText:e[1],improvedText:e[2],listen:e[7]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};32&n&&(o.isRequestedLanguageAvailable=e[5]),1&n&&(o.requestedLang=e[0]),2&n&&(o.sourceText=e[1]),4&n&&(o.improvedText=e[2]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function ON(e){let t,n,o,r,i,s,a=e[4]&&NN(e);return{c(){t=Zg("button"),t.innerHTML='<span class="dl-icon dl-icon-listen svelte-17suwwx"></span>',n=Jg(),a&&a.c(),o=eh(),rh(t,"type","button"),rh(t,"class","dl-btn svelte-17suwwx"),rh(t,"data-qa","dl-toolbar-listener-button"),uh(t,"dl-btn-active",e[3]),uh(t,"dl-btn-hovered",e[4])},m(l,c){Vg(l,t,c),Vg(l,n,c),a&&a.m(l,c),Vg(l,o,c),r=!0,i||(s=th(t,"click",e[8]),i=!0)},p(e,n){(!r||8&n)&&uh(t,"dl-btn-active",e[3]),(!r||16&n)&&uh(t,"dl-btn-hovered",e[4]),e[4]?a?(a.p(e,n),16&n&&Yh(a,1)):(a=NN(e),a.c(),Yh(a,1),a.m(o.parentNode,o)):a&&(qh(),Kh(a,1,1,(()=>{a=null})),Vh())},i(e){r||(Yh(a),r=!0)},o(e){Kh(a),r=!1},d(e){e&&(Yg(t),Yg(n),Yg(o)),a&&a.d(e),i=!1,s()}}}function DN(e){let t,n,o=e[5]&&MN(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,[n]){e[5]?o?(o.p(e,n),32&n&&Yh(o,1)):(o=MN(e),o.c(),Yh(o,1),o.m(t.parentNode,t)):o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh())},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function PN(e,n,o){let{platformBehaviour:r=re.default}=n,{requestedLang:i=""}=n,{sourceText:s=""}=n,{improvedText:a=""}=n,l=!1,c=!1,d=!1,u=!1;function p(){t({action:"dlStopSpeech"}),o(3,c=!1)}function m(e){try{t({action:"dlTrackInlineListen",payload:e})}catch(e){console.error(e)}}async function g(e,t,n){if("dlVoiceOverStopped"===e.action)o(3,c=!1),n();return!0}function h(e){try{t({action:"dlTrackVoiceOverStops",payload:e})}catch(e){console.error(e)}}chrome.runtime.onMessage.addListener(g),Th((()=>{p(),chrome.runtime.onMessage.removeListener(g),c&&h({targetLang:i,targetLength:a.length,triggerType:A,nicheIntegration:r})}));return e.$$set=e=>{"platformBehaviour"in e&&o(10,r=e.platformBehaviour),"requestedLang"in e&&o(0,i=e.requestedLang),"sourceText"in e&&o(1,s=e.sourceText),"improvedText"in e&&o(2,a=e.improvedText)},e.$$.update=()=>{25&e.$$.dirty&&(i&&t({action:"dlGetSupportedVoices"}).then((e=>{o(5,l=e.includes(["EN-US","EN-GB"].includes(i)?"EN":["PT-PT","PT-BR"].includes(i)?"PT":["ZH-CN","ZH-HANT"].includes(i)?"ZH":i))})),!d&&c?setTimeout((()=>{o(6,u=chrome.i18n.getMessage("ui_inline_translation_listen_stop"))}),1e3):o(6,u=!1))},[i,s,a,c,d,l,u,async function(e,n){c||(t({action:"dlTextToSpeech",payload:{text:e,lang:n}}),o(3,c=!0),o(4,d=!1),m({targetLang:n,targetLength:e.length,actionType:K,nicheIntegration:r}))},function(){c?(p(),o(3,c=!1),h({targetLang:i,targetLength:a.length,triggerType:I,nicheIntegration:r}),m({targetLang:i,targetLength:a.length,actionType:Z,nicheIntegration:r})):o(4,d=!0)},function(){c||o(4,d=!0)},r,()=>o(4,d=!1)]}class UN extends af{constructor(e){super(),sf(this,e,PN,DN,$g,{platformBehaviour:10,requestedLang:0,sourceText:1,improvedText:2})}}function BN(e){let t,n,o,r,i,s;function a(t){e[6](t)}function l(t){e[7](t)}let c={};return void 0!==e[0]&&(c.writingStyle=e[0]),void 0!==e[1]&&(c.tone=e[1]),n=new nL({props:c}),Lh.push((()=>tf(n,"writingStyle",a))),Lh.push((()=>tf(n,"tone",l))),n.$on("apply",e[3]),n.$on("reset",e[3]),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","scoped svelte-2jkwvo")},m(e,o){Vg(e,t,o),of(n,t,null),s=!0},p(e,t){const i={};!o&&1&t&&(o=!0,i.writingStyle=e[0],Dh((()=>o=!1))),!r&&2&t&&(r=!0,i.tone=e[1],Dh((()=>r=!1))),n.$set(i)},i(e){s||(Yh(n.$$.fragment,e),e&&(i||Oh((()=>{i=Xh(t,Ff,{y:-5,duration:500}),i.start()}))),s=!0)},o(e){Kh(n.$$.fragment,e),s=!1},d(e){e&&Yg(t),rf(n)}}}function WN(e){let t,n,o,r,i,s,a=e[2]&&BN(e);return{c(){t=Zg("div"),n=Zg("button"),n.textContent=`${chrome.i18n.getMessage("write_style_options_button_label")}`,o=Jg(),a&&a.c(),rh(n,"class","style-switch svelte-2jkwvo"),uh(n,"open",e[2]),uh(n,"active",e[0]||e[1]),rh(t,"role","button"),rh(t,"tabindex","-1")},m(l,c){Vg(l,t,c),jg(t,n),jg(t,o),a&&a.m(t,null),r=!0,i||(s=[th(n,"click",e[5]),th(t,"mousedown",oh(nh(e[4])))],i=!0)},p(e,[o]){(!r||4&o)&&uh(n,"open",e[2]),(!r||3&o)&&uh(n,"active",e[0]||e[1]),e[2]?a?(a.p(e,o),4&o&&Yh(a,1)):(a=BN(e),a.c(),Yh(a,1),a.m(t,null)):a&&(qh(),Kh(a,1,1,(()=>{a=null})),Vh())},i(e){r||(Yh(a),r=!0)},o(e){Kh(a),r=!1},d(e){e&&Yg(t),a&&a.d(),i=!1,Sg(s)}}}function zN(e,t,n){let o,r,i=!1;return[o,r,i,function(){const e=o||r||null;Rw.update({writeState:p,writeStyle:e}),CM({type:JR.ITA_WRITE_UPDATE_STYLE_VARIANT,payload:{styleVariant:e}}),n(2,i=!1)},function(t){Ch.call(this,e,t)},()=>n(2,i=!i),function(e){o=e,n(0,o)},function(e){r=e,n(1,r)}]}class FN extends af{constructor(e){super(),sf(this,e,zN,WN,$g,{})}}function HN(e){let t,n,o,r,i,s,a,l,c,d,u,p;n=new LN({}),r=new FN({});const m=[qN,GN],g=[];function h(e,t){return e[2].isWriteSourceLanguageUnsupported?0:1}a=h(e),l=g[a]=m[a](e);let f=!e[2].isWriteSourceLanguageUnsupported&&VN(e);return{c(){t=Zg("div"),nf(n.$$.fragment),o=Jg(),nf(r.$$.fragment),i=Jg(),s=Zg("div"),l.c(),d=Jg(),f&&f.c(),u=eh(),rh(t,"class","write-toolbar-container svelte-1t6fc8d"),rh(s,"class","result-frame svelte-1t6fc8d"),rh(s,"dir",c=jt(e[2].itaWriteSourceLanguage))},m(e,l){Vg(e,t,l),of(n,t,null),jg(t,o),of(r,t,null),Vg(e,i,l),Vg(e,s,l),g[a].m(s,null),Vg(e,d,l),f&&f.m(e,l),Vg(e,u,l),p=!0},p(e,t){let n=a;a=h(e),a===n?g[a].p(e,t):(qh(),Kh(g[n],1,1,(()=>{g[n]=null})),Vh(),l=g[a],l?l.p(e,t):(l=g[a]=m[a](e),l.c()),Yh(l,1),l.m(s,null)),(!p||4&t&&c!==(c=jt(e[2].itaWriteSourceLanguage)))&&rh(s,"dir",c),e[2].isWriteSourceLanguageUnsupported?f&&(qh(),Kh(f,1,1,(()=>{f=null})),Vh()):f?(f.p(e,t),4&t&&Yh(f,1)):(f=VN(e),f.c(),Yh(f,1),f.m(u.parentNode,u))},i(e){p||(Yh(n.$$.fragment,e),Yh(r.$$.fragment,e),Yh(l),Yh(f),p=!0)},o(e){Kh(n.$$.fragment,e),Kh(r.$$.fragment,e),Kh(l),Kh(f),p=!1},d(e){e&&(Yg(t),Yg(i),Yg(s),Yg(d),Yg(u)),rf(n),rf(r),g[a].d(),f&&f.d(e)}}}function jN(e){let t,n,o;return n=new AT({}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","loading-spinner-container svelte-1t6fc8d")},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p:wg,i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function GN(e){let t,n,o=I$(e[2].improvedSnippet)+"";return{c(){t=new mh(!1),n=eh(),t.a=n},m(e,r){t.m(o,e,r),Vg(e,n,r)},p(e,n){4&n&&o!==(o=I$(e[2].improvedSnippet)+"")&&t.p(o)},i:wg,o:wg,d(e){e&&(Yg(n),t.d())}}}function qN(e){let t,n;return t=new Wy({props:{error:{error:W_.WRITE_LANGUAGE_NOT_SUPPORTED}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p:wg,i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function VN(e){let t,n,o,r,i,s,a,l=e[1]&&YN(e);return r=new UN({props:{requestedLang:e[2].itaWriteSourceLanguage,sourceText:e[2].originalSnippet,improvedText:e[2].improvedSnippet,platformBehaviour:e[0]}}),s=new N$({props:{targetLang:e[2].itaWriteSourceLanguage,text:e[2].improvedSnippet,platformBehaviour:e[0]}}),{c(){t=Zg("div"),l&&l.c(),n=Jg(),o=Zg("div"),nf(r.$$.fragment),i=Jg(),nf(s.$$.fragment),rh(o,"class","dl-options-container svelte-1t6fc8d"),rh(t,"class","dl-btn-group svelte-1t6fc8d"),uh(t,"is-input",!e[1])},m(e,c){Vg(e,t,c),l&&l.m(t,null),jg(t,n),jg(t,o),of(r,o,null),jg(o,i),of(s,o,null),a=!0},p(e,o){e[1]?l?l.p(e,o):(l=YN(e),l.c(),l.m(t,n)):l&&(l.d(1),l=null);const i={};4&o&&(i.requestedLang=e[2].itaWriteSourceLanguage),4&o&&(i.sourceText=e[2].originalSnippet),4&o&&(i.improvedText=e[2].improvedSnippet),1&o&&(i.platformBehaviour=e[0]),r.$set(i);const c={};4&o&&(c.targetLang=e[2].itaWriteSourceLanguage),4&o&&(c.text=e[2].improvedSnippet),1&o&&(c.platformBehaviour=e[0]),s.$set(c),(!a||2&o)&&uh(t,"is-input",!e[1])},i(e){a||(Yh(r.$$.fragment,e),Yh(s.$$.fragment,e),a=!0)},o(e){Kh(r.$$.fragment,e),Kh(s.$$.fragment,e),a=!1},d(e){e&&Yg(t),l&&l.d(),rf(r),rf(s)}}}function YN(e){let t,n,o;return{c(){t=Zg("button"),t.textContent=`${chrome.i18n.getMessage("replace_in_field")}`,rh(t,"class","svelte-1t6fc8d")},m(r,i){Vg(r,t,i),n||(o=th(t,"click",e[3]),n=!0)},p:wg,d(e){e&&Yg(t),n=!1,o()}}}function KN(e){let t,n,o,r;const i=[jN,HN],s=[];function a(e,t){return null==e[2]||e[2].writeState===p?0:e[2].improvedSnippet?1:-1}return~(n=a(e))&&(o=s[n]=i[n](e)),{c(){t=Zg("div"),o&&o.c()},m(e,o){Vg(e,t,o),~n&&s[n].m(t,null),r=!0},p(e,[r]){let l=n;n=a(e),n===l?~n&&s[n].p(e,r):(o&&(qh(),Kh(s[l],1,1,(()=>{s[l]=null})),Vh()),~n?(o=s[n],o?o.p(e,r):(o=s[n]=i[n](e),o.c()),Yh(o,1),o.m(t,null)):o=null)},i(e){r||(Yh(o),r=!0)},o(e){Kh(o),r=!1},d(e){e&&Yg(t),~n&&s[n].d()}}}function ZN(e,t,n){let o;kg(e,Rw,(e=>n(2,o=e)));let{platformBehaviour:r}=t,{isInput:i=!1}=t,{closeWindow:s}=t;return e.$$set=e=>{"platformBehaviour"in e&&n(0,r=e.platformBehaviour),"isInput"in e&&n(1,i=e.isInput),"closeWindow"in e&&n(4,s=e.closeWindow)},[r,i,o,()=>{aT(o.inputElement,{html:o.improvedSnippet??"",text:o.improvedSnippet??""},sT(o.inputElement)),s()},s]}class XN extends af{constructor(e){super(),sf(this,e,ZN,KN,$g,{platformBehaviour:0,isInput:1,closeWindow:4})}}function QN(e){let t,n;return t=new XN({props:{platformBehaviour:e[2],isInput:e[3],closeWindow:e[8]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.platformBehaviour=e[2]),8&n&&(o.isInput=e[3]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function JN(e){let t,n;return t=new EN({props:{settings:df,platformBehaviour:e[2],isInput:e[3],closeWindow:e[8]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.platformBehaviour=e[2]),8&n&&(o.isInput=e[3]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function eO(e){let t,n;return t=new Wy({props:{error:e[4].error}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};16&n&&(o.error=e[4].error),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function tO(e){let t,n,o,r;const i=[eO,JN,QN],s=[];function a(e,t){return e[4].error?0:e[0]===ae.translate?1:e[0]===ae.write?2:-1}return~(n=a(e))&&(o=s[n]=i[n](e)),{c(){t=Zg("div"),o&&o.c(),rh(t,"class","tooltip-container svelte-1o980it"),rh(t,"data-qa","deepl-tooltip-container"),uh(t,"error",e[4].error)},m(e,o){Vg(e,t,o),~n&&s[n].m(t,null),r=!0},p(e,l){let c=n;n=a(e),n===c?~n&&s[n].p(e,l):(o&&(qh(),Kh(s[c],1,1,(()=>{s[c]=null})),Vh()),~n?(o=s[n],o?o.p(e,l):(o=s[n]=i[n](e),o.c()),Yh(o,1),o.m(t,null)):o=null),(!r||16&l)&&uh(t,"error",e[4].error)},i(e){r||(Yh(o),r=!0)},o(e){Kh(o),r=!1},d(e){e&&Yg(t),~n&&s[n].d()}}}function nO(e){let t,n,o;return n=new FM({props:{closeWindow:e[8],extensionContext:e[7],textProcessingMode:e[0],showProTranslateStatus:e[5],showProWriteStatus:e[6],onChangeTextProcessingMode:e[9],error:e[4].error,$$slots:{default:[tO]},$$scope:{ctx:e}}}),{c(){t=Zg("div"),nf(n.$$.fragment)},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p(e,[t]){const o={};1&t&&(o.textProcessingMode=e[0]),32&t&&(o.showProTranslateStatus=e[5]),64&t&&(o.showProWriteStatus=e[6]),16&t&&(o.error=e[4].error),32797&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function oO(e,n,o){let r,i,s,a=wg,l=()=>(a(),a=Cg(d,(e=>o(4,s=e))),d);kg(e,Rw,(e=>o(13,r=e))),kg(e,df,(e=>o(14,i=e))),e.$$.on_destroy.push((()=>a()));let{closeTooltip:c}=n,{websiteSettings:d}=n;l();let u,m,{platformBehaviour:g=re.default}=n,{isInput:h=!1}=n,{textProcessingMode:f}=n,{setPositioningStatus:_}=n,v=$;let y=!1;return e.$$set=e=>{"closeTooltip"in e&&o(10,c=e.closeTooltip),"websiteSettings"in e&&l(o(1,d=e.websiteSettings)),"platformBehaviour"in e&&o(2,g=e.platformBehaviour),"isInput"in e&&o(3,h=e.isInput),"textProcessingMode"in e&&o(0,f=e.textProcessingMode),"setPositioningStatus"in e&&o(11,_=e.setPositioningStatus)},e.$$.update=()=>{2068&e.$$.dirty&&!s.translationState&&g===re.default&&_&&(_(!0),setTimeout((()=>{_(!1)}),600)),16384&e.$$.dirty&&o(5,u=nt(i,be.TRANSLATOR)),16384&e.$$.dirty&&o(6,m=nt(i,be.WRITE)),12289&e.$$.dirty&&(f!==ae.write||y||(async(e="")=>(Rw.update({improvedSnippet:"",writeState:p,error:null,providedWriteAlternatives:[],writeStyle:null}),CM({type:JR.ITA_REQUEST_WRITE,payload:{sourceText:e,domainName:window.location.hostname}})))(r.originalSnippet).then((()=>{o(12,y=!0)})))},[f,d,g,h,s,u,m,v,function(){t({action:"dlTrackUiAction",payload:{uiAction:G,nicheIntegration:g}}),c()},e=>{switch(e){case ae.translate:o(0,f=ae.translate);break;case ae.write:o(0,f=ae.write);break;default:return}},c,_,y,r,i]}class rO extends af{constructor(e){super(),sf(this,e,oO,nO,$g,{closeTooltip:10,websiteSettings:1,platformBehaviour:2,isInput:3,textProcessingMode:0,setPositioningStatus:11})}}function iO(e){let t,n,o,r,i,s,a,l;return i=new rO({props:{closeTooltip:e[0],websiteSettings:e[1],platformBehaviour:e[2],textProcessingMode:e[4],setPositioningStatus:e[8],isInput:e[3]}}),{c(){t=Zg("div"),n=Zg("div"),o=Jg(),r=Zg("div"),nf(i.$$.fragment),rh(n,"class","tooltip-drag-handle svelte-1t6zxdj"),rh(r,"class","review-window-body svelte-1t6zxdj"),rh(t,"data-qa","review-translate-write-window"),rh(t,"class","review-window-wrapper svelte-1t6zxdj"),rh(t,"role","dialog"),rh(t,"style",e[7]),rh(t,"draggable",e[6]),rh(t,"dir",jt())},m(c,d){Vg(c,t,d),jg(t,n),jg(t,o),jg(t,r),of(i,r,null),e[19](t),s=!0,a||(l=[th(n,"mouseover",e[9]),th(n,"mouseout",e[10]),Dg(__.call(null,t,{isShadow:!0})),th(t,"click_outside",e[18]),th(t,"dragstart",e[11])],a=!0)},p(e,[n]){const o={};1&n&&(o.closeTooltip=e[0]),2&n&&(o.websiteSettings=e[1]),4&n&&(o.platformBehaviour=e[2]),16&n&&(o.textProcessingMode=e[4]),8&n&&(o.isInput=e[3]),i.$set(o),(!s||128&n)&&rh(t,"style",e[7]),(!s||64&n)&&rh(t,"draggable",e[6])},i(e){s||(Yh(i.$$.fragment,e),s=!0)},o(e){Kh(i.$$.fragment,e),s=!1},d(n){n&&Yg(t),rf(i),e[19](null),a=!1,Sg(l)}}}function sO(e,t,n){let o,r,i=wg,s=()=>(i(),i=Cg(l,(e=>n(17,r=e))),l);kg(e,df,(e=>n(16,o=e))),e.$$.on_destroy.push((()=>i())),xh("deepl_settings",df),xh("text_direction",jt());let{closeWindow:a}=t,{websiteSettings:l}=t;s();let c,u,p,m,g,h,{replaceElement:f}=t,{dragContainerTo:_}=t,{platformBehaviour:v=re.default}=t,{isInput:y=!1}=t,{textProcessingMode:w}=t,b=!1,E=!1,T="visibility: hidden; opacity:0; height:0;";let S={x:0,y:0};function x(e){let t=L$({dropEvent:e,document:document,dragConfig:{dragOffset:S,dragElementRect:g,dragBarWidth:16}});t&&_(t)}Eh((()=>{n(15,h=o.isLoggedIn),setTimeout((()=>{n(7,T="")}),100),document.addEventListener("dragover",C$),document.addEventListener("drop",x),m=S_(u,(({clientHeight:e})=>{n(14,p=e)}))})),Th((()=>{document.removeEventListener("dragover",C$),document.removeEventListener("drop",x),m&&m()}));return e.$$set=e=>{"closeWindow"in e&&n(0,a=e.closeWindow),"websiteSettings"in e&&s(n(1,l=e.websiteSettings)),"replaceElement"in e&&n(12,f=e.replaceElement),"dragContainerTo"in e&&n(13,_=e.dragContainerTo),"platformBehaviour"in e&&n(2,v=e.platformBehaviour),"isInput"in e&&n(3,y=e.isInput),"textProcessingMode"in e&&n(4,w=e.textProcessingMode)},e.$$.update=()=>{var t,n;98305&e.$$.dirty&&!1===h&&!0===o.isLoggedIn&&a(),131073&e.$$.dirty&&r&&(!r.isReviewTranslateWriteWindowInjected||r.translationState!==d.none||r.translatedSnippet||r.error||a()),65536&e.$$.dirty&&(t=o.inlineTranslateTooltipPosition,c=f(p,t)),16384&e.$$.dirty&&(n=p,c=E||v===re.gdocs?f(n,o.inlineTranslateTooltipPosition):c)},[a,l,v,y,w,u,b,T,e=>{E=e},function(){n(6,b=!0)},function(){n(6,b=!1)},function(e){const t=k$(e,v);S=t.dragOffset,g=t.dragElementRect},f,_,p,h,o,r,()=>a(),function(e){Lh[e?"unshift":"push"]((()=>{u=e,n(5,u)}))}]}class aO extends af{constructor(e){super(),sf(this,e,sO,iO,$g,{closeWindow:0,websiteSettings:1,replaceElement:12,dragContainerTo:13,platformBehaviour:2,isInput:3,textProcessingMode:4})}}class lO{static HTML_TAG_NAME="deepl-review-translate-write-window";static createElement=(e=document)=>{const t=e.createElement(lO.HTML_TAG_NAME),n=new lO(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.dragContainerTo=n.dragContainerTo,t};#e=void 0;constructor(e){this.domElement=e,this.domElement.platformBehaviour=re.default,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.mainComponent,this.domElement.selectionRange;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=(e,t,n,o=!1)=>{const{deepl_inline_ui:r}=D;this.domElement.shadowContainer&&this.domElement.shadowContainer.childElementCount>0&&this.cleanupDOM(),this.domElement.platformBehaviour===re.default&&(this.domElement.selectionRange=window.getSelection().getRangeAt(0));let i=e(this.domElement.selectionRange);this.domElement.shadowContainer.appendChild(this.domElement.container);let s="visibility: initial !important; position: absolute; top: 0px; left: 0px; width: 100%; z-index: "+(r.z_index-100),a=`position: absolute; top: ${i.y}px; left: ${i.x-200}px; z-index: ${r.z_index-100};`;switch(this.domElement.platformBehaviour){case re.gdocs:a+="top: 600px; left: 10px;";break;case re.default:default:a+=""}this.domElement.shadowContainer.style.cssText=s,this.domElement.container.style.cssText=a,this.domElement.mainComponent=new aO({target:this.domElement.container,props:{closeWindow:t,websiteSettings:n,replaceElement:(t,n)=>{i=e(this.domElement.selectionRange);const o={coords:i,clientHeight:t,TOOLTIP_WIDTH:550,TRIGGER_MENU_ICON_HEIGHT:30,style:this.domElement.container.style};let r=n;const s=x$(o),[a,l]=$$(n),c=this.#e??{x:0,y:0};if(this.domElement.platformBehaviour===re.gdocs){for(const e of l)if(S$(e,o)){T$(e,o,c);break}}else for(const e of a)if(S$(e,o)){r="middle"!==e?e:void 0,E$(e,o,c);break}return{...s,current:r}},platformBehaviour:this.domElement.platformBehaviour,textProcessingMode:this.domElement.textProcessingMode,dragContainerTo:this.dragContainerTo,isInput:o}})};dragContainerTo=e=>{this.#e={y:parseInt(this.domElement.container.style.top)-e.y+(this.#e?.y??0),x:parseInt(this.domElement.container.style.left)-e.x+(this.#e?.x??0)},this.domElement.container.style.top=`${e.y}px`,this.domElement.container.style.left=`${e.x}px`};cleanupDOM=()=>{this.domElement.container.remove(),this.domElement.shadowContainer.remove(),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}const cO="deepl-writing-ui-added",dO=5e3;function uO(e){let t,n,o,r,i,s,a,l;return{c(){t=Xg("svg"),n=Xg("g"),o=Xg("path"),r=Xg("path"),i=Xg("path"),s=Xg("defs"),a=Xg("clipPath"),l=Xg("rect"),rh(o,"d","M1.85295 4.86015V12.4035C1.85295 12.7953 2.05334 13.1545 2.38029 13.3504L8.70832 17.1167C8.72427 17.1262 8.7404 17.1353 8.75668 17.1439L11.8727 19L11.8621 17.3672L11.8685 16.4605L11.8717 16.4747V16.1699C11.8717 15.9893 11.9613 15.8272 12.0993 15.7262L12.3015 15.6059L12.3991 15.5494L12.394 15.5508L16.091 13.3504C16.418 13.1545 16.6184 12.7953 16.6184 12.4035V4.86015C16.6184 4.46829 16.418 4.10909 16.091 3.91316L9.76299 0.146947C9.43604 -0.0489825 9.03527 -0.0489825 8.70832 0.146947L2.38029 3.92404C2.05334 4.11997 1.85295 4.47918 1.85295 4.86015Z"),rh(o,"fill","#0F2B46"),rh(r,"d","M6.68257 5.19787C7.10444 4.77336 7.77943 4.77336 8.2013 5.19787C8.50446 5.49621 8.60497 5.92588 8.50281 6.3113L11.4143 8.05411C11.4193 8.04902 11.4243 8.04396 11.4294 8.03894C11.8513 7.61442 12.5263 7.61442 12.9481 8.03894C13.4017 8.48522 13.4017 9.2254 12.9481 9.67168C12.5263 10.0962 11.8513 10.0962 11.4294 9.67168C11.111 9.35838 11.0162 8.90024 11.1448 8.50062L11.1341 8.50683L8.24372 6.78659C8.23005 6.80156 8.21591 6.81624 8.2013 6.83062C7.77943 7.25514 7.10444 7.25514 6.68257 6.83062C6.22906 6.38434 6.22906 5.64416 6.68257 5.19787Z"),rh(r,"fill","white"),rh(i,"d","M8.50819 11.5811L11.3455 9.88917L10.8182 9.58439L8.2574 11.1016C8.23971 11.0816 8.2212 11.062 8.20187 11.043C7.78 10.6185 7.10501 10.6185 6.68314 11.043C6.22963 11.4893 6.22963 12.2295 6.68314 12.6757C7.10501 13.1003 7.78 13.1003 8.20187 12.6757C8.50012 12.3822 8.60222 11.9616 8.50819 11.5811Z"),rh(i,"fill","white"),rh(n,"clip-path","url(#clip0)"),rh(l,"width","18.5294"),rh(l,"height","19"),rh(l,"fill","white"),rh(l,"transform","matrix(-1 0 0 1 18.5294 0)"),rh(a,"id","clip0"),rh(t,"width",e[1]),rh(t,"height",e[0]),rh(t,"class","deepl-logo-icon"),rh(t,"viewBox","0 0 19 19"),rh(t,"fill","none"),rh(t,"xmlns","http://www.w3.org/2000/svg")},m(e,c){Vg(e,t,c),jg(t,n),jg(n,o),jg(n,r),jg(n,i),jg(t,s),jg(s,a),jg(a,l)},p(e,[n]){2&n&&rh(t,"width",e[1]),1&n&&rh(t,"height",e[0])},i:wg,o:wg,d(e){e&&Yg(t)}}}function pO(e,t,n){let{height:o="16px"}=t,{width:r="16px"}=t;return e.$$set=e=>{"height"in e&&n(0,o=e.height),"width"in e&&n(1,r=e.width)},[o,r]}class mO extends af{constructor(e){super(),sf(this,e,pO,uO,$g,{height:0,width:1})}}function gO(e){let t,n,o,r,i,s,a,l,c,d,u,p,m=chrome.i18n.getMessage("gmail_char_limit_logged_in_body")+"";return{c(){t=Zg("div"),n=Jg(),o=Zg("div"),o.textContent=`${chrome.i18n.getMessage("gmail_char_limit_anon_title")}`,r=Jg(),i=Zg("div"),s=Jg(),a=Zg("div"),l=Zg("button"),l.textContent=`${chrome.i18n.getMessage("gmail_char_limit_anon_login_button")}`,c=Jg(),d=Zg("button"),d.textContent=`${chrome.i18n.getMessage("gmail_char_limit_anon_sign_up_button")}`,rh(t,"class","close-icon svelte-1pm9ytz"),rh(o,"class","title svelte-1pm9ytz"),rh(i,"class","body svelte-1pm9ytz"),rh(l,"class","secondary svelte-1pm9ytz"),rh(d,"class","primary svelte-1pm9ytz"),rh(a,"class","footer svelte-1pm9ytz")},m(g,h){Vg(g,t,h),Vg(g,n,h),Vg(g,o,h),Vg(g,r,h),Vg(g,i,h),i.innerHTML=m,Vg(g,s,h),Vg(g,a,h),jg(a,l),jg(a,c),jg(a,d),u||(p=[th(t,"click",e[3]),th(l,"click",e[4]),th(d,"click",e[5])],u=!0)},p:wg,i:wg,o:wg,d(e){e&&(Yg(t),Yg(n),Yg(o),Yg(r),Yg(i),Yg(s),Yg(a)),u=!1,Sg(p)}}}function hO(e){let t,n,o,r,i,s,a,l,c,d,u=chrome.i18n.getMessage("gmail_char_limit_logged_in_body")+"";return{c(){t=Zg("div"),n=Jg(),o=Zg("div"),o.textContent=`${chrome.i18n.getMessage("gmail_char_limit_logged_in_title")}`,r=Jg(),i=Zg("div"),s=Jg(),a=Zg("div"),l=Zg("button"),l.textContent=`${chrome.i18n.getMessage("gmail_char_limit_logged_in_cta_button")}`,rh(t,"class","close-icon svelte-1pm9ytz"),rh(o,"class","title svelte-1pm9ytz"),rh(i,"class","body svelte-1pm9ytz"),rh(l,"class","primary svelte-1pm9ytz"),rh(a,"class","footer svelte-1pm9ytz")},m(p,m){Vg(p,t,m),Vg(p,n,m),Vg(p,o,m),Vg(p,r,m),Vg(p,i,m),i.innerHTML=u,Vg(p,s,m),Vg(p,a,m),jg(a,l),c||(d=[th(t,"click",e[3]),th(l,"click",e[5])],c=!0)},p:wg,i:wg,o:wg,d(e){e&&(Yg(t),Yg(n),Yg(o),Yg(r),Yg(i),Yg(s),Yg(a)),c=!1,Sg(d)}}}function fO(e){let t,n;return t=new Wy({props:{error:{error:e[0]},close:e[3],config:{nicheIntegration:re.gmail}}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.error={error:e[0]}),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function _O(e){let t,n,o,r,i,s;const a=[fO,hO,gO],l=[];function c(e,t){return e[2]?0:e[1]?1:2}return n=c(e),o=l[n]=a[n](e),{c(){t=Zg("div"),o.c(),rh(t,"class","dl-gmail-character-limit-popup svelte-1pm9ytz"),rh(t,"dir",jt()),uh(t,"is-translator-limit",!e[2])},m(o,a){Vg(o,t,a),l[n].m(t,null),r=!0,i||(s=[Dg(__.call(null,t,{isShadow:!0,exceptions:[".deepl-gmail-message-container",".deepl-gmail-write-toolbar"]})),th(t,"click_outside",e[9])],i=!0)},p(e,[i]){let s=n;n=c(e),n===s?l[n].p(e,i):(qh(),Kh(l[s],1,1,(()=>{l[s]=null})),Vh(),o=l[n],o?o.p(e,i):(o=l[n]=a[n](e),o.c()),Yh(o,1),o.m(t,null)),(!r||4&i)&&uh(t,"is-translator-limit",!e[2])},i(e){r||(Yh(o),r=!0)},o(e){Kh(o),r=!1},d(e){e&&Yg(t),l[n].d(),i=!1,Sg(s)}}}function vO(e,n,o){let r,i;kg(e,df,(e=>o(8,i=e))),xh("text_direction",jt());let{onCloseCharLimitPopup:s}=n,{cleanUpDOM:a}=n,{limitType:l}=n,c=!1,d=!1;const u=()=>{s&&s(),a&&a()};return e.$$set=e=>{"onCloseCharLimitPopup"in e&&o(6,s=e.onCloseCharLimitPopup),"cleanUpDOM"in e&&o(7,a=e.cleanUpDOM),"limitType"in e&&o(0,l=e.limitType)},e.$$.update=()=>{1&e.$$.dirty&&o(2,r=l===If||l===Af),256&e.$$.dirty&&o(1,d=!0===i.isLoggedIn)},[l,d,r,u,()=>{c||(t({action:"dlTrackUILocationClicked",payload:B.gmailCharLimitLogin}),c=!0,t({action:"dlRequestLogin"}).then((()=>{c=!1,u()})).catch((()=>{c=!1})))},()=>{t({action:"dlExternalURLRedirect",payload:{destination:fv,utmContent:"gmail_customization"}}),u()},s,a,i,()=>{u()}]}class yO extends af{constructor(e){super(),sf(this,e,vO,_O,$g,{onCloseCharLimitPopup:6,cleanUpDOM:7,limitType:0})}}class wO{static HTML_TAG_NAME="deepl-gmail-character-limit-popup";static createElement=(e=document)=>{const t=e.createElement(wO.HTML_TAG_NAME),n=new wO(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=({onCloseCharLimitPopup:e,limitType:t})=>{this.mainComponent=new yO({target:this.domElement.shadowContainer,props:{cleanUpDOM:this.domElement.cleanupDOM,onCloseCharLimitPopup:e,limitType:t}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function bO(e){let t,n,o,r;const i=[SO,TO],s=[];function a(e,t){return e[8]?0:1}return n=a(e),o=s[n]=i[n](e),{c(){t=Zg("div"),o.c(),rh(t,"class","dl-gmail-translate-toolbar svelte-eo75ae"),uh(t,"hasLoaded",e[3]),uh(t,"isExpanded",e[4])},m(e,o){Vg(e,t,o),s[n].m(t,null),r=!0},p(e,l){let c=n;n=a(e),n===c?s[n].p(e,l):(qh(),Kh(s[c],1,1,(()=>{s[c]=null})),Vh(),o=s[n],o?o.p(e,l):(o=s[n]=i[n](e),o.c()),Yh(o,1),o.m(t,null)),(!r||8&l[0])&&uh(t,"hasLoaded",e[3]),(!r||16&l[0])&&uh(t,"isExpanded",e[4])},i(e){r||(Yh(o),r=!0)},o(e){Kh(o),r=!1},d(e){e&&Yg(t),s[n].d()}}}function EO(e){let t,n,o,r,i,s,a,l,c;return o=new T_({props:{tooltip:chrome.i18n.getMessage("gmail_compose_undo_icon"),zIndex:e[14].z_index,$$slots:{default:[kO]},$$scope:{ctx:e}}}),s=new T_({props:{tooltip:chrome.i18n.getMessage("gmail_compose_accept_icon"),zIndex:e[14].z_index,$$slots:{default:[LO]},$$scope:{ctx:e}}}),{c(){t=Zg("div"),n=Zg("div"),nf(o.$$.fragment),r=Jg(),i=Zg("div"),nf(s.$$.fragment),rh(n,"class","wrapper undo-wrapper svelte-eo75ae"),rh(i,"class","wrapper accept-wrapper svelte-eo75ae"),rh(t,"class","accept-changes svelte-eo75ae")},m(d,u){Vg(d,t,u),jg(t,n),of(o,n,null),jg(t,r),jg(t,i),of(s,i,null),a=!0,l||(c=[Dg(__.call(null,t,{isShadow:!0,exceptions:[".deepl-gmail-message-container"]})),th(t,"click_outside",e[17])],l=!0)},p(e,t){const n={};16777216&t[1]&&(n.$$scope={dirty:t,ctx:e}),o.$set(n);const r={};16777216&t[1]&&(r.$$scope={dirty:t,ctx:e}),s.$set(r)},i(e){a||(Yh(o.$$.fragment,e),Yh(s.$$.fragment,e),a=!0)},o(e){Kh(o.$$.fragment,e),Kh(s.$$.fragment,e),a=!1},d(e){e&&Yg(t),rf(o),rf(s),l=!1,Sg(c)}}}function TO(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w,b,E,T,S,x,$,C=chrome.i18n.getMessage("gmail_compose_translate_button")+"",k=nt(e[13],be.TRANSLATOR);i=new R_({props:{selectedOption:e[1],items:e[7],placeholder:"...",allowLabelHtml:!0}}),i.$on("valueselected",e[21]),p=new mb({props:{value:e[12]||e[13].targetLanguageUserInput,disabled:!1,fontSize:"sm"}}),p.$on("selection",e[22]);let L=k&&xO();return T=new T_({props:{isEnabled:!0,tooltip:rt(e[13],be.WRITE)?chrome.i18n.getMessage("input_translation_tooltip_improve_disabled_by_admin"):chrome.i18n.getMessage("input_translation_tooltip_improve_supported_lang"),zIndex:e[14].z_index,multiline:!0,$$slots:{default:[CO]},$$scope:{ctx:e}}}),{c(){t=Zg("div"),n=Zg("div"),n.textContent=`${chrome.i18n.getMessage("gmail_compose_translate_from")}`,o=Jg(),r=Zg("div"),nf(i.$$.fragment),s=Jg(),a=Zg("div"),l=Zg("div"),l.textContent=`${chrome.i18n.getMessage("gmail_compose_translate_into")}`,c=Jg(),d=Zg("div"),u=Zg("div"),nf(p.$$.fragment),m=Jg(),g=Zg("div"),h=Zg("button"),f=Qg(C),_=Jg(),L&&L.c(),y=Jg(),w=Zg("div"),b=Jg(),E=Zg("div"),nf(T.$$.fragment),rh(n,"class","translation-label svelte-eo75ae"),rh(r,"class","wrapper shortcode-wrapper svelte-eo75ae"),rh(t,"class","translation-selection-wrapper svelte-eo75ae"),rh(l,"class","translation-label svelte-eo75ae"),rh(u,"class","dropdown"),rh(d,"class","wrapper language-wrapper svelte-eo75ae"),rh(a,"class","translation-selection-wrapper svelte-eo75ae"),h.disabled=v=e[5]||!e[12],rh(h,"class","svelte-eo75ae"),uh(h,"isTranslating",e[5]),rh(g,"class","wrapper button-wrapper"),rh(w,"class","divider svelte-eo75ae"),rh(E,"class","wrapper button-wrapper")},m(v,C){Vg(v,t,C),jg(t,n),jg(t,o),jg(t,r),of(i,r,null),Vg(v,s,C),Vg(v,a,C),jg(a,l),jg(a,c),jg(a,d),jg(d,u),of(p,u,null),Vg(v,m,C),Vg(v,g,C),jg(g,h),jg(h,f),jg(h,_),L&&L.m(h,null),Vg(v,y,C),Vg(v,w,C),Vg(v,b,C),Vg(v,E,C),of(T,E,null),S=!0,x||($=th(h,"mousedown",oh(nh(e[15]))),x=!0)},p(e,t){const n={};2&t[0]&&(n.selectedOption=e[1]),128&t[0]&&(n.items=e[7]),i.$set(n);const o={};12288&t[0]&&(o.value=e[12]||e[13].targetLanguageUserInput),p.$set(o),8192&t[0]&&(k=nt(e[13],be.TRANSLATOR)),k?L?8192&t[0]&&Yh(L,1):(L=xO(),L.c(),Yh(L,1),L.m(h,null)):L&&(qh(),Kh(L,1,1,(()=>{L=null})),Vh()),(!S||4128&t[0]&&v!==(v=e[5]||!e[12]))&&(h.disabled=v),(!S||32&t[0])&&uh(h,"isTranslating",e[5]);const r={};8192&t[0]&&(r.tooltip=rt(e[13],be.WRITE)?chrome.i18n.getMessage("input_translation_tooltip_improve_disabled_by_admin"):chrome.i18n.getMessage("input_translation_tooltip_improve_supported_lang")),8288&t[0]|16777216&t[1]&&(r.$$scope={dirty:t,ctx:e}),T.$set(r)},i(e){S||(Yh(i.$$.fragment,e),Yh(p.$$.fragment,e),Yh(L),Yh(T.$$.fragment,e),S=!0)},o(e){Kh(i.$$.fragment,e),Kh(p.$$.fragment,e),Kh(L),Kh(T.$$.fragment,e),S=!1},d(e){e&&(Yg(t),Yg(s),Yg(a),Yg(m),Yg(g),Yg(y),Yg(w),Yg(b),Yg(E)),rf(i),rf(p),L&&L.d(),rf(T),x=!1,$()}}}function SO(e){let t,n;return t=new AT({}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p:wg,i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function xO(e){let t,n;return t=new qx({props:{size:16,marginStart:8,alternateColor:"white"}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function $O(e){let t,n;return t=new qx({props:{size:16,marginStart:8,alternateColor:"white"}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function CO(e){let t,n,o,r,i,s,a,l=chrome.i18n.getMessage("gmail_compose_improve_button")+"",c=nt(e[13],be.WRITE),d=c&&$O();return{c(){t=Zg("button"),n=Qg(l),o=Jg(),d&&d.c(),t.disabled=r=rt(e[13],be.WRITE)||e[5]||!e[6],rh(t,"class","svelte-eo75ae"),uh(t,"isTranslating",e[5])},m(r,l){Vg(r,t,l),jg(t,n),jg(t,o),d&&d.m(t,null),i=!0,s||(a=th(t,"mousedown",oh(nh(e[16]))),s=!0)},p(e,n){8192&n[0]&&(c=nt(e[13],be.WRITE)),c?d?8192&n[0]&&Yh(d,1):(d=$O(),d.c(),Yh(d,1),d.m(t,null)):d&&(qh(),Kh(d,1,1,(()=>{d=null})),Vh()),(!i||8288&n[0]&&r!==(r=rt(e[13],be.WRITE)||e[5]||!e[6]))&&(t.disabled=r),(!i||32&n[0])&&uh(t,"isTranslating",e[5])},i(e){i||(Yh(d),i=!0)},o(e){Kh(d),i=!1},d(e){e&&Yg(t),d&&d.d(),s=!1,a()}}}function kO(e){let t,n,o;return{c(){t=Zg("button"),t.innerHTML='<svg height="32px" width="32px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 8.33398H10.8333C14.5152 8.33398 17.5 11.3188 17.5 15.0007V16.6673M2.5 8.33398L7.5 13.334M2.5 8.33398L7.5 3.33398" stroke="#727A83" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-eo75ae"></path></svg>',rh(t,"class","confirm-button svelte-eo75ae")},m(r,i){Vg(r,t,i),n||(o=th(t,"click",oh(nh(e[18]))),n=!0)},p:wg,d(e){e&&Yg(t),n=!1,o()}}}function LO(e){let t,n,o;return{c(){t=Zg("button"),t.innerHTML='<svg width="24px" height="24px" class="checkmark" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 7L5 11L15 1" stroke="#727A83" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-eo75ae"></path></svg>',rh(t,"class","confirm-button right svelte-eo75ae")},m(r,i){Vg(r,t,i),n||(o=th(t,"click",oh(nh(e[17]))),n=!0)},p:wg,d(e){e&&Yg(t),n=!1,o()}}}function IO(e){let t,n,o,r,i,s,a,l,c,d,u,p;const m=[EO,bO],g=[];function h(e,t){return e[2]?0:1}return o=h(e),r=g[o]=m[o](e),l=new mO({props:{height:"20px",width:"20px"}}),{c(){t=Zg("div"),n=Zg("div"),r.c(),i=Jg(),s=Zg("div"),a=Zg("div"),nf(l.$$.fragment),rh(a,"class","wrapper icon-wrapper svelte-eo75ae"),rh(s,"class","dl-toolbar-closed svelte-eo75ae"),rh(n,"class","dl-toolbar-positioner svelte-eo75ae"),rh(t,"class","deepl-gmail-write-toolbar svelte-eo75ae"),rh(t,"style",c=`top: ${e[9]}px; left: ${e[10]}px`),rh(t,"dir",jt())},m(r,c){Vg(r,t,c),jg(t,n),g[o].m(n,null),jg(n,i),jg(n,s),jg(s,a),of(l,a,null),d=!0,u||(p=[th(a,"click",e[23]),th(t,"click",oh(nh(e[24]))),Dg(__.call(null,t,{isShadow:!0,exceptions:[".deepl-gmail-message-container"]})),th(t,"click_outside",e[25])],u=!0)},p(e,s){let a=o;o=h(e),o===a?g[o].p(e,s):(qh(),Kh(g[a],1,1,(()=>{g[a]=null})),Vh(),r=g[o],r?r.p(e,s):(r=g[o]=m[o](e),r.c()),Yh(r,1),r.m(n,i)),(!d||1536&s[0]&&c!==(c=`top: ${e[9]}px; left: ${e[10]}px`))&&rh(t,"style",c)},i(e){d||(Yh(r),Yh(l.$$.fragment,e),d=!0)},o(e){Kh(r),Kh(l.$$.fragment,e),d=!1},d(e){e&&Yg(t),g[o].d(),rf(l),u=!1,Sg(p)}}}function AO(e,n,o){let r;kg(e,df,(e=>o(13,r=e))),xh("text_direction",jt());const{deepl_inline_ui:i}=D;let{messageContainer:s}=n,{updateLockStatus:a}=n,{subjectInput:l}=n;const c="WRITE",d="TRANSLATE";let u,p,m,g,h,f,_,v,y,w,b,E,T,S,x=null,$=!1,C=!1,k=!1,L=!1;xh("deepl_settings",df),Eh((async()=>{s&&(s.addEventListener("input",A),s.addEventListener("paste",A),s.classList.add("deepl-gmail-message-container"),I(),l&&l.value&&(f=l.value)),o(7,g=dD()),o(12,S=r.targetLanguageUserInput),z(),j(),window.addEventListener("popstate",N)})),Th((()=>{window.removeEventListener("popstate",N),s.removeEventListener("input",A),s.removeEventListener("paste",A),s.classList.remove("deepl-gmail-message-container"),F()}));const I=async()=>{const e=ft(s.innerHTML),t=e.replace(/<[^>]+>/g,"");const n=await Ut(t);n.length&&(e=>{const t=g.find((t=>t.value===e));t&&o(1,x=t)})(n)},A=()=>{$&&M(!1),R()},R=()=>{I()},M=(e,t)=>{if(!e)return o(2,$=!1),p=null,void(u=null);o(2,$=!0),p=t},N=()=>{document.querySelectorAll(wO.HTML_TAG_NAME).forEach((e=>{e.cleanupDOM,e.remove()}))},O=(e,t=!0)=>{for(;null!==e;){const n=e.getAttribute("role");if("TABLE"===e.tagName&&("dialog"===n||"presentation"===n))return t?e.parentElement:e;e=e.parentElement}return null},P=e=>{const t=O(s);t&&(_=wO.createElement(),_.createDOM({onCloseCharLimitPopup:N,limitType:e}),t.appendChild(_))},U=()=>{o(8,v=!0)},B=()=>{o(8,v=!1)},W=e=>{Rw.update({error:e.message?e.message:e})},z=()=>{y=setInterval(H,800)},F=()=>{clearInterval(y)},H=()=>{const e=JSON.stringify(s.getBoundingClientRect());e!==w&&(w=e,j())},j=()=>{const e=jt(),t=O(s),n=t.getBoundingClientRect();if(!t||!n)return;const r=(()=>{const e=O(s),t=e.getBoundingClientRect();if(!e||!t)return;return e.querySelector("[role=toolbar]")})(),i=(()=>{const e=O(s),t=e.getBoundingClientRect();if(!e||!t)return;const n=e.querySelector("[role='group']"),o=n.querySelectorAll("[role='button']");if(!n||!o)return;const r=Array.from(o);return r[r.length-1]})();if(r&&0!==r.getBoundingClientRect().top){const t=r.getBoundingClientRect();return i&&i.getBoundingClientRect()?(o(9,b=t.top-10),void o(10,E="ltr"===e?i.getBoundingClientRect().right-30:i.getBoundingClientRect().right+30)):(o(9,b=t.top-10),void o(10,E="ltr"===e?n.right-45:n.left+45))}if(!i||!i.getBoundingClientRect())return;const a=i.getBoundingClientRect();o(9,b=a.top-18),o(10,E="ltr"===e?a.right-30:a.right+30)},G=({lang:e,sourceLength:t,targetLang:n,targetLength:o})=>{u={lang:e,sourceLength:t,targetLang:n,targetLength:o,nicheIntegration:re.gmail}},q=({sourceLang:e,sourceLength:t,targetLang:n,targetLength:o})=>{u={sourceLang:e,sourceLength:t,targetLang:n,targetLength:o,nicheIntegration:re.gmail}},V=e=>{t({action:"dlTrackTranslateAcceptOrRevertEvent",payload:{eventType:e?Ie:Ae,acceptOrRevertMetadata:u}})},Y=e=>{t({action:"dlTrackGmailCharLimitReached",payload:{gmailActionType:_x(e)}})};return e.$$set=e=>{"messageContainer"in e&&o(19,s=e.messageContainer),"updateLockStatus"in e&&o(0,a=e.updateLockStatus),"subjectInput"in e&&o(20,l=e.subjectInput)},e.$$.update=()=>{2&e.$$.dirty[0]&&o(7,g=dD(x)),2&e.$$.dirty[0]&&x&&x.value&&o(6,L=Ft(x.value))},[a,x,$,C,k,m,L,g,v,b,E,T,S,r,i,async()=>{if(!s)return;h=ft(s.innerHTML);const e=l&&l.value;e&&(f=l.value);const n=s.innerText,i=n.length>dO;if(!nt(r,be.TRANSLATOR)&&i)return P(),void Y(Pe.COMPOSE_VIEW_TRANSLATE);U();const a=T?T.value:x.value;try{if(await Hk(s,{targetLang:S,nicheIntegration:re.gmail,isHtml:!0,clearInnerHTML:!0}),e){const e=await t({action:"dlRequestInputTranslation",payload:{requests:[{text:l.value}],domainName:window.location.hostname,websiteLanguage:a,targetLang:S,skipDapReporting:!0}});if(e[0]?.text){const t=e[0]?.text;o(20,l.value=t,l)}}o(5,m=!1),M(!0,d),B(),q({sourceLang:a,targetLang:S,sourceLength:n.length,targetLength:s.innerText.length})}catch(e){W(e),B(),o(5,m=!1),M(!1)}},async()=>{if(!s)return;const e=l&&l.value;h=ft(s.innerHTML),e&&(f=l.value);const n=s.innerText;o(5,m=!0),U();const r=x.value,i="FR"===r||"ES"===r;try{if(await Hk(s,{isWriteRequest:!0,sourceLang:r,nicheIntegration:re.gmail,isHtml:!0,clearInnerHTML:!0,removeFormatting:i}),e){const e=await t({action:"dlRequestImproveWriting",payload:{requests:[{text:l.value}],domainName:window.location.hostname,websiteLanguage:r,sourceLang:r,skipDapReporting:!0}});if(e[0]?.text){const t=e[0]?.text;o(20,l.value=t,l)}}G({lang:r,sourceLength:n.length,targetLength:s.innerText.length}),o(5,m=!1),M(!0,c),B()}catch(e){switch(e.error){case If:case Af:P(e.error),Y(Pe.COMPOSE_VIEW_IMPROVE);break;default:W(e)}o(5,m=!1),M(!1),B()}},()=>{p===d?V(!0):tB({eventType:Ce,...u}),h=null,f=null,M(!1),I(),o(4,k=!1)},()=>{p===d?V(!1):tB({eventType:ke,...u}),o(19,s.innerHTML=ft(h),s),l&&f&&o(20,l.value=f,l),I(),M(!1)},s,l,e=>{o(11,T=e.detail.selectedOption)},async e=>{o(12,S=e.detail.selectedOption.value)},()=>{a(!0),o(4,k=!k),o(3,C=!0)},()=>{a(!0)},()=>{a(!1),o(4,k=!1)}]}class RO extends af{constructor(e){super(),sf(this,e,AO,IO,$g,{messageContainer:19,updateLockStatus:0,subjectInput:20},null,[-1,-1])}}class MO{static HTML_TAG_NAME="deepl-gmail-message-write-ui";static createElement=(e=document)=>{const t=e.createElement(MO.HTML_TAG_NAME),n=new MO(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=({container:e,subjectInput:t,updateLockStatus:n})=>{this.mainComponent=new RO({target:this.domElement.shadowContainer,props:{messageContainer:e,updateLockStatus:n,subjectInput:t}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function NO(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w,b=e[3]&&OO(),E=null!=e[5]&&DO(e);return c=new mb({props:{disabled:e[0],websiteSettings:Rw,value:e[1].selectedTargetLanguage,extraPadding:!0}}),c.$on("selection",e[16]),p=new T_({props:{tooltip:chrome.i18n.getMessage("gmail_reading_translate_button"),multiline:!1,zIndex:3,isEnabled:e[8]<zO,$$slots:{default:[PO]},$$scope:{ctx:e}}}),h=new T_({props:{tooltip:chrome.i18n.getMessage("gmail_reading_view_original_button"),multiline:!1,zIndex:3,$$slots:{default:[UO]},$$scope:{ctx:e}}}),v=new T_({props:{tooltip:chrome.i18n.getMessage("gmail_reading_forward_button"),multiline:!1,zIndex:2,isEnabled:e[8]<zO,$$slots:{default:[BO]},$$scope:{ctx:e}}}),{c(){t=Zg("div"),n=Zg("div"),o=Zg("span"),r=Jg(),b&&b.c(),i=Jg(),s=Zg("div"),E&&E.c(),a=Jg(),l=Zg("div"),nf(c.$$.fragment),d=Jg(),u=Zg("div"),nf(p.$$.fragment),m=Jg(),g=Zg("div"),nf(h.$$.fragment),f=Jg(),_=Zg("div"),nf(v.$$.fragment),rh(o,"class","deepl-logo svelte-1lme20r"),rh(s,"class","language-selection-wrapper svelte-1lme20r"),rh(l,"class","language-selection-wrapper svelte-1lme20r"),rh(n,"class","left-side svelte-1lme20r"),rh(_,"class","right-side svelte-1lme20r"),rh(t,"class","dl-gmail-email-toolbar svelte-1lme20r"),rh(t,"dir",jt()),Oh((()=>e[17].call(t))),uh(t,"smallMode",e[8]<zO)},m(T,S){Vg(T,t,S),jg(t,n),jg(n,o),jg(n,r),b&&b.m(n,null),jg(n,i),jg(n,s),E&&E.m(s,null),jg(n,a),jg(n,l),of(c,l,null),jg(n,d),jg(n,u),of(p,u,null),jg(n,m),jg(n,g),of(h,g,null),jg(t,f),jg(t,_),of(v,_,null),y=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=Zg("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const o=dh();let r;return o?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=th(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{r=th(n.contentWindow,"resize",t),t()}),jg(e,n),()=>{(o||r&&n.contentWindow)&&r(),Yg(n)}}(t,e[17].bind(t)),w=!0},p(e,o){e[3]?b?8&o[0]&&Yh(b,1):(b=OO(),b.c(),Yh(b,1),b.m(n,i)):b&&(qh(),Kh(b,1,1,(()=>{b=null})),Vh()),null!=e[5]?E?(E.p(e,o),32&o[0]&&Yh(E,1)):(E=DO(e),E.c(),Yh(E,1),E.m(s,null)):E&&(qh(),Kh(E,1,1,(()=>{E=null})),Vh());const r={};1&o[0]&&(r.disabled=e[0]),2&o[0]&&(r.value=e[1].selectedTargetLanguage),c.$set(r);const a={};256&o[0]&&(a.isEnabled=e[8]<zO),1&o[0]|8&o[1]&&(a.$$scope={dirty:o,ctx:e}),p.$set(a);const l={};4&o[0]|8&o[1]&&(l.$$scope={dirty:o,ctx:e}),h.$set(l);const d={};256&o[0]&&(d.isEnabled=e[8]<zO),4&o[0]|8&o[1]&&(d.$$scope={dirty:o,ctx:e}),v.$set(d),(!w||256&o[0])&&uh(t,"smallMode",e[8]<zO)},i(e){w||(Yh(b),Yh(E),Yh(c.$$.fragment,e),Yh(p.$$.fragment,e),Yh(h.$$.fragment,e),Yh(v.$$.fragment,e),w=!0)},o(e){Kh(b),Kh(E),Kh(c.$$.fragment,e),Kh(p.$$.fragment,e),Kh(h.$$.fragment,e),Kh(v.$$.fragment,e),w=!1},d(e){e&&Yg(t),b&&b.d(),E&&E.d(),rf(c),rf(p),rf(h),rf(v),y()}}}function OO(e){let t,n;return t=new qx({props:{size:24,translator:!0}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function DO(e){let t,n;return t=new mb({props:{disabled:e[0],value:e[5],websiteSettings:Rw,customClass:"borderless",fontSize:"sm",extraPadding:!0}}),t.$on("selection",e[15]),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};1&n[0]&&(o.disabled=e[0]),32&n[0]&&(o.value=e[5]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function PO(e){let t,n,o,r,i,s;return{c(){t=Zg("button"),n=Zg("div"),n.innerHTML='<svg width="20px" height="20px" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path id="Icon" d="M1.5 3.16667H11.5M6.5 1.5V3.16667M7.37349 11.0833C6.10069 9.76482 5.06727 8.21371 4.34322 6.5M9.41667 14H15.25M8.16667 16.5L12.3333 8.16667L16.5 16.5M9.62594 3.16667C8.81922 7.97518 5.72474 12.0079 1.5 14.1075" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',o=Jg(),r=Zg("span"),r.textContent=`${chrome.i18n.getMessage("gmail_reading_translate_button")}`,rh(n,"class","icon svelte-1lme20r"),rh(r,"class","svelte-1lme20r"),rh(t,"class","translate-button svelte-1lme20r"),t.disabled=e[0],rh(t,"paddingx","none")},m(a,l){Vg(a,t,l),jg(t,n),jg(t,o),jg(t,r),i||(s=th(t,"click",oh(nh(e[10]))),i=!0)},p(e,n){1&n[0]&&(t.disabled=e[0])},d(e){e&&Yg(t),i=!1,s()}}}function UO(e){let t,n,o,r,i,s;return{c(){t=Zg("button"),n=Xg("svg"),o=Xg("path"),rh(o,"d","M7 16L3 12M3 12L7 8M3 12L21 12"),rh(o,"stroke",r=e[2]?"#000":"#848F9B"),rh(o,"stroke-width","1.5"),rh(o,"stroke-linecap","round"),rh(o,"stroke-linejoin","round"),rh(n,"width","24"),rh(n,"height","24"),rh(n,"viewBox","0 0 24 24"),rh(n,"fill","none"),rh(n,"xmlns","http://www.w3.org/2000/svg"),rh(n,"class","svelte-1lme20r"),rh(t,"class","show-original-button svelte-1lme20r"),rh(t,"paddingx","none"),uh(t,"enabled",e[2])},m(r,a){Vg(r,t,a),jg(t,n),jg(n,o),i||(s=th(t,"click",oh(nh(e[9]))),i=!0)},p(e,n){4&n[0]&&r!==(r=e[2]?"#000":"#848F9B")&&rh(o,"stroke",r),4&n[0]&&uh(t,"enabled",e[2])},d(e){e&&Yg(t),i=!1,s()}}}function BO(e){let t,n,o,r,i,s,a,l,c;return{c(){t=Zg("button"),n=Xg("svg"),o=Xg("path"),i=Jg(),s=Zg("span"),s.textContent=`${chrome.i18n.getMessage("gmail_reading_forward_button")}`,rh(o,"d","M17 8L21 12M21 12L17 16M21 12L3 12"),rh(o,"stroke",r=e[2]?"#000":"#848F9B"),rh(o,"stroke-width","1.5"),rh(o,"stroke-linecap","round"),rh(o,"stroke-linejoin","round"),rh(n,"width","24"),rh(n,"height","24"),rh(n,"viewBox","0 0 24 24"),rh(n,"fill","none"),rh(n,"xmlns","http://www.w3.org/2000/svg"),rh(n,"class","svelte-1lme20r"),rh(s,"class","svelte-1lme20r"),t.disabled=a=!e[2],rh(t,"class","forward-button svelte-1lme20r"),rh(t,"paddingx","none")},m(r,a){Vg(r,t,a),jg(t,n),jg(n,o),jg(t,i),jg(t,s),l||(c=th(t,"click",e[11]),l=!0)},p(e,n){4&n[0]&&r!==(r=e[2]?"#000":"#848F9B")&&rh(o,"stroke",r),4&n[0]&&a!==(a=!e[2])&&(t.disabled=a)},d(e){e&&Yg(t),l=!1,c()}}}function WO(e){let t,n,o=e[6]&&e[7]&&NO(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,n){e[6]&&e[7]?o?(o.p(e,n),192&n[0]&&Yh(o,1)):(o=NO(e),o.c(),Yh(o,1),o.m(t.parentNode,t)):o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh())},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}const zO=900;function FO(e,n,o){let r,i,s,a,l,c,d,u,p;kg(e,df,(e=>o(1,r=e))),xh("text_direction",jt());let m,g,h,f,_,v=!1,y=!1,w=!1,b=!1,E=!1,{container:T}=n;Eh((async()=>{L(),I(),await C(),o(4,m=r.selectedTargetLanguage),setTimeout((()=>{o(7,E=!0)}),200),window.addEventListener("popstate",$)})),Th((()=>{window.removeEventListener("popstate",$)}));const S=()=>{i.innerText=s.innerText,i.innerHTML=ft(s.innerHTML),d.innerText=c,o(13,y=!1)},x=e=>{d&&(e?d.classList.add("deepl-gmail-loading-skeleton"):d.classList.remove("deepl-gmail-loading-skeleton"))},$=()=>{document.querySelectorAll(wO.HTML_TAG_NAME).forEach((e=>{e.cleanupDOM,e.remove()}))},C=async()=>{if(!a)return;if(u=await Ut(a),o(6,f=Dt(u)),!f)return;const e=Wt(Pt(u));o(5,h=e)},k=async()=>{const e=`<a href="https://www.deepl.com/pro" target="_blank">${chrome.i18n.getMessage("gmail_forwarding_link")}</a>`;let t;const n=ft(i.innerHTML);if(v)t=n;else{t=`${n}<br>${`<p style="text-align: center;">${chrome.i18n.getMessage("gmail_forwarding_title")} ${e}</p>`}`}const r=(new DOMParser).parseFromString(t,"text/html"),s={html:t,text:Zf(r.body)},a=document.querySelector("[contenteditable='true']");a.focus(),setTimeout((()=>{a.focus(),p_(a,s,!1),o(14,b=!1)}),500)},L=()=>{const e=Array.from(T.children).filter((e=>"div"===e.tagName.toLowerCase()));if(3!==e.length)return;const t=e[1];if(!t)return;const n=Array.from(t.children).filter((e=>"div"===e.tagName.toLowerCase()));if(!n||!n.length)return;const o=n[2];o&&(s=o.cloneNode(!0),i=o,a=o.innerText)},I=()=>{const e=document.querySelector("[data-thread-perm-id]");e&&(d=e,l=e.innerText,c=e.innerText)};return e.$$set=e=>{"container"in e&&o(12,T=e.container)},e.$$.update=()=>{24577&e.$$.dirty[0]&&o(2,p=y&&!w&&!b),2&e.$$.dirty[0]&&o(3,v=nt(r,be.TRANSLATOR))},[w,r,p,v,m,h,f,E,_,S,async()=>{if(!i)return;const{domElements:e,strings:n,cloneContainer:r}=Nk(i),s=n.reduce(((e,t)=>e+t.length),0);if(!v&&s>dO)return t({action:"dlTrackGmailCharLimitReached",payload:{gmailActionType:_x(Pe.READING_VIEW_TRANSLATE)}}),g=wO.createElement(),g.createDOM({onCloseCharLimitPopup:$}),void document.body.appendChild(g);o(0,w=!0);const a=n.map((e=>({text:e}))),c=[{text:l}],u=Pk(a.map((e=>e.text)));(e=>{if(!e)return;const{height:t}=e.getBoundingClientRect(),n=Math.floor(t/20),o=[];for(let e=0;e<n;e++)o.push(`<div style="width: ${r=35,i=99,Math.floor(Math.random()*(i-r+1))+r}%" class="deepl-gmail-loading-skeleton">line</div>`);var r,i;e.innerHTML=ft(o.join(""))})(i),x(!0);try{let[n,s]=await Promise.all([t({action:"dlRequestGmailReceivedEmailTranslation",payload:{targetLang:m,sourceLang:h,requests:u.simplifiedHtml.map((e=>({text:e}))),domainName:window.location.hostname}}),t({action:"dlRequestGmailReceivedEmailTranslation",payload:{targetLang:m,sourceLang:h,requests:c,domainName:window.location.hostname}})]);if(n=n.map((e=>({...e,text:Uk(u.map,e.text),texts:e.texts.map((e=>Uk(u.map,e)))}))),TT({strings:n[0]?.texts,domElements:e}),i.innerText=r.innerText,i.innerHTML=ft(r.innerHTML),x(!1),s[0]?.text){const e=s[0]?.text;l=e,d.innerText=e}o(0,w=!1),o(13,y=!0)}catch(e){(e=>{Rw.update({error:e.message?e.message:e})})(e),o(0,w=!1),S()}},()=>{o(14,b=!0);if(!hD())return void o(14,b=!1);const e=fD();e?(e.scrollIntoView(),setTimeout((()=>{mD(e),gD("[contenteditable='true']",k)}),300)):o(14,b=!1)},T,y,b,e=>{o(5,h=e.detail.selectedOption.value)},e=>{o(4,m=e.detail.selectedOption.value)},function(){_=this.offsetWidth,o(8,_)}]}class HO extends af{constructor(e){super(),sf(this,e,FO,WO,$g,{container:12},null,[-1,-1])}}class jO{static HTML_TAG_NAME="deepl-gmail-translate-email-toolbar";static createElement=(e=document)=>{const t=e.createElement(jO.HTML_TAG_NAME),n=new jO(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=({container:e})=>{this.mainComponent=new HO({target:this.domElement.shadowContainer,props:{container:e}})};cleanupDOM(){this.shadowContainer.remove(),this.mainComponent&&this.mainComponent.$destroy()}}function GO(e){let t;return{c(){t=Zg("div"),rh(t,"class","dot svelte-o9amr0")},m(e,n){Vg(e,t,n)},d(e){e&&Yg(t)}}}function qO(e){let t,n,o,r,i,s,a,l,c,d,u,p,m=!e[0].wasGmailOnboardingShown&&VO();return c=new NA({props:{checked:e[0].isGmailEnabled}}),c.$on("change",e[6]),{c(){t=Zg("div"),n=Zg("div"),m&&m.c(),o=Jg(),r=Zg("div"),i=Zg("div"),s=Zg("div"),s.textContent=`${chrome.i18n.getMessage("gmail_onboarding_toggle")}`,a=Jg(),l=Zg("div"),nf(c.$$.fragment),rh(n,"class","svelte-o9amr0"),uh(n,"content",!e[0].wasGmailOnboardingShown),rh(s,"class","switch-content svelte-o9amr0"),rh(l,"class","switch"),rh(i,"class","switch-container svelte-o9amr0"),uh(i,"topBorder",!e[0].wasGmailOnboardingShown),rh(r,"class","footer"),rh(t,"class","onboarding-popup svelte-o9amr0")},m(g,h){Vg(g,t,h),jg(t,n),m&&m.m(n,null),jg(t,o),jg(t,r),jg(r,i),jg(i,s),jg(i,a),jg(i,l),of(c,l,null),d=!0,u||(p=[Dg(__.call(null,t,{isShadow:!0,exceptions:["#dl-gmail-settings-icon"]})),th(t,"click_outside",e[7])],u=!0)},p(e,t){e[0].wasGmailOnboardingShown?m&&(qh(),Kh(m,1,1,(()=>{m=null})),Vh()):m?(m.p(e,t),1&t&&Yh(m,1)):(m=VO(),m.c(),Yh(m,1),m.m(n,null)),(!d||1&t)&&uh(n,"content",!e[0].wasGmailOnboardingShown);const o={};1&t&&(o.checked=e[0].isGmailEnabled),c.$set(o),(!d||1&t)&&uh(i,"topBorder",!e[0].wasGmailOnboardingShown)},i(e){d||(Yh(m),Yh(c.$$.fragment,e),d=!0)},o(e){Kh(m),Kh(c.$$.fragment,e),d=!1},d(e){e&&Yg(t),m&&m.d(),rf(c),u=!1,Sg(p)}}}function VO(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f,_,v,y;return s=new fb({props:{width:"16px",height:"16px",padding:"3px 0 0 0"}}),u=new fb({props:{width:"16px",height:"16px",padding:"3px 0 0 0"}}),f=new fb({props:{width:"16px",height:"16px",padding:"3px 0 0 0"}}),{c(){t=Zg("div"),n=Zg("p"),n.textContent=`${chrome.i18n.getMessage("gmail_onboarding_title")}`,o=Jg(),r=Zg("div"),i=Zg("div"),nf(s.$$.fragment),a=Jg(),l=Zg("div"),l.textContent=`${chrome.i18n.getMessage("gmail_onboarding_body_1")}`,c=Jg(),d=Zg("div"),nf(u.$$.fragment),p=Jg(),m=Zg("div"),m.textContent=`${chrome.i18n.getMessage("gmail_onboarding_body_2")}`,g=Jg(),h=Zg("div"),nf(f.$$.fragment),_=Jg(),v=Zg("div"),v.textContent=`${chrome.i18n.getMessage("gmail_onboarding_body_3")}`,rh(n,"class","svelte-o9amr0"),rh(t,"class","title svelte-o9amr0"),rh(l,"class","copy-text svelte-o9amr0"),rh(i,"class","copy svelte-o9amr0"),rh(m,"class","copy-text svelte-o9amr0"),rh(d,"class","copy svelte-o9amr0"),rh(v,"class","copy-text svelte-o9amr0"),rh(h,"class","copy svelte-o9amr0"),rh(r,"class","body svelte-o9amr0")},m(e,w){Vg(e,t,w),jg(t,n),Vg(e,o,w),Vg(e,r,w),jg(r,i),of(s,i,null),jg(i,a),jg(i,l),jg(r,c),jg(r,d),of(u,d,null),jg(d,p),jg(d,m),jg(r,g),jg(r,h),of(f,h,null),jg(h,_),jg(h,v),y=!0},p:wg,i(e){y||(Yh(s.$$.fragment,e),Yh(u.$$.fragment,e),Yh(f.$$.fragment,e),y=!0)},o(e){Kh(s.$$.fragment,e),Kh(u.$$.fragment,e),Kh(f.$$.fragment,e),y=!1},d(e){e&&(Yg(t),Yg(o),Yg(r)),rf(s),rf(u),rf(f)}}}function YO(e){let t,n,o,r,i,s,a,l=e[2]&&GO(),c=e[1]&&qO(e);return{c(){t=Zg("div"),n=Zg("div"),o=Jg(),l&&l.c(),r=Jg(),c&&c.c(),rh(n,"class","icon svelte-o9amr0"),rh(n,"id","dl-gmail-settings-icon"),uh(n,"notification",e[2]),uh(n,"isOnboardingPopupOpen",e[1]),uh(n,"enabled",e[0].isGmailEnabled),rh(t,"class","deepl-gmail-header-toolbar svelte-o9amr0"),rh(t,"dir",jt())},m(d,u){Vg(d,t,u),jg(t,n),jg(t,o),l&&l.m(t,null),jg(t,r),c&&c.m(t,null),i=!0,s||(a=th(n,"click",oh(nh(e[5]))),s=!0)},p(e,[o]){(!i||4&o)&&uh(n,"notification",e[2]),(!i||2&o)&&uh(n,"isOnboardingPopupOpen",e[1]),(!i||1&o)&&uh(n,"enabled",e[0].isGmailEnabled),e[2]?l||(l=GO(),l.c(),l.m(t,r)):l&&(l.d(1),l=null),e[1]?c?(c.p(e,o),2&o&&Yh(c,1)):(c=qO(e),c.c(),Yh(c,1),c.m(t,null)):c&&(qh(),Kh(c,1,1,(()=>{c=null})),Vh())},i(e){i||(Yh(c),i=!0)},o(e){Kh(c),i=!1},d(e){e&&Yg(t),l&&l.d(),c&&c.d(),s=!1,a()}}}function KO(e,n,o){let r;kg(e,df,(e=>o(0,r=e))),xh("text_direction",jt());let i=!1,s=!1;const a=async e=>{o(1,i=e),e||r.wasGmailOnboardingShown||await df.set({wasGmailOnboardingShown:!0}),t({action:"dlTrackUILocationClicked",payload:B.gmailOnboardingIcon}),e&&t({action:"dlTrackOnboardingModalShown",payload:{nicheIntegration:re.gmail}})},l=async e=>{await df.set({isGmailEnabled:e}),t({action:"dlTrackCustomizationEnabledEvent",payload:{nicheIntegration:re.gmail,uiLocation:B.gmailOnboardingPopup,customizationEnabled:e}})};return e.$$.update=()=>{1&e.$$.dirty&&o(2,s=!r.wasGmailOnboardingShown)},[r,i,s,a,l,()=>{a(!i)},e=>l(e.detail.checked),()=>{a(!1)}]}class ZO extends af{constructor(e){super(),sf(this,e,KO,YO,$g,{})}}class XO{static HTML_TAG_NAME="deepl-gmail-header-toolbar";static createElement=(e=document)=>{const t=e.createElement(XO.HTML_TAG_NAME),n=new XO(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=()=>{this.domElement.mainComponent=new ZO({target:this.domElement.shadowContainer})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function QO(e){let t;return{c(){t=Zg("div"),rh(t,"class","dl-gmail"),rh(t,"dir",jt())},m(e,n){Vg(e,t,n)},p:wg,i:wg,o:wg,d(e){e&&Yg(t)}}}function JO(e,t,n){let o,r,i,s,a;kg(e,df,(e=>n(5,o=e))),xh("text_direction",jt());let l=!1;const c=()=>{p(),o.isGmailEnabled?d():u()},d=()=>{m(),g()},u=()=>{const e=[wO.HTML_TAG_NAME,jO.HTML_TAG_NAME,MO.HTML_TAG_NAME];rD(e)},p=()=>{const e="data-has-dl-icon",t=document.querySelector("header");if(!t||"banner"!==t.getAttribute("role")||t.hasAttribute(e))return;const n=t.querySelector("[role='search']");if(!n)return;const o=n.parentNode;if(!o)return;const r=XO.createElement();o.insertAdjacentElement("afterend",r),r.createDOM(),t.setAttribute(e,!0)},m=()=>{if(iD()){const e=sD();if(!e)return;e.forEach((e=>{const t=cD(e);if(!t||aD(e))return;const n=t.parentNode;if(!n)return;const o=jO.createElement();n.after(o),o.createDOM({container:e})}))}},g=()=>{const e=document.activeElement;if(!e)return;const t=e.hasAttribute("contenteditable"),n=lD(e),o=e.hasAttribute(cO),r=e!==s,i=!a&&(!t||n||r),c=t&&(!o||r)&&!n;!i||c||l?(l=!1,i&&f(),c&&(f(),h(e))):l=!0},h=e=>{const t=MO.createElement();i=t,s=e,e.setAttribute(cO,"true"),document.body.appendChild(t);const n=(e=>{const t=function(e){let t=e;for(;null!==t;){if("dialog"===t.getAttribute("role"))return t;t=t.parentElement}return null}(e);return t?t.querySelector('input[name="subjectbox"]'):null})(e);t.createDOM({container:e,subjectInput:n,updateLockStatus:_})},f=()=>{i&&i.cleanupDOM();const e=Array.from(document.querySelectorAll(MO.HTML_TAG_NAME));for(const t of e)t.remove();document.querySelectorAll(`[contenteditable][${cO}="true"]`).forEach((e=>e.removeAttribute(cO))),i=null},_=e=>{a=e},v=async e=>{if("dlChangeActiveTabStatus"===e.action)e.payload.isActive?y():w();return!0},y=()=>{r&&clearInterval(r),r=setInterval(c,800)},w=()=>{clearInterval(r)};return Eh((()=>{y(),chrome.runtime.onMessage.addListener(v)})),Th((()=>{u(),r&&w(),chrome.runtime.onMessage.removeListener(v)})),[]}class eD extends af{constructor(e){super(),sf(this,e,JO,QO,$g,{})}}class tD{static HTML_TAG_NAME="deepl-gmail-controller";static createElement=(e=document)=>{const t=e.createElement(tD.HTML_TAG_NAME),n=new tD(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.showOnboarding=n.showOnboarding,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=()=>{this.domElement.mainComponent=new eD({target:this.domElement.shadowContainer,props:{onClose:this.domElement.cleanupDOM,controller:this}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()};showOnboarding=()=>{this.domElement.mainComponent.showOnboarding()}}const{scope:nD}=TE(),oD=()=>document.querySelector(tD.HTML_TAG_NAME),rD=e=>{try{for(const t of e)if(t){const e=Array.from(document.getElementsByTagName(t));for(const t of e)t.cleanupDOM&&t.cleanupDOM(),t.remove()}}catch(e){pn()&&console.error(e),hf(e,nD)}},iD=()=>document.querySelectorAll("[data-message-id]").length>0,sD=()=>document.querySelectorAll("[data-message-id]"),aD=e=>!!e&&!!e.querySelector(jO.HTML_TAG_NAME),lD=e=>{const{bottom:t,right:n}=e.getBoundingClientRect(),o=t-30,r=n-30;let i=!1;return document.querySelectorAll('[role="dialog"]').forEach((t=>{const n=(s=r,a=o,l=t.getBoundingClientRect(),s>=l.left&&s<=l.right&&a>=l.top&&a<=l.bottom);var s,a,l;const c=t.contains(e);n&&!c&&(i=!0)})),i},cD=e=>{if(e)return e.querySelector("table")},dD=e=>{const t=Bt(),n=t.filter((e=>void 0===e.regionalVariant)).map((e=>({value:e.value,label:`<strong>${e.value}</strong> - ${e.label}`,selectedOptionLabel:e.value}))),o=t.find((e=>"EN-GB"===e.value)),r=t.find((e=>"PT-PT"===e.value));return[...[...n,...[{...o,value:"EN",selectedOptionLabel:"EN",label:`<strong>EN</strong> - ${chrome.i18n.getMessage("supported_languages_EN")}`},{...r,value:"PT",selectedOptionLabel:"PT",label:`<strong>PT</strong> - ${chrome.i18n.getMessage("supported_languages_PT")}`}]].map((t=>e&&t.value===e.value?{...t,label:`${t.label} ${chrome.i18n.getMessage("gmail_language_detected")}`}:t))].sort(((e,t)=>e.value.localeCompare(t.value)))},uD=e=>{const t=e.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2}},pD=(e,t)=>{const n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0,clientX:e,clientY:t});document.elementFromPoint(e,t)?.dispatchEvent(n)},mD=e=>{const{x:t,y:n}=uD(e);pD(t,n)},gD=(e,t)=>{const n=document.body;new MutationObserver(((o,r)=>{for(const i of o)if("childList"===i.type&&n.querySelector(e)){r.disconnect(),t(n.querySelector(e));break}})).observe(n,{childList:!0,subtree:!0})},hD=()=>{const e=document.querySelectorAll("[data-message-id]");for(const t of e){const e=t.nextElementSibling;if(e&&"DIV"===e.tagName)return e}return null},fD=()=>{const e=document.querySelectorAll('span[role="link"]');let t;for(let n=0;n<e.length;n++){const o=e[n],r=o.previousElementSibling;if(r&&"SPAN"===r.tagName&&"link"===r.getAttribute("role")){const e=o.parentElement,n=e.querySelectorAll('span[role="link"]'),r=Array.from(e.children).filter((e=>e.matches("span")));2!==(2===n.length&&r.length)&&3!==(3===n.length&&r.length)||(t=o)}}return t};let _D,vD,yD,wD,bD,ED,TD,SD,xD,$D,CD,kD;const{scope:LD}=TE(),{deepl_inline_ui:ID}=D;function AD({websiteData:e,platformBehaviour:t=re.default,onRemove:n=(()=>{}),isInput:o=!1}){const r=o?ae.write:ae.translate;try{let i;switch(RD(),kD=lO.createElement(),kD.platformBehaviour=t,kD.textProcessingMode=r,kD.style.zIndex=ID.z_index,document.documentElement.appendChild(kD),t){case re.gdocs:i=bt;break;case re.default:default:i=fT}kD.createDOM(i,(()=>RD(n)),e,o),Rw.update({isReviewTranslateWriteWindowInjected:!0})}catch(e){pn()&&console.error(e),hf(e,LD)}}function RD(e){try{kD&&(kD.cleanupDOM(),Array.from(document.getElementsByTagName(lO.HTML_TAG_NAME),(e=>e.remove())),Rw.update({isReviewTranslateWriteWindowInjected:!1}),vD=void 0,e())}catch(e){pn()&&console.error(e),hf(e,LD)}}function MD({websiteData:e,platformBehaviour:t=re.default,textProcessingMode:n=ae.translate}){try{let o;switch(ND(),vD=_k.createElement(),vD.platformBehaviour=t,vD.textProcessingMode=n,vD.style.zIndex=ID.z_index,document.documentElement.appendChild(vD),t){case re.gdocs:o=bt;break;case re.default:default:o=fT}vD.createDOM(o,ND,e),Rw.update({isTranslationTooltipInjected:!0})}catch(e){pn()&&console.error(e),hf(e,LD)}}function ND(){try{vD&&(vD.cleanupDOM(),Array.from(document.getElementsByTagName(_k.HTML_TAG_NAME),(e=>e.remove())),Rw.update({isTranslationTooltipInjected:!1}),vD=void 0)}catch(e){pn()&&console.error(e),hf(e,LD)}}function OD(e=re.default){try{if(yD)return;let t;switch(yD=v$.createElement(),yD.style.zIndex=ID.z_index,document.documentElement.appendChild(yD),e){case re.gdocs:t="deepl-gdocs-icon";break;case re.default:default:t=Ik.HTML_TAG_NAME}const n=function(e){if(!e)return;const t=e.getBoundingClientRect(),n=document.body.parentNode.getBoundingClientRect(),{top:o,left:r,right:i,bottom:s,height:a,width:l}=t;return{x:r-n.left,y:s-n.top,top:o,bottom:s,right:n.width-i,left:r+window.pageXOffset,width:l,height:a}}(document.querySelector(t).shadowRoot.querySelector('[data-qa="deepl-inline-translate-menu-icon"]'));yD.createDOM(n,DD),Rw.update({isInlineTranslateSettingsTooltipInjected:!0}),v_((()=>{DD()}))}catch(e){pn()&&console.error(e),hf(e,LD)}}function DD(){try{if(!yD)return;yD.cleanupDOM(),Array.from(document.getElementsByTagName("deepl-inline-translate-settings-tooltip"),(e=>e.remove())),Rw.update({isInlineTranslateSettingsTooltipInjected:!1}),yD=void 0}catch(e){pn()&&console.error(e),hf(e,LD)}}function PD(){try{if(document.querySelector(AA.HTML_TAG_NAME))return;_D=AA.createElement(),document.documentElement.appendChild(_D),_D.createDOM(),document.addEventListener("click",UD),v_((()=>{UD()}))}catch(e){pn()&&console.error(e),hf(e,LD)}}function UD(){try{_D&&(_D.cleanupDOM(),Array.from(document.getElementsByTagName(AA.HTML_TAG_NAME),(e=>e.remove())),_D=void 0,document.removeEventListener("click",UD))}catch(e){pn()&&console.error(e),hf(e,LD)}}function BD(){try{if(document.querySelector(YA.HTML_TAG_NAME))return;SD=YA.createElement(),document.documentElement.appendChild(SD),SD.createDOM(),v_((()=>{zD()}))}catch(e){pn()&&console.error(e),hf(e,LD)}}function WD(){try{if(document.querySelector($R.HTML_TAG_NAME))return;xD=$R.createElement(),document.documentElement.appendChild(xD),xD.createDOM(),v_((()=>{FD()}))}catch(e){pn()&&console.error(e),hf(e,LD)}}function zD(){try{SD&&(SD.cleanupDOM(),Array.from(document.getElementsByTagName(YA.HTML_TAG_NAME),(e=>e.remove())),SD=void 0,document.removeEventListener("click",zD))}catch(e){pn()&&console.error(e),hf(e,LD)}}function FD(){try{xD&&(xD.cleanupDOM(),Array.from(document.getElementsByTagName($R.HTML_TAG_NAME),(e=>e.remove())),xD=void 0,document.removeEventListener("click",FD))}catch(e){pn()&&console.error(e),hf(e,LD)}}function HD(){try{if($E())return;$D=CE(),document.documentElement.appendChild($D),$D.createDOM(),v_((()=>{jD()}))}catch(e){pn()&&console.error(e),hf(e,LD)}}function jD(){try{$D&&($D.cleanupDOM(),Array.from(document.getElementsByTagName("deepl-zendesk-controller"),(e=>e.remove())),$D=void 0,document.removeEventListener("click",jD))}catch(e){pn()&&console.error(e),hf(e,LD)}}async function GD(){try{if(await VL())return;if(document.querySelector(rU.HTML_TAG_NAME))return;ED=rU.createElement(),document.body.appendChild(ED),ED.createDOM(),v_((()=>{YD()}))}catch(e){pn()&&console.error(e),hf(e,LD)}}function qD(){try{if(oD())return;CD=tD.createElement(),document.documentElement.appendChild(CD),CD.createDOM(),v_((()=>{VD()}))}catch(e){pn()&&console.error(e),hf(e,LD)}}function VD(){try{CD&&(CD.cleanupDOM(),Array.from(document.getElementsByTagName(tD.HTML_TAG_NAME),(e=>e.remove())),CD=void 0,document.removeEventListener("click",VD))}catch(e){pn()&&console.error(e),hf(e,LD)}}function YD(){try{if(ED){ED.cleanupDOM();const e=Array.from(document.querySelectorAll(rU.HTML_TAG_NAME));for(const t of e)t.remove();ED=void 0,document.removeEventListener("click",YD)}}catch(e){pn()&&console.error(e),hf(e,LD)}}async function KD(e){try{if(!wD)return;wD.cleanupDOM(),Array.from(document.getElementsByTagName("deepl-inline-trigger"),(e=>e.remove())),wD=void 0;if(!(await Ix(["isInlineHighlighterShown"])).isInlineHighlighterShown&&!e.target.contains(wD)){try{t({action:"dltrackCloseInlineHighlighter",payload:{trigger:oe.outside_click}})}catch(e){console.error(e)}df.set({isInlineHighlighterShown:!0})}}catch(e){pn()&&console.error(e),hf(e,LD)}}async function ZD(){try{if(!bD)return;bD.cleanupDOM(),Array.from(document.getElementsByTagName("deepl-input-selection-trigger"),(e=>e.remove())),bD=void 0}catch(e){pn()&&console.error(e),hf(e.message)}}function XD(e,t){KD();try{wD=Ik.createElement(),wD.style.zIndex=ID.z_index,document.documentElement.appendChild(wD),wD.createDOM(e,t),v_((()=>{KD()}))}catch(e){pn()&&console.error(e),hf(e,LD)}}function QD(e,t){ZD();try{if((()=>{const e=window.getSelection()?.toString();return e?.length})()>1500||(e=>{let t=e.value?.substring(e.selectionStart,e.selectionEnd);return t?.length})(e)>1500)return;bD=YL.createElement(),bD.style.zIndex=ID.z_index,document.documentElement.appendChild(bD),bD.createDOM(e,t);const n=()=>{ZD()};e.addEventListener("input",n),v_((()=>{ZD(),e.removeEventListener("input",n)}))}catch(e){pn()&&console.error(e),hf(e.message)}}function JD(e){const t=t=>{requestAnimationFrame((()=>{if(!t||!t.target)return;const n=window.getSelection();if(!n.toString().trim())return;if(2===t.button)return;const o="TEXTAREA"===t.target.tagName,r=e=>{if(!e)return!1;const t=e.childNodes;for(let e=0;e<t.length;e++)if(t[e].isContentEditable||"TEXTAREA"===t[e].tagName)return t[e];return!1};if(n.isCollapsed||n.anchorNode?.parentNode?.isContentEditable){if(n.anchorNode?.parentNode?.isContentEditable||o||r(n.anchorNode)){let e={clientX:t.clientX||0,pageY:t.pageY||0,detail:t?.detail||0,isOutsideOfView:nP(t)};if(n.anchorNode?.parentNode?.isContentEditable)QD(n.anchorNode.parentNode,e);else if(o)QD(t.target,e);else{QD(r(n.anchorNode),e)}}}else{const o=n.getRangeAt(0)?.commonAncestorContainer;if(!o.contains(t.target)&&!t.target.contains(o))return;let r={clientX:t.clientX||0,pageY:t.pageY||0,detail:t?.detail||0,isOutsideOfView:nP(t)};XD(e,r)}}))},n=()=>{window.getSelection().toString().trim()?t():(KD(),ZD())},o=e=>{"Escape"===e.key&&ZD()};document.addEventListener("mouseup",t),document.addEventListener("mousedown",KD),document.addEventListener("selectionchange",n),document.addEventListener("keydown",o),v_((()=>{document.removeEventListener("mouseup",t),document.removeEventListener("mousedown",KD),document.removeEventListener("selectionchange",n),document.removeEventListener("keydown",o)}))}function eP(e,t){try{TD=bI.createElement(),TD.style.zIndex=ID.z_index,document.documentElement.appendChild(TD),TD.createDOM(e,t),v_((()=>{TD.cleanupDOM()}))}catch(e){pn()&&console.error(e),hf(e,LD)}}const tP=(e=ne.initial)=>{const t=HR.createElement();document.documentElement.appendChild(t),t.createDOM({reviewStage:e}),v_((()=>{t.cleanupDOM()}))};function nP({clientX:e=0,pageY:t=0}={}){const n=window.innerWidth||document.documentElement.innerWidth,o=window.scrollHeight||document.documentElement.scrollHeight;return e<0||e>=n||(t<0||t>=o)}function oP(e){switch(e){case"web.whatsapp.com":cS();break;case"twitter.com":case"tweetdeck.twitter.com":case"x.com":LS();break;case"www.linkedin.com":YS();break;case"www.youtube.com":px()}}async function rP(e){const t=e.split("."),n=t.filter(((e,n)=>n===t.length-1||n===t.length-2)).join(".");"deepl.com"===n&&(document.body.dataset.dlBrowserExtensionPresent="true")}async function iP(e){const t=await Ix(["shouldDisplayFeedbackPopup"]);if("https://deepl.typeform.com/to/MkMfP2Y6"===e)t.shouldDisplayFeedbackPopup&&(df.set({shouldDisplayFeedbackPopup:!1}),tP(ne.feedback))}function sP(e,t){if("web.whatsapp.com"===t){const t=document.documentElement.querySelector("#side");return!t||!t.contains(e)}return!0}function aP(e,t){if("web.whatsapp.com"===t){const t=document.documentElement.querySelector("#side");if(t&&t.contains(e))return!1}return!0}const lP=()=>{const e=new URL(window.location.href);return"https:"===e.protocol&&"chatgpt.com"===e.hostname},cP=[];window.onerror=function(e){/ResizeObserver/gm.test(e)&&cP.forEach((e=>e.resize.disconnect()))};const{scope:dP}=TE();const uP=e=>"true"===e.contentEditable||"TEXTAREA"===e.nodeName&&(e.rows>1||lP());const pP=({inputArea:e})=>{const t=fP(e);return{position:"absolute",top:t.top,left:t.left,right:t.right,width:t.width,height:t.height,isLanguageToolsPresent:!!document.querySelector("lt-toolbar"),isGrammarlyPresent:!!document.querySelector("grammarly-extension"),isChatGPTPresent:lP()}},mP=({inputArea:e})=>{const t=[];if(e)for(let n=e.parentElement;null!==n;n=n.parentElement)gP(n)&&t.push(n);return t},gP=e=>{const t=window.getComputedStyle(e),n=t.getPropertyValue("overflow-y"),o=t.getPropertyValue("overflow-x"),r=["hidden","scroll","auto"];return r.includes(n)||r.includes(o)},hP=(e,t)=>{let n={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return n.left>=n.right||n.top>=n.bottom?null:n},fP=e=>{let t=e.getBoundingClientRect(),n={left:t.left,right:t.right,bottom:t.bottom,top:t.top};const o={top:0,left:0,right:0,bottom:0,width:0,height:0},r={top:0,left:0,right:window.innerWidth,bottom:window.innerHeight};for(let t=e.parentElement;null!==t&&t!==e.ownerDocument.body;t=t.parentElement){let e=t.getBoundingClientRect();const r=hP(n,e);if(r)n=r;else if(gP(t))return o}return n=hP(n,r),n?{top:n.top,bottom:n.bottom,left:n.left,right:n.right,width:n.right-n.left,height:n.bottom-n.top}:o},_P={generalSettings:"GENERAL_SETTINGS",inputSettings:"INPUT_SETTINGS"};function vP(e){let t;return{c(){t=Zg("span"),rh(t,"class","svelte-xa2hux")},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function yP(e){let t;return{c(){t=Zg("span"),rh(t,"class","svelte-xa2hux")},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function wP(e){let t;return{c(){t=Zg("span"),rh(t,"class","svelte-xa2hux")},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function bP(e){let t;return{c(){t=Zg("span"),rh(t,"class","svelte-xa2hux")},m(e,n){Vg(e,t,n)},p:wg,d(e){e&&Yg(t)}}}function EP(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f,_,v,y;return o=new T_({props:{tooltip:chrome.i18n.getMessage("input_translation_tooltip_turnoff"),parentIsRTL:e[1],ignoreTextDirection:!0,$$slots:{default:[vP]},$$scope:{ctx:e}}}),s=new T_({props:{tooltip:e[8],showProShield:nt(e[2],be.WRITE),parentIsRTL:e[1],ignoreTextDirection:!0,$$slots:{default:[yP]},$$scope:{ctx:e}}}),u=new T_({props:{tooltip:chrome.i18n.getMessage("input_translation_tooltip_select_target_lang"),parentIsRTL:e[1],ignoreTextDirection:!0,$$slots:{default:[wP]},$$scope:{ctx:e}}}),g=new T_({props:{showProShield:nt(e[2],be.TRANSLATOR),tooltip:e[6],parentIsRTL:e[1],ignoreTextDirection:!0,$$slots:{default:[bP]},$$scope:{ctx:e}}}),{c(){t=Zg("div"),n=Zg("div"),nf(o.$$.fragment),r=Jg(),i=Zg("div"),nf(s.$$.fragment),a=Jg(),l=Zg("div"),c=Jg(),d=Zg("div"),nf(u.$$.fragment),p=Jg(),m=Zg("div"),nf(g.$$.fragment),h=Jg(),f=Zg("div"),rh(n,"class","dl-icon-circle dl-on-off svelte-xa2hux"),rh(i,"class","dl-icon-circle dl-improve svelte-xa2hux"),uh(i,"disabled",!e[7]),rh(l,"class","spacer svelte-xa2hux"),rh(d,"class","dl-icon-circle dl-settings svelte-xa2hux"),rh(m,"class","dl-icon-circle dl-icon svelte-xa2hux"),rh(m,"data-qa","input-translation-icon"),rh(f,"class","dl-icon-circle dl-loading svelte-xa2hux"),rh(t,"class","dl-input-icon svelte-xa2hux"),uh(t,"is-input-translation-disabled",e[9]),uh(t,"is-loading",e[5]),uh(t,"is-minimized",e[4])},m(w,b){Vg(w,t,b),jg(t,n),of(o,n,null),jg(t,r),jg(t,i),of(s,i,null),jg(t,a),jg(t,l),jg(t,c),jg(t,d),of(u,d,null),jg(t,p),jg(t,m),of(g,m,null),e[36](m),jg(t,h),jg(t,f),_=!0,v||(y=[th(n,"mousedown",oh(nh(e[28]))),th(n,"mouseenter",e[29]),th(n,"click",e[30]),th(i,"mousedown",oh(nh(e[27]))),th(i,"mouseenter",e[31]),th(i,"click",e[32]),th(d,"mousedown",oh(nh(e[26]))),th(d,"mouseenter",e[33]),th(d,"click",e[34]),th(m,"mousedown",oh(nh(e[25]))),th(m,"click",e[13]),th(m,"mouseenter",e[35])],v=!0)},p(e,n){const r={};2&n[0]&&(r.parentIsRTL=e[1]),2048&n[1]&&(r.$$scope={dirty:n,ctx:e}),o.$set(r);const a={};256&n[0]&&(a.tooltip=e[8]),4&n[0]&&(a.showProShield=nt(e[2],be.WRITE)),2&n[0]&&(a.parentIsRTL=e[1]),2048&n[1]&&(a.$$scope={dirty:n,ctx:e}),s.$set(a),(!_||128&n[0])&&uh(i,"disabled",!e[7]);const l={};2&n[0]&&(l.parentIsRTL=e[1]),2048&n[1]&&(l.$$scope={dirty:n,ctx:e}),u.$set(l);const c={};4&n[0]&&(c.showProShield=nt(e[2],be.TRANSLATOR)),64&n[0]&&(c.tooltip=e[6]),2&n[0]&&(c.parentIsRTL=e[1]),2048&n[1]&&(c.$$scope={dirty:n,ctx:e}),g.$set(c),(!_||512&n[0])&&uh(t,"is-input-translation-disabled",e[9]),(!_||32&n[0])&&uh(t,"is-loading",e[5]),(!_||16&n[0])&&uh(t,"is-minimized",e[4])},i(e){_||(Yh(o.$$.fragment,e),Yh(s.$$.fragment,e),Yh(u.$$.fragment,e),Yh(g.$$.fragment,e),_=!0)},o(e){Kh(o.$$.fragment,e),Kh(s.$$.fragment,e),Kh(u.$$.fragment,e),Kh(g.$$.fragment,e),_=!1},d(n){n&&Yg(t),rf(o),rf(s),rf(u),rf(g),e[36](null),v=!1,Sg(y)}}}function TP(e,o,r){let i,s;const a=$h("deepl_settings");kg(e,a,(e=>r(2,s=e)));let l,c,d,{inputArea:u}=o,{lockActiveElement:p}=o,{openSettings:m}=o,{closeSettings:g}=o,{hideOnboardingHighlighter:h}=o,{registerIconCallbacks:f}=o,{unregisterIconCallbacks:_}=o,{getActiveElement:y}=o,{setErrorMessage:w}=o,{isInputAreaRTL:b}=o,E=!1,T=!1,S="",x={},$=chrome.i18n.getMessage("input_translation_tooltip_improve_lang_not_supported");const C=()=>{k()},k=()=>{r(4,E=lT(u,l))};async function L(e){await a.set({targetLanguageUserInput:e.value,regionalVariant:e.regionalVariant}),A()}const I=async(e,n,o)=>{const i=y();switch(e.action){case"dlTriggerTranslationShortcut":if(w(void 0),i!==u)return;try{t({action:"dlTrackUseOfShortcut",payload:{shortcutType:W,location:B.inputTranslationTriggerIcon}})}catch(e){console.error(e)}if(s&&s.targetLanguageUserInput){r(5,T=!0);try{await Hk(u)}catch(e){w(e)}r(5,T=!1)}else m({fromShortcut:!0});o();break;case"dlChangeLanguageShortcut":if(i!==u)return;r(5,T=!0);try{m({fromShortcut:!0})}catch(e){w(e)}r(5,T=!1),o()}return!0};async function A(e){if(w(void 0),h(),s.targetLanguageUserInput&&"undefined"!=s.targetLanguageUserInput||e?.isWriteRequest){g(),r(5,T=!0);try{await Hk(u,e),c||n(P.hintKeyboardShortcut)}catch(e){w(e)}r(5,T=!1)}else m()}function R(e){t({action:"dlTrackIconHover",payload:{uiLocation:e,domainName:window.location.host}})}async function M(){let e;e=iT(u)?u.value:u.innerText,r(24,x=await Ut(e,!0)),x.isReliable;try{e&&function(e){try{return e.replace(/[^\p{L}]/gu,"").length}catch(t){return e.replace(/[^a-zA-Z]/g,"").length}}(e)>0&&t({action:"dlTrackLanguageDetectionForTextProcessing",payload:{lang:x.langCode,isReliable:x.isReliable,trigger:v,textLength:e.length,domainName:window.location.hostname}})}catch(e){console.error(e)}}Eh((()=>{chrome.runtime.onMessage.addListener(I),f({processRefreshCycle:C,languageChanged:L,triggerTranslation:A})})),Th((()=>{chrome.runtime.onMessage.removeListener(I),_()}));return e.$$set=e=>{"inputArea"in e&&r(15,u=e.inputArea),"lockActiveElement"in e&&r(16,p=e.lockActiveElement),"openSettings"in e&&r(0,m=e.openSettings),"closeSettings"in e&&r(17,g=e.closeSettings),"hideOnboardingHighlighter"in e&&r(18,h=e.hideOnboardingHighlighter),"registerIconCallbacks"in e&&r(19,f=e.registerIconCallbacks),"unregisterIconCallbacks"in e&&r(20,_=e.unregisterIconCallbacks),"getActiveElement"in e&&r(21,y=e.getActiveElement),"setErrorMessage"in e&&r(22,w=e.setErrorMessage),"isInputAreaRTL"in e&&r(1,b=e.isInputAreaRTL)},e.$$.update=()=>{if(16777220&e.$$.dirty[0]&&(rt(s,be.WRITE)?r(8,$=chrome.i18n.getMessage("input_translation_tooltip_improve_disabled_by_admin")):Ft(x.langCode)?r(8,$=chrome.i18n.getMessage("input_translation_tooltip_improve_supported_lang")):r(8,$=chrome.i18n.getMessage("write_language_not_supported")),r(7,d=!x.langCode||Ft(x.langCode)&&!rt(s,be.WRITE))),4&e.$$.dirty[0])if(s.targetLanguageUserInput&&"undefined"!=s.targetLanguageUserInput){let e;t({action:"dlCheckCommandShortcuts"}).then((t=>{e=t?t.filter((e=>e.name==W))[0].shortcut:"",e?(e=`(${e})`,c=!0):c=!1,r(6,S=`${chrome.i18n.getMessage("input_translation_tooltip_translate")} ${e}`)}))}else r(6,S=chrome.i18n.getMessage("input_translation_tooltip_translate_text"));4&e.$$.dirty[0]&&r(9,i=!s.enableInputTranslation||uT(window.location.host,window.location.href)||s.blacklistDomainsForWriting.includes(window.location.host)||s.isGmailEnabled&&rT())},[m,b,s,l,E,T,S,d,$,i,a,A,R,()=>{p(),s.targetLanguageUserInput?A():m()},M,u,p,g,h,f,_,y,w,L,x,function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},()=>R(B.inputTranslationSettingsIcon),()=>m({page:_P.inputSettings}),()=>{R(B.inputImproveTriggerIcon)},()=>{d&&A({isWriteRequest:!0})},()=>R(B.inputTranslationSettingsIcon),()=>m({page:_P.generalSettings}),()=>{M(),R(B.inputTranslationTriggerIcon)},function(e){Lh[e?"unshift":"push"]((()=>{l=e,r(3,l)}))}]}class SP extends af{constructor(e){super(),sf(this,e,TP,EP,$g,{inputArea:15,lockActiveElement:16,openSettings:0,closeSettings:17,hideOnboardingHighlighter:18,registerIconCallbacks:19,unregisterIconCallbacks:20,getActiveElement:21,setErrorMessage:22,isInputAreaRTL:1,onLanguageChanged:23},null,[-1,-1])}get onLanguageChanged(){return this.$$.ctx[23]}}function xP(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f;return{c(){t=Zg("div"),n=Zg("div"),o=Zg("div"),r=Zg("div"),i=Zg("div"),i.textContent=`${chrome.i18n.getMessage("input_translation_highlighter_tooltip_headline")}`,s=Jg(),a=Zg("div"),a.textContent=`${chrome.i18n.getMessage("input_translation_highlighter_tooltip_text")}`,l=Jg(),c=Zg("button"),rh(i,"class","headline svelte-1vokldc"),rh(r,"class","text-wrapper svelte-1vokldc"),rh(o,"class","content svelte-1vokldc"),rh(c,"class","close-icon svelte-1vokldc"),rh(n,"class",d=Ng(`body body__${e[0]}`)+" svelte-1vokldc"),rh(t,"class",u="container container__"+e[0]+" svelte-1vokldc")},m(d,u){Vg(d,t,u),jg(t,n),jg(n,o),jg(o,r),jg(r,i),jg(r,s),jg(r,a),jg(n,l),jg(n,c),e[13](t),g=!0,h||(f=th(c,"click",e[12]),h=!0)},p(e,o){(!g||1&o&&d!==(d=Ng(`body body__${e[0]}`)+" svelte-1vokldc"))&&rh(n,"class",d),(!g||1&o&&u!==(u="container container__"+e[0]+" svelte-1vokldc"))&&rh(t,"class",u)},i(e){g||(Oh((()=>{g&&(m&&m.end(1),p=Xh(t,Ff,{x:100,duration:1e3}),p.start())})),g=!0)},o(e){p&&p.invalidate(),m=Qh(t,Ff,{x:100,duration:1e3}),g=!1},d(n){n&&Yg(t),e[13](null),n&&m&&m.end(),h=!1,f()}}}function $P(e){let t,n,o=e[1]&&xP(e);return{c(){o&&o.c(),t=eh()},m(e,r){o&&o.m(e,r),Vg(e,t,r),n=!0},p(e,[n]){e[1]?o?(o.p(e,n),2&n&&Yh(o,1)):(o=xP(e),o.c(),Yh(o,1),o.m(t.parentNode,t)):o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh())},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d(e)}}}function CP(n,o,r){let i,s,{onClose:a}=o,{icon:l}=o,{position:c="top"}=o,{registerHighlighterCallbacks:d}=o,{unregisterHighlighterCallbacks:u}=o,{textDirection:p}=o,m={top:0,bottom:0,left:0,right:0},g={height:0,width:0},h=190,f=305;const _=()=>{if(l){const e=l.getBoundingClientRect();let t={};for(const n of["top","bottom","left","right"])e[n]!==m[n]&&(t[n]=e[n]);Object.keys(t).length&&r(8,m={...m,...t});let n={};window.innerHeight!==g.height&&(n.height=window.innerHeight),window.innerWidth!==g.width&&(n.width=window.innerWidth),Object.keys(n).length&&r(9,g={...g,...n})}else r(8,m={top:0,bottom:0,left:0,right:0})};function v(){a(oe.close_icon)}Eh((async()=>{d({recalculateHighlighterCoords:_});try{t({action:"dltrackOpenInputHighlighter",payload:{domainName:e.websiteData.hostname}}),_()}catch(e){console.error(e)}s=S_(i,(({clientHeight:e,clientWidth:t})=>{r(10,h=e),r(11,f=t)}))})),Th((()=>{u(),s&&s()}));return n.$$set=e=>{"onClose"in e&&r(4,a=e.onClose),"icon"in e&&r(1,l=e.icon),"position"in e&&r(0,c=e.position),"registerHighlighterCallbacks"in e&&r(5,d=e.registerHighlighterCallbacks),"unregisterHighlighterCallbacks"in e&&r(6,u=e.unregisterHighlighterCallbacks),"textDirection"in e&&r(7,p=e.textDirection)},n.$$.update=()=>{3840&n.$$.dirty&&r(0,c=(({iconCoordinates:e,viewportSize:t,highlighterHeight:n,highlighterWidth:o})=>{if(!l)return"top";const r={top:e.top>n,bottom:t.height-e.bottom>n,right:t.width-e.right>o,left:e.left>o};for(const[e,t]of Object.entries(r))if(t)return e;return"top"})({iconCoordinates:m,viewportSize:g,highlighterHeight:h,highlighterWidth:f}))},[c,l,i,v,a,d,u,p,m,g,h,f,()=>v(),function(e){Lh[e?"unshift":"push"]((()=>{i=e,r(2,i)}))}]}class kP extends af{constructor(e){super(),sf(this,e,CP,$P,$g,{onClose:4,icon:1,position:0,registerHighlighterCallbacks:5,unregisterHighlighterCallbacks:6,textDirection:7})}}function LP(e){let t,n,o,r,i;return r=new mb({props:{value:e[2].targetLanguageUserInput,showChooseLanguageOption:!0,fontSize:"sm"}}),r.$on("selection",e[5]),{c(){t=Zg("p"),n=Qg(e[0]),o=Jg(),nf(r.$$.fragment),rh(t,"class","font-bold svelte-1bwyi2r")},m(e,s){Vg(e,t,s),jg(t,n),Vg(e,o,s),of(r,e,s),i=!0},p(e,t){(!i||1&t)&&ih(n,e[0]);const o={};4&t&&(o.value=e[2].targetLanguageUserInput),r.$set(o)},i(e){i||(Yh(r.$$.fragment,e),i=!0)},o(e){Kh(r.$$.fragment,e),i=!1},d(e){e&&(Yg(t),Yg(o)),rf(r,e)}}}function IP(e){let t,n,o=(e[2].enableInputTranslation||e[1])&&LP(e);return{c(){t=Zg("div"),o&&o.c()},m(e,r){Vg(e,t,r),o&&o.m(t,null),n=!0},p(e,[n]){e[2].enableInputTranslation||e[1]?o?(o.p(e,n),6&n&&Yh(o,1)):(o=LP(e),o.c(),Yh(o,1),o.m(t,null)):o&&(qh(),Kh(o,1,1,(()=>{o=null})),Vh())},i(e){n||(Yh(o),n=!0)},o(e){Kh(o),n=!1},d(e){e&&Yg(t),o&&o.d()}}}function AP(e,t,n){let o;const r=$h("deepl_settings");kg(e,r,(e=>n(2,o=e)));const i=Sh();let{subHeaderText:s=chrome.i18n.getMessage("input_translation_settings_target_language")}=t,{fromShortcut:a}=t;function l(e){i("languageChanged",{lang:e})}return e.$$set=e=>{"subHeaderText"in e&&n(0,s=e.subHeaderText),"fromShortcut"in e&&n(1,a=e.fromShortcut)},[s,a,o,r,l,e=>l(e.detail.selectedOption)]}class RP extends af{constructor(e){super(),sf(this,e,AP,IP,$g,{subHeaderText:0,fromShortcut:1})}}function MP(e){let t,n,o,r,i,s,a,l;const c=e[3].default,d=Lg(c,e,e[2],null);return{c(){t=Zg("div"),n=Zg("div"),o=Zg("button"),r=Jg(),i=Zg("div"),d&&d.c(),rh(o,"type","button"),rh(o,"class","close-icon svelte-1l51lop"),rh(n,"class","header svelte-1l51lop"),rh(i,"class","content"),rh(t,"class","container svelte-1l51lop")},m(c,u){Vg(c,t,u),jg(t,n),jg(n,o),jg(t,r),jg(t,i),d&&d.m(i,null),e[5](t),s=!0,a||(l=th(o,"click",e[4]),a=!0)},p(e,[t]){d&&d.p&&(!s||4&t)&&Rg(d,c,e,e[2],s?Ag(c,e[2],t,null):Mg(e[2]),null)},i(e){s||(Yh(d,e),s=!0)},o(e){Kh(d,e),s=!1},d(n){n&&Yg(t),d&&d.d(n),e[5](null),a=!1,l()}}}function NP(e,t,n){let{$$slots:o={},$$scope:r}=t;const i=Sh();let s,a,l,c;Eh((()=>{c=S_(l,(e=>{e.offsetHeight=s,e.offsetWidth=a}))})),Th((()=>{c&&c()}));return e.$$set=e=>{"$$scope"in e&&n(2,r=e.$$scope)},i("resize",{offsetHeight:s,offsetWidth:a}),[l,i,r,o,()=>i("close"),function(e){Lh[e?"unshift":"push"]((()=>{l=e,n(0,l)}))}]}class OP extends af{constructor(e){super(),sf(this,e,NP,MP,$g,{})}}function DP(e){let t,n,o,r,i,s,a,l,c,d,u,p,m,g,h,f,_,v=chrome.i18n.getMessage("input_translation_setting_button_ok")+"";return i=new p$({props:{name:"disable_input_translation",id:q.disablePerSite,value:q.disablePerSite,cssClassName:"radio--with-border",checked:e[5]===q.disablePerSite,label:chrome.i18n.getMessage("input_translation_setting_radio_disable_per_site"),dataQa:"input-translation_hide-icon_disable-per-site"}}),i.$on("change",e[12]),a=new p$({props:{name:"disable_input_translation",id:q.disableEverywhere,value:q.disableEverywhere,cssClassName:"radio--with-border",checked:e[5]===q.disableEverywhere,label:chrome.i18n.getMessage("input_translation_setting_radio_disable_everywhere"),dataQa:"input-translation_hide-icon_disable-always"}}),a.$on("change",e[12]),{c(){t=Zg("div"),n=Zg("p"),n.textContent=`${chrome.i18n.getMessage("input_translation_setting_label_title_v2")}`,o=Jg(),r=Zg("div"),nf(i.$$.fragment),s=Jg(),nf(a.$$.fragment),l=Jg(),c=Zg("div"),d=Zg("span"),d.textContent=`${chrome.i18n.getMessage("input_translation_setting_link_cancel")}`,u=Jg(),p=Zg("button"),m=Qg(v),rh(n,"class","font-bold svelte-1wmfpok"),rh(r,"class","option-container svelte-1wmfpok"),rh(d,"class","link svelte-1wmfpok"),rh(p,"class",g=Ng("btn btn-primary "+(e[5]?"":"disabled"))+" svelte-1wmfpok"),rh(p,"data-qa","input-translation_hide-icon_accept"),rh(c,"class","action-container svelte-1wmfpok"),rh(t,"class","dl-widget svelte-1wmfpok"),rh(t,"data-qa","dl-input-translate-turnoff-settings")},m(g,v){Vg(g,t,v),jg(t,n),jg(t,o),jg(t,r),of(i,r,null),jg(r,s),of(a,r,null),jg(t,l),jg(t,c),jg(c,d),jg(c,u),jg(c,p),jg(p,m),h=!0,f||(_=[th(d,"click",(function(){xg(e[1]===_P.inputSettings?e[8]:e[9])&&(e[1]===_P.inputSettings?e[8]:e[9]).apply(this,arguments)})),th(p,"click",e[11])],f=!0)},p(t,n){e=t;const o={};32&n[0]&&(o.checked=e[5]===q.disablePerSite),i.$set(o);const r={};32&n[0]&&(r.checked=e[5]===q.disableEverywhere),a.$set(r),(!h||32&n[0]&&g!==(g=Ng("btn btn-primary "+(e[5]?"":"disabled"))+" svelte-1wmfpok"))&&rh(p,"class",g)},i(e){h||(Yh(i.$$.fragment,e),Yh(a.$$.fragment,e),h=!0)},o(e){Kh(i.$$.fragment,e),Kh(a.$$.fragment,e),h=!1},d(e){e&&Yg(t),rf(i),rf(a),f=!1,Sg(_)}}}function PP(e){let t,n,o,r,i;n=new RP({props:{fromShortcut:e[2]}}),n.$on("languageChanged",e[22]);let s=e[6]&&e[6].targetLanguageUserInput&&UP(e);return{c(){t=Zg("div"),nf(n.$$.fragment),o=Jg(),s&&s.c(),r=eh(),rh(t,"class","dl-widget svelte-1wmfpok")},m(e,a){Vg(e,t,a),of(n,t,null),Vg(e,o,a),s&&s.m(e,a),Vg(e,r,a),i=!0},p(e,t){const o={};4&t[0]&&(o.fromShortcut=e[2]),n.$set(o),e[6]&&e[6].targetLanguageUserInput?s?s.p(e,t):(s=UP(e),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},i(e){i||(Yh(n.$$.fragment,e),i=!0)},o(e){Kh(n.$$.fragment,e),i=!1},d(e){e&&(Yg(t),Yg(o),Yg(r)),rf(n),s&&s.d(e)}}}function UP(e){let t,n,o,r,i,s,a,l;return{c(){t=Zg("div"),n=Zg("div"),o=Zg("div"),r=Zg("span"),r.textContent=`${chrome.i18n.getMessage("input_translation_link_more_settings")}`,i=Jg(),s=Zg("span"),rh(s,"class","icon icon-external-link svelte-1wmfpok"),rh(o,"class","link link-settings svelte-1wmfpok"),rh(o,"data-qa","dl-input-translate-open-settings-page"),rh(n,"class","action-container svelte-1wmfpok"),rh(t,"class","dl-widget svelte-1wmfpok")},m(c,d){Vg(c,t,d),jg(t,n),jg(n,o),jg(o,r),jg(o,i),jg(o,s),a||(l=th(o,"click",e[10]),a=!0)},p:wg,d(e){e&&Yg(t),a=!1,l()}}}function BP(e){let t,n,o,r;const i=[PP,DP],s=[];function a(e,t){return e[3]===_P.generalSettings?0:e[3]===_P.inputSettings?1:-1}return~(t=a(e))&&(n=s[t]=i[t](e)),{c(){n&&n.c(),o=eh()},m(e,n){~t&&s[t].m(e,n),Vg(e,o,n),r=!0},p(e,r){let l=t;t=a(e),t===l?~t&&s[t].p(e,r):(n&&(qh(),Kh(s[l],1,1,(()=>{s[l]=null})),Vh()),~t?(n=s[t],n?n.p(e,r):(n=s[t]=i[t](e),n.c()),Yh(n,1),n.m(o.parentNode,o)):n=null)},i(e){r||(Yh(n),r=!0)},o(e){Kh(n),r=!1},d(e){e&&Yg(o),~t&&s[t].d(e)}}}function WP(e){let t,n,o,r;return n=new OP({props:{$$slots:{default:[BP]},$$scope:{ctx:e}}}),n.$on("close",e[23]),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class",o="settings-container settings-container__"+e[0]+" svelte-1wmfpok")},m(o,i){Vg(o,t,i),of(n,t,null),e[24](t),r=!0},p(e,i){const s={};110&i[0]|1&i[1]&&(s.$$scope={dirty:i,ctx:e}),n.$set(s),(!r||1&i[0]&&o!==(o="settings-container settings-container__"+e[0]+" svelte-1wmfpok"))&&rh(t,"class",o)},i(e){r||(Yh(n.$$.fragment,e),r=!0)},o(e){Kh(n.$$.fragment,e),r=!1},d(o){o&&Yg(t),rf(n),e[24](null)}}}function zP(e,n,o){let r;const i=Sh();let s=_P.generalSettings;const a=$h("deepl_settings");kg(e,a,(e=>o(6,r=e)));let l,c,{startPage:d}=n,{fromShortcut:u=!1}=n,{icon:p}=n,{position:m="top"}=n,{registerSettingsCallbacks:g}=n,{unregisterSettingsCallbacks:h}=n,{closeSettings:f}=n,_={top:0,bottom:0,left:0,right:0},v={height:0,width:0},y=140,w=387,b="";const E=()=>{if(p){const e=p.getBoundingClientRect();let t={};for(const n of["top","bottom","left","right"])e[n]!==_[n]&&(t[n]=e[n]);Object.keys(t).length&&o(18,_={..._,...t});let n={};window.innerHeight!==v.height&&(n.height=window.innerHeight),window.innerWidth!==v.width&&(n.width=window.innerWidth),Object.keys(n).length&&o(19,v={...v,...n})}else o(18,_={top:0,bottom:0,left:0,right:0})};return Eh((()=>{E(),g({recalculateSettingsCoords:E}),c=S_(l,(({clientHeight:e,clientWidth:t})=>{o(20,y=e),o(21,w=t)}))})),Th((()=>{h(),c&&c()})),e.$$set=e=>{"startPage"in e&&o(1,d=e.startPage),"fromShortcut"in e&&o(2,u=e.fromShortcut),"icon"in e&&o(13,p=e.icon),"position"in e&&o(0,m=e.position),"registerSettingsCallbacks"in e&&o(14,g=e.registerSettingsCallbacks),"unregisterSettingsCallbacks"in e&&o(15,h=e.unregisterSettingsCallbacks),"closeSettings"in e&&o(16,f=e.closeSettings)},e.$$.update=()=>{3932160&e.$$.dirty[0]&&o(0,m=(({iconCoordinates:e,viewportSize:t,popupHeight:n,popupWidth:o})=>{if(!p)return"top";const r={top:e.top>n,bottom:t.height-e.bottom>n,right:t.width-e.right>o,left:e.left>o};for(const[e,t]of Object.entries(r))if(t)return e;return"top"})({iconCoordinates:_,viewportSize:v,popupHeight:y,popupWidth:w})),2&e.$$.dirty[0]&&d&&o(3,s=d)},[m,d,u,s,l,b,r,a,function(){i("close")},function(){var e;o(5,b=""),e=_P.generalSettings,o(3,s=e)},function(){t({action:"dlOpenInternalPage",payload:{destination:RT.settings_writing}})},function(){if(!b)return;switch(b){case q.disableEverywhere:a.set({enableInputTranslation:!1}),t({action:"dlTrackSettingChanged",payload:{settingType:q.disableEverywhere,domainName:window.location.hostname,uiFunction:V,uiLocation:B.inputTranslationSettingPopup}}),f();break;case q.disablePerSite:!function(){let e=r.blacklistDomainsForWriting;e&&!e.includes(window.location.hostname)&&(e.push(window.location.hostname),a.set({blacklistDomainsForWriting:e}),t({action:"dlTrackSettingChanged",payload:{settingType:q.disablePerSite,domainName:window.location.hostname,uiFunction:V,uiLocation:B.inputTranslationSettingPopup}}));f()}()}let e=mT(window.location.hostname,["www."]);t({action:"dlSendNotification",payload:{type:P.inputTranslation,options:{theme:U.green_theme,currentDomain:e,saveAction:b,settingsPageURL:RT.settings_writing}}})},function(e){o(5,b=e.currentTarget.value)},p,g,h,f,E,_,v,y,w,function(t){Ch.call(this,e,t)},function(t){Ch.call(this,e,t)},function(e){Lh[e?"unshift":"push"]((()=>{l=e,o(4,l)}))}]}class FP extends af{constructor(e){super(),sf(this,e,zP,WP,$g,{startPage:1,fromShortcut:2,icon:13,position:0,registerSettingsCallbacks:14,unregisterSettingsCallbacks:15,closeSettings:16,recalculateSettingsCoords:17},null,[-1,-1])}get recalculateSettingsCoords(){return this.$$.ctx[17]}}function HP(e){let t,n,o,r,i,s;return n=new Wy({props:{error:e[1],config:{small:!0},close:e[2]}}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class",o="error-container error-container__"+e[0]+" svelte-16e3fjt")},m(o,a){Vg(o,t,a),of(n,t,null),e[12](t),r=!0,i||(s=[Dg(__.call(null,t,{isShadow:!0})),th(t,"click_outside",e[13])],i=!0)},p(e,[i]){const s={};2&i&&(s.error=e[1]),4&i&&(s.close=e[2]),n.$set(s),(!r||1&i&&o!==(o="error-container error-container__"+e[0]+" svelte-16e3fjt"))&&rh(t,"class",o)},i(e){r||(Yh(n.$$.fragment,e),r=!0)},o(e){Kh(n.$$.fragment,e),r=!1},d(o){o&&Yg(t),rf(n),e[12](null),i=!1,Sg(s)}}}function jP(e,t,n){let o,r,{errorMessage:i}=t,{icon:s}=t,{position:a="top"}=t,{registerErrorCallbacks:l}=t,{unregisterErrorCallbacks:c}=t,{close:d}=t,u=140,p=387,m={top:0,bottom:0,left:0,right:0},g={height:0,width:0};const h=()=>{if(s){const e=s.getBoundingClientRect();let t={};for(const n of["top","bottom","left","right"])e[n]!==m[n]&&(t[n]=e[n]);Object.keys(t).length&&n(10,m={...m,...t});let o={};window.innerHeight!==g.height&&(o.height=window.innerHeight),window.innerWidth!==g.width&&(o.width=window.innerWidth),Object.keys(o).length&&n(11,g={...g,...o})}else n(10,m={top:0,bottom:0,left:0,right:0})};Eh((()=>{h(),l({recalculateErrorCoords:h}),r=S_(o,(({clientHeight:e,clientWidth:t})=>{n(8,u=e),n(9,p=t)}))})),Th((()=>{c(),r&&r()}));return e.$$set=e=>{"errorMessage"in e&&n(1,i=e.errorMessage),"icon"in e&&n(4,s=e.icon),"position"in e&&n(0,a=e.position),"registerErrorCallbacks"in e&&n(5,l=e.registerErrorCallbacks),"unregisterErrorCallbacks"in e&&n(6,c=e.unregisterErrorCallbacks),"close"in e&&n(2,d=e.close)},e.$$.update=()=>{3840&e.$$.dirty&&n(0,a=(({iconCoordinates:e,viewportSize:t,highlighterHeight:n,highlighterWidth:o})=>{if(!s)return"top";const r={top:e.top>n,bottom:t.height-e.bottom>n,right:t.width-e.right>o,left:e.left>o};for(const[e,t]of Object.entries(r))if(t)return e;return"top"})({iconCoordinates:m,viewportSize:g,popupHeight:u,popupWidth:p}))},[a,i,d,o,s,l,c,h,u,p,m,g,function(e){Lh[e?"unshift":"push"]((()=>{o=e,n(3,o)}))},()=>d()]}class GP extends af{constructor(e){super(),sf(this,e,jP,HP,$g,{errorMessage:1,icon:4,position:0,registerErrorCallbacks:5,unregisterErrorCallbacks:6,close:2,recalculateErrorCoords:7})}get recalculateErrorCoords(){return this.$$.ctx[7]}}function qP(e){let t,n,o;return{c(){t=Zg("div")},m(r,i){Vg(r,t,i),n||(o=[th(t,"click_outside",e[16]),Dg(__.call(null,t,{isShadow:!0}))],n=!0)},p:wg,i:wg,o:wg,d(e){e&&Yg(t),n=!1,Sg(o)}}}function VP(e){let t,n,o,r,i,s,a,l,c,d,u,p,m;o=new SP({props:{inputArea:e[1],lockActiveElement:e[17],openSettings:e[20],closeSettings:e[21],hideOnboardingHighlighter:e[18],registerIconCallbacks:e[22],unregisterIconCallbacks:e[23],getActiveElement:e[19],isInputAreaRTL:e[9],setErrorMessage:e[34]}});let g=e[3]&&YP(e),h=e[4]&&KP(e),f=e[7]&&ZP(e);return{c(){t=Zg("div"),n=Zg("div"),nf(o.$$.fragment),r=Jg(),g&&g.c(),i=Jg(),h&&h.c(),s=Jg(),f&&f.c(),rh(n,"class","dl-input-placeholder svelte-d7i1bp"),uh(n,"disabled",e[12]),uh(n,"reduced-space",!e[13]),uh(n,"other-extension-present",e[11]),uh(n,"chat-gpt-present",e[0].isChatGPTPresent),rh(t,"class","dl-input-positioner svelte-d7i1bp"),rh(t,"dir",c=e[9]?"rtl":"ltr"),rh(t,"style",d=[`top: ${e[0].top}px;`,`left: ${e[0].left}px;`,`height: ${e[0].height}px;`,`width: ${e[0].width}px;`,`position: ${e[0].position};`].join(" ")),uh(t,"debug-mode",QP)},m(a,l){Vg(a,t,l),jg(t,n),of(o,n,null),jg(n,r),g&&g.m(n,null),jg(n,i),h&&h.m(n,null),jg(n,s),f&&f.m(n,null),e[38](n),u=!0,p||(m=[Dg(__.call(null,n,{isShadow:!0})),th(n,"click_outside",e[37]),th(n,"click",e[17])],p=!0)},p(e,r){const a={};2&r[0]&&(a.inputArea=e[1]),512&r[0]&&(a.isInputAreaRTL=e[9]),128&r[0]&&(a.setErrorMessage=e[34]),o.$set(a),e[3]?g?(g.p(e,r),8&r[0]&&Yh(g,1)):(g=YP(e),g.c(),Yh(g,1),g.m(n,i)):g&&(qh(),Kh(g,1,1,(()=>{g=null})),Vh()),e[4]?h?(h.p(e,r),16&r[0]&&Yh(h,1)):(h=KP(e),h.c(),Yh(h,1),h.m(n,s)):h&&(qh(),Kh(h,1,1,(()=>{h=null})),Vh()),e[7]?f?(f.p(e,r),128&r[0]&&Yh(f,1)):(f=ZP(e),f.c(),Yh(f,1),f.m(n,null)):f&&(qh(),Kh(f,1,1,(()=>{f=null})),Vh()),(!u||4096&r[0])&&uh(n,"disabled",e[12]),(!u||8192&r[0])&&uh(n,"reduced-space",!e[13]),(!u||2048&r[0])&&uh(n,"other-extension-present",e[11]),(!u||1&r[0])&&uh(n,"chat-gpt-present",e[0].isChatGPTPresent),(!u||512&r[0]&&c!==(c=e[9]?"rtl":"ltr"))&&rh(t,"dir",c),(!u||1&r[0]&&d!==(d=[`top: ${e[0].top}px;`,`left: ${e[0].left}px;`,`height: ${e[0].height}px;`,`width: ${e[0].width}px;`,`position: ${e[0].position};`].join(" ")))&&rh(t,"style",d)},i(e){u||(Yh(o.$$.fragment,e),Yh(g),Yh(h),Yh(f),Oh((()=>{u&&(l&&l.end(1),a=Xh(n,zf,{duration:100}),a.start())})),u=!0)},o(e){Kh(o.$$.fragment,e),Kh(g),Kh(h),Kh(f),a&&a.invalidate(),l=Qh(n,zf,{duration:150}),u=!1},d(n){n&&Yg(t),rf(o),g&&g.d(),h&&h.d(),f&&f.d(),e[38](null),n&&l&&l.end(),p=!1,Sg(m)}}}function YP(e){let t,n,o,r;return n=new kP({props:{onClose:e[18],position:"top",registerHighlighterCallbacks:e[28],unregisterHighlighterCallbacks:e[29],icon:e[2]}}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","dl-onboarding-highlighter svelte-d7i1bp"),rh(t,"dir",o=e[9]?"rtl":"ltr")},m(e,o){Vg(e,t,o),of(n,t,null),r=!0},p(e,i){const s={};4&i[0]&&(s.icon=e[2]),n.$set(s),(!r||512&i[0]&&o!==(o=e[9]?"rtl":"ltr"))&&rh(t,"dir",o)},i(e){r||(Yh(n.$$.fragment,e),r=!0)},o(e){Kh(n.$$.fragment,e),r=!1},d(e){e&&Yg(t),rf(n)}}}function KP(e){let t,n;return t=new FP({props:{icon:e[2],startPage:e[5],fromShortcut:e[6],position:"top",registerSettingsCallbacks:e[24],unregisterSettingsCallbacks:e[25],closeSettings:e[21]}}),t.$on("languageChanged",e[35]),t.$on("close",e[21]),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};4&n[0]&&(o.icon=e[2]),32&n[0]&&(o.startPage=e[5]),64&n[0]&&(o.fromShortcut=e[6]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function ZP(e){let t,n;return t=new GP({props:{errorMessage:e[7],icon:e[2],position:"top",registerErrorCallbacks:e[26],unregisterErrorCallbacks:e[27],close:e[36]}}),{c(){nf(t.$$.fragment)},m(e,o){of(t,e,o),n=!0},p(e,n){const o={};128&n[0]&&(o.errorMessage=e[7]),4&n[0]&&(o.icon=e[2]),128&n[0]&&(o.close=e[36]),t.$set(o)},i(e){n||(Yh(t.$$.fragment,e),n=!0)},o(e){Kh(t.$$.fragment,e),n=!1},d(e){rf(t,e)}}}function XP(e){let t,n,o,r;const i=[VP,qP],s=[];function a(e,t){return e[10]&&e[0]&&e[14]?0:1}return t=a(e),n=s[t]=i[t](e),{c(){n.c(),o=eh()},m(e,n){s[t].m(e,n),Vg(e,o,n),r=!0},p(e,r){let l=t;t=a(e),t===l?s[t].p(e,r):(qh(),Kh(s[l],1,1,(()=>{s[l]=null})),Vh(),n=s[t],n?n.p(e,r):(n=s[t]=i[t](e),n.c()),Yh(n,1),n.m(o.parentNode,o))},i(e){r||(Yh(n),r=!0)},o(e){Kh(n),r=!1},d(e){e&&Yg(o),s[t].d(e)}}}const QP=!1;function JP(n,o,r){let i,s,a,l,c;const d=$h("deepl_settings");kg(n,d,(e=>r(33,c=e)));const u=20,p=40;let m,g,h,f,_,v,y,w,b,E,T=!1,S=!1,x=!1,$=!1,C=!1,{trackInputInjectionIfNecessary:k}=o,{registerPositionerCallbacks:L}=o,{unregisterPositionerCallbacks:I}=o,A=!1,R=[],M={top:0,left:0,height:0,width:0,position:"absolute",isLanguageToolsPresent:!1,isGrammarlyPresent:!1,isChatGPTPresent:lP()},N=!1;const O=()=>{r(1,m=document.activeElement);const e=function(e){const t=qL.find((({domain:t})=>{const n=t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&");return new RegExp(n).test(e)}));return t||null}(window.location.href);if(e?.uniqueDataAttributes&&e.uniqueDataAttributes.length>0)for(let t of e.uniqueDataAttributes)if(m.dataset[t.key]===t.value)return;if(e?.selectors&&e.selectors.length>0)for(let t of e.selectors){const e=document.querySelector(t),n=kT(e),o=kT(m),r=n.toString()===o.toString();if(e===m||e.isSameNode(m)||r)return}R=mP({inputArea:m}),G(),k(),P()},D=()=>{T=!1},P=()=>{if(!c.isInputHighlighterShown&&!rT()){Og(d,c.isInputHighlighterShown=!0,c),r(3,S=!0);try{t({action:"dltrackOpenInputHighlighter",payload:{domainName:e.websiteData.hostname}})}catch(e){console.error(e)}}},U=(e=oe.outside_click)=>{r(3,S=!1);try{t({action:"dltrackCloseInputHighlighter",payload:{event:e}})}catch(e){console.error(e)}},W=()=>{F(),N&&(r(9,A=Gt(m)),H(),E&&E(),S&&v&&v(),x&&y&&y(),w&&w())},z=(e=document.activeElement)=>{const t=e.contentDocument;return t&&t.activeElement?z(t.activeElement):e},F=()=>{const e=z(),t=N&&!T&&e!==m,n=!N&&e&&uP(e),o=m&&!m.isConnected;!t||n||C?(C=!1,(t||o)&&(U(),r(7,f=void 0),q(),R=[],r(1,m=void 0)),n&&O()):C=!0},H=()=>{r(0,M=pP({inputArea:m}))},j=()=>{H()},G=()=>{r(10,N=!0),H();for(const e of R)e.addEventListener("scroll",j);window.addEventListener("scroll",j)},q=()=>{r(10,N=!1);for(const e of R)e.removeEventListener("scroll",j);window.removeEventListener("scroll",j),Z()},Y=()=>{_&&_()},K=({page:e,fromShortcut:n=!1}={})=>{r(5,h=e),r(6,$=n),x||(r(4,x=!0),t({action:"dlTrackInlineSettingOpened",payload:{uiFunction:V,uiLocation:B.inputTranslationTriggerIcon}}))},Z=()=>{x&&r(4,x=!1)};Eh((()=>{R=mP({inputArea:m}),L({processRefreshCycle:W,triggerTranslation:Y,openSettings:K})})),Th((()=>{for(const e of R)e.removeEventListener("scroll",j);I()}));return n.$$set=e=>{"trackInputInjectionIfNecessary"in e&&r(30,k=e.trackInputInjectionIfNecessary),"registerPositionerCallbacks"in e&&r(31,L=e.registerPositionerCallbacks),"unregisterPositionerCallbacks"in e&&r(32,I=e.unregisterPositionerCallbacks)},n.$$.update=()=>{1&n.$$.dirty[0]&&r(14,i=M.height>=u),1&n.$$.dirty[0]&&r(13,s=M.height>=p),4&n.$$.dirty[1]&&r(12,a=!c.enableInputTranslation||uT(window.location.host,window.location.href)||c.blacklistDomainsForWriting.includes(window.location.host)||c.isGmailEnabled&&rT()),1&n.$$.dirty[0]&&r(11,l=M.isLanguageToolsPresent||M.isGrammarlyPresent)},[M,m,g,S,x,h,$,f,b,A,N,l,a,s,i,d,D,()=>{T=!0},U,z,K,Z,({processRefreshCycle:e,languageChanged:t,triggerTranslation:n})=>{E=e,r(8,b=t),_=n},()=>{E=void 0,r(8,b=void 0),_=void 0},({recalculateSettingsCoords:e})=>{y=e},()=>{y=void 0},({recalculateErrorCoords:e})=>{w=e},()=>{w=void 0},({recalculateHighlighterCoords:e})=>{v=e},()=>{v=void 0},k,L,I,c,e=>{r(7,f=e)},e=>b&&b(e.detail.lang),()=>{r(7,f=void 0)},()=>{D(),Z()},function(e){Lh[e?"unshift":"push"]((()=>{g=e,r(2,g)}))}]}class eU extends af{constructor(e){super(),sf(this,e,JP,XP,$g,{trackInputInjectionIfNecessary:30,registerPositionerCallbacks:31,unregisterPositionerCallbacks:32},null,[-1,-1])}}function tU(e){let t,n,o;return n=new eU({props:{trackInputInjectionIfNecessary:e[0],registerPositionerCallbacks:e[1],unregisterPositionerCallbacks:e[2]}}),{c(){t=Zg("div"),nf(n.$$.fragment),rh(t,"class","dl-input-translation-container svelte-95aucy")},m(e,r){Vg(e,t,r),of(n,t,null),o=!0},p:wg,i(e){o||(Yh(n.$$.fragment,e),o=!0)},o(e){Kh(n.$$.fragment,e),o=!1},d(e){e&&Yg(t),rf(n)}}}function nU(e,n,o){let r,i,s,a;xh("deepl_settings",df),xh("deepl_website_settings",Rw),xh("text_direction",jt());let l=!0,c=!1;const d=()=>{r&&r()},u=async(e,t,n)=>{if("dlChangeActiveTabStatus"===e.action)o(5,l=e.payload.isActive),n();return!0},p=()=>{a&&clearInterval(a),a=setInterval(d,300)},m=()=>{clearInterval(a)};return Eh((()=>{p(),chrome.runtime.onMessage.addListener(u)})),Th((()=>{a&&m(),chrome.runtime.onMessage.removeListener(u)})),e.$$.update=()=>{32&e.$$.dirty&&(l?p():m())},[()=>{c||(c=!0,t({action:"dlTrackInputTranslationInjection",payload:window.location.host}))},({processRefreshCycle:e,triggerTranslation:t,openSettings:n})=>{r=e,i=t,s=n},()=>{r=void 0,i=void 0,s=void 0},()=>{i&&i()},()=>{s&&s({fromShortcut:!1})},l]}class oU extends af{constructor(e){super(),sf(this,e,nU,tU,$g,{triggerTranslation:3,openSettingsFromShortcut:4})}get triggerTranslation(){return this.$$.ctx[3]}get openSettingsFromShortcut(){return this.$$.ctx[4]}}class rU{static HTML_TAG_NAME="deepl-input-controller";static createElement=(e=document)=>{const t=e.createElement(rU.HTML_TAG_NAME),n=new rU(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.triggerTranslation=n.triggerTranslation,t.openSettingsFromShortcut=n.openSettingsFromShortcut,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.shadowContainer.dir="ltr",this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css"));this.domElement.shadowContainer.style.cssText="visibility: initial !important;",this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=()=>{this.domElement.mainComponent=new oU({target:this.domElement.shadowContainer,props:{onClose:this.domElement.cleanupDOM,controller:this.domElement}})};triggerTranslation=()=>{this.domElement.mainComponent.triggerTranslation()};openSettingsFromShortcut=()=>{this.domElement.mainComponent.openSettingsFromShortcut()};cleanupDOM(){this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}let iU,sU,aU,lU,cU,dU,uU,pU=0,mU=[];const gU=Rw.subscribe((e=>{iU=e.translationState,e.translatedDOM&&(mU=e.translatedDOM.map((e=>e))),e.translationState!==cU&&(cU=e.translationState,iU===d.showOriginal&&fU())})),hU=df.subscribe((e=>{if(0!==Object.keys(e).length){if(dU=e.isLoggedIn,uU=e.translatorServiceType,lU&&lU!==e.selectedTargetLanguage){const e=iU!==d.none;e&&fU(),Rw.update({translatedDOM:[]}),mU=[],e&&Rw.update({translationState:d.none})}lU=e.selectedTargetLanguage}}));function fU(){mU.forEach((e=>{xU(e.original,e.clone),TU(e.original,e.clone),_U(e.original,!1)})),aU&&(aU.disconnect(),aU=void 0),sU&&(document.removeEventListener("scroll",sU),sU=void 0),iU=d.none}function _U(e,t){if("#text"!=e.nodeName&&"#comment"!=e.nodeName&&e.dataset){e.dataset.dlTranslated=t;for(const n of e.childNodes)_U(n,t)}}async function vU(e,n,o){try{const r=e.contentDocument||e.contentWindow.document;if(!e||!function(e){return!!e.contentDocument&&kU(e,.3)}(e))return;const i=[];if(LU(i,r.documentElement),0===i.length)return;await IU(i,n.sourceLang,n.noTranslationLanguages,n.trigger,o,window.location.hostname),e.translatedDOM=[...e.translatedDOM||[],...i],t({action:"dlTrackIframeTranslationSuccessful"})}catch(e){console.error("error",e),t({action:"dlTrackIframeTranslationFailed",payload:{errorCode:e.name,errorMessage:e.message}})}}function yU(e){if(void 0!==e.dataset){void 0===e.dataset.dlUid&&(e.dataset.dlUid=pU++),void 0===e.dataset.dlOriginal&&(e.dataset.dlOriginal=!0);for(const t of e.childNodes)yU(t)}}function wU(e){if(function(e){if(!e?.attributes)return!1;const t=e.attributes,n=t instanceof NamedNodeMap,o=t.constructor===NamedNodeMap,r=Object.getPrototypeOf(t)===NamedNodeMap.prototype;return n&&o&&r}(e)){if(void 0!==e.attributes){let t=null;for(void 0!==e.dataset&&void 0!==e.dataset.dlUid&&(t=e.dataset.dlUid);e.attributes.length>0;)e.removeAttribute(e.attributes[0].name);null!==t&&(e.dataset.dlUid=t)}for(const t of e.childNodes)wU(t)}}function bU(e,t){yU(t);const n=t.cloneNode(!0);wU(n),e.push({original:t,clone:n}),_U(t,!0)}function EU(e,t){if(void 0===t.dataset)return null;if(e.dataset?.dlUid&&t.dataset.dlUid&&e.dataset.dlUid===t.dataset.dlUid)return e;for(const n of e.childNodes){const e=EU(n,t);if(null!==e)return e}return null}function TU(e,t){const n=[];for(;e.childNodes.length>0;)n.push(e.removeChild(e.childNodes[0]));for(;t.childNodes.length>0;)e.appendChild(t.childNodes[0]);for(const e of n)t.appendChild(e)}function SU(e,t){if(null===e.parentNode||null===t.parentNode)return;const n=document.createElement("div");e.parentNode.replaceChild(n,e),t.parentNode.replaceChild(e,t),n.parentNode.replaceChild(t,n),TU(e,t)}function xU(e,t){for(const n of t.childNodes){const t=EU(e,n);if(t){let o;o=t.dataset&&"true"===t.dataset.dlOriginal?t:t.cloneNode(!1),SU(o,n),xU(e,o)}else xU(e,n)}}function $U(t,n=!0){if("#text"==t.nodeName||"#comment"==t.nodeName)return!1;if(!aP(t,e.websiteData.hostname))return!1;if(t.isContentEditable&&n)return!1;if(function(e){switch(e.tagName.toLowerCase()){case"input":return"submit"!==e.getAttribute("type");case"textarea":return!0;default:return!1}}(t))return!1;if(CT(t))return!1;for(const e of t.childNodes)if("#text"==e.nodeName&&""!=e.wholeText.trim()||"font"==e.nodeName)return!0;for(const e of t.childNodes)if("#text"!=e.nodeName&&"#comment"!=e.nodeName&&(!$T(e)||CT(e)||"inline"!=window.getComputedStyle(e).display||ET(t)))return!1;return!(void 0===t.innerText||""==t.innerText.trim())}function CU(e){if(void 0!==e.dataset&&(void 0===e.dataset.dlTranslated||"false"===e.dataset.dlTranslated))return!1;for(const t of e.childNodes)if("#text"!=t.nodeName&&"#comment"!=t.nodeName&&!CU(t))return!1;return!0}function kU(e,t){const n=e.getBoundingClientRect(),o=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight;if(n.bottom<0-r*t||n.right<0-o*t)return!1;if(n.top>r*(1+t))return!1;if(n.left>o*(1+t))return!1;const i=window.getComputedStyle(e).position;return!("absolute"!==i&&"fixed"!==i&&null===e.offsetParent)}function LU(e,t){if("#text"!=t.nodeName&&"#comment"!=t.nodeName&&!function(e){if("no"==e.getAttribute("translate"))return!0;const t=e.className;return null!=t&&null!=t.split&&t.split(" ").includes("notranslate")}(t))if($U(t))kU(t,.3)&&!CU(t)&&bU(e,t);else for(const n of t.childNodes)LU(e,n)}async function IU(e,n,o,r,i,s){if(e.length>0)return t({action:"dlRequestHtmlTranslation",payload:{sourceLang:n,trigger:r,texts:e.map((e=>ft(e.clone.innerHTML))),isFirstTime:i,domainName:s}}).then((t=>{for(let n=0;n<e.length;++n)e[n].clone.innerHTML=ft(t[n]),xU(e[n].original,e[n].clone),TU(e[n].original,e[n].clone),_U(e[n].original,!0)}))}async function AU(e,t){if(!nt({isLoggedIn:dU,translatorServiceType:uU},be.TRANSLATOR))return;const n=[];try{LU(n,document.documentElement);try{document.querySelectorAll("iframe").forEach((n=>vU(n,e,t)))}catch(e){console.error(e)}if(0===n.length)return;Rw.update({translationState:d.ongoingTranslation}),await IU(n,e.sourceLang,e.noTranslationLanguages,e.trigger,t,window.location.hostname)}catch(e){console.error("error",e);for(const e of n)_U(e.original,!1);return Rw.update({translationState:d.none,error:e.name?e.name:e}),aU&&aU.disconnect(),void(sU&&document.removeEventListener("scroll",sU))}Rw.update({translationState:d.isTranslationComplete}),n.length>0&&Rw.update({translatedDOM:[...mU,...n]})}async function RU(e){aU&&(aU.disconnect(),aU=void 0),sU&&(document.removeEventListener("scroll",sU),sU=void 0);let t,n,o=!1;mU.length>0?(Rw.update({translationState:d.ongoingTranslation}),fU(),mU.forEach((e=>{TU(e.original,e.clone),TU(e.original,e.clone),_U(e.original,!0)})),Rw.update({translationState:d.isTranslationComplete})):o=!0,await AU(e,o),sU=async()=>{n=!0,window.clearTimeout(t),t=setTimeout((function(){iU===d.isTranslationComplete&&window.requestAnimationFrame((async()=>{await AU(e,!1),n=!1}))}),100)},document.addEventListener("scroll",sU),aU=new MutationObserver((t=>{if(n)return;if(iU!==d.isTranslationComplete)return;t.filter((e=>e.addedNodes&&e.addedNodes.length>0)).length>0&&window.requestAnimationFrame((async()=>{await AU(e,!1)}))})),aU.observe(document.body,{childList:!0,subtree:!0}),v_((()=>{gU(),hU(),aU&&aU.disconnect(),sU&&document.removeEventListener("scroll",sU)}))}const MU=n=>{if(n.targetLang&&window.getSelection()?.toString()){const n=window.getSelection().toString();document.getElementsByTagName("deepl-inline-translate-tooltip").length||MD({websiteData:Rw}),Rw.update({translationState:d.ongoingTranslation,translatedSnippet:"",snippetDetectedSourceLang:"",translatedDOMSnippet:"",originalSnippet:""}),t({action:"dlRequestInlineTranslation",payload:{requests:[{text:n}],domainName:window.location.hostname,trigger:h,sourceLang:"auto",websiteLanguage:e.websiteData.websiteLanguage}}).then((e=>{Rw.update({translationState:d.none,translatedSnippet:e[0].text,snippetDetectedSourceLang:e[0].detected_source_language,originalSnippet:n,websiteLanguage:e[0].detected_source_language})})).catch((e=>{Rw.update({translationState:d.none,originalSnippet:n,error:e.message?e.message:e})}))}},NU=async e=>{const n=await t({action:"dlGetAppSettings"});let o=window.getSelection().anchorNode;"#text"===o.nodeName.toLowerCase()&&(o=o.parentNode);const r="textarea"===o.nodeName.toLowerCase(),i=o.closest('[contenteditable="true"]'),s=o.closest("textarea"),a=o.querySelector("textarea"),l=a&&a.selectionStart!==a.selectionEnd,c=r&&o||i||s||l&&a;c?((e,t,n)=>{const o=document.querySelector(rU.HTML_TAG_NAME);o&&(t?o.openSettingsFromShortcut():n?o.triggerTranslation():o.openSettingsFromShortcut())})(0,e,n.targetLanguageUserInput):MU({targetLang:n.selectedTargetLanguage}),t({action:"dlTrackRightClick",payload:{translationType:c?g:m,domainName:window.location.host}})},OU=async(e,n)=>{ND(),RD();const o=await t({action:"dlGetAppSettings"});var r;RU({sourceLang:e,trigger:n,isFirstTime:!0,noTranslationLanguages:(r=o.languagesForTranslation,Object.keys(r).filter((e=>r[e]===c)))}).catch((e=>{Rw.update({translationState:d.none,error:e.message?e.message:e})}))},DU=async(e,t)=>{let n=5e3;if(t===be.WRITE&&(n=2e3),e.length<=n)return!1;const o=await VU();return!nt(o,t)},PU=async(e,t)=>{const n=e.length,o=await VU(),r=nt(o,be.TRANSLATOR),i=nt(o,be.WRITE);if(t===ae.write){const e=o.isLoggedIn?T:E;if(r&&!i&&n>e)throw new Of(e,"Char limit exceeded (Translator Pro, Write Free)");if(!i&&n>e)throw new Nf(e,"Char limit exceeded (Write Free Or Anonymous)")}if(!o.isLoggedIn&&n>w)throw new Mf(w,"Limit exceeded (anonymous user). Please upgrade");if(o.isLoggedIn&&!nt(o,be.TRANSLATOR)&&n>b)throw new Rf(b,"Limit exceeded (free account). Please upgrade")},UU=async e=>{const{event:n,targetLang:o}=e,r=document.querySelector("deepl-gdocs-icon");if(o&&r){const{originalText:e,textLines:i,entities:s,contentReference:a,originalObject:l}=St(n);if(document.getElementsByTagName("deepl-inline-translate-tooltip").length||MD({websiteData:Rw,platformBehaviour:re.gdocs}),await DU(e,be.TRANSLATOR))return void Rw.update({translationState:d.anonymousUserMaxCharExceeded,translatedSnippet:"",originalSnippet:e});Rw.update({translationState:d.ongoingTranslation,translatedSnippet:"",snippetDetectedSourceLang:"",translatedDOMSnippet:"",originalSnippet:""});try{const n=await t({action:"dlRequestGDocsSplitText",payload:{mode:Ak.TRANSLATE,texts:i}}),c=n.result.lang.detected,u=[],p=[];for(const e of n.result.texts){const t=[];for(const n of e.chunks)for(const e of n.sentences)p.push(e),t.push(p.length-1);u.push(t)}const m=(await t({action:"dlRequestGDocsProcessContent",payload:{mode:Ak.TRANSLATE,sentences:p,sourceLang:c,targetLang:o.substring(0,2),domain:window.location.host}})).result.translations.map(((e,t)=>({prefix:p[t].prefix,text:e.beams[0].sentences[0].text})));r.setContentProcessBuildingBlocks({detectedSourceLanguage:c,targetLang:o.substring(0,2),sentences:p,processedSentences:m,textLines:i,textLinesComponents:u,entities:s,contentReference:a,originalObject:l}),Rw.update({translationState:d.none,translatedSnippet:"GDOCS_CONTENT",snippetDetectedSourceLang:c,originalSnippet:e,websiteLanguage:c})}catch(t){console.error(t),Rw.update({translationState:d.none,originalSnippet:e,error:t.message?t.message:t})}}},BU=async({event:e,lang:n})=>{const{originalText:o,textLines:r,entities:i,contentReference:s,originalObject:a}=St(e);document.getElementsByTagName("deepl-inline-translate-tooltip").length||MD({websiteData:Rw,platformBehaviour:re.gdocs,textProcessingMode:ae.write});const l=document.querySelector("deepl-gdocs-icon"),c={lang:n,sourceLength:o.length,targetLength:0,nicheIntegration:re.gdocs,error:""};if(await DU(o,be.WRITE))return Rw.update({translationState:d.anonymousUserMaxCharExceeded,translatedSnippet:"",originalSnippet:o}),void(l&&l.setDeeplWriteTrackingData(c));Rw.update({translationState:d.ongoingTranslation,translatedSnippet:"",snippetDetectedSourceLang:"",translatedDOMSnippet:"",originalSnippet:""});try{const e=await t({action:"dlRequestGDocsSplitText",payload:{mode:Ak.WRITE,texts:r}}),n=e.result.lang.detected,u=[],p=[];for(const t of e.result.texts){const e=[];for(const n of t.chunks)for(const t of n.sentences)p.push(t),e.push(p.length-1);u.push(e)}const m=(await t({action:"dlRequestGDocsProcessContent",payload:{mode:Ak.WRITE,sentences:p,sourceLang:n,targetLang:n,domain:window.location.host}})).result.translations.map(((e,t)=>({prefix:p[t].prefix,text:e.beams[0].sentences[0].text})));l.setContentProcessBuildingBlocks({detectedSourceLanguage:n,targetLang:n,sentences:p,processedSentences:m,textLines:r,textLinesComponents:u,entities:i,contentReference:s,originalObject:a}),l.setDeeplWriteTrackingData(c),Rw.update({translationState:d.none,translatedSnippet:"GDOCS_CONTENT",snippetDetectedSourceLang:n,originalSnippet:o,websiteLanguage:n}),tB({eventType:Te,...c})}catch(e){const t=e.message?e.message:e;Rw.update({translationState:d.none,originalSnippet:o,error:t}),tB({eventType:Le,...c,error:t})}},WU=async e=>{const{sentences:n,targetLang:o,sourceLang:r,mode:i}=e;if(o){await PU(n.join(""),i);try{const e=await t({action:"dlRequestInputTranslation",payload:{requests:n.map((e=>({text:e}))),domainName:window.location.hostname,websiteLanguage:o,targetLang:o,sourceLang:r,platformBehavior:re.gslides,isHtml:!0,isWriteRequest:i===ae.write}}),s=e[0]?.texts;return s}catch(e){throw console.error(e),Error(e)}}},zU=async({event:e,targetLang:n,sourceLang:o,mode:r})=>{if(n){const{textLines:n,entities:i,contentReference:s,originalObject:a}=St(e);await PU(n.join(""),r);try{const e=await t({action:"dlRequestInlineTranslation",payload:{requests:n.map((e=>({text:e}))),domainName:window.location.hostname,trigger:h,sourceLang:o,nicheIntegration:re.gslides,isWriteRequest:r===ae.write}}),{processedText:l,processedEntities:c}=Lt({textLines:e.map((e=>e.text)),entities:i,contentReference:s});return Nt({entities:c,text:l,originalObject:a})}catch(e){console.error(e)}}},FU=async e=>{const{element:n,targetLang:o,content:r}=e;let i,s="";if(o)try{const i=await t({action:"dlRequestZendeskInputTranslation",payload:{content:r,domainName:window.location.hostname,websiteLanguage:o,targetLang:o,...e.formality&&{formality:e.formality}}}),a=i[0]?.texts;s=a?.[0]?.join(""),n.innerHTML="",t({action:"dlOnSuccessfulZendeskTranslation"})}catch(e){console.error(e),i=e}return[s,i]},HU=async e=>{const{targetLang:n,sourceLang:o,text:r,trigger:i}=e;let s,a="";if(o&&n)try{a=await t({action:"dlRequestZendeskMessageTranslation",payload:{domainName:window.location.hostname,sourceLang:o,targetLang:n,text:r,trigger:i}})}catch(e){console.error(e),s=e}return[a,s]},jU=async()=>{let e,n=[];try{const[o,r]=await t({action:"dlRequestTermbases"});r?e=r:n=o}catch(t){console.error(t),e=t}return[n,e]},GU=async()=>{let e=document.body.innerText.substring(0,200);if(!e||1===e.length){const t=document.title;t.length>=e.length&&(e=t)}let n="";const o=await chrome.i18n.detectLanguage(e);o&&o.languages?.length>0&&(n=o.languages.sort(((e,t)=>t.percentage-e.percentage))[0].language.substring(0,2).toUpperCase());try{t({action:"dlTrackDetectLanguage",payload:{language:n,domainName:window.location.host}})}catch(e){console.error(e)}return n},qU=async()=>{let t=document.documentElement.lang;!t&&e.websiteData.websiteLanguage&&(t=e.websiteData.websiteLanguage),pT(window.location.href);{const t=async()=>{let t=document.documentElement.lang;if(!t&&e.websiteData.websiteLanguage&&(t=e.websiteData.websiteLanguage),t)return t.substring(0,2).toUpperCase();try{Rw.update({translationState:d.ongoingAutoDetection});const e=await GU();return Rw.update({translationState:d.none}),e}catch(e){Rw.update({translationState:d.none,error:e.message?e.message:chrome.i18n.getMessage(e)})}},n=()=>{const e=document.documentElement.className;return/translated/g.test(e)},o=pT(window.location.href),r=await t();Rw.update({websiteLanguage:r,hostname:window.location.hostname,isSupportedLanguage:Dt(r),isGoogleTranslatedActive:n(),isValidUrlForPopup:o});const i=new MutationObserver((async()=>{const e=await t();Rw.update({websiteLanguage:e,isSupportedLanguage:Dt(e),isGoogleTranslatedActive:n(),isValidUrlForPopup:o})}));i.observe(document.documentElement,{attributes:!0,childList:!1,characterData:!1,subtree:!1,attributeFilter:["class"]}),v_((()=>{i.disconnect()}))}},VU=async()=>await t({action:"dlGetUserState"}),YU=async(n,o=!1)=>{if(n&&!n.isTrusted&&!o)return;const r=await t({action:"dlGetAppSettings"});XU(),await qU();const i=await VU();var s,a;nt(i,be.TRANSLATOR)&&(Dt(e.websiteData.websiteLanguage)&&(s=r.selectedTargetLanguage,a=e.websiteData.websiteLanguage,(Pt(s)!==a||e.websiteData.isGoogleTranslatedActive)&&(zt(e.websiteData.websiteLanguage,r.languagesForTranslation,c)||r.blacklistDomains.includes(e.websiteData.hostname)||dT(window.location.host,O)||(zt(e.websiteData.websiteLanguage,r.languagesForTranslation,l)&&OU(e.websiteData.websiteLanguage,f),r.enableFullPageTranslation&&window===window.parent&&PD()))))},KU=async()=>{await qU(),document.getElementsByTagName("deepl-input-controller").length||GD()},ZU=async()=>{await qU(),JD(Rw)},XU=()=>{_t()&&BD(),Vt()&&WD(),xE()&&HD(),rT()&&qD()},QU=e=>{X_.set(e)},JU=async e=>{const n=()=>{for(const t of Object.keys(J))if(J[t]&&e.match(J[t]))return t;if(document.querySelector("iframe#WebApplicationFrame")){const e=document.querySelector("form#frameForm, form#office_form"),t=e&&new URL(e.getAttribute("action"))?.hostname?.toLowerCase();if(t)for(const e of Object.keys(ee))if(ee[e]&&t.includes(ee[e]))return e}if("onedrive.live.com"===e)for(const e of Object.keys(te))if(te[e]&&document.querySelector(`#${te[e]}`))return e;return document.querySelector("body#jira")?"jira":document.querySelector("body#com-atlassian-confluence")?"confluence":void 0},o=n();o?t({action:"dlTrackLandingOnWebsite",payload:{website:o}}):setTimeout((()=>{const e=n();e&&t({action:"dlTrackLandingOnWebsite",payload:{website:e}})}),2e3)},eB=async({eventType:e,controller:n,sourceTextLength:o,targetTextLength:r,error:i,metaDataOverride:s={}})=>{const a=n?.getTicketLanguageInformation(),l={agentLanguage:(await t({action:"dlGetAppSettings"})).selectedTargetLanguage,ticketLanguage:a?.language,isTicketLanguageAutodetected:a?.isDetected,isTicketLanguageSupported:a?.isSupported,isAutoTranslateEnabled:n.getIsAutoTranslatedEnabled(),sourceTextLength:o,targetTextLength:r,inputHasSelection:n.getInputHasSelection(),error:i,...s};await t({action:"dlTrackZendeskCustomizationEvent",payload:{eventType:e,zendeskMetaData:l}})},tB=async({eventType:e,lang:n,sourceLength:o,targetLength:r,nicheIntegration:i=re.default,error:s,metaDataOverride:a={}})=>{await t({action:"dlTrackDeeplWriteEvent",payload:{eventType:e,deeplWriteMetaData:{lang:n,sourceLength:o,targetLength:r,nicheIntegration:i,error:s,...a}}})};function nB(e){Aw(e)}function oB(){const e=mt();e&&n(P.showAdsForMSAddins,{theme:U.ads_theme,matchedWord:e})}const rB=()=>{const e=window.location.hostname.split(".");if(e.length<2)return!1;return"deepl.com"===`${e.at(-2)}.${e.at(-1)}`},iB=()=>aB()||sB(),sB=()=>{const e=new URL(window.location.href);return"https:"===e.protocol&&("service-now.com"===e.hostname||"servicenow.com"===e.hostname)},aB=()=>/\.service-now\.com$/.test(window.location.hostname),lB=()=>!rB()&&(!xE()&&!iB()),cB=()=>!rB()&&(!xE()&&!iB());pn()||(window.addEventListener("error",(function(e){const t=e.message||e.error&&e.error.message||"";mf(t)&&e.preventDefault()})),window.addEventListener("unhandledrejection",(function(e){const t=e.reason&&e.reason.message||"";mf(t)&&e.preventDefault()})));const{client:dB,scope:uB}=TE();if(dB.init(),pn()&&{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.31.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.31.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.31.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365"},APP_VERSION:"1.31.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,REVIEW_UI_WITH_ITA:!1,BATCH_TRANSLATE_HTML_REQUEST:!0}}.HOT_RELOAD.active&&!pt()){new WebSocket(`ws://localhost:${{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.31.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.31.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.31.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.31.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365"},APP_VERSION:"1.31.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,REVIEW_UI_WITH_ITA:!1,BATCH_TRANSLATE_HTML_REQUEST:!0}}.HOT_RELOAD.webSocketServerPort}`).addEventListener("message",(e=>{"file-change"===e.data&&chrome.runtime.sendMessage("reload")}))}document.dispatchEvent(new CustomEvent("deepl-reset-event"));try{chrome.runtime.onMessage.addListener(SM),v_((()=>{Rw.update({translationState:d.showOriginal}),Mw(),chrome.runtime.onMessage.removeListener(SM)}))}catch(e){console.error(e),hf(e,uB)}function pB(e){e.error&&pn()&&console.error(`SERVICE_WORKER_TEST: Port disconnected due to error: ${e.error.message}`),document.hasFocus()?setTimeout((()=>{mB()}),1e3):window.addEventListener("focus",mB)}async function mB(){window.removeEventListener("focus",mB);if(await jR()){const e=cn();pn()&&console.log("Connecting to background port",e);const t=chrome.runtime.connect({name:e});return $M(t),_M(t),t.onDisconnect.addListener(pB),t}}try{rP(window.location.host),JU(window.location.host),iP(window.location.href),"complete"===document.readyState?YU(null,!0):window.addEventListener("load",YU),lB()&&KU(),cB()&&ZU(),oP(window.location.host),mB(),oB()}catch(e){console.error(e),hf(e,uB)}function gB(e,t,n){let o={block:"end",position:e.length};return t.forEach((t=>{const r=e.indexOf(`<${t}>`,n);r>-1&&r<o.position&&(o={block:t,position:r})})),[o.block,o.position]}function hB(e){return e.match(/[^\s.,:;'"]+|[.,:;'"]|\s+/g)||[]}function fB(e,t){const n=hB(e),o=hB(t),r=function(e,t,n){const o=n||((e,t)=>e===t),r=(()=>{let n=0;for(;o(e[n],t[n])&&n<e.length;)++n;return n})();if(r===e.length&&e.length===t.length)return[r];const i=(()=>{let n=e.length-1,i=t.length-1;for(;o(e[n],t[i])&&n>r&&i>r;)--n,--i;return e.length-n-1})(),s=e.length-r-i+1,a=t.length-r-i+1,l=s+a,c=new Map,d=new Map;c.set(1,0),d.set(1,null);for(let n=0;n<=l;++n)for(let l=-n;l<=n;l+=2){let u,p,m;for(l==-n||l!=n&&c.get(l-1)<c.get(l+1)?(u=c.get(l+1),m=[d.get(l+1),void 0,void 0]):(u=c.get(l-1)+1,m=[d.get(l-1),void 0,void 0]),p=u-l;u<s&&p<a&&o(e[u+r],t[p+r]);)++u,++p;if(u>=s&&p>=a){m[1]=s+i-1,m[2]=a+i-1;let e=-1,t=-1;const n=[];for(;m;)n.push([m[1],m[2]]),m=m[0];let o=[],l=null;for(;n.length;){const r=n.pop(),i=r[0],s=r[1],a=i-e,c=s-t,d=Math.min(a,c);a>d&&(l?l[0]+=a-d:(l=[a-d,0],o.push(l))),c>d&&(l?l[1]+=c-d:(l=[0,c-d],o.push(l))),d>0&&(o.push(d),l=null),e=i,t=s}return o[0]=o[0]-1+r,o}c.set(l,u),m[1]=u,m[2]=p,d.set(l,m)}throw new Error("[diff]","should not happen?")}(n,o),i=[];let s=0,a=0,l=0;for(;s<r.length;){const e=r[s];let t=0;for(let o=a+e-1;o>=a;o-=1)t+=n[o]?.match(/^\s/)?2:1;a+=e,l+=e;let c=0,d=0;if(a<n.length&&l<o.length&&n[a]?.match(/^\s/)&&o[l]?.match(/^\s/)&&(c-=1,d-=1,t+=1),i.push(t),s+=1,s<r.length){const[e,t]=r[s];for(let t=a+e-1;t>=a;t-=1)c+=n[t]?.match(/^\s/)?2:1;for(let e=l+t-1;e>=l;e-=1)d+=o[e]?.match(/^\s/)?2:1;i.push([Math.max(c,0),Math.max(d,0)]),s+=1,a+=e,l+=t}}return[i,n,o,r]}return e.GMAIL_CHAR_LIMIT_ANONYMOUS_USER=1500,e.GMAIL_CHAR_LIMIT_FREE_USER=dO,e.GMAIL_INTERVAL=800,e.GMAIL_UI_ADDED_ATTRIBUTE=cO,e.autodetectLanguage=GU,e.backgroundPortListener=kM,e.buildGDocsPasteData=Nt,e.calculateNewIconPosition=Et,e.canInjectInlineTranslation=cB,e.canInjectInputTranslation=lB,e.canTranslateElementForDomain=aP,e.checkForIntersectionWithOpenDialogs=lD,e.checkIfInputHasSelection=JE,e.clearMessageControllers=XE,e.clickAtCoordinates=pD,e.clickOnElement=mD,e.createAlert=Aw,e.createGmailController=qD,e.createGmailControllerUtil=()=>document.createElement(tD.HTML_TAG_NAME),e.createGoogleDocsIcon=BD,e.createGoogleSlidesController=WD,e.createHighlightsForSentence=function(e,t){const n=fB(t,e),o=[];let r=0,i=0,s=0,a=0;return n[3].forEach((e=>{if(Array.isArray(e)&&"number"==typeof e[0]&&"number"==typeof e[1]){if(0!==e[1]){const t=n[2].slice(i,i+e[1]).join(""),l=n[1].slice(r,r+e[0]).join(""),c={original:l,replace:t};c.changeLength=t.length,c.changeOffset=s,c.originalLength=l.length,c.originalOffset=a,s+=t.length,a+=l.length,o.push(c)}r+=e[0],i+=e[1]}else{let t=0;n[2].slice(i,i+e).forEach((e=>t+=e.length)),s+=t;let o=0;n[1].slice(r,r+e).forEach((e=>o+=e.length)),a+=o,r+=e,i+=e}})),o},e.createInlineTranslateSettingsTooltip=OD,e.createInlineTranslateTooltip=MD,e.createInlineTranslationTrigger=XD,e.createInlineTranslationTriggerListener=JD,e.createInputTranslationController=GD,e.createNotification=eP,e.createPageLoadPopup=PD,e.createReviewTranslateWriteWindow=AD,e.createSubmitButtonTooltip=eT,e.createTicketController=AE,e.createZendeskController=HD,e.createZendeskControllerElement=CE,e.customizePage=oP,e.detectMostUsedLanguageInElement=nT,e.detectTicketLanguageInLiveChat=async e=>{const t=FE(e,12),n=[];for(const e in t)try{const o=t[e],r=o?HE(o).innerText:"",i=o.querySelector('[data-test-id="omni-log-item-sender"] a')?.getAttribute("href"),s=o.querySelector('[data-test-id="omni-log-item-sender"] a strong').innerText;if(0==r.length)continue;let a=n.find((e=>e.id===i));const l=r.includes(`: ${s}`)&&r.indexOf(`: ${s}`)+`: ${s}`.length===r.length,c=0===Number(e);a||(a={id:i,name:s,messages:[],isLikelyCustomer:!1,isFirstMessage:!1},n.push(a)),l&&(a.isLikelyCustomer=!0),c&&(a.isFirstMessage=!0),a.messages.push({message:r,shouldBeSkipped:l||r.length<=3})}catch(e){pn()&&console.log("Dev debug: unable to read message content in detectTicketLanguageInLiveChat")}const o=(1===n.filter((e=>e.isLikelyCustomer)).length?n.find((e=>e.isLikelyCustomer)):n.find((e=>!e.isFirstMessage))).messages.filter((e=>!e.shouldBeSkipped)).map((e=>e.message));o.sort(((e,t)=>e.length>t.length?-1:e.length<t.length?1:0));const r=o[0];if(r)return await Ut(r)},e.detectTicketLanguageInTicket=async e=>{const t=zE(e);if(t){const e=t?HE(t).innerText:"";return await Ut(e)}},e.detectTicketType=BE,e.disableExtension=NE,e.displayAds=oB,e.elementHasTranslateToolbar=aD,e.extractSentencesAndEntitiesFromData=Zt,e.findEditableContent=async function t(n,o){try{if(o.dataset&&"true"===o.dataset.dlInputTranslation||o.dataset&&"true"===o.dataset.dlNoInputTranslation)return;if("true"===o.contentEditable||"TEXTAREA"===o.nodeName&&o.rows>1){if("none"===window.getComputedStyle(o).display)return;if(!function(e){return e.getBoundingClientRect().width>0&&e.getBoundingClientRect().height>0}(o))return;if(!sP(o,e.websiteData.hostname))return;o.dataset.dlInputTranslation="true",n.push(o)}for(const e of o.childNodes)t(n,e)}catch(e){pn()&&console.error(e),hf(e,dP)}},e.findEmailToAndFromAddressTable=cD,e.findForwardButtonInDocument=fD,e.findSiblingDivWithAnyMessageId=hD,e.generateLanguagesWithShortcodeForDropdown=dD,e.getActivePane=LE,e.getActiveTermbases=()=>{const e=$E();return e?e.getActiveTermbases():[]},e.getBlocksFromString=function(e,t=[]){const n=[];let o=0,r=!1;for(;!r;){const[i,s]=gB(e,t,o);if("end"===i&&(r=!0),o<s&&n.push({block:"main",text:e.substring(o,s)}),r)break;const a=e.indexOf(`</${i}>`,s);-1===a?(n.push({block:i,text:e.substring(s+`<${i}>`.length)}),r=!0):(n.push({block:i,text:e.substring(s+`<${i}>`.length,a)}),o=a+`</${i}>`.length)}return n},e.getContextMessages=e=>{const t=[],n=WE(e).map(HE).map((e=>e.innerText)),o=[],r=[];for(let e=0;e<n.length;e++){const i=e%2==0?"start":"end";let s=Math.floor(e/2);if("end"===i&&(s=n.length-1-s),t.includes(s))break;if([...o,...r].reduce(((e,t)=>e+t.length),0)+n[s].length>3e3)break;"end"===i?r.unshift(n[s]):o.push(n[s]),t.push(s)}return[...o,...r]},e.getControllerFromMessage=KE,e.getCoordsOfWord=(e,t,n,o,r)=>{const i=document.createRange();if("#text"===e.nodeName)i.setStart(e,t),i.setEnd(e,t+n);else{if(!e.firstChild||"#text"!==e.firstChild.nodeName)return console.error("Invalid textNode with no child text node."),null;{const o=e.firstChild;i.setStart(o,t),i.setEnd(o,t+n)}}const s=i.getBoundingClientRect();return{top:s.top,left:s.left,right:s.right,bottom:s.bottom,original:o,replace:r,textNode:e,changeIndex:t,changeLength:n}},e.getElementCenterCoordinates=uD,e.getGDocsisEditMode=Tt,e.getGmailControllerUtil=oD,e.getIFrameAndEditable=vt,e.getIconCoordinates=bt,e.getInnerTextsRecursive=oT,e.getItaTranslateEnabled=jR,e.getItaWriteEnabled=GR,e.getMessageContent=HE,e.getMessageViewContainers=sD,e.getMessageWriteContainers=()=>{const e=Array.from(document.querySelectorAll('[role="textbox"]')).filter((e=>"true"===e.getAttribute("contenteditable")));return e},e.getMessagesFromTicket=WE,e.getScrollableElements=mP,e.getSelectionContent=wt,e.getSentryClient=TE,e.getSourceLangFromSlide=Yt,e.getTermbases=jU,e.getTicketController=IE,e.getTicketId=kE,e.getTicketStartingMessage=zE,e.getTicketStartingMessages=FE,e.getUserState=VU,e.getWebsiteSettings=qU,e.getWordsFromSentence=At,e.getZendeskController=$E,e.handleItaTranslateBackendIdle=aM,e.handleItaWriteBackendIdle=lM,e.improveGDocsSelectionContent=BU,e.injectAskAReviewPopup=tP,e.injectControllerInMessage=ZE,e.injectInlineTranslation=ZU,e.injectInputTranslation=KU,e.injectMissingMessageControllers=YE,e.injectMissingUIElements=RE,e.isChatGPT=lP,e.isDeepLCom=rB,e.isGDocs=_t,e.isGSlides=Vt,e.isGmail=rT,e.isIncludedInTheText=function(e,t){if(!e||!t)return!1;const n=/[\n\r\s]+/gm,o=e.replace(n,""),r=t.replace(n,"");return o.includes(r)},e.isInputArea=uP,e.isInternalExtensionPage=function(e){return Q.includes(e)},e.isOnMessageViewScreen=iD,e.isServiceNow=iB,e.isZendesk=xE,e.onOpenPage=YU,e.pageListener=SM,e.processEntityAfterTranslation=Xt,e.processGDocsCopyEvent=St,e.reassembleGDocsTranslatedResult=Lt,e.reconnectItaSessionIfPresent=_M,e.removeAllDeeplElements=function(){!function(e){const t=document.getElementsByTagName(e);if(!t.length)return;for(let e=t.length-1;e>=0;--e)t[e].cleanupDOM(),t[e].remove()}("deepl-input-controller")},e.removeGDocsEntities=It,e.removeGmailController=VD,e.removeGoogleDocsIcon=zD,e.removeGoogleSlidesController=FD,e.removeInlineTranslateSettingsTooltip=DD,e.removeInlineTranslateTooltip=ND,e.removeInlineTranslateTrigger=KD,e.removeInputTextProcessorTrigger=ZD,e.removeInputTranslationController=YD,e.removePageLoadPopup=UD,e.removeRateLimitTimeout=nM,e.removeReviewTranslateWriteWindow=RD,e.removeUIElementsFromList=rD,e.removeZendeskController=jD,e.removeZendeskToolbar=tT,e.removeZendeskUIElements=ME,e.replaceTranslatedGDocsContent=Rt,e.runCustomScriptsForDomain=rP,e.runCustomScriptsForSpecificUrl=iP,e.scanForTranslatables=RU,e.sendMessageToBackgroundPort=CM,e.setBackgroundPort=$M,e.setErrorVisibility=QU,e.shouldBeTranslated=$U,e.shouldInjectInputIcon=sP,e.showAlert=nB,e.simulateGSLidesSelectAll=Kt,e.trackDeeplWriteEvent=tB,e.trackPageLandingIfNeeded=JU,e.trackZendeskCustomizationEvent=eB,e.translateGDocsSelectionContent=UU,e.translateGSlidesInbloxkSelectionContent=zU,e.translateGSlidesSelectionContent=WU,e.translateInlineText=MU,e.translateInlineTextWithITA=iM,e.translateSelectionRightClick=NU,e.translateWebsite=OU,e.translateZendeskMessage=HU,e.translateZendeskSelectionContent=FU,e.triggerCopyEvent=yt,e.twitterState=gS,e.unsubscribeToWebsiteState=Mw,e.updateInputIconLanguageInformation=VE,e.updateInputPositionerCoords=pP,e.updateIntegrationPanelIfExists=QE,e.updateToolbarAutoTranslateStatus=GE,e.updateToolbarLanguageInformation=jE,e.updateTopIconLanguageInformation=qE,e.updateWebsiteStateWithError=eM,e.updateWebsiteStateWithITADocumentState=hM,e.updateWebsiteStateWithITAFormality=e=>{Rw.update({formality:e})},e.updateWebsiteStateWithITASourceLanguage=uM,e.updateWebsiteStateWithITASourceLanguageAutoDetected=mM,e.updateWebsiteStateWithITATargetText=cM,e.updateWebsiteStateWithITATranslateSourceLanguageUnsupported=vM,e.updateWebsiteStateWithITATranslateTargetTextAlternatives=TM,e.updateWebsiteStateWithITAWriteDocumentState=fM,e.updateWebsiteStateWithITAWriteSourceLanguage=pM,e.updateWebsiteStateWithITAWriteSourceLanguageAutoDetected=gM,e.updateWebsiteStateWithITAWriteSourceLanguageUnsupported=yM,e.updateWebsiteStateWithITAWriteTargetText=dM,e.updateWebsiteStateWithITAWriteTargetTextAlternatives=EM,e.updateWebsiteStateWithRateLimitInfo=oM,e.updateWebsiteStateWithTranslateGenericError=wM,e.updateWebsiteStateWithWriteGenericError=bM,e.waitForElement=gD,e.websiteState=Rw,e.whatsAppState=HT,e.youTubeState=ZS,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=content.js.map
