(()=>{"use strict";var e,t={541:()=>{},588:(e,t,a)=>{var o=a(909),i=a(46),s=a(336),n=a(78),r=a(663);let p;async function l(e){let t=parseInt(await s.A.getValue("zoom_login_req_option_tabid"));if(!isNaN(t))if(1===e){s.A.removeValue("zoom_login_req_option_tabid");let a=parseInt(await s.A.getValue("zoom_popup_tabpage_tabid"));s.A.removeValue("zoom_popup_tabpage_tabid"),chrome.tabs.remove(a,(function(){chrome.runtime.lastError}));let o=await s.A.getValue("zoom_login_req_need_reload");chrome.tabs.update(t,{active:!0},(function(a){if(!chrome.runtime.lastError)if(o)chrome.tabs.reload(t);else{let a={type:"authenticationSigninResult",state:e};chrome.tabs.sendMessage(t,a)}})),s.A.removeValue("zoom_login_req_need_reload")}else{let e=parseInt(await s.A.getValue("zoom_popup_tabpage_tabid"));chrome.tabs.update(e,{active:!0},(function(t){if(!chrome.runtime.lastError){let t={type:"signinResultMessage",msg:n.errors[6]};chrome.tabs.sendMessage(e,t)}}))}}var c;function u(e){e&&chrome.tabs.query({},(function(t){t.length>1?chrome.tabs.remove(e,(function(){chrome.runtime.lastError})):chrome.tabs.update(e,{url:"about:blank"},(function(){chrome.runtime.lastError}))}))}function g(e,t,a,o){p&&p.postMessage({error:!0,errorMsg:e,syncState:t,noReviveSchedule:!!a,alertMessage:o})}async function d(e,t){if(e&&"function"===r.type(t)){if(3105==e.errorCode||9002==e.errorCode||9011==e.errorCode){let e={syncState:1,errorMessage:n.tips[14]};t(e);try{await o.A.toSyncImmediate(),t({syncState:2,errorMessage:n.tips[15]})}catch(e){t({syncState:3,errorMessage:n.tips[16]})}return e}if(3113==e.errorCode){let a={syncState:1,errorMessage:n.tips[14],alertMessage:e.errorMessage};t(a);try{await o.A.toSyncImmediate(),t({syncState:2,errorMessage:n.tips[15],noReviveSchedule:!0})}catch(e){t({syncState:3,errorMessage:n.tips[16]})}return a}return t(e),e}}chrome.runtime.onMessage.addListener((c=async function(e,t){let a,i,p,c=await s.A.getZoomData(),f=!1;c&&(c.assistants&&(a=c.assistants),c.forcelogin&&(i=c.forcelogin),c.trackfields&&(p=c.trackfields),c.scheduleDefaultLockOption&&(f="true"===c.scheduleDefaultLockOption.usePMISchedule_locked));let m,h=!1,y=!1;if(c&&c.audiopac&&(m=c.audiopac),m&&m.option_pac_enable&&(h=!0),c&&c.option_freeuser&&(y=!!c.option_freeuser&&await s.A.hasZoomRqToken()),"getZoomToken"==e.type){let e=await s.A.getZoomZakRequestToken();if(e){let{inputManualPwd:t,voidable:n}=await o.A.checkNeedPasswordForPopup(),r=!!await s.A.getValue("zoom_config_fixed_popup");if(!r){let{pwEnable:e,wrEnable:t,authEnable:a,updateAuthOptionItem:i}=await o.A.getSecurityResult(),n=await s.A.getSecurity(),p=!1;if(await s.A.getWrOp()){let t=await o.A.getWaitingRoom2Result(void 0,e,a);try{t=JSON.parse(t),t.enable&&"manu"===t.type&&(p=!0)}catch(e){}}else p=t;!n.security3c1||e||p||a||(r=!0)}return{baseurl:await s.A.getUserBaseUrl(),token:e,fte:await s.A.getValue("zoom_config_fte"),showSetting:r,inputManualPwd:t,pwdVoidable:n,showDomainInput:i&&i.domain_login,hasAssistants:a&&a.length>0,requireTracking:p&&p.length>0,schedulePmiLock:f,trackfields:p,zoom_config_pmi_saved_pwd:await o.A.getPmiSavedPwd(),zoom_config_pmi:Boolean(await s.A.getValue("zoom_config_pmi")),meetingPwdSettingsMap:await o.A.getMeetingPwdSettingsMap(),iSFreeAccount:c&&c.iSFreeAccount,embedPasscode:c&&c.embedPasscode}}return o.A.popupLogin(),{}}if("getMeetingTrashUrl"==e.type){try{o.A.checkSyncFoVersionOrTime()}catch(e){}if(c){let e=c.meetingTrashUrl,t="",a=await s.A.getUserBaseUrl();return e&&("string"===r.type(e)&&"/"===e[0]&&(e=e.slice(1)),t=a+e),{meetingTrashUrl:t,email:c.email||"",zoomBaseUrl:a}}return""}if("saveValue"==e.type)return e.key&&await s.A.saveValue(e.key,e.value),{};if("getReadyToSchedule"==e.type)return{readyToSchedule:await o.A.getReadyToSchedule()};if("loadAppConfig"==e.type)return{type:"postAppConfig",info:n};if("passZoomExtLoginSession"==e.type){let a=t?.tab?.id;try{await o.A._ssologin(e.info.url),u(a),s.A.saveZoomSSOValidDate(new Date),s.A.saveValue("zoom_auth_type",2),l(1)}catch(e){s.A.clearAllData(),u(a),l(2)}return{}}if("supportPAC"==e.type)return{hasPac:h};if("quickschedule"==e.type){if(!await s.A.hasZoomRqToken())return o.A.popupLogin(),{};{var w=!!await s.A.getValue("zoom_config_pmi"),{pwEnable:A,wrEnable:k,authEnable:v,updateAuthOptionItem:S}=await o.A.getSecurityResult();let t=await s.A.getSecurity(),a=!1;if(await s.A.getWrOp()){let e=await o.A.getWaitingRoom2Result(void 0,A,v);try{e=JSON.parse(e),e.enable&&"manu"===e.type&&(a=!0)}catch(e){}}else a=k;if(t.security3c1&&!A&&!a&&!v)return{resetpwd:!0};if(A&&w){let i=await o.A.getPmiSavedPwd();if(!i&&!a&&t.security3c1)return{resetpwd:!0};e.info.securityRes={pwd:i}}try{return await o.A._scheduleMeeting(e.info)}catch(e){let t=e.data;if(t||(t={errorMessage:e.statusText}),201==t.errorCode)return o.A.popupLogin(),{};{let e=await d(t,(function(e){e.syncState&&g(e.errorMessage,e.syncState,e.noReviveSchedule,e.alertMessage)}));return e||{}}}}}else{if("validateAltHost"==e.type){if(await s.A.hasZoomRqToken())try{return await o.A.validAlternateHost(e.althosts)}catch(e){return e}else o.A.popupLogin();return{}}if("checkUserType"==e.type)return{freeUser:y};if("checkShowFree40MinsTip"==e.type)return{showFree40MinsTip:c?.showFree40MinsTip,isPaidAccount:c?.isPaidAccount};if("isNoMeetingLicenseUser"==e.type)return{noLicenseUser:c&&c.no_meeting_license_user};if("getWhiteboardData"==e.type)return await s.A.hasZoomRqToken()?{hasLogin:!0,whiteboard:c?.whiteboard}:{hasLogin:!1};if("getWhiteboardUrl"==e.type)return await s.A.hasZoomRqToken()?{whiteboardUrl:await o.A.getWhiteboardUrl(),baseurl:await s.A.getUserBaseUrl()}:(o.A.popupLogin(),{});if("checkPreloadWb"==e.type)return await s.A.hasZoomRqToken()?{hasLogin:!0,support:c?.whiteboard?.support,allowPreloadWb:await s.A.getAllowPreloadWb(),whiteboardUrl:await o.A.getWhiteboardUrl(),baseurl:await s.A.getUserBaseUrl()}:{hasLogin:!1};if("getEmailConsistencyCheckData"==e.type)return await s.A.hasZoomRqToken()?{hasLogin:!0,enableEmailConsistencyCheck:!!c?.enableEmailConsistencyCheck,email:c?.email||""}:{hasLogin:!1};if("forceLogoutExtension"==e.type)return o.A.logout((function(){!async function(){let[e]=await chrome.tabs.query({active:!0,currentWindow:!0});try{chrome.tabs.sendMessage(e.id,{type:"notificationSignout"},(function(){chrome.runtime.lastError}))}catch(e){}}()})),{};if("getAccountEmail"==e.type)return await s.A.hasZoomRqToken()?{email:c?.email||""}:{email:""};if("openUrl"==e.type){let t=e.url;return t&&chrome.tabs.create({url:t}),{}}if("getWorkspaceData"==e.type)return await s.A.hasZoomRqToken()?{hasLogin:!0,zak:await s.A.getZoomZakRequestToken(),haveShownWsTips:await s.A.getHaveShownWsTips(),...await s.A.getWorkspaceData()}:{};if("getWorkspaceToken"==e.type){if(await s.A.hasZoomRqToken()){let e=await o.A.getWorkspaceToken();return e?.success&&e?.data?.accessToken?{token:e.data}:{}}}else{if("getReservedRooms"==e.type){if(await s.A.hasZoomRqToken()){const t=e.info,a=!1;return await o.A.getReservedRooms(t.token,t.eventId,a)}return{}}if("saveWorkspace"==e.type){if(await s.A.hasZoomRqToken()){const t=e.info,a=!1;return await o.A.saveWorkspace(t.token,t.data,a)}return{}}if("checkReservedRooms"==e.type){if(await s.A.hasZoomRqToken()){const t=e.info,a=!1;return await o.A.checkReservedRooms(t.token,t.data,a)}return{}}if("getWorkspaceFileToken"==e.type){if(await s.A.hasZoomRqToken())return{fileToken:await o.A.getWorkspaceFileToken()}}else{if("getWorkspaceRoomImg"==e.type)return await s.A.hasZoomRqToken()?await o.A.getWorkspaceRoomImg(e.info.url,e.info.fileToken,!1):{};"setHaveShownWsTips"==e.type?await s.A.hasZoomRqToken()&&s.A.setHaveShownWsTips(e.value):"callPopupLogin"==e.type&&o.A.popupLogin()}}}},function(e,t,a){return Promise.resolve(c(e,t)).then(a),!0})),chrome.runtime.onConnect.addListener((function(e){async function t(t){try{await o.A.editMeeting(t);t?.isNewSchedule&&await async function(){let e=await s.A.getZoomData();if(e?.showBiSyncPopup&&!await s.A.getValue("dontShowBiSyncPopup")){let e=await s.A.getValue("showBiSyncPopupDate"),t=(new Date).getDate().toString();if(e!==t)return await s.A.saveValue("showBiSyncPopupDate",t),!0}return!1}()&&e.postMessage({type:"showBiSyncPopup"})}catch(t){if(t.data){let a=await s.A.getZoomData();a&&a.hideError4SpecialUser||e.postMessage({type:"editFailed",errorMsg:t.data.errorMessage})}}}console.assert("Zoom"==e.name),p=e;async function a(t){try{let a={type:"schedule"};0;let i=await o.A._scheduleMeeting(t);s.A.saveValue("zoom_config_fte",!1),a.meeting=i.result,e.postMessage(a)}catch(t){let a=t.data;a||(a={errorMessage:t.statusText}),201==a.errorCode?(e.postMessage({type:"restoreScheduleBtn"}),o.A.popupLogin()):d(a,(function(e){g(e.errorMessage||n.errors[5],e.syncState,e.noReviveSchedule,e.alertMessage)}))}}e.onMessage.addListener((async function(p){if("schedule"==p.type)await s.A.hasZoomRqToken()?a(p.info):o.A.popupLogin();else if("schedulepac"==p.type){if(await s.A.hasZoomRqToken())try{let t=await o.A.schedulePACMeeting(p.info);e.postMessage({type:"schedule",meeting:t.result})}catch(e){g(201==e?.data?.errorCode?"login###again":n.errors[5])}else o.A.popupLogin()}else if("update"==p.type){await s.A.hasZoomRqToken()&&t(p.info)}else if("delete"==p.type){if(await s.A.hasZoomRqToken())try{let t=await o.A.deleteMeeting(p.info);e.postMessage({type:"delSuccess",meeting:t.result})}catch(e){}}else if("icon_delete"==p.type){if(await s.A.hasZoomRqToken())try{let t=await o.A.deleteMeeting(p.info);e.postMessage({type:"iconDeleteSuccess",meeting:t.result})}catch(t){e.postMessage({type:"iconDeleteFailed",showMsg:t?.data?.showMsg})}else o.A.popupLogin()}else if("deleteonly"==p.type){if(await s.A.hasZoomRqToken())try{await o.A.deleteMeeting(p.info)}catch(e){}}else if("loadZoomOptions"==p.type)e.postMessage({type:"updateZmOptions",zmOpt:await o.A.getZoomSetting()});else if("saveOptionsAndSchedule"==p.type)if(await s.A.hasZoomRqToken()){let{securityRes:e,allowDenyRes:t,templateRes:i,enable_alternative_host_edit_poll:l,focusModeValue:c,record_id:u,qa:d,pmc:f,enableAutoAddExternalUser:m,allowAutoAddMeetingParticipants:h,enableInterpretation:y,interpretation:w,topic:A,scheduleTime:k,meetingSummary:v,meetingQuery:S,...b}=p.info;0;let M=function(e){if("object"===r.type(e))try{return JSON.parse(JSON.stringify(e))}catch(e){}return""}(p.info.waiting_room_new);try{let i=await o.A.updateZoomSetting(b);i?.status?(s.A.updateSecurity(e),s.A.updateAllowDeny(t),s.A.updateAllowAlternativeHostEditPoll(l),s.A.updateFocusMode(c),await s.A.updateAutoRec(u),await s.A.updateWaitingRoom2(M),await s.A.updateQa(d),await s.A.updateGenericSimpleData(v,"meetingSummary"),await s.A.updateGenericSimpleData(S,"meetingQuery"),p.info.waiting_room_new=M,a(p.info)):201==i?.errorCode?o.A.popupLogin(!0):g(n.errors[5])}catch(e){g(n.errors[5])}}else o.A.popupLogin();else if("saveOptionsAndQuickSchedule"==p.type)if(await s.A.hasZoomRqToken())if(p.info.changepwd){let e=await s.A.getSecurity(),t=p.info.securityRes.pwd;t&&""!=t&&(e.pmi.passcode.value=t,s.A.setSecurity(e)),a(p.info)}else try{await o.A.updateSettingForQucik(p.info),a(p.info)}catch(e){}else o.A.popupLogin();else if("sendLog"==p.type)await s.A.hasZoomRqToken()&&i.A.sendLog(p.info,(function(){}));else if("sendAllLogs"==p.type)await s.A.hasZoomRqToken()&&i.A.sendAllLogs();else if("sync"==p.type){try{o.A.toSync()}catch(e){}p.info?.updateTimeStampForUseWb&&s.A.updateTimeStampForUseWb()}else if("saveNewCalendarEvent"==p.type)try{await o.A.createMeetingMp(p.info)}catch(e){}else if("removeCalendarEvent"==p.type){i.A.sendLog({msgType:3,msg:{info:"zm-observer trigger to delete.",baseid:p.info.event_baseid},operaType:1});try{let t=await o.A.deleteMeeting(p.info);e.postMessage({type:"delSuccess",meeting:t.result})}catch(e){}}else if("updateTimeAndTimezone"==p.type)try{await o.A.updateMeetingTimeAndTimezone(p.info)}catch(t){3161==t?.data?.errorCode&&e.postMessage({type:"updateTimeAndTimezoneFailed",errorMsg:t.data.errorMessage})}else if("saveInvitee"==p.type)try{await o.A.saveInvitee(p.info)}catch(e){}else if("getCalendarEvent"==p.type);else if("signWithGoogleEvent"==p.type);else if("workemailSigninEvent"==p.type);else if("ssoSigninEvent"==p.type);else if("saveStorageData"==p.type){let e=p.key,t=p.val;s.A.saveValue(e,t)}else if("loadAppConfig"==p.type)e.postMessage({type:"postAppConfig",info:n});else if("callPopupLogin"==p.type)o.A.popupLogin();else if("remoteCheckPwd"==p.type){if(p.info.pwd)try{let t=await o.A.remoteCheckPassword(p.info.pwd);201==t.errorCode?o.A.popupLogin(!0):e.postMessage({type:"remoteCheckPwdResult",exception:!1,info:{res:t.status,msg:t.errorMessage,errortype:1,channel:p.info.channel}})}catch(t){e.postMessage({type:"remoteCheckPwdResult",exception:!0,info:{channel:p.info.channel}})}}else if("viewTemplateDetail"==p.type){let e=p.info.templateId;if(e){let t=await o.A.getAdminTemplateDetailUrl(e);chrome.tabs.create({url:t})}}else if("getWhiteboardToken"==p.type)if(await s.A.hasZoomRqToken())try{let t=await o.A.getWhiteboardToken();if(t.status){let a=0,o=t?.result;o?.expire_time&&o?.create_time&&(a=1e3*(o?.expire_time-o?.create_time)),e.postMessage({type:"getWhiteboardTokenResult",exception:!1,info:{res:t.status,msg:t.errorMessage,access_token:o?.access_token,token_exp:a}})}}catch(t){e.postMessage({type:"getWhiteboardTokenResult",exception:!0,info:{msg:t?.data?.errorMessage||t}})}else e.postMessage({type:"getWhiteboardTokenResult",exception:!0,info:{}}),o.A.popupLogin(!0);else if("getWhiteboardInfo"==p.type)if(await s.A.hasZoomRqToken())try{let t=await o.A.getWhiteboardInfo(p.token,p.docId);if(!t?.docId)throw error;e.postMessage({type:"getWhiteboardInfoResult",exception:!1,info:{data:t}})}catch(t){e.postMessage({type:"getWhiteboardInfoResult",exception:!0,info:{data:{docId:p.docId},msg:t}})}else e.postMessage({type:"getWhiteboardInfoResult",exception:!0,info:{data:{docId:p.docId},msg:""}});else if("executeEditWB"==p.type){await s.A.hasZoomRqToken()&&await o.A.executeEditWB(p.info)}else if("executeDeleteWB"==p.type){await s.A.hasZoomRqToken()&&await o.A.executeDeleteWB(p.info)}else if("saveDontShowBiSyncPopup"==p.type){await s.A.hasZoomRqToken()&&await async function(){await s.A.saveValue("dontShowBiSyncPopup",!0),await o.A.saveDontShowBiSyncPopup()}()}}))})),chrome.runtime.onMessageExternal.addListener((function(e,t,a){return e&&e.message&&"version"==e.message&&a({version:1}),!0}))}},a={};function o(e){var i=a[e];if(void 0!==i)return i.exports;var s=a[e]={exports:{}};return t[e].call(s.exports,s,s.exports,o),s.exports}o.m=t,e=[],o.O=(t,a,i,s)=>{if(!a){var n=1/0;for(c=0;c<e.length;c++){for(var[a,i,s]=e[c],r=!0,p=0;p<a.length;p++)(!1&s||n>=s)&&Object.keys(o.O).every((e=>o.O[e](a[p])))?a.splice(p--,1):(r=!1,s<n&&(n=s));if(r){e.splice(c--,1);var l=i();void 0!==l&&(t=l)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,i,s]},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.j=471,(()=>{var e={471:0,997:0};o.O.j=t=>0===e[t];var t=(t,a)=>{var i,s,[n,r,p]=a,l=0;if(n.some((t=>0!==e[t]))){for(i in r)o.o(r,i)&&(o.m[i]=r[i]);if(p)var c=p(o)}for(t&&t(a);l<n.length;l++)s=n[l],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(c)},a=self.webpackChunkextension=self.webpackChunkextension||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var i=o.O(void 0,[997,628,738],(()=>o(588)));i=o.O(i)})();